function Jx(e,n){for(var r=0;r<n.length;r++){const i=n[r];if(typeof i!="string"&&!Array.isArray(i)){for(const s in i)if(s!=="default"&&!(s in e)){const a=Object.getOwnPropertyDescriptor(i,s);a&&Object.defineProperty(e,s,a.get?a:{enumerable:!0,get:()=>i[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function r(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(s){if(s.ep)return;s.ep=!0;const a=r(s);fetch(s.href,a)}})();var e1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Tf(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Ag={exports:{}},gl={},Rg={exports:{}},ge={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hs=Symbol.for("react.element"),t1=Symbol.for("react.portal"),n1=Symbol.for("react.fragment"),r1=Symbol.for("react.strict_mode"),i1=Symbol.for("react.profiler"),o1=Symbol.for("react.provider"),s1=Symbol.for("react.context"),a1=Symbol.for("react.forward_ref"),l1=Symbol.for("react.suspense"),u1=Symbol.for("react.memo"),c1=Symbol.for("react.lazy"),rp=Symbol.iterator;function f1(e){return e===null||typeof e!="object"?null:(e=rp&&e[rp]||e["@@iterator"],typeof e=="function"?e:null)}var Ig={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Dg=Object.assign,Fg={};function Ri(e,n,r){this.props=e,this.context=n,this.refs=Fg,this.updater=r||Ig}Ri.prototype.isReactComponent={};Ri.prototype.setState=function(e,n){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,n,"setState")};Ri.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Bg(){}Bg.prototype=Ri.prototype;function Lf(e,n,r){this.props=e,this.context=n,this.refs=Fg,this.updater=r||Ig}var Mf=Lf.prototype=new Bg;Mf.constructor=Lf;Dg(Mf,Ri.prototype);Mf.isPureReactComponent=!0;var ip=Array.isArray,Ug=Object.prototype.hasOwnProperty,zf={current:null},$g={key:!0,ref:!0,__self:!0,__source:!0};function Hg(e,n,r){var i,s={},a=null,u=null;if(n!=null)for(i in n.ref!==void 0&&(u=n.ref),n.key!==void 0&&(a=""+n.key),n)Ug.call(n,i)&&!$g.hasOwnProperty(i)&&(s[i]=n[i]);var c=arguments.length-2;if(c===1)s.children=r;else if(1<c){for(var h=Array(c),p=0;p<c;p++)h[p]=arguments[p+2];s.children=h}if(e&&e.defaultProps)for(i in c=e.defaultProps,c)s[i]===void 0&&(s[i]=c[i]);return{$$typeof:hs,type:e,key:a,ref:u,props:s,_owner:zf.current}}function h1(e,n){return{$$typeof:hs,type:e.type,key:n,ref:e.ref,props:e.props,_owner:e._owner}}function Of(e){return typeof e=="object"&&e!==null&&e.$$typeof===hs}function d1(e){var n={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return n[r]})}var op=/\/+/g;function bu(e,n){return typeof e=="object"&&e!==null&&e.key!=null?d1(""+e.key):n.toString(36)}function pa(e,n,r,i,s){var a=typeof e;(a==="undefined"||a==="boolean")&&(e=null);var u=!1;if(e===null)u=!0;else switch(a){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case hs:case t1:u=!0}}if(u)return u=e,s=s(u),e=i===""?"."+bu(u,0):i,ip(s)?(r="",e!=null&&(r=e.replace(op,"$&/")+"/"),pa(s,n,r,"",function(p){return p})):s!=null&&(Of(s)&&(s=h1(s,r+(!s.key||u&&u.key===s.key?"":(""+s.key).replace(op,"$&/")+"/")+e)),n.push(s)),1;if(u=0,i=i===""?".":i+":",ip(e))for(var c=0;c<e.length;c++){a=e[c];var h=i+bu(a,c);u+=pa(a,n,r,h,s)}else if(h=f1(e),typeof h=="function")for(e=h.call(e),c=0;!(a=e.next()).done;)a=a.value,h=i+bu(a,c++),u+=pa(a,n,r,h,s);else if(a==="object")throw n=String(e),Error("Objects are not valid as a React child (found: "+(n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n)+"). If you meant to render a collection of children, use an array instead.");return u}function Hs(e,n,r){if(e==null)return e;var i=[],s=0;return pa(e,i,"","",function(a){return n.call(r,a,s++)}),i}function p1(e){if(e._status===-1){var n=e._result;n=n(),n.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=n)}if(e._status===1)return e._result.default;throw e._result}var ct={current:null},ma={transition:null},m1={ReactCurrentDispatcher:ct,ReactCurrentBatchConfig:ma,ReactCurrentOwner:zf};function Zg(){throw Error("act(...) is not supported in production builds of React.")}ge.Children={map:Hs,forEach:function(e,n,r){Hs(e,function(){n.apply(this,arguments)},r)},count:function(e){var n=0;return Hs(e,function(){n++}),n},toArray:function(e){return Hs(e,function(n){return n})||[]},only:function(e){if(!Of(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ge.Component=Ri;ge.Fragment=n1;ge.Profiler=i1;ge.PureComponent=Lf;ge.StrictMode=r1;ge.Suspense=l1;ge.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=m1;ge.act=Zg;ge.cloneElement=function(e,n,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=Dg({},e.props),s=e.key,a=e.ref,u=e._owner;if(n!=null){if(n.ref!==void 0&&(a=n.ref,u=zf.current),n.key!==void 0&&(s=""+n.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(h in n)Ug.call(n,h)&&!$g.hasOwnProperty(h)&&(i[h]=n[h]===void 0&&c!==void 0?c[h]:n[h])}var h=arguments.length-2;if(h===1)i.children=r;else if(1<h){c=Array(h);for(var p=0;p<h;p++)c[p]=arguments[p+2];i.children=c}return{$$typeof:hs,type:e.type,key:s,ref:a,props:i,_owner:u}};ge.createContext=function(e){return e={$$typeof:s1,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:o1,_context:e},e.Consumer=e};ge.createElement=Hg;ge.createFactory=function(e){var n=Hg.bind(null,e);return n.type=e,n};ge.createRef=function(){return{current:null}};ge.forwardRef=function(e){return{$$typeof:a1,render:e}};ge.isValidElement=Of;ge.lazy=function(e){return{$$typeof:c1,_payload:{_status:-1,_result:e},_init:p1}};ge.memo=function(e,n){return{$$typeof:u1,type:e,compare:n===void 0?null:n}};ge.startTransition=function(e){var n=ma.transition;ma.transition={};try{e()}finally{ma.transition=n}};ge.unstable_act=Zg;ge.useCallback=function(e,n){return ct.current.useCallback(e,n)};ge.useContext=function(e){return ct.current.useContext(e)};ge.useDebugValue=function(){};ge.useDeferredValue=function(e){return ct.current.useDeferredValue(e)};ge.useEffect=function(e,n){return ct.current.useEffect(e,n)};ge.useId=function(){return ct.current.useId()};ge.useImperativeHandle=function(e,n,r){return ct.current.useImperativeHandle(e,n,r)};ge.useInsertionEffect=function(e,n){return ct.current.useInsertionEffect(e,n)};ge.useLayoutEffect=function(e,n){return ct.current.useLayoutEffect(e,n)};ge.useMemo=function(e,n){return ct.current.useMemo(e,n)};ge.useReducer=function(e,n,r){return ct.current.useReducer(e,n,r)};ge.useRef=function(e){return ct.current.useRef(e)};ge.useState=function(e){return ct.current.useState(e)};ge.useSyncExternalStore=function(e,n,r){return ct.current.useSyncExternalStore(e,n,r)};ge.useTransition=function(){return ct.current.useTransition()};ge.version="18.3.1";Rg.exports=ge;var A=Rg.exports;const Rr=Tf(A),g1=Jx({__proto__:null,default:Rr},[A]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var v1=A,_1=Symbol.for("react.element"),y1=Symbol.for("react.fragment"),x1=Object.prototype.hasOwnProperty,w1=v1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,b1={key:!0,ref:!0,__self:!0,__source:!0};function Wg(e,n,r){var i,s={},a=null,u=null;r!==void 0&&(a=""+r),n.key!==void 0&&(a=""+n.key),n.ref!==void 0&&(u=n.ref);for(i in n)x1.call(n,i)&&!b1.hasOwnProperty(i)&&(s[i]=n[i]);if(e&&e.defaultProps)for(i in n=e.defaultProps,n)s[i]===void 0&&(s[i]=n[i]);return{$$typeof:_1,type:e,key:a,ref:u,props:s,_owner:w1.current}}gl.Fragment=y1;gl.jsx=Wg;gl.jsxs=Wg;Ag.exports=gl;var d=Ag.exports,ac={},Vg={exports:{}},Ct={},qg={exports:{}},Gg={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function n(U,K){var Z=U.length;U.push(K);e:for(;0<Z;){var J=Z-1>>>1,re=U[J];if(0<s(re,K))U[J]=K,U[Z]=re,Z=J;else break e}}function r(U){return U.length===0?null:U[0]}function i(U){if(U.length===0)return null;var K=U[0],Z=U.pop();if(Z!==K){U[0]=Z;e:for(var J=0,re=U.length,he=re>>>1;J<he;){var ue=2*(J+1)-1,fe=U[ue],le=ue+1,te=U[le];if(0>s(fe,Z))le<re&&0>s(te,fe)?(U[J]=te,U[le]=Z,J=le):(U[J]=fe,U[ue]=Z,J=ue);else if(le<re&&0>s(te,Z))U[J]=te,U[le]=Z,J=le;else break e}}return K}function s(U,K){var Z=U.sortIndex-K.sortIndex;return Z!==0?Z:U.id-K.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var u=Date,c=u.now();e.unstable_now=function(){return u.now()-c}}var h=[],p=[],v=1,m=null,_=3,y=!1,k=!1,S=!1,E=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function N(U){for(var K=r(p);K!==null;){if(K.callback===null)i(p);else if(K.startTime<=U)i(p),K.sortIndex=K.expirationTime,n(h,K);else break;K=r(p)}}function C(U){if(S=!1,N(U),!k)if(r(h)!==null)k=!0,W(P);else{var K=r(p);K!==null&&ee(C,K.startTime-U)}}function P(U,K){k=!1,S&&(S=!1,w(z),z=-1),y=!0;var Z=_;try{for(N(K),m=r(h);m!==null&&(!(m.expirationTime>K)||U&&!V());){var J=m.callback;if(typeof J=="function"){m.callback=null,_=m.priorityLevel;var re=J(m.expirationTime<=K);K=e.unstable_now(),typeof re=="function"?m.callback=re:m===r(h)&&i(h),N(K)}else i(h);m=r(h)}if(m!==null)var he=!0;else{var ue=r(p);ue!==null&&ee(C,ue.startTime-K),he=!1}return he}finally{m=null,_=Z,y=!1}}var T=!1,M=null,z=-1,D=5,F=-1;function V(){return!(e.unstable_now()-F<D)}function H(){if(M!==null){var U=e.unstable_now();F=U;var K=!0;try{K=M(!0,U)}finally{K?Q():(T=!1,M=null)}}else T=!1}var Q;if(typeof b=="function")Q=function(){b(H)};else if(typeof MessageChannel<"u"){var R=new MessageChannel,G=R.port2;R.port1.onmessage=H,Q=function(){G.postMessage(null)}}else Q=function(){E(H,0)};function W(U){M=U,T||(T=!0,Q())}function ee(U,K){z=E(function(){U(e.unstable_now())},K)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(U){U.callback=null},e.unstable_continueExecution=function(){k||y||(k=!0,W(P))},e.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<U?Math.floor(1e3/U):5},e.unstable_getCurrentPriorityLevel=function(){return _},e.unstable_getFirstCallbackNode=function(){return r(h)},e.unstable_next=function(U){switch(_){case 1:case 2:case 3:var K=3;break;default:K=_}var Z=_;_=K;try{return U()}finally{_=Z}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(U,K){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var Z=_;_=U;try{return K()}finally{_=Z}},e.unstable_scheduleCallback=function(U,K,Z){var J=e.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?J+Z:J):Z=J,U){case 1:var re=-1;break;case 2:re=250;break;case 5:re=1073741823;break;case 4:re=1e4;break;default:re=5e3}return re=Z+re,U={id:v++,callback:K,priorityLevel:U,startTime:Z,expirationTime:re,sortIndex:-1},Z>J?(U.sortIndex=Z,n(p,U),r(h)===null&&U===r(p)&&(S?(w(z),z=-1):S=!0,ee(C,Z-J))):(U.sortIndex=re,n(h,U),k||y||(k=!0,W(P))),U},e.unstable_shouldYield=V,e.unstable_wrapCallback=function(U){var K=_;return function(){var Z=_;_=K;try{return U.apply(this,arguments)}finally{_=Z}}}})(Gg);qg.exports=Gg;var k1=qg.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var N1=A,St=k1;function Y(e){for(var n="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)n+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Kg=new Set,Bo={};function Hr(e,n){Si(e,n),Si(e+"Capture",n)}function Si(e,n){for(Bo[e]=n,e=0;e<n.length;e++)Kg.add(n[e])}var An=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),lc=Object.prototype.hasOwnProperty,S1=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,sp={},ap={};function j1(e){return lc.call(ap,e)?!0:lc.call(sp,e)?!1:S1.test(e)?ap[e]=!0:(sp[e]=!0,!1)}function C1(e,n,r,i){if(r!==null&&r.type===0)return!1;switch(typeof n){case"function":case"symbol":return!0;case"boolean":return i?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function P1(e,n,r,i){if(n===null||typeof n>"u"||C1(e,n,r,i))return!0;if(i)return!1;if(r!==null)switch(r.type){case 3:return!n;case 4:return n===!1;case 5:return isNaN(n);case 6:return isNaN(n)||1>n}return!1}function ft(e,n,r,i,s,a,u){this.acceptsBooleans=n===2||n===3||n===4,this.attributeName=i,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=e,this.type=n,this.sanitizeURL=a,this.removeEmptyString=u}var Je={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Je[e]=new ft(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var n=e[0];Je[n]=new ft(n,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Je[e]=new ft(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Je[e]=new ft(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Je[e]=new ft(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Je[e]=new ft(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Je[e]=new ft(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Je[e]=new ft(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Je[e]=new ft(e,5,!1,e.toLowerCase(),null,!1,!1)});var Af=/[\-:]([a-z])/g;function Rf(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var n=e.replace(Af,Rf);Je[n]=new ft(n,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var n=e.replace(Af,Rf);Je[n]=new ft(n,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var n=e.replace(Af,Rf);Je[n]=new ft(n,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Je[e]=new ft(e,1,!1,e.toLowerCase(),null,!1,!1)});Je.xlinkHref=new ft("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Je[e]=new ft(e,1,!1,e.toLowerCase(),null,!0,!0)});function If(e,n,r,i){var s=Je.hasOwnProperty(n)?Je[n]:null;(s!==null?s.type!==0:i||!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(P1(n,r,s,i)&&(r=null),i||s===null?j1(n)&&(r===null?e.removeAttribute(n):e.setAttribute(n,""+r)):s.mustUseProperty?e[s.propertyName]=r===null?s.type===3?!1:"":r:(n=s.attributeName,i=s.attributeNamespace,r===null?e.removeAttribute(n):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,i?e.setAttributeNS(i,n,r):e.setAttribute(n,r))))}var Bn=N1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Zs=Symbol.for("react.element"),oi=Symbol.for("react.portal"),si=Symbol.for("react.fragment"),Df=Symbol.for("react.strict_mode"),uc=Symbol.for("react.profiler"),Yg=Symbol.for("react.provider"),Xg=Symbol.for("react.context"),Ff=Symbol.for("react.forward_ref"),cc=Symbol.for("react.suspense"),fc=Symbol.for("react.suspense_list"),Bf=Symbol.for("react.memo"),Yn=Symbol.for("react.lazy"),Qg=Symbol.for("react.offscreen"),lp=Symbol.iterator;function eo(e){return e===null||typeof e!="object"?null:(e=lp&&e[lp]||e["@@iterator"],typeof e=="function"?e:null)}var Oe=Object.assign,ku;function vo(e){if(ku===void 0)try{throw Error()}catch(r){var n=r.stack.trim().match(/\n( *(at )?)/);ku=n&&n[1]||""}return`
`+ku+e}var Nu=!1;function Su(e,n){if(!e||Nu)return"";Nu=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(n)if(n=function(){throw Error()},Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(n,[])}catch(p){var i=p}Reflect.construct(e,[],n)}else{try{n.call()}catch(p){i=p}e.call(n.prototype)}else{try{throw Error()}catch(p){i=p}e()}}catch(p){if(p&&i&&typeof p.stack=="string"){for(var s=p.stack.split(`
`),a=i.stack.split(`
`),u=s.length-1,c=a.length-1;1<=u&&0<=c&&s[u]!==a[c];)c--;for(;1<=u&&0<=c;u--,c--)if(s[u]!==a[c]){if(u!==1||c!==1)do if(u--,c--,0>c||s[u]!==a[c]){var h=`
`+s[u].replace(" at new "," at ");return e.displayName&&h.includes("<anonymous>")&&(h=h.replace("<anonymous>",e.displayName)),h}while(1<=u&&0<=c);break}}}finally{Nu=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?vo(e):""}function E1(e){switch(e.tag){case 5:return vo(e.type);case 16:return vo("Lazy");case 13:return vo("Suspense");case 19:return vo("SuspenseList");case 0:case 2:case 15:return e=Su(e.type,!1),e;case 11:return e=Su(e.type.render,!1),e;case 1:return e=Su(e.type,!0),e;default:return""}}function hc(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case si:return"Fragment";case oi:return"Portal";case uc:return"Profiler";case Df:return"StrictMode";case cc:return"Suspense";case fc:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Xg:return(e.displayName||"Context")+".Consumer";case Yg:return(e._context.displayName||"Context")+".Provider";case Ff:var n=e.render;return e=e.displayName,e||(e=n.displayName||n.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Bf:return n=e.displayName||null,n!==null?n:hc(e.type)||"Memo";case Yn:n=e._payload,e=e._init;try{return hc(e(n))}catch{}}return null}function T1(e){var n=e.type;switch(e.tag){case 24:return"Cache";case 9:return(n.displayName||"Context")+".Consumer";case 10:return(n._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=n.render,e=e.displayName||e.name||"",n.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return n;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return hc(n);case 8:return n===Df?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n}return null}function dr(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Jg(e){var n=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function L1(e){var n=Jg(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,n),i=""+e[n];if(!e.hasOwnProperty(n)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,a=r.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return s.call(this)},set:function(u){i=""+u,a.call(this,u)}}),Object.defineProperty(e,n,{enumerable:r.enumerable}),{getValue:function(){return i},setValue:function(u){i=""+u},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}function Ws(e){e._valueTracker||(e._valueTracker=L1(e))}function e0(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var r=n.getValue(),i="";return e&&(i=Jg(e)?e.checked?"true":"false":e.value),e=i,e!==r?(n.setValue(e),!0):!1}function za(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function dc(e,n){var r=n.checked;return Oe({},n,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function up(e,n){var r=n.defaultValue==null?"":n.defaultValue,i=n.checked!=null?n.checked:n.defaultChecked;r=dr(n.value!=null?n.value:r),e._wrapperState={initialChecked:i,initialValue:r,controlled:n.type==="checkbox"||n.type==="radio"?n.checked!=null:n.value!=null}}function t0(e,n){n=n.checked,n!=null&&If(e,"checked",n,!1)}function pc(e,n){t0(e,n);var r=dr(n.value),i=n.type;if(r!=null)i==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(i==="submit"||i==="reset"){e.removeAttribute("value");return}n.hasOwnProperty("value")?mc(e,n.type,r):n.hasOwnProperty("defaultValue")&&mc(e,n.type,dr(n.defaultValue)),n.checked==null&&n.defaultChecked!=null&&(e.defaultChecked=!!n.defaultChecked)}function cp(e,n,r){if(n.hasOwnProperty("value")||n.hasOwnProperty("defaultValue")){var i=n.type;if(!(i!=="submit"&&i!=="reset"||n.value!==void 0&&n.value!==null))return;n=""+e._wrapperState.initialValue,r||n===e.value||(e.value=n),e.defaultValue=n}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function mc(e,n,r){(n!=="number"||za(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var _o=Array.isArray;function vi(e,n,r,i){if(e=e.options,n){n={};for(var s=0;s<r.length;s++)n["$"+r[s]]=!0;for(r=0;r<e.length;r++)s=n.hasOwnProperty("$"+e[r].value),e[r].selected!==s&&(e[r].selected=s),s&&i&&(e[r].defaultSelected=!0)}else{for(r=""+dr(r),n=null,s=0;s<e.length;s++){if(e[s].value===r){e[s].selected=!0,i&&(e[s].defaultSelected=!0);return}n!==null||e[s].disabled||(n=e[s])}n!==null&&(n.selected=!0)}}function gc(e,n){if(n.dangerouslySetInnerHTML!=null)throw Error(Y(91));return Oe({},n,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function fp(e,n){var r=n.value;if(r==null){if(r=n.children,n=n.defaultValue,r!=null){if(n!=null)throw Error(Y(92));if(_o(r)){if(1<r.length)throw Error(Y(93));r=r[0]}n=r}n==null&&(n=""),r=n}e._wrapperState={initialValue:dr(r)}}function n0(e,n){var r=dr(n.value),i=dr(n.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),n.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),i!=null&&(e.defaultValue=""+i)}function hp(e){var n=e.textContent;n===e._wrapperState.initialValue&&n!==""&&n!==null&&(e.value=n)}function r0(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function vc(e,n){return e==null||e==="http://www.w3.org/1999/xhtml"?r0(n):e==="http://www.w3.org/2000/svg"&&n==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Vs,i0=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(n,r,i,s){MSApp.execUnsafeLocalFunction(function(){return e(n,r,i,s)})}:e}(function(e,n){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=n;else{for(Vs=Vs||document.createElement("div"),Vs.innerHTML="<svg>"+n.valueOf().toString()+"</svg>",n=Vs.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;n.firstChild;)e.appendChild(n.firstChild)}});function Uo(e,n){if(n){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=n;return}}e.textContent=n}var jo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},M1=["Webkit","ms","Moz","O"];Object.keys(jo).forEach(function(e){M1.forEach(function(n){n=n+e.charAt(0).toUpperCase()+e.substring(1),jo[n]=jo[e]})});function o0(e,n,r){return n==null||typeof n=="boolean"||n===""?"":r||typeof n!="number"||n===0||jo.hasOwnProperty(e)&&jo[e]?(""+n).trim():n+"px"}function s0(e,n){e=e.style;for(var r in n)if(n.hasOwnProperty(r)){var i=r.indexOf("--")===0,s=o0(r,n[r],i);r==="float"&&(r="cssFloat"),i?e.setProperty(r,s):e[r]=s}}var z1=Oe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function _c(e,n){if(n){if(z1[e]&&(n.children!=null||n.dangerouslySetInnerHTML!=null))throw Error(Y(137,e));if(n.dangerouslySetInnerHTML!=null){if(n.children!=null)throw Error(Y(60));if(typeof n.dangerouslySetInnerHTML!="object"||!("__html"in n.dangerouslySetInnerHTML))throw Error(Y(61))}if(n.style!=null&&typeof n.style!="object")throw Error(Y(62))}}function yc(e,n){if(e.indexOf("-")===-1)return typeof n.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xc=null;function Uf(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var wc=null,_i=null,yi=null;function dp(e){if(e=ms(e)){if(typeof wc!="function")throw Error(Y(280));var n=e.stateNode;n&&(n=wl(n),wc(e.stateNode,e.type,n))}}function a0(e){_i?yi?yi.push(e):yi=[e]:_i=e}function l0(){if(_i){var e=_i,n=yi;if(yi=_i=null,dp(e),n)for(e=0;e<n.length;e++)dp(n[e])}}function u0(e,n){return e(n)}function c0(){}var ju=!1;function f0(e,n,r){if(ju)return e(n,r);ju=!0;try{return u0(e,n,r)}finally{ju=!1,(_i!==null||yi!==null)&&(c0(),l0())}}function $o(e,n){var r=e.stateNode;if(r===null)return null;var i=wl(r);if(i===null)return null;r=i[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(Y(231,n,typeof r));return r}var bc=!1;if(An)try{var to={};Object.defineProperty(to,"passive",{get:function(){bc=!0}}),window.addEventListener("test",to,to),window.removeEventListener("test",to,to)}catch{bc=!1}function O1(e,n,r,i,s,a,u,c,h){var p=Array.prototype.slice.call(arguments,3);try{n.apply(r,p)}catch(v){this.onError(v)}}var Co=!1,Oa=null,Aa=!1,kc=null,A1={onError:function(e){Co=!0,Oa=e}};function R1(e,n,r,i,s,a,u,c,h){Co=!1,Oa=null,O1.apply(A1,arguments)}function I1(e,n,r,i,s,a,u,c,h){if(R1.apply(this,arguments),Co){if(Co){var p=Oa;Co=!1,Oa=null}else throw Error(Y(198));Aa||(Aa=!0,kc=p)}}function Zr(e){var n=e,r=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do n=e,n.flags&4098&&(r=n.return),e=n.return;while(e)}return n.tag===3?r:null}function h0(e){if(e.tag===13){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function pp(e){if(Zr(e)!==e)throw Error(Y(188))}function D1(e){var n=e.alternate;if(!n){if(n=Zr(e),n===null)throw Error(Y(188));return n!==e?null:e}for(var r=e,i=n;;){var s=r.return;if(s===null)break;var a=s.alternate;if(a===null){if(i=s.return,i!==null){r=i;continue}break}if(s.child===a.child){for(a=s.child;a;){if(a===r)return pp(s),e;if(a===i)return pp(s),n;a=a.sibling}throw Error(Y(188))}if(r.return!==i.return)r=s,i=a;else{for(var u=!1,c=s.child;c;){if(c===r){u=!0,r=s,i=a;break}if(c===i){u=!0,i=s,r=a;break}c=c.sibling}if(!u){for(c=a.child;c;){if(c===r){u=!0,r=a,i=s;break}if(c===i){u=!0,i=a,r=s;break}c=c.sibling}if(!u)throw Error(Y(189))}}if(r.alternate!==i)throw Error(Y(190))}if(r.tag!==3)throw Error(Y(188));return r.stateNode.current===r?e:n}function d0(e){return e=D1(e),e!==null?p0(e):null}function p0(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var n=p0(e);if(n!==null)return n;e=e.sibling}return null}var m0=St.unstable_scheduleCallback,mp=St.unstable_cancelCallback,F1=St.unstable_shouldYield,B1=St.unstable_requestPaint,De=St.unstable_now,U1=St.unstable_getCurrentPriorityLevel,$f=St.unstable_ImmediatePriority,g0=St.unstable_UserBlockingPriority,Ra=St.unstable_NormalPriority,$1=St.unstable_LowPriority,v0=St.unstable_IdlePriority,vl=null,hn=null;function H1(e){if(hn&&typeof hn.onCommitFiberRoot=="function")try{hn.onCommitFiberRoot(vl,e,void 0,(e.current.flags&128)===128)}catch{}}var Xt=Math.clz32?Math.clz32:V1,Z1=Math.log,W1=Math.LN2;function V1(e){return e>>>=0,e===0?32:31-(Z1(e)/W1|0)|0}var qs=64,Gs=4194304;function yo(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Ia(e,n){var r=e.pendingLanes;if(r===0)return 0;var i=0,s=e.suspendedLanes,a=e.pingedLanes,u=r&268435455;if(u!==0){var c=u&~s;c!==0?i=yo(c):(a&=u,a!==0&&(i=yo(a)))}else u=r&~s,u!==0?i=yo(u):a!==0&&(i=yo(a));if(i===0)return 0;if(n!==0&&n!==i&&!(n&s)&&(s=i&-i,a=n&-n,s>=a||s===16&&(a&4194240)!==0))return n;if(i&4&&(i|=r&16),n=e.entangledLanes,n!==0)for(e=e.entanglements,n&=i;0<n;)r=31-Xt(n),s=1<<r,i|=e[r],n&=~s;return i}function q1(e,n){switch(e){case 1:case 2:case 4:return n+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function G1(e,n){for(var r=e.suspendedLanes,i=e.pingedLanes,s=e.expirationTimes,a=e.pendingLanes;0<a;){var u=31-Xt(a),c=1<<u,h=s[u];h===-1?(!(c&r)||c&i)&&(s[u]=q1(c,n)):h<=n&&(e.expiredLanes|=c),a&=~c}}function Nc(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function _0(){var e=qs;return qs<<=1,!(qs&4194240)&&(qs=64),e}function Cu(e){for(var n=[],r=0;31>r;r++)n.push(e);return n}function ds(e,n,r){e.pendingLanes|=n,n!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,n=31-Xt(n),e[n]=r}function K1(e,n){var r=e.pendingLanes&~n;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=n,e.mutableReadLanes&=n,e.entangledLanes&=n,n=e.entanglements;var i=e.eventTimes;for(e=e.expirationTimes;0<r;){var s=31-Xt(r),a=1<<s;n[s]=0,i[s]=-1,e[s]=-1,r&=~a}}function Hf(e,n){var r=e.entangledLanes|=n;for(e=e.entanglements;r;){var i=31-Xt(r),s=1<<i;s&n|e[i]&n&&(e[i]|=n),r&=~s}}var we=0;function y0(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var x0,Zf,w0,b0,k0,Sc=!1,Ks=[],ir=null,or=null,sr=null,Ho=new Map,Zo=new Map,Jn=[],Y1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function gp(e,n){switch(e){case"focusin":case"focusout":ir=null;break;case"dragenter":case"dragleave":or=null;break;case"mouseover":case"mouseout":sr=null;break;case"pointerover":case"pointerout":Ho.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":Zo.delete(n.pointerId)}}function no(e,n,r,i,s,a){return e===null||e.nativeEvent!==a?(e={blockedOn:n,domEventName:r,eventSystemFlags:i,nativeEvent:a,targetContainers:[s]},n!==null&&(n=ms(n),n!==null&&Zf(n)),e):(e.eventSystemFlags|=i,n=e.targetContainers,s!==null&&n.indexOf(s)===-1&&n.push(s),e)}function X1(e,n,r,i,s){switch(n){case"focusin":return ir=no(ir,e,n,r,i,s),!0;case"dragenter":return or=no(or,e,n,r,i,s),!0;case"mouseover":return sr=no(sr,e,n,r,i,s),!0;case"pointerover":var a=s.pointerId;return Ho.set(a,no(Ho.get(a)||null,e,n,r,i,s)),!0;case"gotpointercapture":return a=s.pointerId,Zo.set(a,no(Zo.get(a)||null,e,n,r,i,s)),!0}return!1}function N0(e){var n=Pr(e.target);if(n!==null){var r=Zr(n);if(r!==null){if(n=r.tag,n===13){if(n=h0(r),n!==null){e.blockedOn=n,k0(e.priority,function(){w0(r)});return}}else if(n===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ga(e){if(e.blockedOn!==null)return!1;for(var n=e.targetContainers;0<n.length;){var r=jc(e.domEventName,e.eventSystemFlags,n[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var i=new r.constructor(r.type,r);xc=i,r.target.dispatchEvent(i),xc=null}else return n=ms(r),n!==null&&Zf(n),e.blockedOn=r,!1;n.shift()}return!0}function vp(e,n,r){ga(e)&&r.delete(n)}function Q1(){Sc=!1,ir!==null&&ga(ir)&&(ir=null),or!==null&&ga(or)&&(or=null),sr!==null&&ga(sr)&&(sr=null),Ho.forEach(vp),Zo.forEach(vp)}function ro(e,n){e.blockedOn===n&&(e.blockedOn=null,Sc||(Sc=!0,St.unstable_scheduleCallback(St.unstable_NormalPriority,Q1)))}function Wo(e){function n(s){return ro(s,e)}if(0<Ks.length){ro(Ks[0],e);for(var r=1;r<Ks.length;r++){var i=Ks[r];i.blockedOn===e&&(i.blockedOn=null)}}for(ir!==null&&ro(ir,e),or!==null&&ro(or,e),sr!==null&&ro(sr,e),Ho.forEach(n),Zo.forEach(n),r=0;r<Jn.length;r++)i=Jn[r],i.blockedOn===e&&(i.blockedOn=null);for(;0<Jn.length&&(r=Jn[0],r.blockedOn===null);)N0(r),r.blockedOn===null&&Jn.shift()}var xi=Bn.ReactCurrentBatchConfig,Da=!0;function J1(e,n,r,i){var s=we,a=xi.transition;xi.transition=null;try{we=1,Wf(e,n,r,i)}finally{we=s,xi.transition=a}}function ew(e,n,r,i){var s=we,a=xi.transition;xi.transition=null;try{we=4,Wf(e,n,r,i)}finally{we=s,xi.transition=a}}function Wf(e,n,r,i){if(Da){var s=jc(e,n,r,i);if(s===null)Iu(e,n,i,Fa,r),gp(e,i);else if(X1(s,e,n,r,i))i.stopPropagation();else if(gp(e,i),n&4&&-1<Y1.indexOf(e)){for(;s!==null;){var a=ms(s);if(a!==null&&x0(a),a=jc(e,n,r,i),a===null&&Iu(e,n,i,Fa,r),a===s)break;s=a}s!==null&&i.stopPropagation()}else Iu(e,n,i,null,r)}}var Fa=null;function jc(e,n,r,i){if(Fa=null,e=Uf(i),e=Pr(e),e!==null)if(n=Zr(e),n===null)e=null;else if(r=n.tag,r===13){if(e=h0(n),e!==null)return e;e=null}else if(r===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null);return Fa=e,null}function S0(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(U1()){case $f:return 1;case g0:return 4;case Ra:case $1:return 16;case v0:return 536870912;default:return 16}default:return 16}}var tr=null,Vf=null,va=null;function j0(){if(va)return va;var e,n=Vf,r=n.length,i,s="value"in tr?tr.value:tr.textContent,a=s.length;for(e=0;e<r&&n[e]===s[e];e++);var u=r-e;for(i=1;i<=u&&n[r-i]===s[a-i];i++);return va=s.slice(e,1<i?1-i:void 0)}function _a(e){var n=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&n===13&&(e=13)):e=n,e===10&&(e=13),32<=e||e===13?e:0}function Ys(){return!0}function _p(){return!1}function Pt(e){function n(r,i,s,a,u){this._reactName=r,this._targetInst=s,this.type=i,this.nativeEvent=a,this.target=u,this.currentTarget=null;for(var c in e)e.hasOwnProperty(c)&&(r=e[c],this[c]=r?r(a):a[c]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?Ys:_p,this.isPropagationStopped=_p,this}return Oe(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Ys)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Ys)},persist:function(){},isPersistent:Ys}),n}var Ii={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},qf=Pt(Ii),ps=Oe({},Ii,{view:0,detail:0}),tw=Pt(ps),Pu,Eu,io,_l=Oe({},ps,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Gf,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==io&&(io&&e.type==="mousemove"?(Pu=e.screenX-io.screenX,Eu=e.screenY-io.screenY):Eu=Pu=0,io=e),Pu)},movementY:function(e){return"movementY"in e?e.movementY:Eu}}),yp=Pt(_l),nw=Oe({},_l,{dataTransfer:0}),rw=Pt(nw),iw=Oe({},ps,{relatedTarget:0}),Tu=Pt(iw),ow=Oe({},Ii,{animationName:0,elapsedTime:0,pseudoElement:0}),sw=Pt(ow),aw=Oe({},Ii,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),lw=Pt(aw),uw=Oe({},Ii,{data:0}),xp=Pt(uw),cw={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},fw={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hw={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function dw(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):(e=hw[e])?!!n[e]:!1}function Gf(){return dw}var pw=Oe({},ps,{key:function(e){if(e.key){var n=cw[e.key]||e.key;if(n!=="Unidentified")return n}return e.type==="keypress"?(e=_a(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?fw[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Gf,charCode:function(e){return e.type==="keypress"?_a(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?_a(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),mw=Pt(pw),gw=Oe({},_l,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),wp=Pt(gw),vw=Oe({},ps,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Gf}),_w=Pt(vw),yw=Oe({},Ii,{propertyName:0,elapsedTime:0,pseudoElement:0}),xw=Pt(yw),ww=Oe({},_l,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),bw=Pt(ww),kw=[9,13,27,32],Kf=An&&"CompositionEvent"in window,Po=null;An&&"documentMode"in document&&(Po=document.documentMode);var Nw=An&&"TextEvent"in window&&!Po,C0=An&&(!Kf||Po&&8<Po&&11>=Po),bp=" ",kp=!1;function P0(e,n){switch(e){case"keyup":return kw.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function E0(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ai=!1;function Sw(e,n){switch(e){case"compositionend":return E0(n);case"keypress":return n.which!==32?null:(kp=!0,bp);case"textInput":return e=n.data,e===bp&&kp?null:e;default:return null}}function jw(e,n){if(ai)return e==="compositionend"||!Kf&&P0(e,n)?(e=j0(),va=Vf=tr=null,ai=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return C0&&n.locale!=="ko"?null:n.data;default:return null}}var Cw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Np(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n==="input"?!!Cw[e.type]:n==="textarea"}function T0(e,n,r,i){a0(i),n=Ba(n,"onChange"),0<n.length&&(r=new qf("onChange","change",null,r,i),e.push({event:r,listeners:n}))}var Eo=null,Vo=null;function Pw(e){U0(e,0)}function yl(e){var n=ci(e);if(e0(n))return e}function Ew(e,n){if(e==="change")return n}var L0=!1;if(An){var Lu;if(An){var Mu="oninput"in document;if(!Mu){var Sp=document.createElement("div");Sp.setAttribute("oninput","return;"),Mu=typeof Sp.oninput=="function"}Lu=Mu}else Lu=!1;L0=Lu&&(!document.documentMode||9<document.documentMode)}function jp(){Eo&&(Eo.detachEvent("onpropertychange",M0),Vo=Eo=null)}function M0(e){if(e.propertyName==="value"&&yl(Vo)){var n=[];T0(n,Vo,e,Uf(e)),f0(Pw,n)}}function Tw(e,n,r){e==="focusin"?(jp(),Eo=n,Vo=r,Eo.attachEvent("onpropertychange",M0)):e==="focusout"&&jp()}function Lw(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return yl(Vo)}function Mw(e,n){if(e==="click")return yl(n)}function zw(e,n){if(e==="input"||e==="change")return yl(n)}function Ow(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var Jt=typeof Object.is=="function"?Object.is:Ow;function qo(e,n){if(Jt(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;var r=Object.keys(e),i=Object.keys(n);if(r.length!==i.length)return!1;for(i=0;i<r.length;i++){var s=r[i];if(!lc.call(n,s)||!Jt(e[s],n[s]))return!1}return!0}function Cp(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Pp(e,n){var r=Cp(e);e=0;for(var i;r;){if(r.nodeType===3){if(i=e+r.textContent.length,e<=n&&i>=n)return{node:r,offset:n-e};e=i}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Cp(r)}}function z0(e,n){return e&&n?e===n?!0:e&&e.nodeType===3?!1:n&&n.nodeType===3?z0(e,n.parentNode):"contains"in e?e.contains(n):e.compareDocumentPosition?!!(e.compareDocumentPosition(n)&16):!1:!1}function O0(){for(var e=window,n=za();n instanceof e.HTMLIFrameElement;){try{var r=typeof n.contentWindow.location.href=="string"}catch{r=!1}if(r)e=n.contentWindow;else break;n=za(e.document)}return n}function Yf(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&(n==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||n==="textarea"||e.contentEditable==="true")}function Aw(e){var n=O0(),r=e.focusedElem,i=e.selectionRange;if(n!==r&&r&&r.ownerDocument&&z0(r.ownerDocument.documentElement,r)){if(i!==null&&Yf(r)){if(n=i.start,e=i.end,e===void 0&&(e=n),"selectionStart"in r)r.selectionStart=n,r.selectionEnd=Math.min(e,r.value.length);else if(e=(n=r.ownerDocument||document)&&n.defaultView||window,e.getSelection){e=e.getSelection();var s=r.textContent.length,a=Math.min(i.start,s);i=i.end===void 0?a:Math.min(i.end,s),!e.extend&&a>i&&(s=i,i=a,a=s),s=Pp(r,a);var u=Pp(r,i);s&&u&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==u.node||e.focusOffset!==u.offset)&&(n=n.createRange(),n.setStart(s.node,s.offset),e.removeAllRanges(),a>i?(e.addRange(n),e.extend(u.node,u.offset)):(n.setEnd(u.node,u.offset),e.addRange(n)))}}for(n=[],e=r;e=e.parentNode;)e.nodeType===1&&n.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<n.length;r++)e=n[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Rw=An&&"documentMode"in document&&11>=document.documentMode,li=null,Cc=null,To=null,Pc=!1;function Ep(e,n,r){var i=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Pc||li==null||li!==za(i)||(i=li,"selectionStart"in i&&Yf(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),To&&qo(To,i)||(To=i,i=Ba(Cc,"onSelect"),0<i.length&&(n=new qf("onSelect","select",null,n,r),e.push({event:n,listeners:i}),n.target=li)))}function Xs(e,n){var r={};return r[e.toLowerCase()]=n.toLowerCase(),r["Webkit"+e]="webkit"+n,r["Moz"+e]="moz"+n,r}var ui={animationend:Xs("Animation","AnimationEnd"),animationiteration:Xs("Animation","AnimationIteration"),animationstart:Xs("Animation","AnimationStart"),transitionend:Xs("Transition","TransitionEnd")},zu={},A0={};An&&(A0=document.createElement("div").style,"AnimationEvent"in window||(delete ui.animationend.animation,delete ui.animationiteration.animation,delete ui.animationstart.animation),"TransitionEvent"in window||delete ui.transitionend.transition);function xl(e){if(zu[e])return zu[e];if(!ui[e])return e;var n=ui[e],r;for(r in n)if(n.hasOwnProperty(r)&&r in A0)return zu[e]=n[r];return e}var R0=xl("animationend"),I0=xl("animationiteration"),D0=xl("animationstart"),F0=xl("transitionend"),B0=new Map,Tp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function mr(e,n){B0.set(e,n),Hr(n,[e])}for(var Ou=0;Ou<Tp.length;Ou++){var Au=Tp[Ou],Iw=Au.toLowerCase(),Dw=Au[0].toUpperCase()+Au.slice(1);mr(Iw,"on"+Dw)}mr(R0,"onAnimationEnd");mr(I0,"onAnimationIteration");mr(D0,"onAnimationStart");mr("dblclick","onDoubleClick");mr("focusin","onFocus");mr("focusout","onBlur");mr(F0,"onTransitionEnd");Si("onMouseEnter",["mouseout","mouseover"]);Si("onMouseLeave",["mouseout","mouseover"]);Si("onPointerEnter",["pointerout","pointerover"]);Si("onPointerLeave",["pointerout","pointerover"]);Hr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Hr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Hr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Hr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Hr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Hr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var xo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Fw=new Set("cancel close invalid load scroll toggle".split(" ").concat(xo));function Lp(e,n,r){var i=e.type||"unknown-event";e.currentTarget=r,I1(i,n,void 0,e),e.currentTarget=null}function U0(e,n){n=(n&4)!==0;for(var r=0;r<e.length;r++){var i=e[r],s=i.event;i=i.listeners;e:{var a=void 0;if(n)for(var u=i.length-1;0<=u;u--){var c=i[u],h=c.instance,p=c.currentTarget;if(c=c.listener,h!==a&&s.isPropagationStopped())break e;Lp(s,c,p),a=h}else for(u=0;u<i.length;u++){if(c=i[u],h=c.instance,p=c.currentTarget,c=c.listener,h!==a&&s.isPropagationStopped())break e;Lp(s,c,p),a=h}}}if(Aa)throw e=kc,Aa=!1,kc=null,e}function Se(e,n){var r=n[zc];r===void 0&&(r=n[zc]=new Set);var i=e+"__bubble";r.has(i)||($0(n,e,2,!1),r.add(i))}function Ru(e,n,r){var i=0;n&&(i|=4),$0(r,e,i,n)}var Qs="_reactListening"+Math.random().toString(36).slice(2);function Go(e){if(!e[Qs]){e[Qs]=!0,Kg.forEach(function(r){r!=="selectionchange"&&(Fw.has(r)||Ru(r,!1,e),Ru(r,!0,e))});var n=e.nodeType===9?e:e.ownerDocument;n===null||n[Qs]||(n[Qs]=!0,Ru("selectionchange",!1,n))}}function $0(e,n,r,i){switch(S0(n)){case 1:var s=J1;break;case 4:s=ew;break;default:s=Wf}r=s.bind(null,n,r,e),s=void 0,!bc||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(s=!0),i?s!==void 0?e.addEventListener(n,r,{capture:!0,passive:s}):e.addEventListener(n,r,!0):s!==void 0?e.addEventListener(n,r,{passive:s}):e.addEventListener(n,r,!1)}function Iu(e,n,r,i,s){var a=i;if(!(n&1)&&!(n&2)&&i!==null)e:for(;;){if(i===null)return;var u=i.tag;if(u===3||u===4){var c=i.stateNode.containerInfo;if(c===s||c.nodeType===8&&c.parentNode===s)break;if(u===4)for(u=i.return;u!==null;){var h=u.tag;if((h===3||h===4)&&(h=u.stateNode.containerInfo,h===s||h.nodeType===8&&h.parentNode===s))return;u=u.return}for(;c!==null;){if(u=Pr(c),u===null)return;if(h=u.tag,h===5||h===6){i=a=u;continue e}c=c.parentNode}}i=i.return}f0(function(){var p=a,v=Uf(r),m=[];e:{var _=B0.get(e);if(_!==void 0){var y=qf,k=e;switch(e){case"keypress":if(_a(r)===0)break e;case"keydown":case"keyup":y=mw;break;case"focusin":k="focus",y=Tu;break;case"focusout":k="blur",y=Tu;break;case"beforeblur":case"afterblur":y=Tu;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=yp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=rw;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=_w;break;case R0:case I0:case D0:y=sw;break;case F0:y=xw;break;case"scroll":y=tw;break;case"wheel":y=bw;break;case"copy":case"cut":case"paste":y=lw;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=wp}var S=(n&4)!==0,E=!S&&e==="scroll",w=S?_!==null?_+"Capture":null:_;S=[];for(var b=p,N;b!==null;){N=b;var C=N.stateNode;if(N.tag===5&&C!==null&&(N=C,w!==null&&(C=$o(b,w),C!=null&&S.push(Ko(b,C,N)))),E)break;b=b.return}0<S.length&&(_=new y(_,k,null,r,v),m.push({event:_,listeners:S}))}}if(!(n&7)){e:{if(_=e==="mouseover"||e==="pointerover",y=e==="mouseout"||e==="pointerout",_&&r!==xc&&(k=r.relatedTarget||r.fromElement)&&(Pr(k)||k[Rn]))break e;if((y||_)&&(_=v.window===v?v:(_=v.ownerDocument)?_.defaultView||_.parentWindow:window,y?(k=r.relatedTarget||r.toElement,y=p,k=k?Pr(k):null,k!==null&&(E=Zr(k),k!==E||k.tag!==5&&k.tag!==6)&&(k=null)):(y=null,k=p),y!==k)){if(S=yp,C="onMouseLeave",w="onMouseEnter",b="mouse",(e==="pointerout"||e==="pointerover")&&(S=wp,C="onPointerLeave",w="onPointerEnter",b="pointer"),E=y==null?_:ci(y),N=k==null?_:ci(k),_=new S(C,b+"leave",y,r,v),_.target=E,_.relatedTarget=N,C=null,Pr(v)===p&&(S=new S(w,b+"enter",k,r,v),S.target=N,S.relatedTarget=E,C=S),E=C,y&&k)t:{for(S=y,w=k,b=0,N=S;N;N=ni(N))b++;for(N=0,C=w;C;C=ni(C))N++;for(;0<b-N;)S=ni(S),b--;for(;0<N-b;)w=ni(w),N--;for(;b--;){if(S===w||w!==null&&S===w.alternate)break t;S=ni(S),w=ni(w)}S=null}else S=null;y!==null&&Mp(m,_,y,S,!1),k!==null&&E!==null&&Mp(m,E,k,S,!0)}}e:{if(_=p?ci(p):window,y=_.nodeName&&_.nodeName.toLowerCase(),y==="select"||y==="input"&&_.type==="file")var P=Ew;else if(Np(_))if(L0)P=zw;else{P=Lw;var T=Tw}else(y=_.nodeName)&&y.toLowerCase()==="input"&&(_.type==="checkbox"||_.type==="radio")&&(P=Mw);if(P&&(P=P(e,p))){T0(m,P,r,v);break e}T&&T(e,_,p),e==="focusout"&&(T=_._wrapperState)&&T.controlled&&_.type==="number"&&mc(_,"number",_.value)}switch(T=p?ci(p):window,e){case"focusin":(Np(T)||T.contentEditable==="true")&&(li=T,Cc=p,To=null);break;case"focusout":To=Cc=li=null;break;case"mousedown":Pc=!0;break;case"contextmenu":case"mouseup":case"dragend":Pc=!1,Ep(m,r,v);break;case"selectionchange":if(Rw)break;case"keydown":case"keyup":Ep(m,r,v)}var M;if(Kf)e:{switch(e){case"compositionstart":var z="onCompositionStart";break e;case"compositionend":z="onCompositionEnd";break e;case"compositionupdate":z="onCompositionUpdate";break e}z=void 0}else ai?P0(e,r)&&(z="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(z="onCompositionStart");z&&(C0&&r.locale!=="ko"&&(ai||z!=="onCompositionStart"?z==="onCompositionEnd"&&ai&&(M=j0()):(tr=v,Vf="value"in tr?tr.value:tr.textContent,ai=!0)),T=Ba(p,z),0<T.length&&(z=new xp(z,e,null,r,v),m.push({event:z,listeners:T}),M?z.data=M:(M=E0(r),M!==null&&(z.data=M)))),(M=Nw?Sw(e,r):jw(e,r))&&(p=Ba(p,"onBeforeInput"),0<p.length&&(v=new xp("onBeforeInput","beforeinput",null,r,v),m.push({event:v,listeners:p}),v.data=M))}U0(m,n)})}function Ko(e,n,r){return{instance:e,listener:n,currentTarget:r}}function Ba(e,n){for(var r=n+"Capture",i=[];e!==null;){var s=e,a=s.stateNode;s.tag===5&&a!==null&&(s=a,a=$o(e,r),a!=null&&i.unshift(Ko(e,a,s)),a=$o(e,n),a!=null&&i.push(Ko(e,a,s))),e=e.return}return i}function ni(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Mp(e,n,r,i,s){for(var a=n._reactName,u=[];r!==null&&r!==i;){var c=r,h=c.alternate,p=c.stateNode;if(h!==null&&h===i)break;c.tag===5&&p!==null&&(c=p,s?(h=$o(r,a),h!=null&&u.unshift(Ko(r,h,c))):s||(h=$o(r,a),h!=null&&u.push(Ko(r,h,c)))),r=r.return}u.length!==0&&e.push({event:n,listeners:u})}var Bw=/\r\n?/g,Uw=/\u0000|\uFFFD/g;function zp(e){return(typeof e=="string"?e:""+e).replace(Bw,`
`).replace(Uw,"")}function Js(e,n,r){if(n=zp(n),zp(e)!==n&&r)throw Error(Y(425))}function Ua(){}var Ec=null,Tc=null;function Lc(e,n){return e==="textarea"||e==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var Mc=typeof setTimeout=="function"?setTimeout:void 0,$w=typeof clearTimeout=="function"?clearTimeout:void 0,Op=typeof Promise=="function"?Promise:void 0,Hw=typeof queueMicrotask=="function"?queueMicrotask:typeof Op<"u"?function(e){return Op.resolve(null).then(e).catch(Zw)}:Mc;function Zw(e){setTimeout(function(){throw e})}function Du(e,n){var r=n,i=0;do{var s=r.nextSibling;if(e.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(i===0){e.removeChild(s),Wo(n);return}i--}else r!=="$"&&r!=="$?"&&r!=="$!"||i++;r=s}while(r);Wo(n)}function ar(e){for(;e!=null;e=e.nextSibling){var n=e.nodeType;if(n===1||n===3)break;if(n===8){if(n=e.data,n==="$"||n==="$!"||n==="$?")break;if(n==="/$")return null}}return e}function Ap(e){e=e.previousSibling;for(var n=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(n===0)return e;n--}else r==="/$"&&n++}e=e.previousSibling}return null}var Di=Math.random().toString(36).slice(2),cn="__reactFiber$"+Di,Yo="__reactProps$"+Di,Rn="__reactContainer$"+Di,zc="__reactEvents$"+Di,Ww="__reactListeners$"+Di,Vw="__reactHandles$"+Di;function Pr(e){var n=e[cn];if(n)return n;for(var r=e.parentNode;r;){if(n=r[Rn]||r[cn]){if(r=n.alternate,n.child!==null||r!==null&&r.child!==null)for(e=Ap(e);e!==null;){if(r=e[cn])return r;e=Ap(e)}return n}e=r,r=e.parentNode}return null}function ms(e){return e=e[cn]||e[Rn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function ci(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Y(33))}function wl(e){return e[Yo]||null}var Oc=[],fi=-1;function gr(e){return{current:e}}function Ce(e){0>fi||(e.current=Oc[fi],Oc[fi]=null,fi--)}function Ne(e,n){fi++,Oc[fi]=e.current,e.current=n}var pr={},ot=gr(pr),vt=gr(!1),Ir=pr;function ji(e,n){var r=e.type.contextTypes;if(!r)return pr;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===n)return i.__reactInternalMemoizedMaskedChildContext;var s={},a;for(a in r)s[a]=n[a];return i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=n,e.__reactInternalMemoizedMaskedChildContext=s),s}function _t(e){return e=e.childContextTypes,e!=null}function $a(){Ce(vt),Ce(ot)}function Rp(e,n,r){if(ot.current!==pr)throw Error(Y(168));Ne(ot,n),Ne(vt,r)}function H0(e,n,r){var i=e.stateNode;if(n=n.childContextTypes,typeof i.getChildContext!="function")return r;i=i.getChildContext();for(var s in i)if(!(s in n))throw Error(Y(108,T1(e)||"Unknown",s));return Oe({},r,i)}function Ha(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||pr,Ir=ot.current,Ne(ot,e),Ne(vt,vt.current),!0}function Ip(e,n,r){var i=e.stateNode;if(!i)throw Error(Y(169));r?(e=H0(e,n,Ir),i.__reactInternalMemoizedMergedChildContext=e,Ce(vt),Ce(ot),Ne(ot,e)):Ce(vt),Ne(vt,r)}var Cn=null,bl=!1,Fu=!1;function Z0(e){Cn===null?Cn=[e]:Cn.push(e)}function qw(e){bl=!0,Z0(e)}function vr(){if(!Fu&&Cn!==null){Fu=!0;var e=0,n=we;try{var r=Cn;for(we=1;e<r.length;e++){var i=r[e];do i=i(!0);while(i!==null)}Cn=null,bl=!1}catch(s){throw Cn!==null&&(Cn=Cn.slice(e+1)),m0($f,vr),s}finally{we=n,Fu=!1}}return null}var hi=[],di=0,Za=null,Wa=0,Ot=[],At=0,Dr=null,En=1,Tn="";function Sr(e,n){hi[di++]=Wa,hi[di++]=Za,Za=e,Wa=n}function W0(e,n,r){Ot[At++]=En,Ot[At++]=Tn,Ot[At++]=Dr,Dr=e;var i=En;e=Tn;var s=32-Xt(i)-1;i&=~(1<<s),r+=1;var a=32-Xt(n)+s;if(30<a){var u=s-s%5;a=(i&(1<<u)-1).toString(32),i>>=u,s-=u,En=1<<32-Xt(n)+s|r<<s|i,Tn=a+e}else En=1<<a|r<<s|i,Tn=e}function Xf(e){e.return!==null&&(Sr(e,1),W0(e,1,0))}function Qf(e){for(;e===Za;)Za=hi[--di],hi[di]=null,Wa=hi[--di],hi[di]=null;for(;e===Dr;)Dr=Ot[--At],Ot[At]=null,Tn=Ot[--At],Ot[At]=null,En=Ot[--At],Ot[At]=null}var Nt=null,kt=null,Ee=!1,Gt=null;function V0(e,n){var r=Dt(5,null,null,0);r.elementType="DELETED",r.stateNode=n,r.return=e,n=e.deletions,n===null?(e.deletions=[r],e.flags|=16):n.push(r)}function Dp(e,n){switch(e.tag){case 5:var r=e.type;return n=n.nodeType!==1||r.toLowerCase()!==n.nodeName.toLowerCase()?null:n,n!==null?(e.stateNode=n,Nt=e,kt=ar(n.firstChild),!0):!1;case 6:return n=e.pendingProps===""||n.nodeType!==3?null:n,n!==null?(e.stateNode=n,Nt=e,kt=null,!0):!1;case 13:return n=n.nodeType!==8?null:n,n!==null?(r=Dr!==null?{id:En,overflow:Tn}:null,e.memoizedState={dehydrated:n,treeContext:r,retryLane:1073741824},r=Dt(18,null,null,0),r.stateNode=n,r.return=e,e.child=r,Nt=e,kt=null,!0):!1;default:return!1}}function Ac(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Rc(e){if(Ee){var n=kt;if(n){var r=n;if(!Dp(e,n)){if(Ac(e))throw Error(Y(418));n=ar(r.nextSibling);var i=Nt;n&&Dp(e,n)?V0(i,r):(e.flags=e.flags&-4097|2,Ee=!1,Nt=e)}}else{if(Ac(e))throw Error(Y(418));e.flags=e.flags&-4097|2,Ee=!1,Nt=e}}}function Fp(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Nt=e}function ea(e){if(e!==Nt)return!1;if(!Ee)return Fp(e),Ee=!0,!1;var n;if((n=e.tag!==3)&&!(n=e.tag!==5)&&(n=e.type,n=n!=="head"&&n!=="body"&&!Lc(e.type,e.memoizedProps)),n&&(n=kt)){if(Ac(e))throw q0(),Error(Y(418));for(;n;)V0(e,n),n=ar(n.nextSibling)}if(Fp(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Y(317));e:{for(e=e.nextSibling,n=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(n===0){kt=ar(e.nextSibling);break e}n--}else r!=="$"&&r!=="$!"&&r!=="$?"||n++}e=e.nextSibling}kt=null}}else kt=Nt?ar(e.stateNode.nextSibling):null;return!0}function q0(){for(var e=kt;e;)e=ar(e.nextSibling)}function Ci(){kt=Nt=null,Ee=!1}function Jf(e){Gt===null?Gt=[e]:Gt.push(e)}var Gw=Bn.ReactCurrentBatchConfig;function oo(e,n,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(Y(309));var i=r.stateNode}if(!i)throw Error(Y(147,e));var s=i,a=""+e;return n!==null&&n.ref!==null&&typeof n.ref=="function"&&n.ref._stringRef===a?n.ref:(n=function(u){var c=s.refs;u===null?delete c[a]:c[a]=u},n._stringRef=a,n)}if(typeof e!="string")throw Error(Y(284));if(!r._owner)throw Error(Y(290,e))}return e}function ta(e,n){throw e=Object.prototype.toString.call(n),Error(Y(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e))}function Bp(e){var n=e._init;return n(e._payload)}function G0(e){function n(w,b){if(e){var N=w.deletions;N===null?(w.deletions=[b],w.flags|=16):N.push(b)}}function r(w,b){if(!e)return null;for(;b!==null;)n(w,b),b=b.sibling;return null}function i(w,b){for(w=new Map;b!==null;)b.key!==null?w.set(b.key,b):w.set(b.index,b),b=b.sibling;return w}function s(w,b){return w=fr(w,b),w.index=0,w.sibling=null,w}function a(w,b,N){return w.index=N,e?(N=w.alternate,N!==null?(N=N.index,N<b?(w.flags|=2,b):N):(w.flags|=2,b)):(w.flags|=1048576,b)}function u(w){return e&&w.alternate===null&&(w.flags|=2),w}function c(w,b,N,C){return b===null||b.tag!==6?(b=Vu(N,w.mode,C),b.return=w,b):(b=s(b,N),b.return=w,b)}function h(w,b,N,C){var P=N.type;return P===si?v(w,b,N.props.children,C,N.key):b!==null&&(b.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===Yn&&Bp(P)===b.type)?(C=s(b,N.props),C.ref=oo(w,b,N),C.return=w,C):(C=Sa(N.type,N.key,N.props,null,w.mode,C),C.ref=oo(w,b,N),C.return=w,C)}function p(w,b,N,C){return b===null||b.tag!==4||b.stateNode.containerInfo!==N.containerInfo||b.stateNode.implementation!==N.implementation?(b=qu(N,w.mode,C),b.return=w,b):(b=s(b,N.children||[]),b.return=w,b)}function v(w,b,N,C,P){return b===null||b.tag!==7?(b=zr(N,w.mode,C,P),b.return=w,b):(b=s(b,N),b.return=w,b)}function m(w,b,N){if(typeof b=="string"&&b!==""||typeof b=="number")return b=Vu(""+b,w.mode,N),b.return=w,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Zs:return N=Sa(b.type,b.key,b.props,null,w.mode,N),N.ref=oo(w,null,b),N.return=w,N;case oi:return b=qu(b,w.mode,N),b.return=w,b;case Yn:var C=b._init;return m(w,C(b._payload),N)}if(_o(b)||eo(b))return b=zr(b,w.mode,N,null),b.return=w,b;ta(w,b)}return null}function _(w,b,N,C){var P=b!==null?b.key:null;if(typeof N=="string"&&N!==""||typeof N=="number")return P!==null?null:c(w,b,""+N,C);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case Zs:return N.key===P?h(w,b,N,C):null;case oi:return N.key===P?p(w,b,N,C):null;case Yn:return P=N._init,_(w,b,P(N._payload),C)}if(_o(N)||eo(N))return P!==null?null:v(w,b,N,C,null);ta(w,N)}return null}function y(w,b,N,C,P){if(typeof C=="string"&&C!==""||typeof C=="number")return w=w.get(N)||null,c(b,w,""+C,P);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Zs:return w=w.get(C.key===null?N:C.key)||null,h(b,w,C,P);case oi:return w=w.get(C.key===null?N:C.key)||null,p(b,w,C,P);case Yn:var T=C._init;return y(w,b,N,T(C._payload),P)}if(_o(C)||eo(C))return w=w.get(N)||null,v(b,w,C,P,null);ta(b,C)}return null}function k(w,b,N,C){for(var P=null,T=null,M=b,z=b=0,D=null;M!==null&&z<N.length;z++){M.index>z?(D=M,M=null):D=M.sibling;var F=_(w,M,N[z],C);if(F===null){M===null&&(M=D);break}e&&M&&F.alternate===null&&n(w,M),b=a(F,b,z),T===null?P=F:T.sibling=F,T=F,M=D}if(z===N.length)return r(w,M),Ee&&Sr(w,z),P;if(M===null){for(;z<N.length;z++)M=m(w,N[z],C),M!==null&&(b=a(M,b,z),T===null?P=M:T.sibling=M,T=M);return Ee&&Sr(w,z),P}for(M=i(w,M);z<N.length;z++)D=y(M,w,z,N[z],C),D!==null&&(e&&D.alternate!==null&&M.delete(D.key===null?z:D.key),b=a(D,b,z),T===null?P=D:T.sibling=D,T=D);return e&&M.forEach(function(V){return n(w,V)}),Ee&&Sr(w,z),P}function S(w,b,N,C){var P=eo(N);if(typeof P!="function")throw Error(Y(150));if(N=P.call(N),N==null)throw Error(Y(151));for(var T=P=null,M=b,z=b=0,D=null,F=N.next();M!==null&&!F.done;z++,F=N.next()){M.index>z?(D=M,M=null):D=M.sibling;var V=_(w,M,F.value,C);if(V===null){M===null&&(M=D);break}e&&M&&V.alternate===null&&n(w,M),b=a(V,b,z),T===null?P=V:T.sibling=V,T=V,M=D}if(F.done)return r(w,M),Ee&&Sr(w,z),P;if(M===null){for(;!F.done;z++,F=N.next())F=m(w,F.value,C),F!==null&&(b=a(F,b,z),T===null?P=F:T.sibling=F,T=F);return Ee&&Sr(w,z),P}for(M=i(w,M);!F.done;z++,F=N.next())F=y(M,w,z,F.value,C),F!==null&&(e&&F.alternate!==null&&M.delete(F.key===null?z:F.key),b=a(F,b,z),T===null?P=F:T.sibling=F,T=F);return e&&M.forEach(function(H){return n(w,H)}),Ee&&Sr(w,z),P}function E(w,b,N,C){if(typeof N=="object"&&N!==null&&N.type===si&&N.key===null&&(N=N.props.children),typeof N=="object"&&N!==null){switch(N.$$typeof){case Zs:e:{for(var P=N.key,T=b;T!==null;){if(T.key===P){if(P=N.type,P===si){if(T.tag===7){r(w,T.sibling),b=s(T,N.props.children),b.return=w,w=b;break e}}else if(T.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===Yn&&Bp(P)===T.type){r(w,T.sibling),b=s(T,N.props),b.ref=oo(w,T,N),b.return=w,w=b;break e}r(w,T);break}else n(w,T);T=T.sibling}N.type===si?(b=zr(N.props.children,w.mode,C,N.key),b.return=w,w=b):(C=Sa(N.type,N.key,N.props,null,w.mode,C),C.ref=oo(w,b,N),C.return=w,w=C)}return u(w);case oi:e:{for(T=N.key;b!==null;){if(b.key===T)if(b.tag===4&&b.stateNode.containerInfo===N.containerInfo&&b.stateNode.implementation===N.implementation){r(w,b.sibling),b=s(b,N.children||[]),b.return=w,w=b;break e}else{r(w,b);break}else n(w,b);b=b.sibling}b=qu(N,w.mode,C),b.return=w,w=b}return u(w);case Yn:return T=N._init,E(w,b,T(N._payload),C)}if(_o(N))return k(w,b,N,C);if(eo(N))return S(w,b,N,C);ta(w,N)}return typeof N=="string"&&N!==""||typeof N=="number"?(N=""+N,b!==null&&b.tag===6?(r(w,b.sibling),b=s(b,N),b.return=w,w=b):(r(w,b),b=Vu(N,w.mode,C),b.return=w,w=b),u(w)):r(w,b)}return E}var Pi=G0(!0),K0=G0(!1),Va=gr(null),qa=null,pi=null,eh=null;function th(){eh=pi=qa=null}function nh(e){var n=Va.current;Ce(Va),e._currentValue=n}function Ic(e,n,r){for(;e!==null;){var i=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,i!==null&&(i.childLanes|=n)):i!==null&&(i.childLanes&n)!==n&&(i.childLanes|=n),e===r)break;e=e.return}}function wi(e,n){qa=e,eh=pi=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&n&&(mt=!0),e.firstContext=null)}function Bt(e){var n=e._currentValue;if(eh!==e)if(e={context:e,memoizedValue:n,next:null},pi===null){if(qa===null)throw Error(Y(308));pi=e,qa.dependencies={lanes:0,firstContext:e}}else pi=pi.next=e;return n}var Er=null;function rh(e){Er===null?Er=[e]:Er.push(e)}function Y0(e,n,r,i){var s=n.interleaved;return s===null?(r.next=r,rh(n)):(r.next=s.next,s.next=r),n.interleaved=r,In(e,i)}function In(e,n){e.lanes|=n;var r=e.alternate;for(r!==null&&(r.lanes|=n),r=e,e=e.return;e!==null;)e.childLanes|=n,r=e.alternate,r!==null&&(r.childLanes|=n),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Xn=!1;function ih(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function X0(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function zn(e,n){return{eventTime:e,lane:n,tag:0,payload:null,callback:null,next:null}}function lr(e,n,r){var i=e.updateQueue;if(i===null)return null;if(i=i.shared,_e&2){var s=i.pending;return s===null?n.next=n:(n.next=s.next,s.next=n),i.pending=n,In(e,r)}return s=i.interleaved,s===null?(n.next=n,rh(i)):(n.next=s.next,s.next=n),i.interleaved=n,In(e,r)}function ya(e,n,r){if(n=n.updateQueue,n!==null&&(n=n.shared,(r&4194240)!==0)){var i=n.lanes;i&=e.pendingLanes,r|=i,n.lanes=r,Hf(e,r)}}function Up(e,n){var r=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,r===i)){var s=null,a=null;if(r=r.firstBaseUpdate,r!==null){do{var u={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};a===null?s=a=u:a=a.next=u,r=r.next}while(r!==null);a===null?s=a=n:a=a.next=n}else s=a=n;r={baseState:i.baseState,firstBaseUpdate:s,lastBaseUpdate:a,shared:i.shared,effects:i.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=n:e.next=n,r.lastBaseUpdate=n}function Ga(e,n,r,i){var s=e.updateQueue;Xn=!1;var a=s.firstBaseUpdate,u=s.lastBaseUpdate,c=s.shared.pending;if(c!==null){s.shared.pending=null;var h=c,p=h.next;h.next=null,u===null?a=p:u.next=p,u=h;var v=e.alternate;v!==null&&(v=v.updateQueue,c=v.lastBaseUpdate,c!==u&&(c===null?v.firstBaseUpdate=p:c.next=p,v.lastBaseUpdate=h))}if(a!==null){var m=s.baseState;u=0,v=p=h=null,c=a;do{var _=c.lane,y=c.eventTime;if((i&_)===_){v!==null&&(v=v.next={eventTime:y,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var k=e,S=c;switch(_=n,y=r,S.tag){case 1:if(k=S.payload,typeof k=="function"){m=k.call(y,m,_);break e}m=k;break e;case 3:k.flags=k.flags&-65537|128;case 0:if(k=S.payload,_=typeof k=="function"?k.call(y,m,_):k,_==null)break e;m=Oe({},m,_);break e;case 2:Xn=!0}}c.callback!==null&&c.lane!==0&&(e.flags|=64,_=s.effects,_===null?s.effects=[c]:_.push(c))}else y={eventTime:y,lane:_,tag:c.tag,payload:c.payload,callback:c.callback,next:null},v===null?(p=v=y,h=m):v=v.next=y,u|=_;if(c=c.next,c===null){if(c=s.shared.pending,c===null)break;_=c,c=_.next,_.next=null,s.lastBaseUpdate=_,s.shared.pending=null}}while(!0);if(v===null&&(h=m),s.baseState=h,s.firstBaseUpdate=p,s.lastBaseUpdate=v,n=s.shared.interleaved,n!==null){s=n;do u|=s.lane,s=s.next;while(s!==n)}else a===null&&(s.shared.lanes=0);Br|=u,e.lanes=u,e.memoizedState=m}}function $p(e,n,r){if(e=n.effects,n.effects=null,e!==null)for(n=0;n<e.length;n++){var i=e[n],s=i.callback;if(s!==null){if(i.callback=null,i=r,typeof s!="function")throw Error(Y(191,s));s.call(i)}}}var gs={},dn=gr(gs),Xo=gr(gs),Qo=gr(gs);function Tr(e){if(e===gs)throw Error(Y(174));return e}function oh(e,n){switch(Ne(Qo,n),Ne(Xo,e),Ne(dn,gs),e=n.nodeType,e){case 9:case 11:n=(n=n.documentElement)?n.namespaceURI:vc(null,"");break;default:e=e===8?n.parentNode:n,n=e.namespaceURI||null,e=e.tagName,n=vc(n,e)}Ce(dn),Ne(dn,n)}function Ei(){Ce(dn),Ce(Xo),Ce(Qo)}function Q0(e){Tr(Qo.current);var n=Tr(dn.current),r=vc(n,e.type);n!==r&&(Ne(Xo,e),Ne(dn,r))}function sh(e){Xo.current===e&&(Ce(dn),Ce(Xo))}var Me=gr(0);function Ka(e){for(var n=e;n!==null;){if(n.tag===13){var r=n.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return n}else if(n.tag===19&&n.memoizedProps.revealOrder!==void 0){if(n.flags&128)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var Bu=[];function ah(){for(var e=0;e<Bu.length;e++)Bu[e]._workInProgressVersionPrimary=null;Bu.length=0}var xa=Bn.ReactCurrentDispatcher,Uu=Bn.ReactCurrentBatchConfig,Fr=0,ze=null,Ze=null,Ge=null,Ya=!1,Lo=!1,Jo=0,Kw=0;function tt(){throw Error(Y(321))}function lh(e,n){if(n===null)return!1;for(var r=0;r<n.length&&r<e.length;r++)if(!Jt(e[r],n[r]))return!1;return!0}function uh(e,n,r,i,s,a){if(Fr=a,ze=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,xa.current=e===null||e.memoizedState===null?Jw:e2,e=r(i,s),Lo){a=0;do{if(Lo=!1,Jo=0,25<=a)throw Error(Y(301));a+=1,Ge=Ze=null,n.updateQueue=null,xa.current=t2,e=r(i,s)}while(Lo)}if(xa.current=Xa,n=Ze!==null&&Ze.next!==null,Fr=0,Ge=Ze=ze=null,Ya=!1,n)throw Error(Y(300));return e}function ch(){var e=Jo!==0;return Jo=0,e}function an(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ge===null?ze.memoizedState=Ge=e:Ge=Ge.next=e,Ge}function Ut(){if(Ze===null){var e=ze.alternate;e=e!==null?e.memoizedState:null}else e=Ze.next;var n=Ge===null?ze.memoizedState:Ge.next;if(n!==null)Ge=n,Ze=e;else{if(e===null)throw Error(Y(310));Ze=e,e={memoizedState:Ze.memoizedState,baseState:Ze.baseState,baseQueue:Ze.baseQueue,queue:Ze.queue,next:null},Ge===null?ze.memoizedState=Ge=e:Ge=Ge.next=e}return Ge}function es(e,n){return typeof n=="function"?n(e):n}function $u(e){var n=Ut(),r=n.queue;if(r===null)throw Error(Y(311));r.lastRenderedReducer=e;var i=Ze,s=i.baseQueue,a=r.pending;if(a!==null){if(s!==null){var u=s.next;s.next=a.next,a.next=u}i.baseQueue=s=a,r.pending=null}if(s!==null){a=s.next,i=i.baseState;var c=u=null,h=null,p=a;do{var v=p.lane;if((Fr&v)===v)h!==null&&(h=h.next={lane:0,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null}),i=p.hasEagerState?p.eagerState:e(i,p.action);else{var m={lane:v,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null};h===null?(c=h=m,u=i):h=h.next=m,ze.lanes|=v,Br|=v}p=p.next}while(p!==null&&p!==a);h===null?u=i:h.next=c,Jt(i,n.memoizedState)||(mt=!0),n.memoizedState=i,n.baseState=u,n.baseQueue=h,r.lastRenderedState=i}if(e=r.interleaved,e!==null){s=e;do a=s.lane,ze.lanes|=a,Br|=a,s=s.next;while(s!==e)}else s===null&&(r.lanes=0);return[n.memoizedState,r.dispatch]}function Hu(e){var n=Ut(),r=n.queue;if(r===null)throw Error(Y(311));r.lastRenderedReducer=e;var i=r.dispatch,s=r.pending,a=n.memoizedState;if(s!==null){r.pending=null;var u=s=s.next;do a=e(a,u.action),u=u.next;while(u!==s);Jt(a,n.memoizedState)||(mt=!0),n.memoizedState=a,n.baseQueue===null&&(n.baseState=a),r.lastRenderedState=a}return[a,i]}function J0(){}function ev(e,n){var r=ze,i=Ut(),s=n(),a=!Jt(i.memoizedState,s);if(a&&(i.memoizedState=s,mt=!0),i=i.queue,fh(rv.bind(null,r,i,e),[e]),i.getSnapshot!==n||a||Ge!==null&&Ge.memoizedState.tag&1){if(r.flags|=2048,ts(9,nv.bind(null,r,i,s,n),void 0,null),Ke===null)throw Error(Y(349));Fr&30||tv(r,n,s)}return s}function tv(e,n,r){e.flags|=16384,e={getSnapshot:n,value:r},n=ze.updateQueue,n===null?(n={lastEffect:null,stores:null},ze.updateQueue=n,n.stores=[e]):(r=n.stores,r===null?n.stores=[e]:r.push(e))}function nv(e,n,r,i){n.value=r,n.getSnapshot=i,iv(n)&&ov(e)}function rv(e,n,r){return r(function(){iv(n)&&ov(e)})}function iv(e){var n=e.getSnapshot;e=e.value;try{var r=n();return!Jt(e,r)}catch{return!0}}function ov(e){var n=In(e,1);n!==null&&Qt(n,e,1,-1)}function Hp(e){var n=an();return typeof e=="function"&&(e=e()),n.memoizedState=n.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:es,lastRenderedState:e},n.queue=e,e=e.dispatch=Qw.bind(null,ze,e),[n.memoizedState,e]}function ts(e,n,r,i){return e={tag:e,create:n,destroy:r,deps:i,next:null},n=ze.updateQueue,n===null?(n={lastEffect:null,stores:null},ze.updateQueue=n,n.lastEffect=e.next=e):(r=n.lastEffect,r===null?n.lastEffect=e.next=e:(i=r.next,r.next=e,e.next=i,n.lastEffect=e)),e}function sv(){return Ut().memoizedState}function wa(e,n,r,i){var s=an();ze.flags|=e,s.memoizedState=ts(1|n,r,void 0,i===void 0?null:i)}function kl(e,n,r,i){var s=Ut();i=i===void 0?null:i;var a=void 0;if(Ze!==null){var u=Ze.memoizedState;if(a=u.destroy,i!==null&&lh(i,u.deps)){s.memoizedState=ts(n,r,a,i);return}}ze.flags|=e,s.memoizedState=ts(1|n,r,a,i)}function Zp(e,n){return wa(8390656,8,e,n)}function fh(e,n){return kl(2048,8,e,n)}function av(e,n){return kl(4,2,e,n)}function lv(e,n){return kl(4,4,e,n)}function uv(e,n){if(typeof n=="function")return e=e(),n(e),function(){n(null)};if(n!=null)return e=e(),n.current=e,function(){n.current=null}}function cv(e,n,r){return r=r!=null?r.concat([e]):null,kl(4,4,uv.bind(null,n,e),r)}function hh(){}function fv(e,n){var r=Ut();n=n===void 0?null:n;var i=r.memoizedState;return i!==null&&n!==null&&lh(n,i[1])?i[0]:(r.memoizedState=[e,n],e)}function hv(e,n){var r=Ut();n=n===void 0?null:n;var i=r.memoizedState;return i!==null&&n!==null&&lh(n,i[1])?i[0]:(e=e(),r.memoizedState=[e,n],e)}function dv(e,n,r){return Fr&21?(Jt(r,n)||(r=_0(),ze.lanes|=r,Br|=r,e.baseState=!0),n):(e.baseState&&(e.baseState=!1,mt=!0),e.memoizedState=r)}function Yw(e,n){var r=we;we=r!==0&&4>r?r:4,e(!0);var i=Uu.transition;Uu.transition={};try{e(!1),n()}finally{we=r,Uu.transition=i}}function pv(){return Ut().memoizedState}function Xw(e,n,r){var i=cr(e);if(r={lane:i,action:r,hasEagerState:!1,eagerState:null,next:null},mv(e))gv(n,r);else if(r=Y0(e,n,r,i),r!==null){var s=ut();Qt(r,e,i,s),vv(r,n,i)}}function Qw(e,n,r){var i=cr(e),s={lane:i,action:r,hasEagerState:!1,eagerState:null,next:null};if(mv(e))gv(n,s);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=n.lastRenderedReducer,a!==null))try{var u=n.lastRenderedState,c=a(u,r);if(s.hasEagerState=!0,s.eagerState=c,Jt(c,u)){var h=n.interleaved;h===null?(s.next=s,rh(n)):(s.next=h.next,h.next=s),n.interleaved=s;return}}catch{}finally{}r=Y0(e,n,s,i),r!==null&&(s=ut(),Qt(r,e,i,s),vv(r,n,i))}}function mv(e){var n=e.alternate;return e===ze||n!==null&&n===ze}function gv(e,n){Lo=Ya=!0;var r=e.pending;r===null?n.next=n:(n.next=r.next,r.next=n),e.pending=n}function vv(e,n,r){if(r&4194240){var i=n.lanes;i&=e.pendingLanes,r|=i,n.lanes=r,Hf(e,r)}}var Xa={readContext:Bt,useCallback:tt,useContext:tt,useEffect:tt,useImperativeHandle:tt,useInsertionEffect:tt,useLayoutEffect:tt,useMemo:tt,useReducer:tt,useRef:tt,useState:tt,useDebugValue:tt,useDeferredValue:tt,useTransition:tt,useMutableSource:tt,useSyncExternalStore:tt,useId:tt,unstable_isNewReconciler:!1},Jw={readContext:Bt,useCallback:function(e,n){return an().memoizedState=[e,n===void 0?null:n],e},useContext:Bt,useEffect:Zp,useImperativeHandle:function(e,n,r){return r=r!=null?r.concat([e]):null,wa(4194308,4,uv.bind(null,n,e),r)},useLayoutEffect:function(e,n){return wa(4194308,4,e,n)},useInsertionEffect:function(e,n){return wa(4,2,e,n)},useMemo:function(e,n){var r=an();return n=n===void 0?null:n,e=e(),r.memoizedState=[e,n],e},useReducer:function(e,n,r){var i=an();return n=r!==void 0?r(n):n,i.memoizedState=i.baseState=n,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:n},i.queue=e,e=e.dispatch=Xw.bind(null,ze,e),[i.memoizedState,e]},useRef:function(e){var n=an();return e={current:e},n.memoizedState=e},useState:Hp,useDebugValue:hh,useDeferredValue:function(e){return an().memoizedState=e},useTransition:function(){var e=Hp(!1),n=e[0];return e=Yw.bind(null,e[1]),an().memoizedState=e,[n,e]},useMutableSource:function(){},useSyncExternalStore:function(e,n,r){var i=ze,s=an();if(Ee){if(r===void 0)throw Error(Y(407));r=r()}else{if(r=n(),Ke===null)throw Error(Y(349));Fr&30||tv(i,n,r)}s.memoizedState=r;var a={value:r,getSnapshot:n};return s.queue=a,Zp(rv.bind(null,i,a,e),[e]),i.flags|=2048,ts(9,nv.bind(null,i,a,r,n),void 0,null),r},useId:function(){var e=an(),n=Ke.identifierPrefix;if(Ee){var r=Tn,i=En;r=(i&~(1<<32-Xt(i)-1)).toString(32)+r,n=":"+n+"R"+r,r=Jo++,0<r&&(n+="H"+r.toString(32)),n+=":"}else r=Kw++,n=":"+n+"r"+r.toString(32)+":";return e.memoizedState=n},unstable_isNewReconciler:!1},e2={readContext:Bt,useCallback:fv,useContext:Bt,useEffect:fh,useImperativeHandle:cv,useInsertionEffect:av,useLayoutEffect:lv,useMemo:hv,useReducer:$u,useRef:sv,useState:function(){return $u(es)},useDebugValue:hh,useDeferredValue:function(e){var n=Ut();return dv(n,Ze.memoizedState,e)},useTransition:function(){var e=$u(es)[0],n=Ut().memoizedState;return[e,n]},useMutableSource:J0,useSyncExternalStore:ev,useId:pv,unstable_isNewReconciler:!1},t2={readContext:Bt,useCallback:fv,useContext:Bt,useEffect:fh,useImperativeHandle:cv,useInsertionEffect:av,useLayoutEffect:lv,useMemo:hv,useReducer:Hu,useRef:sv,useState:function(){return Hu(es)},useDebugValue:hh,useDeferredValue:function(e){var n=Ut();return Ze===null?n.memoizedState=e:dv(n,Ze.memoizedState,e)},useTransition:function(){var e=Hu(es)[0],n=Ut().memoizedState;return[e,n]},useMutableSource:J0,useSyncExternalStore:ev,useId:pv,unstable_isNewReconciler:!1};function Vt(e,n){if(e&&e.defaultProps){n=Oe({},n),e=e.defaultProps;for(var r in e)n[r]===void 0&&(n[r]=e[r]);return n}return n}function Dc(e,n,r,i){n=e.memoizedState,r=r(i,n),r=r==null?n:Oe({},n,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Nl={isMounted:function(e){return(e=e._reactInternals)?Zr(e)===e:!1},enqueueSetState:function(e,n,r){e=e._reactInternals;var i=ut(),s=cr(e),a=zn(i,s);a.payload=n,r!=null&&(a.callback=r),n=lr(e,a,s),n!==null&&(Qt(n,e,s,i),ya(n,e,s))},enqueueReplaceState:function(e,n,r){e=e._reactInternals;var i=ut(),s=cr(e),a=zn(i,s);a.tag=1,a.payload=n,r!=null&&(a.callback=r),n=lr(e,a,s),n!==null&&(Qt(n,e,s,i),ya(n,e,s))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var r=ut(),i=cr(e),s=zn(r,i);s.tag=2,n!=null&&(s.callback=n),n=lr(e,s,i),n!==null&&(Qt(n,e,i,r),ya(n,e,i))}};function Wp(e,n,r,i,s,a,u){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,a,u):n.prototype&&n.prototype.isPureReactComponent?!qo(r,i)||!qo(s,a):!0}function _v(e,n,r){var i=!1,s=pr,a=n.contextType;return typeof a=="object"&&a!==null?a=Bt(a):(s=_t(n)?Ir:ot.current,i=n.contextTypes,a=(i=i!=null)?ji(e,s):pr),n=new n(r,a),e.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,n.updater=Nl,e.stateNode=n,n._reactInternals=e,i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=a),n}function Vp(e,n,r,i){e=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(r,i),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(r,i),n.state!==e&&Nl.enqueueReplaceState(n,n.state,null)}function Fc(e,n,r,i){var s=e.stateNode;s.props=r,s.state=e.memoizedState,s.refs={},ih(e);var a=n.contextType;typeof a=="object"&&a!==null?s.context=Bt(a):(a=_t(n)?Ir:ot.current,s.context=ji(e,a)),s.state=e.memoizedState,a=n.getDerivedStateFromProps,typeof a=="function"&&(Dc(e,n,a,r),s.state=e.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(n=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),n!==s.state&&Nl.enqueueReplaceState(s,s.state,null),Ga(e,r,s,i),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function Ti(e,n){try{var r="",i=n;do r+=E1(i),i=i.return;while(i);var s=r}catch(a){s=`
Error generating stack: `+a.message+`
`+a.stack}return{value:e,source:n,stack:s,digest:null}}function Zu(e,n,r){return{value:e,source:null,stack:r??null,digest:n??null}}function Bc(e,n){try{console.error(n.value)}catch(r){setTimeout(function(){throw r})}}var n2=typeof WeakMap=="function"?WeakMap:Map;function yv(e,n,r){r=zn(-1,r),r.tag=3,r.payload={element:null};var i=n.value;return r.callback=function(){Ja||(Ja=!0,Yc=i),Bc(e,n)},r}function xv(e,n,r){r=zn(-1,r),r.tag=3;var i=e.type.getDerivedStateFromError;if(typeof i=="function"){var s=n.value;r.payload=function(){return i(s)},r.callback=function(){Bc(e,n)}}var a=e.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(r.callback=function(){Bc(e,n),typeof i!="function"&&(ur===null?ur=new Set([this]):ur.add(this));var u=n.stack;this.componentDidCatch(n.value,{componentStack:u!==null?u:""})}),r}function qp(e,n,r){var i=e.pingCache;if(i===null){i=e.pingCache=new n2;var s=new Set;i.set(n,s)}else s=i.get(n),s===void 0&&(s=new Set,i.set(n,s));s.has(r)||(s.add(r),e=g2.bind(null,e,n,r),n.then(e,e))}function Gp(e){do{var n;if((n=e.tag===13)&&(n=e.memoizedState,n=n!==null?n.dehydrated!==null:!0),n)return e;e=e.return}while(e!==null);return null}function Kp(e,n,r,i,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===n?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(n=zn(-1,1),n.tag=2,lr(r,n,1))),r.lanes|=1),e)}var r2=Bn.ReactCurrentOwner,mt=!1;function at(e,n,r,i){n.child=e===null?K0(n,null,r,i):Pi(n,e.child,r,i)}function Yp(e,n,r,i,s){r=r.render;var a=n.ref;return wi(n,s),i=uh(e,n,r,i,a,s),r=ch(),e!==null&&!mt?(n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~s,Dn(e,n,s)):(Ee&&r&&Xf(n),n.flags|=1,at(e,n,i,s),n.child)}function Xp(e,n,r,i,s){if(e===null){var a=r.type;return typeof a=="function"&&!xh(a)&&a.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(n.tag=15,n.type=a,wv(e,n,a,i,s)):(e=Sa(r.type,null,i,n,n.mode,s),e.ref=n.ref,e.return=n,n.child=e)}if(a=e.child,!(e.lanes&s)){var u=a.memoizedProps;if(r=r.compare,r=r!==null?r:qo,r(u,i)&&e.ref===n.ref)return Dn(e,n,s)}return n.flags|=1,e=fr(a,i),e.ref=n.ref,e.return=n,n.child=e}function wv(e,n,r,i,s){if(e!==null){var a=e.memoizedProps;if(qo(a,i)&&e.ref===n.ref)if(mt=!1,n.pendingProps=i=a,(e.lanes&s)!==0)e.flags&131072&&(mt=!0);else return n.lanes=e.lanes,Dn(e,n,s)}return Uc(e,n,r,i,s)}function bv(e,n,r){var i=n.pendingProps,s=i.children,a=e!==null?e.memoizedState:null;if(i.mode==="hidden")if(!(n.mode&1))n.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ne(gi,bt),bt|=r;else{if(!(r&1073741824))return e=a!==null?a.baseLanes|r:r,n.lanes=n.childLanes=1073741824,n.memoizedState={baseLanes:e,cachePool:null,transitions:null},n.updateQueue=null,Ne(gi,bt),bt|=e,null;n.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=a!==null?a.baseLanes:r,Ne(gi,bt),bt|=i}else a!==null?(i=a.baseLanes|r,n.memoizedState=null):i=r,Ne(gi,bt),bt|=i;return at(e,n,s,r),n.child}function kv(e,n){var r=n.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(n.flags|=512,n.flags|=2097152)}function Uc(e,n,r,i,s){var a=_t(r)?Ir:ot.current;return a=ji(n,a),wi(n,s),r=uh(e,n,r,i,a,s),i=ch(),e!==null&&!mt?(n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~s,Dn(e,n,s)):(Ee&&i&&Xf(n),n.flags|=1,at(e,n,r,s),n.child)}function Qp(e,n,r,i,s){if(_t(r)){var a=!0;Ha(n)}else a=!1;if(wi(n,s),n.stateNode===null)ba(e,n),_v(n,r,i),Fc(n,r,i,s),i=!0;else if(e===null){var u=n.stateNode,c=n.memoizedProps;u.props=c;var h=u.context,p=r.contextType;typeof p=="object"&&p!==null?p=Bt(p):(p=_t(r)?Ir:ot.current,p=ji(n,p));var v=r.getDerivedStateFromProps,m=typeof v=="function"||typeof u.getSnapshotBeforeUpdate=="function";m||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(c!==i||h!==p)&&Vp(n,u,i,p),Xn=!1;var _=n.memoizedState;u.state=_,Ga(n,i,u,s),h=n.memoizedState,c!==i||_!==h||vt.current||Xn?(typeof v=="function"&&(Dc(n,r,v,i),h=n.memoizedState),(c=Xn||Wp(n,r,c,i,_,h,p))?(m||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount()),typeof u.componentDidMount=="function"&&(n.flags|=4194308)):(typeof u.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=i,n.memoizedState=h),u.props=i,u.state=h,u.context=p,i=c):(typeof u.componentDidMount=="function"&&(n.flags|=4194308),i=!1)}else{u=n.stateNode,X0(e,n),c=n.memoizedProps,p=n.type===n.elementType?c:Vt(n.type,c),u.props=p,m=n.pendingProps,_=u.context,h=r.contextType,typeof h=="object"&&h!==null?h=Bt(h):(h=_t(r)?Ir:ot.current,h=ji(n,h));var y=r.getDerivedStateFromProps;(v=typeof y=="function"||typeof u.getSnapshotBeforeUpdate=="function")||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(c!==m||_!==h)&&Vp(n,u,i,h),Xn=!1,_=n.memoizedState,u.state=_,Ga(n,i,u,s);var k=n.memoizedState;c!==m||_!==k||vt.current||Xn?(typeof y=="function"&&(Dc(n,r,y,i),k=n.memoizedState),(p=Xn||Wp(n,r,p,i,_,k,h)||!1)?(v||typeof u.UNSAFE_componentWillUpdate!="function"&&typeof u.componentWillUpdate!="function"||(typeof u.componentWillUpdate=="function"&&u.componentWillUpdate(i,k,h),typeof u.UNSAFE_componentWillUpdate=="function"&&u.UNSAFE_componentWillUpdate(i,k,h)),typeof u.componentDidUpdate=="function"&&(n.flags|=4),typeof u.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof u.componentDidUpdate!="function"||c===e.memoizedProps&&_===e.memoizedState||(n.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&_===e.memoizedState||(n.flags|=1024),n.memoizedProps=i,n.memoizedState=k),u.props=i,u.state=k,u.context=h,i=p):(typeof u.componentDidUpdate!="function"||c===e.memoizedProps&&_===e.memoizedState||(n.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&_===e.memoizedState||(n.flags|=1024),i=!1)}return $c(e,n,r,i,a,s)}function $c(e,n,r,i,s,a){kv(e,n);var u=(n.flags&128)!==0;if(!i&&!u)return s&&Ip(n,r,!1),Dn(e,n,a);i=n.stateNode,r2.current=n;var c=u&&typeof r.getDerivedStateFromError!="function"?null:i.render();return n.flags|=1,e!==null&&u?(n.child=Pi(n,e.child,null,a),n.child=Pi(n,null,c,a)):at(e,n,c,a),n.memoizedState=i.state,s&&Ip(n,r,!0),n.child}function Nv(e){var n=e.stateNode;n.pendingContext?Rp(e,n.pendingContext,n.pendingContext!==n.context):n.context&&Rp(e,n.context,!1),oh(e,n.containerInfo)}function Jp(e,n,r,i,s){return Ci(),Jf(s),n.flags|=256,at(e,n,r,i),n.child}var Hc={dehydrated:null,treeContext:null,retryLane:0};function Zc(e){return{baseLanes:e,cachePool:null,transitions:null}}function Sv(e,n,r){var i=n.pendingProps,s=Me.current,a=!1,u=(n.flags&128)!==0,c;if((c=u)||(c=e!==null&&e.memoizedState===null?!1:(s&2)!==0),c?(a=!0,n.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),Ne(Me,s&1),e===null)return Rc(n),e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(n.mode&1?e.data==="$!"?n.lanes=8:n.lanes=1073741824:n.lanes=1,null):(u=i.children,e=i.fallback,a?(i=n.mode,a=n.child,u={mode:"hidden",children:u},!(i&1)&&a!==null?(a.childLanes=0,a.pendingProps=u):a=Cl(u,i,0,null),e=zr(e,i,r,null),a.return=n,e.return=n,a.sibling=e,n.child=a,n.child.memoizedState=Zc(r),n.memoizedState=Hc,e):dh(n,u));if(s=e.memoizedState,s!==null&&(c=s.dehydrated,c!==null))return i2(e,n,u,i,c,s,r);if(a){a=i.fallback,u=n.mode,s=e.child,c=s.sibling;var h={mode:"hidden",children:i.children};return!(u&1)&&n.child!==s?(i=n.child,i.childLanes=0,i.pendingProps=h,n.deletions=null):(i=fr(s,h),i.subtreeFlags=s.subtreeFlags&14680064),c!==null?a=fr(c,a):(a=zr(a,u,r,null),a.flags|=2),a.return=n,i.return=n,i.sibling=a,n.child=i,i=a,a=n.child,u=e.child.memoizedState,u=u===null?Zc(r):{baseLanes:u.baseLanes|r,cachePool:null,transitions:u.transitions},a.memoizedState=u,a.childLanes=e.childLanes&~r,n.memoizedState=Hc,i}return a=e.child,e=a.sibling,i=fr(a,{mode:"visible",children:i.children}),!(n.mode&1)&&(i.lanes=r),i.return=n,i.sibling=null,e!==null&&(r=n.deletions,r===null?(n.deletions=[e],n.flags|=16):r.push(e)),n.child=i,n.memoizedState=null,i}function dh(e,n){return n=Cl({mode:"visible",children:n},e.mode,0,null),n.return=e,e.child=n}function na(e,n,r,i){return i!==null&&Jf(i),Pi(n,e.child,null,r),e=dh(n,n.pendingProps.children),e.flags|=2,n.memoizedState=null,e}function i2(e,n,r,i,s,a,u){if(r)return n.flags&256?(n.flags&=-257,i=Zu(Error(Y(422))),na(e,n,u,i)):n.memoizedState!==null?(n.child=e.child,n.flags|=128,null):(a=i.fallback,s=n.mode,i=Cl({mode:"visible",children:i.children},s,0,null),a=zr(a,s,u,null),a.flags|=2,i.return=n,a.return=n,i.sibling=a,n.child=i,n.mode&1&&Pi(n,e.child,null,u),n.child.memoizedState=Zc(u),n.memoizedState=Hc,a);if(!(n.mode&1))return na(e,n,u,null);if(s.data==="$!"){if(i=s.nextSibling&&s.nextSibling.dataset,i)var c=i.dgst;return i=c,a=Error(Y(419)),i=Zu(a,i,void 0),na(e,n,u,i)}if(c=(u&e.childLanes)!==0,mt||c){if(i=Ke,i!==null){switch(u&-u){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(i.suspendedLanes|u)?0:s,s!==0&&s!==a.retryLane&&(a.retryLane=s,In(e,s),Qt(i,e,s,-1))}return yh(),i=Zu(Error(Y(421))),na(e,n,u,i)}return s.data==="$?"?(n.flags|=128,n.child=e.child,n=v2.bind(null,e),s._reactRetry=n,null):(e=a.treeContext,kt=ar(s.nextSibling),Nt=n,Ee=!0,Gt=null,e!==null&&(Ot[At++]=En,Ot[At++]=Tn,Ot[At++]=Dr,En=e.id,Tn=e.overflow,Dr=n),n=dh(n,i.children),n.flags|=4096,n)}function em(e,n,r){e.lanes|=n;var i=e.alternate;i!==null&&(i.lanes|=n),Ic(e.return,n,r)}function Wu(e,n,r,i,s){var a=e.memoizedState;a===null?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:i,tail:r,tailMode:s}:(a.isBackwards=n,a.rendering=null,a.renderingStartTime=0,a.last=i,a.tail=r,a.tailMode=s)}function jv(e,n,r){var i=n.pendingProps,s=i.revealOrder,a=i.tail;if(at(e,n,i.children,r),i=Me.current,i&2)i=i&1|2,n.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=n.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&em(e,r,n);else if(e.tag===19)em(e,r,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break e;for(;e.sibling===null;){if(e.return===null||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if(Ne(Me,i),!(n.mode&1))n.memoizedState=null;else switch(s){case"forwards":for(r=n.child,s=null;r!==null;)e=r.alternate,e!==null&&Ka(e)===null&&(s=r),r=r.sibling;r=s,r===null?(s=n.child,n.child=null):(s=r.sibling,r.sibling=null),Wu(n,!1,s,r,a);break;case"backwards":for(r=null,s=n.child,n.child=null;s!==null;){if(e=s.alternate,e!==null&&Ka(e)===null){n.child=s;break}e=s.sibling,s.sibling=r,r=s,s=e}Wu(n,!0,r,null,a);break;case"together":Wu(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function ba(e,n){!(n.mode&1)&&e!==null&&(e.alternate=null,n.alternate=null,n.flags|=2)}function Dn(e,n,r){if(e!==null&&(n.dependencies=e.dependencies),Br|=n.lanes,!(r&n.childLanes))return null;if(e!==null&&n.child!==e.child)throw Error(Y(153));if(n.child!==null){for(e=n.child,r=fr(e,e.pendingProps),n.child=r,r.return=n;e.sibling!==null;)e=e.sibling,r=r.sibling=fr(e,e.pendingProps),r.return=n;r.sibling=null}return n.child}function o2(e,n,r){switch(n.tag){case 3:Nv(n),Ci();break;case 5:Q0(n);break;case 1:_t(n.type)&&Ha(n);break;case 4:oh(n,n.stateNode.containerInfo);break;case 10:var i=n.type._context,s=n.memoizedProps.value;Ne(Va,i._currentValue),i._currentValue=s;break;case 13:if(i=n.memoizedState,i!==null)return i.dehydrated!==null?(Ne(Me,Me.current&1),n.flags|=128,null):r&n.child.childLanes?Sv(e,n,r):(Ne(Me,Me.current&1),e=Dn(e,n,r),e!==null?e.sibling:null);Ne(Me,Me.current&1);break;case 19:if(i=(r&n.childLanes)!==0,e.flags&128){if(i)return jv(e,n,r);n.flags|=128}if(s=n.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ne(Me,Me.current),i)break;return null;case 22:case 23:return n.lanes=0,bv(e,n,r)}return Dn(e,n,r)}var Cv,Wc,Pv,Ev;Cv=function(e,n){for(var r=n.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Wc=function(){};Pv=function(e,n,r,i){var s=e.memoizedProps;if(s!==i){e=n.stateNode,Tr(dn.current);var a=null;switch(r){case"input":s=dc(e,s),i=dc(e,i),a=[];break;case"select":s=Oe({},s,{value:void 0}),i=Oe({},i,{value:void 0}),a=[];break;case"textarea":s=gc(e,s),i=gc(e,i),a=[];break;default:typeof s.onClick!="function"&&typeof i.onClick=="function"&&(e.onclick=Ua)}_c(r,i);var u;r=null;for(p in s)if(!i.hasOwnProperty(p)&&s.hasOwnProperty(p)&&s[p]!=null)if(p==="style"){var c=s[p];for(u in c)c.hasOwnProperty(u)&&(r||(r={}),r[u]="")}else p!=="dangerouslySetInnerHTML"&&p!=="children"&&p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(Bo.hasOwnProperty(p)?a||(a=[]):(a=a||[]).push(p,null));for(p in i){var h=i[p];if(c=s!=null?s[p]:void 0,i.hasOwnProperty(p)&&h!==c&&(h!=null||c!=null))if(p==="style")if(c){for(u in c)!c.hasOwnProperty(u)||h&&h.hasOwnProperty(u)||(r||(r={}),r[u]="");for(u in h)h.hasOwnProperty(u)&&c[u]!==h[u]&&(r||(r={}),r[u]=h[u])}else r||(a||(a=[]),a.push(p,r)),r=h;else p==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,c=c?c.__html:void 0,h!=null&&c!==h&&(a=a||[]).push(p,h)):p==="children"?typeof h!="string"&&typeof h!="number"||(a=a||[]).push(p,""+h):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&(Bo.hasOwnProperty(p)?(h!=null&&p==="onScroll"&&Se("scroll",e),a||c===h||(a=[])):(a=a||[]).push(p,h))}r&&(a=a||[]).push("style",r);var p=a;(n.updateQueue=p)&&(n.flags|=4)}};Ev=function(e,n,r,i){r!==i&&(n.flags|=4)};function so(e,n){if(!Ee)switch(e.tailMode){case"hidden":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var i=null;r!==null;)r.alternate!==null&&(i=r),r=r.sibling;i===null?n||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function nt(e){var n=e.alternate!==null&&e.alternate.child===e.child,r=0,i=0;if(n)for(var s=e.child;s!==null;)r|=s.lanes|s.childLanes,i|=s.subtreeFlags&14680064,i|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)r|=s.lanes|s.childLanes,i|=s.subtreeFlags,i|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=i,e.childLanes=r,n}function s2(e,n,r){var i=n.pendingProps;switch(Qf(n),n.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return nt(n),null;case 1:return _t(n.type)&&$a(),nt(n),null;case 3:return i=n.stateNode,Ei(),Ce(vt),Ce(ot),ah(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(ea(n)?n.flags|=4:e===null||e.memoizedState.isDehydrated&&!(n.flags&256)||(n.flags|=1024,Gt!==null&&(Jc(Gt),Gt=null))),Wc(e,n),nt(n),null;case 5:sh(n);var s=Tr(Qo.current);if(r=n.type,e!==null&&n.stateNode!=null)Pv(e,n,r,i,s),e.ref!==n.ref&&(n.flags|=512,n.flags|=2097152);else{if(!i){if(n.stateNode===null)throw Error(Y(166));return nt(n),null}if(e=Tr(dn.current),ea(n)){i=n.stateNode,r=n.type;var a=n.memoizedProps;switch(i[cn]=n,i[Yo]=a,e=(n.mode&1)!==0,r){case"dialog":Se("cancel",i),Se("close",i);break;case"iframe":case"object":case"embed":Se("load",i);break;case"video":case"audio":for(s=0;s<xo.length;s++)Se(xo[s],i);break;case"source":Se("error",i);break;case"img":case"image":case"link":Se("error",i),Se("load",i);break;case"details":Se("toggle",i);break;case"input":up(i,a),Se("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!a.multiple},Se("invalid",i);break;case"textarea":fp(i,a),Se("invalid",i)}_c(r,a),s=null;for(var u in a)if(a.hasOwnProperty(u)){var c=a[u];u==="children"?typeof c=="string"?i.textContent!==c&&(a.suppressHydrationWarning!==!0&&Js(i.textContent,c,e),s=["children",c]):typeof c=="number"&&i.textContent!==""+c&&(a.suppressHydrationWarning!==!0&&Js(i.textContent,c,e),s=["children",""+c]):Bo.hasOwnProperty(u)&&c!=null&&u==="onScroll"&&Se("scroll",i)}switch(r){case"input":Ws(i),cp(i,a,!0);break;case"textarea":Ws(i),hp(i);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(i.onclick=Ua)}i=s,n.updateQueue=i,i!==null&&(n.flags|=4)}else{u=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=r0(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=u.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof i.is=="string"?e=u.createElement(r,{is:i.is}):(e=u.createElement(r),r==="select"&&(u=e,i.multiple?u.multiple=!0:i.size&&(u.size=i.size))):e=u.createElementNS(e,r),e[cn]=n,e[Yo]=i,Cv(e,n,!1,!1),n.stateNode=e;e:{switch(u=yc(r,i),r){case"dialog":Se("cancel",e),Se("close",e),s=i;break;case"iframe":case"object":case"embed":Se("load",e),s=i;break;case"video":case"audio":for(s=0;s<xo.length;s++)Se(xo[s],e);s=i;break;case"source":Se("error",e),s=i;break;case"img":case"image":case"link":Se("error",e),Se("load",e),s=i;break;case"details":Se("toggle",e),s=i;break;case"input":up(e,i),s=dc(e,i),Se("invalid",e);break;case"option":s=i;break;case"select":e._wrapperState={wasMultiple:!!i.multiple},s=Oe({},i,{value:void 0}),Se("invalid",e);break;case"textarea":fp(e,i),s=gc(e,i),Se("invalid",e);break;default:s=i}_c(r,s),c=s;for(a in c)if(c.hasOwnProperty(a)){var h=c[a];a==="style"?s0(e,h):a==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,h!=null&&i0(e,h)):a==="children"?typeof h=="string"?(r!=="textarea"||h!=="")&&Uo(e,h):typeof h=="number"&&Uo(e,""+h):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(Bo.hasOwnProperty(a)?h!=null&&a==="onScroll"&&Se("scroll",e):h!=null&&If(e,a,h,u))}switch(r){case"input":Ws(e),cp(e,i,!1);break;case"textarea":Ws(e),hp(e);break;case"option":i.value!=null&&e.setAttribute("value",""+dr(i.value));break;case"select":e.multiple=!!i.multiple,a=i.value,a!=null?vi(e,!!i.multiple,a,!1):i.defaultValue!=null&&vi(e,!!i.multiple,i.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=Ua)}switch(r){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(n.flags|=4)}n.ref!==null&&(n.flags|=512,n.flags|=2097152)}return nt(n),null;case 6:if(e&&n.stateNode!=null)Ev(e,n,e.memoizedProps,i);else{if(typeof i!="string"&&n.stateNode===null)throw Error(Y(166));if(r=Tr(Qo.current),Tr(dn.current),ea(n)){if(i=n.stateNode,r=n.memoizedProps,i[cn]=n,(a=i.nodeValue!==r)&&(e=Nt,e!==null))switch(e.tag){case 3:Js(i.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Js(i.nodeValue,r,(e.mode&1)!==0)}a&&(n.flags|=4)}else i=(r.nodeType===9?r:r.ownerDocument).createTextNode(i),i[cn]=n,n.stateNode=i}return nt(n),null;case 13:if(Ce(Me),i=n.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ee&&kt!==null&&n.mode&1&&!(n.flags&128))q0(),Ci(),n.flags|=98560,a=!1;else if(a=ea(n),i!==null&&i.dehydrated!==null){if(e===null){if(!a)throw Error(Y(318));if(a=n.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(Y(317));a[cn]=n}else Ci(),!(n.flags&128)&&(n.memoizedState=null),n.flags|=4;nt(n),a=!1}else Gt!==null&&(Jc(Gt),Gt=null),a=!0;if(!a)return n.flags&65536?n:null}return n.flags&128?(n.lanes=r,n):(i=i!==null,i!==(e!==null&&e.memoizedState!==null)&&i&&(n.child.flags|=8192,n.mode&1&&(e===null||Me.current&1?We===0&&(We=3):yh())),n.updateQueue!==null&&(n.flags|=4),nt(n),null);case 4:return Ei(),Wc(e,n),e===null&&Go(n.stateNode.containerInfo),nt(n),null;case 10:return nh(n.type._context),nt(n),null;case 17:return _t(n.type)&&$a(),nt(n),null;case 19:if(Ce(Me),a=n.memoizedState,a===null)return nt(n),null;if(i=(n.flags&128)!==0,u=a.rendering,u===null)if(i)so(a,!1);else{if(We!==0||e!==null&&e.flags&128)for(e=n.child;e!==null;){if(u=Ka(e),u!==null){for(n.flags|=128,so(a,!1),i=u.updateQueue,i!==null&&(n.updateQueue=i,n.flags|=4),n.subtreeFlags=0,i=r,r=n.child;r!==null;)a=r,e=i,a.flags&=14680066,u=a.alternate,u===null?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=u.childLanes,a.lanes=u.lanes,a.child=u.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=u.memoizedProps,a.memoizedState=u.memoizedState,a.updateQueue=u.updateQueue,a.type=u.type,e=u.dependencies,a.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Ne(Me,Me.current&1|2),n.child}e=e.sibling}a.tail!==null&&De()>Li&&(n.flags|=128,i=!0,so(a,!1),n.lanes=4194304)}else{if(!i)if(e=Ka(u),e!==null){if(n.flags|=128,i=!0,r=e.updateQueue,r!==null&&(n.updateQueue=r,n.flags|=4),so(a,!0),a.tail===null&&a.tailMode==="hidden"&&!u.alternate&&!Ee)return nt(n),null}else 2*De()-a.renderingStartTime>Li&&r!==1073741824&&(n.flags|=128,i=!0,so(a,!1),n.lanes=4194304);a.isBackwards?(u.sibling=n.child,n.child=u):(r=a.last,r!==null?r.sibling=u:n.child=u,a.last=u)}return a.tail!==null?(n=a.tail,a.rendering=n,a.tail=n.sibling,a.renderingStartTime=De(),n.sibling=null,r=Me.current,Ne(Me,i?r&1|2:r&1),n):(nt(n),null);case 22:case 23:return _h(),i=n.memoizedState!==null,e!==null&&e.memoizedState!==null!==i&&(n.flags|=8192),i&&n.mode&1?bt&1073741824&&(nt(n),n.subtreeFlags&6&&(n.flags|=8192)):nt(n),null;case 24:return null;case 25:return null}throw Error(Y(156,n.tag))}function a2(e,n){switch(Qf(n),n.tag){case 1:return _t(n.type)&&$a(),e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 3:return Ei(),Ce(vt),Ce(ot),ah(),e=n.flags,e&65536&&!(e&128)?(n.flags=e&-65537|128,n):null;case 5:return sh(n),null;case 13:if(Ce(Me),e=n.memoizedState,e!==null&&e.dehydrated!==null){if(n.alternate===null)throw Error(Y(340));Ci()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 19:return Ce(Me),null;case 4:return Ei(),null;case 10:return nh(n.type._context),null;case 22:case 23:return _h(),null;case 24:return null;default:return null}}var ra=!1,it=!1,l2=typeof WeakSet=="function"?WeakSet:Set,ie=null;function mi(e,n){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(i){Ae(e,n,i)}else r.current=null}function Vc(e,n,r){try{r()}catch(i){Ae(e,n,i)}}var tm=!1;function u2(e,n){if(Ec=Da,e=O0(),Yf(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var i=r.getSelection&&r.getSelection();if(i&&i.rangeCount!==0){r=i.anchorNode;var s=i.anchorOffset,a=i.focusNode;i=i.focusOffset;try{r.nodeType,a.nodeType}catch{r=null;break e}var u=0,c=-1,h=-1,p=0,v=0,m=e,_=null;t:for(;;){for(var y;m!==r||s!==0&&m.nodeType!==3||(c=u+s),m!==a||i!==0&&m.nodeType!==3||(h=u+i),m.nodeType===3&&(u+=m.nodeValue.length),(y=m.firstChild)!==null;)_=m,m=y;for(;;){if(m===e)break t;if(_===r&&++p===s&&(c=u),_===a&&++v===i&&(h=u),(y=m.nextSibling)!==null)break;m=_,_=m.parentNode}m=y}r=c===-1||h===-1?null:{start:c,end:h}}else r=null}r=r||{start:0,end:0}}else r=null;for(Tc={focusedElem:e,selectionRange:r},Da=!1,ie=n;ie!==null;)if(n=ie,e=n.child,(n.subtreeFlags&1028)!==0&&e!==null)e.return=n,ie=e;else for(;ie!==null;){n=ie;try{var k=n.alternate;if(n.flags&1024)switch(n.tag){case 0:case 11:case 15:break;case 1:if(k!==null){var S=k.memoizedProps,E=k.memoizedState,w=n.stateNode,b=w.getSnapshotBeforeUpdate(n.elementType===n.type?S:Vt(n.type,S),E);w.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var N=n.stateNode.containerInfo;N.nodeType===1?N.textContent="":N.nodeType===9&&N.documentElement&&N.removeChild(N.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Y(163))}}catch(C){Ae(n,n.return,C)}if(e=n.sibling,e!==null){e.return=n.return,ie=e;break}ie=n.return}return k=tm,tm=!1,k}function Mo(e,n,r){var i=n.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var s=i=i.next;do{if((s.tag&e)===e){var a=s.destroy;s.destroy=void 0,a!==void 0&&Vc(n,r,a)}s=s.next}while(s!==i)}}function Sl(e,n){if(n=n.updateQueue,n=n!==null?n.lastEffect:null,n!==null){var r=n=n.next;do{if((r.tag&e)===e){var i=r.create;r.destroy=i()}r=r.next}while(r!==n)}}function qc(e){var n=e.ref;if(n!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof n=="function"?n(e):n.current=e}}function Tv(e){var n=e.alternate;n!==null&&(e.alternate=null,Tv(n)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(n=e.stateNode,n!==null&&(delete n[cn],delete n[Yo],delete n[zc],delete n[Ww],delete n[Vw])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Lv(e){return e.tag===5||e.tag===3||e.tag===4}function nm(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Lv(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Gc(e,n,r){var i=e.tag;if(i===5||i===6)e=e.stateNode,n?r.nodeType===8?r.parentNode.insertBefore(e,n):r.insertBefore(e,n):(r.nodeType===8?(n=r.parentNode,n.insertBefore(e,r)):(n=r,n.appendChild(e)),r=r._reactRootContainer,r!=null||n.onclick!==null||(n.onclick=Ua));else if(i!==4&&(e=e.child,e!==null))for(Gc(e,n,r),e=e.sibling;e!==null;)Gc(e,n,r),e=e.sibling}function Kc(e,n,r){var i=e.tag;if(i===5||i===6)e=e.stateNode,n?r.insertBefore(e,n):r.appendChild(e);else if(i!==4&&(e=e.child,e!==null))for(Kc(e,n,r),e=e.sibling;e!==null;)Kc(e,n,r),e=e.sibling}var Xe=null,qt=!1;function Wn(e,n,r){for(r=r.child;r!==null;)Mv(e,n,r),r=r.sibling}function Mv(e,n,r){if(hn&&typeof hn.onCommitFiberUnmount=="function")try{hn.onCommitFiberUnmount(vl,r)}catch{}switch(r.tag){case 5:it||mi(r,n);case 6:var i=Xe,s=qt;Xe=null,Wn(e,n,r),Xe=i,qt=s,Xe!==null&&(qt?(e=Xe,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Xe.removeChild(r.stateNode));break;case 18:Xe!==null&&(qt?(e=Xe,r=r.stateNode,e.nodeType===8?Du(e.parentNode,r):e.nodeType===1&&Du(e,r),Wo(e)):Du(Xe,r.stateNode));break;case 4:i=Xe,s=qt,Xe=r.stateNode.containerInfo,qt=!0,Wn(e,n,r),Xe=i,qt=s;break;case 0:case 11:case 14:case 15:if(!it&&(i=r.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){s=i=i.next;do{var a=s,u=a.destroy;a=a.tag,u!==void 0&&(a&2||a&4)&&Vc(r,n,u),s=s.next}while(s!==i)}Wn(e,n,r);break;case 1:if(!it&&(mi(r,n),i=r.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=r.memoizedProps,i.state=r.memoizedState,i.componentWillUnmount()}catch(c){Ae(r,n,c)}Wn(e,n,r);break;case 21:Wn(e,n,r);break;case 22:r.mode&1?(it=(i=it)||r.memoizedState!==null,Wn(e,n,r),it=i):Wn(e,n,r);break;default:Wn(e,n,r)}}function rm(e){var n=e.updateQueue;if(n!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new l2),n.forEach(function(i){var s=_2.bind(null,e,i);r.has(i)||(r.add(i),i.then(s,s))})}}function Zt(e,n){var r=n.deletions;if(r!==null)for(var i=0;i<r.length;i++){var s=r[i];try{var a=e,u=n,c=u;e:for(;c!==null;){switch(c.tag){case 5:Xe=c.stateNode,qt=!1;break e;case 3:Xe=c.stateNode.containerInfo,qt=!0;break e;case 4:Xe=c.stateNode.containerInfo,qt=!0;break e}c=c.return}if(Xe===null)throw Error(Y(160));Mv(a,u,s),Xe=null,qt=!1;var h=s.alternate;h!==null&&(h.return=null),s.return=null}catch(p){Ae(s,n,p)}}if(n.subtreeFlags&12854)for(n=n.child;n!==null;)zv(n,e),n=n.sibling}function zv(e,n){var r=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Zt(n,e),sn(e),i&4){try{Mo(3,e,e.return),Sl(3,e)}catch(S){Ae(e,e.return,S)}try{Mo(5,e,e.return)}catch(S){Ae(e,e.return,S)}}break;case 1:Zt(n,e),sn(e),i&512&&r!==null&&mi(r,r.return);break;case 5:if(Zt(n,e),sn(e),i&512&&r!==null&&mi(r,r.return),e.flags&32){var s=e.stateNode;try{Uo(s,"")}catch(S){Ae(e,e.return,S)}}if(i&4&&(s=e.stateNode,s!=null)){var a=e.memoizedProps,u=r!==null?r.memoizedProps:a,c=e.type,h=e.updateQueue;if(e.updateQueue=null,h!==null)try{c==="input"&&a.type==="radio"&&a.name!=null&&t0(s,a),yc(c,u);var p=yc(c,a);for(u=0;u<h.length;u+=2){var v=h[u],m=h[u+1];v==="style"?s0(s,m):v==="dangerouslySetInnerHTML"?i0(s,m):v==="children"?Uo(s,m):If(s,v,m,p)}switch(c){case"input":pc(s,a);break;case"textarea":n0(s,a);break;case"select":var _=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!a.multiple;var y=a.value;y!=null?vi(s,!!a.multiple,y,!1):_!==!!a.multiple&&(a.defaultValue!=null?vi(s,!!a.multiple,a.defaultValue,!0):vi(s,!!a.multiple,a.multiple?[]:"",!1))}s[Yo]=a}catch(S){Ae(e,e.return,S)}}break;case 6:if(Zt(n,e),sn(e),i&4){if(e.stateNode===null)throw Error(Y(162));s=e.stateNode,a=e.memoizedProps;try{s.nodeValue=a}catch(S){Ae(e,e.return,S)}}break;case 3:if(Zt(n,e),sn(e),i&4&&r!==null&&r.memoizedState.isDehydrated)try{Wo(n.containerInfo)}catch(S){Ae(e,e.return,S)}break;case 4:Zt(n,e),sn(e);break;case 13:Zt(n,e),sn(e),s=e.child,s.flags&8192&&(a=s.memoizedState!==null,s.stateNode.isHidden=a,!a||s.alternate!==null&&s.alternate.memoizedState!==null||(gh=De())),i&4&&rm(e);break;case 22:if(v=r!==null&&r.memoizedState!==null,e.mode&1?(it=(p=it)||v,Zt(n,e),it=p):Zt(n,e),sn(e),i&8192){if(p=e.memoizedState!==null,(e.stateNode.isHidden=p)&&!v&&e.mode&1)for(ie=e,v=e.child;v!==null;){for(m=ie=v;ie!==null;){switch(_=ie,y=_.child,_.tag){case 0:case 11:case 14:case 15:Mo(4,_,_.return);break;case 1:mi(_,_.return);var k=_.stateNode;if(typeof k.componentWillUnmount=="function"){i=_,r=_.return;try{n=i,k.props=n.memoizedProps,k.state=n.memoizedState,k.componentWillUnmount()}catch(S){Ae(i,r,S)}}break;case 5:mi(_,_.return);break;case 22:if(_.memoizedState!==null){om(m);continue}}y!==null?(y.return=_,ie=y):om(m)}v=v.sibling}e:for(v=null,m=e;;){if(m.tag===5){if(v===null){v=m;try{s=m.stateNode,p?(a=s.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(c=m.stateNode,h=m.memoizedProps.style,u=h!=null&&h.hasOwnProperty("display")?h.display:null,c.style.display=o0("display",u))}catch(S){Ae(e,e.return,S)}}}else if(m.tag===6){if(v===null)try{m.stateNode.nodeValue=p?"":m.memoizedProps}catch(S){Ae(e,e.return,S)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===e)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===e)break e;for(;m.sibling===null;){if(m.return===null||m.return===e)break e;v===m&&(v=null),m=m.return}v===m&&(v=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:Zt(n,e),sn(e),i&4&&rm(e);break;case 21:break;default:Zt(n,e),sn(e)}}function sn(e){var n=e.flags;if(n&2){try{e:{for(var r=e.return;r!==null;){if(Lv(r)){var i=r;break e}r=r.return}throw Error(Y(160))}switch(i.tag){case 5:var s=i.stateNode;i.flags&32&&(Uo(s,""),i.flags&=-33);var a=nm(e);Kc(e,a,s);break;case 3:case 4:var u=i.stateNode.containerInfo,c=nm(e);Gc(e,c,u);break;default:throw Error(Y(161))}}catch(h){Ae(e,e.return,h)}e.flags&=-3}n&4096&&(e.flags&=-4097)}function c2(e,n,r){ie=e,Ov(e)}function Ov(e,n,r){for(var i=(e.mode&1)!==0;ie!==null;){var s=ie,a=s.child;if(s.tag===22&&i){var u=s.memoizedState!==null||ra;if(!u){var c=s.alternate,h=c!==null&&c.memoizedState!==null||it;c=ra;var p=it;if(ra=u,(it=h)&&!p)for(ie=s;ie!==null;)u=ie,h=u.child,u.tag===22&&u.memoizedState!==null?sm(s):h!==null?(h.return=u,ie=h):sm(s);for(;a!==null;)ie=a,Ov(a),a=a.sibling;ie=s,ra=c,it=p}im(e)}else s.subtreeFlags&8772&&a!==null?(a.return=s,ie=a):im(e)}}function im(e){for(;ie!==null;){var n=ie;if(n.flags&8772){var r=n.alternate;try{if(n.flags&8772)switch(n.tag){case 0:case 11:case 15:it||Sl(5,n);break;case 1:var i=n.stateNode;if(n.flags&4&&!it)if(r===null)i.componentDidMount();else{var s=n.elementType===n.type?r.memoizedProps:Vt(n.type,r.memoizedProps);i.componentDidUpdate(s,r.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var a=n.updateQueue;a!==null&&$p(n,a,i);break;case 3:var u=n.updateQueue;if(u!==null){if(r=null,n.child!==null)switch(n.child.tag){case 5:r=n.child.stateNode;break;case 1:r=n.child.stateNode}$p(n,u,r)}break;case 5:var c=n.stateNode;if(r===null&&n.flags&4){r=c;var h=n.memoizedProps;switch(n.type){case"button":case"input":case"select":case"textarea":h.autoFocus&&r.focus();break;case"img":h.src&&(r.src=h.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(n.memoizedState===null){var p=n.alternate;if(p!==null){var v=p.memoizedState;if(v!==null){var m=v.dehydrated;m!==null&&Wo(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Y(163))}it||n.flags&512&&qc(n)}catch(_){Ae(n,n.return,_)}}if(n===e){ie=null;break}if(r=n.sibling,r!==null){r.return=n.return,ie=r;break}ie=n.return}}function om(e){for(;ie!==null;){var n=ie;if(n===e){ie=null;break}var r=n.sibling;if(r!==null){r.return=n.return,ie=r;break}ie=n.return}}function sm(e){for(;ie!==null;){var n=ie;try{switch(n.tag){case 0:case 11:case 15:var r=n.return;try{Sl(4,n)}catch(h){Ae(n,r,h)}break;case 1:var i=n.stateNode;if(typeof i.componentDidMount=="function"){var s=n.return;try{i.componentDidMount()}catch(h){Ae(n,s,h)}}var a=n.return;try{qc(n)}catch(h){Ae(n,a,h)}break;case 5:var u=n.return;try{qc(n)}catch(h){Ae(n,u,h)}}}catch(h){Ae(n,n.return,h)}if(n===e){ie=null;break}var c=n.sibling;if(c!==null){c.return=n.return,ie=c;break}ie=n.return}}var f2=Math.ceil,Qa=Bn.ReactCurrentDispatcher,ph=Bn.ReactCurrentOwner,Ft=Bn.ReactCurrentBatchConfig,_e=0,Ke=null,Ue=null,Qe=0,bt=0,gi=gr(0),We=0,ns=null,Br=0,jl=0,mh=0,zo=null,pt=null,gh=0,Li=1/0,jn=null,Ja=!1,Yc=null,ur=null,ia=!1,nr=null,el=0,Oo=0,Xc=null,ka=-1,Na=0;function ut(){return _e&6?De():ka!==-1?ka:ka=De()}function cr(e){return e.mode&1?_e&2&&Qe!==0?Qe&-Qe:Gw.transition!==null?(Na===0&&(Na=_0()),Na):(e=we,e!==0||(e=window.event,e=e===void 0?16:S0(e.type)),e):1}function Qt(e,n,r,i){if(50<Oo)throw Oo=0,Xc=null,Error(Y(185));ds(e,r,i),(!(_e&2)||e!==Ke)&&(e===Ke&&(!(_e&2)&&(jl|=r),We===4&&er(e,Qe)),yt(e,i),r===1&&_e===0&&!(n.mode&1)&&(Li=De()+500,bl&&vr()))}function yt(e,n){var r=e.callbackNode;G1(e,n);var i=Ia(e,e===Ke?Qe:0);if(i===0)r!==null&&mp(r),e.callbackNode=null,e.callbackPriority=0;else if(n=i&-i,e.callbackPriority!==n){if(r!=null&&mp(r),n===1)e.tag===0?qw(am.bind(null,e)):Z0(am.bind(null,e)),Hw(function(){!(_e&6)&&vr()}),r=null;else{switch(y0(i)){case 1:r=$f;break;case 4:r=g0;break;case 16:r=Ra;break;case 536870912:r=v0;break;default:r=Ra}r=$v(r,Av.bind(null,e))}e.callbackPriority=n,e.callbackNode=r}}function Av(e,n){if(ka=-1,Na=0,_e&6)throw Error(Y(327));var r=e.callbackNode;if(bi()&&e.callbackNode!==r)return null;var i=Ia(e,e===Ke?Qe:0);if(i===0)return null;if(i&30||i&e.expiredLanes||n)n=tl(e,i);else{n=i;var s=_e;_e|=2;var a=Iv();(Ke!==e||Qe!==n)&&(jn=null,Li=De()+500,Mr(e,n));do try{p2();break}catch(c){Rv(e,c)}while(!0);th(),Qa.current=a,_e=s,Ue!==null?n=0:(Ke=null,Qe=0,n=We)}if(n!==0){if(n===2&&(s=Nc(e),s!==0&&(i=s,n=Qc(e,s))),n===1)throw r=ns,Mr(e,0),er(e,i),yt(e,De()),r;if(n===6)er(e,i);else{if(s=e.current.alternate,!(i&30)&&!h2(s)&&(n=tl(e,i),n===2&&(a=Nc(e),a!==0&&(i=a,n=Qc(e,a))),n===1))throw r=ns,Mr(e,0),er(e,i),yt(e,De()),r;switch(e.finishedWork=s,e.finishedLanes=i,n){case 0:case 1:throw Error(Y(345));case 2:jr(e,pt,jn);break;case 3:if(er(e,i),(i&130023424)===i&&(n=gh+500-De(),10<n)){if(Ia(e,0)!==0)break;if(s=e.suspendedLanes,(s&i)!==i){ut(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=Mc(jr.bind(null,e,pt,jn),n);break}jr(e,pt,jn);break;case 4:if(er(e,i),(i&4194240)===i)break;for(n=e.eventTimes,s=-1;0<i;){var u=31-Xt(i);a=1<<u,u=n[u],u>s&&(s=u),i&=~a}if(i=s,i=De()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*f2(i/1960))-i,10<i){e.timeoutHandle=Mc(jr.bind(null,e,pt,jn),i);break}jr(e,pt,jn);break;case 5:jr(e,pt,jn);break;default:throw Error(Y(329))}}}return yt(e,De()),e.callbackNode===r?Av.bind(null,e):null}function Qc(e,n){var r=zo;return e.current.memoizedState.isDehydrated&&(Mr(e,n).flags|=256),e=tl(e,n),e!==2&&(n=pt,pt=r,n!==null&&Jc(n)),e}function Jc(e){pt===null?pt=e:pt.push.apply(pt,e)}function h2(e){for(var n=e;;){if(n.flags&16384){var r=n.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var i=0;i<r.length;i++){var s=r[i],a=s.getSnapshot;s=s.value;try{if(!Jt(a(),s))return!1}catch{return!1}}}if(r=n.child,n.subtreeFlags&16384&&r!==null)r.return=n,n=r;else{if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function er(e,n){for(n&=~mh,n&=~jl,e.suspendedLanes|=n,e.pingedLanes&=~n,e=e.expirationTimes;0<n;){var r=31-Xt(n),i=1<<r;e[r]=-1,n&=~i}}function am(e){if(_e&6)throw Error(Y(327));bi();var n=Ia(e,0);if(!(n&1))return yt(e,De()),null;var r=tl(e,n);if(e.tag!==0&&r===2){var i=Nc(e);i!==0&&(n=i,r=Qc(e,i))}if(r===1)throw r=ns,Mr(e,0),er(e,n),yt(e,De()),r;if(r===6)throw Error(Y(345));return e.finishedWork=e.current.alternate,e.finishedLanes=n,jr(e,pt,jn),yt(e,De()),null}function vh(e,n){var r=_e;_e|=1;try{return e(n)}finally{_e=r,_e===0&&(Li=De()+500,bl&&vr())}}function Ur(e){nr!==null&&nr.tag===0&&!(_e&6)&&bi();var n=_e;_e|=1;var r=Ft.transition,i=we;try{if(Ft.transition=null,we=1,e)return e()}finally{we=i,Ft.transition=r,_e=n,!(_e&6)&&vr()}}function _h(){bt=gi.current,Ce(gi)}function Mr(e,n){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,$w(r)),Ue!==null)for(r=Ue.return;r!==null;){var i=r;switch(Qf(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&$a();break;case 3:Ei(),Ce(vt),Ce(ot),ah();break;case 5:sh(i);break;case 4:Ei();break;case 13:Ce(Me);break;case 19:Ce(Me);break;case 10:nh(i.type._context);break;case 22:case 23:_h()}r=r.return}if(Ke=e,Ue=e=fr(e.current,null),Qe=bt=n,We=0,ns=null,mh=jl=Br=0,pt=zo=null,Er!==null){for(n=0;n<Er.length;n++)if(r=Er[n],i=r.interleaved,i!==null){r.interleaved=null;var s=i.next,a=r.pending;if(a!==null){var u=a.next;a.next=s,i.next=u}r.pending=i}Er=null}return e}function Rv(e,n){do{var r=Ue;try{if(th(),xa.current=Xa,Ya){for(var i=ze.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}Ya=!1}if(Fr=0,Ge=Ze=ze=null,Lo=!1,Jo=0,ph.current=null,r===null||r.return===null){We=1,ns=n,Ue=null;break}e:{var a=e,u=r.return,c=r,h=n;if(n=Qe,c.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){var p=h,v=c,m=v.tag;if(!(v.mode&1)&&(m===0||m===11||m===15)){var _=v.alternate;_?(v.updateQueue=_.updateQueue,v.memoizedState=_.memoizedState,v.lanes=_.lanes):(v.updateQueue=null,v.memoizedState=null)}var y=Gp(u);if(y!==null){y.flags&=-257,Kp(y,u,c,a,n),y.mode&1&&qp(a,p,n),n=y,h=p;var k=n.updateQueue;if(k===null){var S=new Set;S.add(h),n.updateQueue=S}else k.add(h);break e}else{if(!(n&1)){qp(a,p,n),yh();break e}h=Error(Y(426))}}else if(Ee&&c.mode&1){var E=Gp(u);if(E!==null){!(E.flags&65536)&&(E.flags|=256),Kp(E,u,c,a,n),Jf(Ti(h,c));break e}}a=h=Ti(h,c),We!==4&&(We=2),zo===null?zo=[a]:zo.push(a),a=u;do{switch(a.tag){case 3:a.flags|=65536,n&=-n,a.lanes|=n;var w=yv(a,h,n);Up(a,w);break e;case 1:c=h;var b=a.type,N=a.stateNode;if(!(a.flags&128)&&(typeof b.getDerivedStateFromError=="function"||N!==null&&typeof N.componentDidCatch=="function"&&(ur===null||!ur.has(N)))){a.flags|=65536,n&=-n,a.lanes|=n;var C=xv(a,c,n);Up(a,C);break e}}a=a.return}while(a!==null)}Fv(r)}catch(P){n=P,Ue===r&&r!==null&&(Ue=r=r.return);continue}break}while(!0)}function Iv(){var e=Qa.current;return Qa.current=Xa,e===null?Xa:e}function yh(){(We===0||We===3||We===2)&&(We=4),Ke===null||!(Br&268435455)&&!(jl&268435455)||er(Ke,Qe)}function tl(e,n){var r=_e;_e|=2;var i=Iv();(Ke!==e||Qe!==n)&&(jn=null,Mr(e,n));do try{d2();break}catch(s){Rv(e,s)}while(!0);if(th(),_e=r,Qa.current=i,Ue!==null)throw Error(Y(261));return Ke=null,Qe=0,We}function d2(){for(;Ue!==null;)Dv(Ue)}function p2(){for(;Ue!==null&&!F1();)Dv(Ue)}function Dv(e){var n=Uv(e.alternate,e,bt);e.memoizedProps=e.pendingProps,n===null?Fv(e):Ue=n,ph.current=null}function Fv(e){var n=e;do{var r=n.alternate;if(e=n.return,n.flags&32768){if(r=a2(r,n),r!==null){r.flags&=32767,Ue=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{We=6,Ue=null;return}}else if(r=s2(r,n,bt),r!==null){Ue=r;return}if(n=n.sibling,n!==null){Ue=n;return}Ue=n=e}while(n!==null);We===0&&(We=5)}function jr(e,n,r){var i=we,s=Ft.transition;try{Ft.transition=null,we=1,m2(e,n,r,i)}finally{Ft.transition=s,we=i}return null}function m2(e,n,r,i){do bi();while(nr!==null);if(_e&6)throw Error(Y(327));r=e.finishedWork;var s=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(Y(177));e.callbackNode=null,e.callbackPriority=0;var a=r.lanes|r.childLanes;if(K1(e,a),e===Ke&&(Ue=Ke=null,Qe=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||ia||(ia=!0,$v(Ra,function(){return bi(),null})),a=(r.flags&15990)!==0,r.subtreeFlags&15990||a){a=Ft.transition,Ft.transition=null;var u=we;we=1;var c=_e;_e|=4,ph.current=null,u2(e,r),zv(r,e),Aw(Tc),Da=!!Ec,Tc=Ec=null,e.current=r,c2(r),B1(),_e=c,we=u,Ft.transition=a}else e.current=r;if(ia&&(ia=!1,nr=e,el=s),a=e.pendingLanes,a===0&&(ur=null),H1(r.stateNode),yt(e,De()),n!==null)for(i=e.onRecoverableError,r=0;r<n.length;r++)s=n[r],i(s.value,{componentStack:s.stack,digest:s.digest});if(Ja)throw Ja=!1,e=Yc,Yc=null,e;return el&1&&e.tag!==0&&bi(),a=e.pendingLanes,a&1?e===Xc?Oo++:(Oo=0,Xc=e):Oo=0,vr(),null}function bi(){if(nr!==null){var e=y0(el),n=Ft.transition,r=we;try{if(Ft.transition=null,we=16>e?16:e,nr===null)var i=!1;else{if(e=nr,nr=null,el=0,_e&6)throw Error(Y(331));var s=_e;for(_e|=4,ie=e.current;ie!==null;){var a=ie,u=a.child;if(ie.flags&16){var c=a.deletions;if(c!==null){for(var h=0;h<c.length;h++){var p=c[h];for(ie=p;ie!==null;){var v=ie;switch(v.tag){case 0:case 11:case 15:Mo(8,v,a)}var m=v.child;if(m!==null)m.return=v,ie=m;else for(;ie!==null;){v=ie;var _=v.sibling,y=v.return;if(Tv(v),v===p){ie=null;break}if(_!==null){_.return=y,ie=_;break}ie=y}}}var k=a.alternate;if(k!==null){var S=k.child;if(S!==null){k.child=null;do{var E=S.sibling;S.sibling=null,S=E}while(S!==null)}}ie=a}}if(a.subtreeFlags&2064&&u!==null)u.return=a,ie=u;else e:for(;ie!==null;){if(a=ie,a.flags&2048)switch(a.tag){case 0:case 11:case 15:Mo(9,a,a.return)}var w=a.sibling;if(w!==null){w.return=a.return,ie=w;break e}ie=a.return}}var b=e.current;for(ie=b;ie!==null;){u=ie;var N=u.child;if(u.subtreeFlags&2064&&N!==null)N.return=u,ie=N;else e:for(u=b;ie!==null;){if(c=ie,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:Sl(9,c)}}catch(P){Ae(c,c.return,P)}if(c===u){ie=null;break e}var C=c.sibling;if(C!==null){C.return=c.return,ie=C;break e}ie=c.return}}if(_e=s,vr(),hn&&typeof hn.onPostCommitFiberRoot=="function")try{hn.onPostCommitFiberRoot(vl,e)}catch{}i=!0}return i}finally{we=r,Ft.transition=n}}return!1}function lm(e,n,r){n=Ti(r,n),n=yv(e,n,1),e=lr(e,n,1),n=ut(),e!==null&&(ds(e,1,n),yt(e,n))}function Ae(e,n,r){if(e.tag===3)lm(e,e,r);else for(;n!==null;){if(n.tag===3){lm(n,e,r);break}else if(n.tag===1){var i=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(ur===null||!ur.has(i))){e=Ti(r,e),e=xv(n,e,1),n=lr(n,e,1),e=ut(),n!==null&&(ds(n,1,e),yt(n,e));break}}n=n.return}}function g2(e,n,r){var i=e.pingCache;i!==null&&i.delete(n),n=ut(),e.pingedLanes|=e.suspendedLanes&r,Ke===e&&(Qe&r)===r&&(We===4||We===3&&(Qe&130023424)===Qe&&500>De()-gh?Mr(e,0):mh|=r),yt(e,n)}function Bv(e,n){n===0&&(e.mode&1?(n=Gs,Gs<<=1,!(Gs&130023424)&&(Gs=4194304)):n=1);var r=ut();e=In(e,n),e!==null&&(ds(e,n,r),yt(e,r))}function v2(e){var n=e.memoizedState,r=0;n!==null&&(r=n.retryLane),Bv(e,r)}function _2(e,n){var r=0;switch(e.tag){case 13:var i=e.stateNode,s=e.memoizedState;s!==null&&(r=s.retryLane);break;case 19:i=e.stateNode;break;default:throw Error(Y(314))}i!==null&&i.delete(n),Bv(e,r)}var Uv;Uv=function(e,n,r){if(e!==null)if(e.memoizedProps!==n.pendingProps||vt.current)mt=!0;else{if(!(e.lanes&r)&&!(n.flags&128))return mt=!1,o2(e,n,r);mt=!!(e.flags&131072)}else mt=!1,Ee&&n.flags&1048576&&W0(n,Wa,n.index);switch(n.lanes=0,n.tag){case 2:var i=n.type;ba(e,n),e=n.pendingProps;var s=ji(n,ot.current);wi(n,r),s=uh(null,n,i,e,s,r);var a=ch();return n.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(n.tag=1,n.memoizedState=null,n.updateQueue=null,_t(i)?(a=!0,Ha(n)):a=!1,n.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,ih(n),s.updater=Nl,n.stateNode=s,s._reactInternals=n,Fc(n,i,e,r),n=$c(null,n,i,!0,a,r)):(n.tag=0,Ee&&a&&Xf(n),at(null,n,s,r),n=n.child),n;case 16:i=n.elementType;e:{switch(ba(e,n),e=n.pendingProps,s=i._init,i=s(i._payload),n.type=i,s=n.tag=x2(i),e=Vt(i,e),s){case 0:n=Uc(null,n,i,e,r);break e;case 1:n=Qp(null,n,i,e,r);break e;case 11:n=Yp(null,n,i,e,r);break e;case 14:n=Xp(null,n,i,Vt(i.type,e),r);break e}throw Error(Y(306,i,""))}return n;case 0:return i=n.type,s=n.pendingProps,s=n.elementType===i?s:Vt(i,s),Uc(e,n,i,s,r);case 1:return i=n.type,s=n.pendingProps,s=n.elementType===i?s:Vt(i,s),Qp(e,n,i,s,r);case 3:e:{if(Nv(n),e===null)throw Error(Y(387));i=n.pendingProps,a=n.memoizedState,s=a.element,X0(e,n),Ga(n,i,null,r);var u=n.memoizedState;if(i=u.element,a.isDehydrated)if(a={element:i,isDehydrated:!1,cache:u.cache,pendingSuspenseBoundaries:u.pendingSuspenseBoundaries,transitions:u.transitions},n.updateQueue.baseState=a,n.memoizedState=a,n.flags&256){s=Ti(Error(Y(423)),n),n=Jp(e,n,i,r,s);break e}else if(i!==s){s=Ti(Error(Y(424)),n),n=Jp(e,n,i,r,s);break e}else for(kt=ar(n.stateNode.containerInfo.firstChild),Nt=n,Ee=!0,Gt=null,r=K0(n,null,i,r),n.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Ci(),i===s){n=Dn(e,n,r);break e}at(e,n,i,r)}n=n.child}return n;case 5:return Q0(n),e===null&&Rc(n),i=n.type,s=n.pendingProps,a=e!==null?e.memoizedProps:null,u=s.children,Lc(i,s)?u=null:a!==null&&Lc(i,a)&&(n.flags|=32),kv(e,n),at(e,n,u,r),n.child;case 6:return e===null&&Rc(n),null;case 13:return Sv(e,n,r);case 4:return oh(n,n.stateNode.containerInfo),i=n.pendingProps,e===null?n.child=Pi(n,null,i,r):at(e,n,i,r),n.child;case 11:return i=n.type,s=n.pendingProps,s=n.elementType===i?s:Vt(i,s),Yp(e,n,i,s,r);case 7:return at(e,n,n.pendingProps,r),n.child;case 8:return at(e,n,n.pendingProps.children,r),n.child;case 12:return at(e,n,n.pendingProps.children,r),n.child;case 10:e:{if(i=n.type._context,s=n.pendingProps,a=n.memoizedProps,u=s.value,Ne(Va,i._currentValue),i._currentValue=u,a!==null)if(Jt(a.value,u)){if(a.children===s.children&&!vt.current){n=Dn(e,n,r);break e}}else for(a=n.child,a!==null&&(a.return=n);a!==null;){var c=a.dependencies;if(c!==null){u=a.child;for(var h=c.firstContext;h!==null;){if(h.context===i){if(a.tag===1){h=zn(-1,r&-r),h.tag=2;var p=a.updateQueue;if(p!==null){p=p.shared;var v=p.pending;v===null?h.next=h:(h.next=v.next,v.next=h),p.pending=h}}a.lanes|=r,h=a.alternate,h!==null&&(h.lanes|=r),Ic(a.return,r,n),c.lanes|=r;break}h=h.next}}else if(a.tag===10)u=a.type===n.type?null:a.child;else if(a.tag===18){if(u=a.return,u===null)throw Error(Y(341));u.lanes|=r,c=u.alternate,c!==null&&(c.lanes|=r),Ic(u,r,n),u=a.sibling}else u=a.child;if(u!==null)u.return=a;else for(u=a;u!==null;){if(u===n){u=null;break}if(a=u.sibling,a!==null){a.return=u.return,u=a;break}u=u.return}a=u}at(e,n,s.children,r),n=n.child}return n;case 9:return s=n.type,i=n.pendingProps.children,wi(n,r),s=Bt(s),i=i(s),n.flags|=1,at(e,n,i,r),n.child;case 14:return i=n.type,s=Vt(i,n.pendingProps),s=Vt(i.type,s),Xp(e,n,i,s,r);case 15:return wv(e,n,n.type,n.pendingProps,r);case 17:return i=n.type,s=n.pendingProps,s=n.elementType===i?s:Vt(i,s),ba(e,n),n.tag=1,_t(i)?(e=!0,Ha(n)):e=!1,wi(n,r),_v(n,i,s),Fc(n,i,s,r),$c(null,n,i,!0,e,r);case 19:return jv(e,n,r);case 22:return bv(e,n,r)}throw Error(Y(156,n.tag))};function $v(e,n){return m0(e,n)}function y2(e,n,r,i){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Dt(e,n,r,i){return new y2(e,n,r,i)}function xh(e){return e=e.prototype,!(!e||!e.isReactComponent)}function x2(e){if(typeof e=="function")return xh(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Ff)return 11;if(e===Bf)return 14}return 2}function fr(e,n){var r=e.alternate;return r===null?(r=Dt(e.tag,n,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=n,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,n=e.dependencies,r.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Sa(e,n,r,i,s,a){var u=2;if(i=e,typeof e=="function")xh(e)&&(u=1);else if(typeof e=="string")u=5;else e:switch(e){case si:return zr(r.children,s,a,n);case Df:u=8,s|=8;break;case uc:return e=Dt(12,r,n,s|2),e.elementType=uc,e.lanes=a,e;case cc:return e=Dt(13,r,n,s),e.elementType=cc,e.lanes=a,e;case fc:return e=Dt(19,r,n,s),e.elementType=fc,e.lanes=a,e;case Qg:return Cl(r,s,a,n);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Yg:u=10;break e;case Xg:u=9;break e;case Ff:u=11;break e;case Bf:u=14;break e;case Yn:u=16,i=null;break e}throw Error(Y(130,e==null?e:typeof e,""))}return n=Dt(u,r,n,s),n.elementType=e,n.type=i,n.lanes=a,n}function zr(e,n,r,i){return e=Dt(7,e,i,n),e.lanes=r,e}function Cl(e,n,r,i){return e=Dt(22,e,i,n),e.elementType=Qg,e.lanes=r,e.stateNode={isHidden:!1},e}function Vu(e,n,r){return e=Dt(6,e,null,n),e.lanes=r,e}function qu(e,n,r){return n=Dt(4,e.children!==null?e.children:[],e.key,n),n.lanes=r,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}function w2(e,n,r,i,s){this.tag=n,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Cu(0),this.expirationTimes=Cu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Cu(0),this.identifierPrefix=i,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function wh(e,n,r,i,s,a,u,c,h){return e=new w2(e,n,r,c,h),n===1?(n=1,a===!0&&(n|=8)):n=0,a=Dt(3,null,null,n),e.current=a,a.stateNode=e,a.memoizedState={element:i,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},ih(a),e}function b2(e,n,r){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:oi,key:i==null?null:""+i,children:e,containerInfo:n,implementation:r}}function Hv(e){if(!e)return pr;e=e._reactInternals;e:{if(Zr(e)!==e||e.tag!==1)throw Error(Y(170));var n=e;do{switch(n.tag){case 3:n=n.stateNode.context;break e;case 1:if(_t(n.type)){n=n.stateNode.__reactInternalMemoizedMergedChildContext;break e}}n=n.return}while(n!==null);throw Error(Y(171))}if(e.tag===1){var r=e.type;if(_t(r))return H0(e,r,n)}return n}function Zv(e,n,r,i,s,a,u,c,h){return e=wh(r,i,!0,e,s,a,u,c,h),e.context=Hv(null),r=e.current,i=ut(),s=cr(r),a=zn(i,s),a.callback=n??null,lr(r,a,s),e.current.lanes=s,ds(e,s,i),yt(e,i),e}function Pl(e,n,r,i){var s=n.current,a=ut(),u=cr(s);return r=Hv(r),n.context===null?n.context=r:n.pendingContext=r,n=zn(a,u),n.payload={element:e},i=i===void 0?null:i,i!==null&&(n.callback=i),e=lr(s,n,u),e!==null&&(Qt(e,s,u,a),ya(e,s,u)),u}function nl(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function um(e,n){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<n?r:n}}function bh(e,n){um(e,n),(e=e.alternate)&&um(e,n)}function k2(){return null}var Wv=typeof reportError=="function"?reportError:function(e){console.error(e)};function kh(e){this._internalRoot=e}El.prototype.render=kh.prototype.render=function(e){var n=this._internalRoot;if(n===null)throw Error(Y(409));Pl(e,n,null,null)};El.prototype.unmount=kh.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var n=e.containerInfo;Ur(function(){Pl(null,e,null,null)}),n[Rn]=null}};function El(e){this._internalRoot=e}El.prototype.unstable_scheduleHydration=function(e){if(e){var n=b0();e={blockedOn:null,target:e,priority:n};for(var r=0;r<Jn.length&&n!==0&&n<Jn[r].priority;r++);Jn.splice(r,0,e),r===0&&N0(e)}};function Nh(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Tl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function cm(){}function N2(e,n,r,i,s){if(s){if(typeof i=="function"){var a=i;i=function(){var p=nl(u);a.call(p)}}var u=Zv(n,i,e,0,null,!1,!1,"",cm);return e._reactRootContainer=u,e[Rn]=u.current,Go(e.nodeType===8?e.parentNode:e),Ur(),u}for(;s=e.lastChild;)e.removeChild(s);if(typeof i=="function"){var c=i;i=function(){var p=nl(h);c.call(p)}}var h=wh(e,0,!1,null,null,!1,!1,"",cm);return e._reactRootContainer=h,e[Rn]=h.current,Go(e.nodeType===8?e.parentNode:e),Ur(function(){Pl(n,h,r,i)}),h}function Ll(e,n,r,i,s){var a=r._reactRootContainer;if(a){var u=a;if(typeof s=="function"){var c=s;s=function(){var h=nl(u);c.call(h)}}Pl(n,u,e,s)}else u=N2(r,n,e,s,i);return nl(u)}x0=function(e){switch(e.tag){case 3:var n=e.stateNode;if(n.current.memoizedState.isDehydrated){var r=yo(n.pendingLanes);r!==0&&(Hf(n,r|1),yt(n,De()),!(_e&6)&&(Li=De()+500,vr()))}break;case 13:Ur(function(){var i=In(e,1);if(i!==null){var s=ut();Qt(i,e,1,s)}}),bh(e,1)}};Zf=function(e){if(e.tag===13){var n=In(e,134217728);if(n!==null){var r=ut();Qt(n,e,134217728,r)}bh(e,134217728)}};w0=function(e){if(e.tag===13){var n=cr(e),r=In(e,n);if(r!==null){var i=ut();Qt(r,e,n,i)}bh(e,n)}};b0=function(){return we};k0=function(e,n){var r=we;try{return we=e,n()}finally{we=r}};wc=function(e,n,r){switch(n){case"input":if(pc(e,r),n=r.name,r.type==="radio"&&n!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+n)+'][type="radio"]'),n=0;n<r.length;n++){var i=r[n];if(i!==e&&i.form===e.form){var s=wl(i);if(!s)throw Error(Y(90));e0(i),pc(i,s)}}}break;case"textarea":n0(e,r);break;case"select":n=r.value,n!=null&&vi(e,!!r.multiple,n,!1)}};u0=vh;c0=Ur;var S2={usingClientEntryPoint:!1,Events:[ms,ci,wl,a0,l0,vh]},ao={findFiberByHostInstance:Pr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},j2={bundleType:ao.bundleType,version:ao.version,rendererPackageName:ao.rendererPackageName,rendererConfig:ao.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Bn.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=d0(e),e===null?null:e.stateNode},findFiberByHostInstance:ao.findFiberByHostInstance||k2,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var oa=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!oa.isDisabled&&oa.supportsFiber)try{vl=oa.inject(j2),hn=oa}catch{}}Ct.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=S2;Ct.createPortal=function(e,n){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Nh(n))throw Error(Y(200));return b2(e,n,null,r)};Ct.createRoot=function(e,n){if(!Nh(e))throw Error(Y(299));var r=!1,i="",s=Wv;return n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),n=wh(e,1,!1,null,null,r,!1,i,s),e[Rn]=n.current,Go(e.nodeType===8?e.parentNode:e),new kh(n)};Ct.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var n=e._reactInternals;if(n===void 0)throw typeof e.render=="function"?Error(Y(188)):(e=Object.keys(e).join(","),Error(Y(268,e)));return e=d0(n),e=e===null?null:e.stateNode,e};Ct.flushSync=function(e){return Ur(e)};Ct.hydrate=function(e,n,r){if(!Tl(n))throw Error(Y(200));return Ll(null,e,n,!0,r)};Ct.hydrateRoot=function(e,n,r){if(!Nh(e))throw Error(Y(405));var i=r!=null&&r.hydratedSources||null,s=!1,a="",u=Wv;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(a=r.identifierPrefix),r.onRecoverableError!==void 0&&(u=r.onRecoverableError)),n=Zv(n,null,e,1,r??null,s,!1,a,u),e[Rn]=n.current,Go(e),i)for(e=0;e<i.length;e++)r=i[e],s=r._getVersion,s=s(r._source),n.mutableSourceEagerHydrationData==null?n.mutableSourceEagerHydrationData=[r,s]:n.mutableSourceEagerHydrationData.push(r,s);return new El(n)};Ct.render=function(e,n,r){if(!Tl(n))throw Error(Y(200));return Ll(null,e,n,!1,r)};Ct.unmountComponentAtNode=function(e){if(!Tl(e))throw Error(Y(40));return e._reactRootContainer?(Ur(function(){Ll(null,null,e,!1,function(){e._reactRootContainer=null,e[Rn]=null})}),!0):!1};Ct.unstable_batchedUpdates=vh;Ct.unstable_renderSubtreeIntoContainer=function(e,n,r,i){if(!Tl(r))throw Error(Y(200));if(e==null||e._reactInternals===void 0)throw Error(Y(38));return Ll(e,n,r,!1,i)};Ct.version="18.3.1-next-f1338f8080-20240426";function Vv(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Vv)}catch(e){console.error(e)}}Vv(),Vg.exports=Ct;var qv=Vg.exports,fm=qv;ac.createRoot=fm.createRoot,ac.hydrateRoot=fm.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function rs(){return rs=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},rs.apply(this,arguments)}var rr;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(rr||(rr={}));const hm="popstate";function C2(e){e===void 0&&(e={});function n(i,s){let{pathname:a,search:u,hash:c}=i.location;return ef("",{pathname:a,search:u,hash:c},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(i,s){return typeof s=="string"?s:rl(s)}return E2(n,r,null,e)}function $e(e,n){if(e===!1||e===null||typeof e>"u")throw new Error(n)}function Sh(e,n){if(!e){typeof console<"u"&&console.warn(n);try{throw new Error(n)}catch{}}}function P2(){return Math.random().toString(36).substr(2,8)}function dm(e,n){return{usr:e.state,key:e.key,idx:n}}function ef(e,n,r,i){return r===void 0&&(r=null),rs({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof n=="string"?Fi(n):n,{state:r,key:n&&n.key||i||P2()})}function rl(e){let{pathname:n="/",search:r="",hash:i=""}=e;return r&&r!=="?"&&(n+=r.charAt(0)==="?"?r:"?"+r),i&&i!=="#"&&(n+=i.charAt(0)==="#"?i:"#"+i),n}function Fi(e){let n={};if(e){let r=e.indexOf("#");r>=0&&(n.hash=e.substr(r),e=e.substr(0,r));let i=e.indexOf("?");i>=0&&(n.search=e.substr(i),e=e.substr(0,i)),e&&(n.pathname=e)}return n}function E2(e,n,r,i){i===void 0&&(i={});let{window:s=document.defaultView,v5Compat:a=!1}=i,u=s.history,c=rr.Pop,h=null,p=v();p==null&&(p=0,u.replaceState(rs({},u.state,{idx:p}),""));function v(){return(u.state||{idx:null}).idx}function m(){c=rr.Pop;let E=v(),w=E==null?null:E-p;p=E,h&&h({action:c,location:S.location,delta:w})}function _(E,w){c=rr.Push;let b=ef(S.location,E,w);p=v()+1;let N=dm(b,p),C=S.createHref(b);try{u.pushState(N,"",C)}catch(P){if(P instanceof DOMException&&P.name==="DataCloneError")throw P;s.location.assign(C)}a&&h&&h({action:c,location:S.location,delta:1})}function y(E,w){c=rr.Replace;let b=ef(S.location,E,w);p=v();let N=dm(b,p),C=S.createHref(b);u.replaceState(N,"",C),a&&h&&h({action:c,location:S.location,delta:0})}function k(E){let w=s.location.origin!=="null"?s.location.origin:s.location.href,b=typeof E=="string"?E:rl(E);return b=b.replace(/ $/,"%20"),$e(w,"No window.location.(origin|href) available to create URL for href: "+b),new URL(b,w)}let S={get action(){return c},get location(){return e(s,u)},listen(E){if(h)throw new Error("A history only accepts one active listener");return s.addEventListener(hm,m),h=E,()=>{s.removeEventListener(hm,m),h=null}},createHref(E){return n(s,E)},createURL:k,encodeLocation(E){let w=k(E);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:_,replace:y,go(E){return u.go(E)}};return S}var pm;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(pm||(pm={}));function T2(e,n,r){return r===void 0&&(r="/"),L2(e,n,r)}function L2(e,n,r,i){let s=typeof n=="string"?Fi(n):n,a=jh(s.pathname||"/",r);if(a==null)return null;let u=Gv(e);M2(u);let c=null;for(let h=0;c==null&&h<u.length;++h){let p=Z2(a);c=U2(u[h],p)}return c}function Gv(e,n,r,i){n===void 0&&(n=[]),r===void 0&&(r=[]),i===void 0&&(i="");let s=(a,u,c)=>{let h={relativePath:c===void 0?a.path||"":c,caseSensitive:a.caseSensitive===!0,childrenIndex:u,route:a};h.relativePath.startsWith("/")&&($e(h.relativePath.startsWith(i),'Absolute route path "'+h.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),h.relativePath=h.relativePath.slice(i.length));let p=hr([i,h.relativePath]),v=r.concat(h);a.children&&a.children.length>0&&($e(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+p+'".')),Gv(a.children,n,v,p)),!(a.path==null&&!a.index)&&n.push({path:p,score:F2(p,a.index),routesMeta:v})};return e.forEach((a,u)=>{var c;if(a.path===""||!((c=a.path)!=null&&c.includes("?")))s(a,u);else for(let h of Kv(a.path))s(a,u,h)}),n}function Kv(e){let n=e.split("/");if(n.length===0)return[];let[r,...i]=n,s=r.endsWith("?"),a=r.replace(/\?$/,"");if(i.length===0)return s?[a,""]:[a];let u=Kv(i.join("/")),c=[];return c.push(...u.map(h=>h===""?a:[a,h].join("/"))),s&&c.push(...u),c.map(h=>e.startsWith("/")&&h===""?"/":h)}function M2(e){e.sort((n,r)=>n.score!==r.score?r.score-n.score:B2(n.routesMeta.map(i=>i.childrenIndex),r.routesMeta.map(i=>i.childrenIndex)))}const z2=/^:[\w-]+$/,O2=3,A2=2,R2=1,I2=10,D2=-2,mm=e=>e==="*";function F2(e,n){let r=e.split("/"),i=r.length;return r.some(mm)&&(i+=D2),n&&(i+=A2),r.filter(s=>!mm(s)).reduce((s,a)=>s+(z2.test(a)?O2:a===""?R2:I2),i)}function B2(e,n){return e.length===n.length&&e.slice(0,-1).every((i,s)=>i===n[s])?e[e.length-1]-n[n.length-1]:0}function U2(e,n,r){let{routesMeta:i}=e,s={},a="/",u=[];for(let c=0;c<i.length;++c){let h=i[c],p=c===i.length-1,v=a==="/"?n:n.slice(a.length)||"/",m=$2({path:h.relativePath,caseSensitive:h.caseSensitive,end:p},v),_=h.route;if(!m)return null;Object.assign(s,m.params),u.push({params:s,pathname:hr([a,m.pathname]),pathnameBase:K2(hr([a,m.pathnameBase])),route:_}),m.pathnameBase!=="/"&&(a=hr([a,m.pathnameBase]))}return u}function $2(e,n){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,i]=H2(e.path,e.caseSensitive,e.end),s=n.match(r);if(!s)return null;let a=s[0],u=a.replace(/(.)\/+$/,"$1"),c=s.slice(1);return{params:i.reduce((p,v,m)=>{let{paramName:_,isOptional:y}=v;if(_==="*"){let S=c[m]||"";u=a.slice(0,a.length-S.length).replace(/(.)\/+$/,"$1")}const k=c[m];return y&&!k?p[_]=void 0:p[_]=(k||"").replace(/%2F/g,"/"),p},{}),pathname:a,pathnameBase:u,pattern:e}}function H2(e,n,r){n===void 0&&(n=!1),r===void 0&&(r=!0),Sh(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let i=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,c,h)=>(i.push({paramName:c,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(i.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,n?void 0:"i"),i]}function Z2(e){try{return e.split("/").map(n=>decodeURIComponent(n).replace(/\//g,"%2F")).join("/")}catch(n){return Sh(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+n+").")),e}}function jh(e,n){if(n==="/")return e;if(!e.toLowerCase().startsWith(n.toLowerCase()))return null;let r=n.endsWith("/")?n.length-1:n.length,i=e.charAt(r);return i&&i!=="/"?null:e.slice(r)||"/"}const W2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,V2=e=>W2.test(e);function q2(e,n){n===void 0&&(n="/");let{pathname:r,search:i="",hash:s=""}=typeof e=="string"?Fi(e):e,a;if(r)if(V2(r))a=r;else{if(r.includes("//")){let u=r;r=r.replace(/\/\/+/g,"/"),Sh(!1,"Pathnames cannot have embedded double slashes - normalizing "+(u+" -> "+r))}r.startsWith("/")?a=gm(r.substring(1),"/"):a=gm(r,n)}else a=n;return{pathname:a,search:Y2(i),hash:X2(s)}}function gm(e,n){let r=n.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function Gu(e,n,r,i){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+n+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function G2(e){return e.filter((n,r)=>r===0||n.route.path&&n.route.path.length>0)}function Yv(e,n){let r=G2(e);return n?r.map((i,s)=>s===r.length-1?i.pathname:i.pathnameBase):r.map(i=>i.pathnameBase)}function Xv(e,n,r,i){i===void 0&&(i=!1);let s;typeof e=="string"?s=Fi(e):(s=rs({},e),$e(!s.pathname||!s.pathname.includes("?"),Gu("?","pathname","search",s)),$e(!s.pathname||!s.pathname.includes("#"),Gu("#","pathname","hash",s)),$e(!s.search||!s.search.includes("#"),Gu("#","search","hash",s)));let a=e===""||s.pathname==="",u=a?"/":s.pathname,c;if(u==null)c=r;else{let m=n.length-1;if(!i&&u.startsWith("..")){let _=u.split("/");for(;_[0]==="..";)_.shift(),m-=1;s.pathname=_.join("/")}c=m>=0?n[m]:"/"}let h=q2(s,c),p=u&&u!=="/"&&u.endsWith("/"),v=(a||u===".")&&r.endsWith("/");return!h.pathname.endsWith("/")&&(p||v)&&(h.pathname+="/"),h}const hr=e=>e.join("/").replace(/\/\/+/g,"/"),K2=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Y2=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,X2=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function Q2(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const Qv=["post","put","patch","delete"];new Set(Qv);const J2=["get",...Qv];new Set(J2);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function is(){return is=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},is.apply(this,arguments)}const Ch=A.createContext(null),eb=A.createContext(null),Wr=A.createContext(null),Ml=A.createContext(null),_r=A.createContext({outlet:null,matches:[],isDataRoute:!1}),Jv=A.createContext(null);function tb(e,n){let{relative:r}=n===void 0?{}:n;vs()||$e(!1);let{basename:i,navigator:s}=A.useContext(Wr),{hash:a,pathname:u,search:c}=n_(e,{relative:r}),h=u;return i!=="/"&&(h=u==="/"?i:hr([i,u])),s.createHref({pathname:h,search:c,hash:a})}function vs(){return A.useContext(Ml)!=null}function _s(){return vs()||$e(!1),A.useContext(Ml).location}function e_(e){A.useContext(Wr).static||A.useLayoutEffect(e)}function gn(){let{isDataRoute:e}=A.useContext(_r);return e?pb():nb()}function nb(){vs()||$e(!1);let e=A.useContext(Ch),{basename:n,future:r,navigator:i}=A.useContext(Wr),{matches:s}=A.useContext(_r),{pathname:a}=_s(),u=JSON.stringify(Yv(s,r.v7_relativeSplatPath)),c=A.useRef(!1);return e_(()=>{c.current=!0}),A.useCallback(function(p,v){if(v===void 0&&(v={}),!c.current)return;if(typeof p=="number"){i.go(p);return}let m=Xv(p,JSON.parse(u),a,v.relative==="path");e==null&&n!=="/"&&(m.pathname=m.pathname==="/"?n:hr([n,m.pathname])),(v.replace?i.replace:i.push)(m,v.state,v)},[n,i,u,a,e])}function t_(){let{matches:e}=A.useContext(_r),n=e[e.length-1];return n?n.params:{}}function n_(e,n){let{relative:r}=n===void 0?{}:n,{future:i}=A.useContext(Wr),{matches:s}=A.useContext(_r),{pathname:a}=_s(),u=JSON.stringify(Yv(s,i.v7_relativeSplatPath));return A.useMemo(()=>Xv(e,JSON.parse(u),a,r==="path"),[e,u,a,r])}function rb(e,n){return ib(e,n)}function ib(e,n,r,i){vs()||$e(!1);let{navigator:s}=A.useContext(Wr),{matches:a}=A.useContext(_r),u=a[a.length-1],c=u?u.params:{};u&&u.pathname;let h=u?u.pathnameBase:"/";u&&u.route;let p=_s(),v;if(n){var m;let E=typeof n=="string"?Fi(n):n;h==="/"||(m=E.pathname)!=null&&m.startsWith(h)||$e(!1),v=E}else v=p;let _=v.pathname||"/",y=_;if(h!=="/"){let E=h.replace(/^\//,"").split("/");y="/"+_.replace(/^\//,"").split("/").slice(E.length).join("/")}let k=T2(e,{pathname:y}),S=ub(k&&k.map(E=>Object.assign({},E,{params:Object.assign({},c,E.params),pathname:hr([h,s.encodeLocation?s.encodeLocation(E.pathname).pathname:E.pathname]),pathnameBase:E.pathnameBase==="/"?h:hr([h,s.encodeLocation?s.encodeLocation(E.pathnameBase).pathname:E.pathnameBase])})),a,r,i);return n&&S?A.createElement(Ml.Provider,{value:{location:is({pathname:"/",search:"",hash:"",state:null,key:"default"},v),navigationType:rr.Pop}},S):S}function ob(){let e=db(),n=Q2(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return A.createElement(A.Fragment,null,A.createElement("h2",null,"Unexpected Application Error!"),A.createElement("h3",{style:{fontStyle:"italic"}},n),r?A.createElement("pre",{style:s},r):null,null)}const sb=A.createElement(ob,null);class ab extends A.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,r){return r.location!==n.location||r.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:r.error,location:r.location,revalidation:n.revalidation||r.revalidation}}componentDidCatch(n,r){console.error("React Router caught the following error during render",n,r)}render(){return this.state.error!==void 0?A.createElement(_r.Provider,{value:this.props.routeContext},A.createElement(Jv.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function lb(e){let{routeContext:n,match:r,children:i}=e,s=A.useContext(Ch);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),A.createElement(_r.Provider,{value:n},i)}function ub(e,n,r,i){var s;if(n===void 0&&(n=[]),r===void 0&&(r=null),i===void 0&&(i=null),e==null){var a;if(!r)return null;if(r.errors)e=r.matches;else if((a=i)!=null&&a.v7_partialHydration&&n.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let u=e,c=(s=r)==null?void 0:s.errors;if(c!=null){let v=u.findIndex(m=>m.route.id&&(c==null?void 0:c[m.route.id])!==void 0);v>=0||$e(!1),u=u.slice(0,Math.min(u.length,v+1))}let h=!1,p=-1;if(r&&i&&i.v7_partialHydration)for(let v=0;v<u.length;v++){let m=u[v];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(p=v),m.route.id){let{loaderData:_,errors:y}=r,k=m.route.loader&&_[m.route.id]===void 0&&(!y||y[m.route.id]===void 0);if(m.route.lazy||k){h=!0,p>=0?u=u.slice(0,p+1):u=[u[0]];break}}}return u.reduceRight((v,m,_)=>{let y,k=!1,S=null,E=null;r&&(y=c&&m.route.id?c[m.route.id]:void 0,S=m.route.errorElement||sb,h&&(p<0&&_===0?(mb("route-fallback"),k=!0,E=null):p===_&&(k=!0,E=m.route.hydrateFallbackElement||null)));let w=n.concat(u.slice(0,_+1)),b=()=>{let N;return y?N=S:k?N=E:m.route.Component?N=A.createElement(m.route.Component,null):m.route.element?N=m.route.element:N=v,A.createElement(lb,{match:m,routeContext:{outlet:v,matches:w,isDataRoute:r!=null},children:N})};return r&&(m.route.ErrorBoundary||m.route.errorElement||_===0)?A.createElement(ab,{location:r.location,revalidation:r.revalidation,component:S,error:y,children:b(),routeContext:{outlet:null,matches:w,isDataRoute:!0}}):b()},null)}var r_=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(r_||{}),i_=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(i_||{});function cb(e){let n=A.useContext(Ch);return n||$e(!1),n}function fb(e){let n=A.useContext(eb);return n||$e(!1),n}function hb(e){let n=A.useContext(_r);return n||$e(!1),n}function o_(e){let n=hb(),r=n.matches[n.matches.length-1];return r.route.id||$e(!1),r.route.id}function db(){var e;let n=A.useContext(Jv),r=fb(),i=o_();return n!==void 0?n:(e=r.errors)==null?void 0:e[i]}function pb(){let{router:e}=cb(r_.UseNavigateStable),n=o_(i_.UseNavigateStable),r=A.useRef(!1);return e_(()=>{r.current=!0}),A.useCallback(function(s,a){a===void 0&&(a={}),r.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,is({fromRouteId:n},a)))},[e,n])}const vm={};function mb(e,n,r){vm[e]||(vm[e]=!0)}function gb(e,n){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function Gn(e){$e(!1)}function vb(e){let{basename:n="/",children:r=null,location:i,navigationType:s=rr.Pop,navigator:a,static:u=!1,future:c}=e;vs()&&$e(!1);let h=n.replace(/^\/*/,"/"),p=A.useMemo(()=>({basename:h,navigator:a,static:u,future:is({v7_relativeSplatPath:!1},c)}),[h,c,a,u]);typeof i=="string"&&(i=Fi(i));let{pathname:v="/",search:m="",hash:_="",state:y=null,key:k="default"}=i,S=A.useMemo(()=>{let E=jh(v,h);return E==null?null:{location:{pathname:E,search:m,hash:_,state:y,key:k},navigationType:s}},[h,v,m,_,y,k,s]);return S==null?null:A.createElement(Wr.Provider,{value:p},A.createElement(Ml.Provider,{children:r,value:S}))}function _b(e){let{children:n,location:r}=e;return rb(tf(n),r)}new Promise(()=>{});function tf(e,n){n===void 0&&(n=[]);let r=[];return A.Children.forEach(e,(i,s)=>{if(!A.isValidElement(i))return;let a=[...n,s];if(i.type===A.Fragment){r.push.apply(r,tf(i.props.children,a));return}i.type!==Gn&&$e(!1),!i.props.index||!i.props.children||$e(!1);let u={id:i.props.id||a.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(u.children=tf(i.props.children,a)),r.push(u)}),r}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function nf(){return nf=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},nf.apply(this,arguments)}function yb(e,n){if(e==null)return{};var r={},i=Object.keys(e),s,a;for(a=0;a<i.length;a++)s=i[a],!(n.indexOf(s)>=0)&&(r[s]=e[s]);return r}function xb(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function wb(e,n){return e.button===0&&(!n||n==="_self")&&!xb(e)}function rf(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((n,r)=>{let i=e[r];return n.concat(Array.isArray(i)?i.map(s=>[r,s]):[[r,i]])},[]))}function bb(e,n){let r=rf(e);return n&&n.forEach((i,s)=>{r.has(s)||n.getAll(s).forEach(a=>{r.append(s,a)})}),r}const kb=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Nb="6";try{window.__reactRouterVersion=Nb}catch{}const Sb="startTransition",_m=g1[Sb];function jb(e){let{basename:n,children:r,future:i,window:s}=e,a=A.useRef();a.current==null&&(a.current=C2({window:s,v5Compat:!0}));let u=a.current,[c,h]=A.useState({action:u.action,location:u.location}),{v7_startTransition:p}=i||{},v=A.useCallback(m=>{p&&_m?_m(()=>h(m)):h(m)},[h,p]);return A.useLayoutEffect(()=>u.listen(v),[u,v]),A.useEffect(()=>gb(i),[i]),A.createElement(vb,{basename:n,children:r,location:c.location,navigationType:c.action,navigator:u,future:i})}const Cb=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Pb=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,wo=A.forwardRef(function(n,r){let{onClick:i,relative:s,reloadDocument:a,replace:u,state:c,target:h,to:p,preventScrollReset:v,viewTransition:m}=n,_=yb(n,kb),{basename:y}=A.useContext(Wr),k,S=!1;if(typeof p=="string"&&Pb.test(p)&&(k=p,Cb))try{let N=new URL(window.location.href),C=p.startsWith("//")?new URL(N.protocol+p):new URL(p),P=jh(C.pathname,y);C.origin===N.origin&&P!=null?p=P+C.search+C.hash:S=!0}catch{}let E=tb(p,{relative:s}),w=Eb(p,{replace:u,state:c,target:h,preventScrollReset:v,relative:s,viewTransition:m});function b(N){i&&i(N),N.defaultPrevented||w(N)}return A.createElement("a",nf({},_,{href:k||E,onClick:S||a?i:b,ref:r,target:h}))});var ym;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(ym||(ym={}));var xm;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(xm||(xm={}));function Eb(e,n){let{target:r,replace:i,state:s,preventScrollReset:a,relative:u,viewTransition:c}=n===void 0?{}:n,h=gn(),p=_s(),v=n_(e,{relative:u});return A.useCallback(m=>{if(wb(m,r)){m.preventDefault();let _=i!==void 0?i:rl(p)===rl(v);h(e,{replace:_,state:s,preventScrollReset:a,relative:u,viewTransition:c})}},[p,h,v,i,s,r,e,a,u,c])}function Tb(e){let n=A.useRef(rf(e)),r=A.useRef(!1),i=_s(),s=A.useMemo(()=>bb(i.search,r.current?null:n.current),[i.search]),a=gn(),u=A.useCallback((c,h)=>{const p=rf(typeof c=="function"?c(s):c);r.current=!0,a("?"+p,h)},[a,s]);return[s,u]}function wm(){const[e,n]=A.useState(""),[r,i]=A.useState([]),[s,a]=A.useState(!1),[u,c]=A.useState(!1),h=A.useRef(null),p=A.useRef(null),v=gn();A.useEffect(()=>{const _=y=>{var k,S,E,w;y.key==="/"&&((k=document.activeElement)==null?void 0:k.tagName)!=="INPUT"&&((S=document.activeElement)==null?void 0:S.tagName)!=="TEXTAREA"&&(y.preventDefault(),(E=h.current)==null||E.focus()),y.key==="Escape"&&document.activeElement===h.current&&((w=h.current)==null||w.blur(),c(!1))};return window.addEventListener("keydown",_),()=>window.removeEventListener("keydown",_)},[]),A.useEffect(()=>{const _=y=>{p.current&&!p.current.contains(y.target)&&c(!1)};return document.addEventListener("mousedown",_),()=>document.removeEventListener("mousedown",_)},[]),A.useEffect(()=>{if(e.trim().length<2){i([]),c(!1);return}a(!0);const _=setTimeout(async()=>{try{const y=await fetch("/api/stories/search",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:e.trim(),limit:5})});if(y.ok){const k=await y.json();i(k.matches||[]),c(!0)}}catch(y){console.error("Search error:",y),i([])}finally{a(!1)}},300);return()=>clearTimeout(_)},[e]);const m=_=>{v(`/story/${_}`),c(!1),n("")};return d.jsx("div",{className:"flex-1 max-w-md",ref:p,children:d.jsxs("div",{className:"relative",children:[d.jsx("input",{ref:h,type:"text",value:e,onChange:_=>n(_.target.value),onFocus:()=>e.trim().length>=2&&c(!0),placeholder:"Search stories...",className:"w-full px-4 py-2 pl-10 pr-12 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent text-sm"}),d.jsx("svg",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),d.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:s?d.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-indigo-500 border-t-transparent rounded-full"}):d.jsx("kbd",{className:"hidden sm:inline-block px-1.5 py-0.5 text-xs font-semibold text-slate-500 bg-slate-100 border border-slate-200 rounded",children:"/"})}),u&&e.trim().length>=2&&d.jsx("div",{className:"absolute top-full mt-2 w-full bg-white border border-slate-200 rounded-lg shadow-lg max-h-96 overflow-y-auto z-50",children:r.length>0?d.jsx("div",{className:"py-2",children:r.map(_=>d.jsx("button",{onClick:()=>m(_.id),className:"w-full px-4 py-3 text-left hover:bg-slate-50 transition-colors border-b border-slate-100 last:border-b-0",children:d.jsxs("div",{className:"flex items-start gap-3",children:[d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("div",{className:"font-medium text-slate-900 text-sm line-clamp-1",children:_.title}),_.description&&d.jsx("div",{className:"text-xs text-slate-600 mt-1 line-clamp-2",children:_.description}),d.jsxs("div",{className:"flex items-center gap-2 mt-1.5",children:[_.category&&d.jsx("span",{className:"text-xs text-slate-500 bg-slate-100 px-2 py-0.5 rounded",children:_.category}),_.artifact_count!==void 0&&d.jsxs("span",{className:"text-xs text-slate-500",children:[_.artifact_count," sources"]}),_.coherence!==void 0&&d.jsxs("span",{className:"text-xs text-indigo-600 font-medium",children:[(_.coherence*100).toFixed(0),"% coherence"]})]})]}),d.jsx("svg",{className:"w-4 h-4 text-slate-400 flex-shrink-0 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})},_.id))}):d.jsxs("div",{className:"px-4 py-6 text-center text-sm text-slate-500",children:['No stories found for "',e,'"']})})]})})}function Lb({user:e}){const[n,r]=A.useState(!1),i=A.useRef(null);A.useEffect(()=>{const a=u=>{i.current&&!i.current.contains(u.target)&&r(!1)};return document.addEventListener("mousedown",a),()=>document.removeEventListener("mousedown",a)},[]);const s=()=>{window.location.href="/api/auth/logout"};return d.jsxs("div",{className:"relative",ref:i,children:[d.jsx("button",{onClick:()=>r(!n),className:"flex items-center gap-2 hover:opacity-80 transition",children:e.picture?d.jsx("img",{src:e.picture,alt:e.name,className:"w-8 h-8 rounded-full border-2 border-white shadow-sm"}):d.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-indigo-500 to-purple-500 flex items-center justify-center text-white font-semibold text-sm",children:e.name.charAt(0).toUpperCase()})}),n&&d.jsxs("div",{className:"absolute right-0 mt-2 w-64 bg-white rounded-lg shadow-xl border border-slate-200 py-2 z-50",children:[d.jsxs("div",{className:"px-4 py-3 border-b border-slate-200",children:[d.jsx("div",{className:"font-semibold text-slate-900",children:e.name}),d.jsx("div",{className:"text-sm text-slate-500",children:e.email}),d.jsxs("div",{className:"text-xs text-indigo-600 mt-1",children:["Credits: ",e.credits]})]}),d.jsxs("div",{className:"py-1",children:[d.jsx("button",{onClick:()=>{r(!1),console.log("Navigate to profile")},className:"w-full text-left px-4 py-2 text-sm text-slate-700 hover:bg-slate-50 transition",children:"Profile Settings"}),d.jsx("button",{onClick:()=>{r(!1),console.log("Navigate to credits")},className:"w-full text-left px-4 py-2 text-sm text-slate-700 hover:bg-slate-50 transition",children:"Manage Credits"})]}),d.jsx("div",{className:"border-t border-slate-200 py-1",children:d.jsx("button",{onClick:s,className:"w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50 transition",children:"Sign Out"})})]})]})}function Ao(){const[e,n]=A.useState(null),[r,i]=A.useState(!0),s=gn();A.useEffect(()=>{a()},[]);const a=async()=>{try{const p=await fetch("/api/auth/status");if(p.ok){const v=await p.json();v.authenticated&&n(v.user)}}catch(p){console.error("Auth check failed:",p)}finally{i(!1)}},u=()=>{window.location.href="/api/auth/login"},c=()=>{alert("Notifications coming soon!")},h=()=>{s("/?share=true")};return d.jsxs("header",{className:"bg-white border-b border-slate-200 sticky top-0 z-50 shadow-sm",children:[d.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:d.jsxs("div",{className:"flex justify-between items-center h-16",children:[d.jsxs("div",{className:"flex items-center gap-6 flex-1",children:[d.jsx(wo,{to:"/",className:"text-2xl font-bold bg-gradient-to-r from-indigo-600 to-purple-600 bg-clip-text text-transparent whitespace-nowrap",children:" HERE"}),d.jsx("div",{className:"hidden md:block flex-1 max-w-md",children:d.jsx(wm,{})})]}),d.jsx("div",{className:"flex items-center gap-3",children:r?d.jsx("div",{className:"text-sm text-slate-500",children:"Loading..."}):e?d.jsxs(d.Fragment,{children:[d.jsx("button",{onClick:h,className:"p-2 rounded-lg hover:bg-slate-100 transition text-slate-600",title:"Create new content",children:d.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),d.jsx(wo,{to:"/archive",className:"p-2 rounded-lg hover:bg-slate-100 transition text-slate-600",title:"My Archive",children:d.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4"})})}),d.jsx(wo,{to:"/graph",className:"p-2 rounded-lg hover:bg-slate-100 transition text-slate-600",title:"Story Graph",children:d.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})}),d.jsx(wo,{to:"/map",className:"p-2 rounded-lg hover:bg-slate-100 transition text-slate-600",title:"News Map",children:d.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"})})}),d.jsxs("button",{onClick:c,className:"p-2 rounded-lg hover:bg-slate-100 transition text-slate-600 relative",title:"Notifications",children:[d.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),d.jsx("span",{className:"absolute top-1 right-1 w-2 h-2 bg-red-500 rounded-full"})]}),d.jsxs("div",{className:"flex items-center gap-1.5 px-3 py-1.5 bg-gradient-to-r from-amber-50 to-yellow-50 border border-amber-200 rounded-lg",children:[d.jsx("svg",{className:"w-4 h-4 text-amber-600",fill:"currentColor",viewBox:"0 0 20 20",children:d.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})}),d.jsx("span",{className:"text-sm font-bold text-amber-700",children:e.credits})]}),d.jsx(Lb,{user:e})]}):d.jsx("button",{onClick:u,className:"bg-gradient-to-r from-indigo-600 to-purple-600 text-white px-6 py-2 rounded-lg font-medium hover:opacity-90 transition",children:"Sign in with Google"})})]})}),d.jsx("div",{className:"md:hidden px-4 pb-3",children:d.jsx(wm,{})})]})}function Mi(e){if(!e)return{absolute:"Date unknown",relative:"unknown",reliable:!1,fullDateTime:""};try{const n=new Date(e);if(isNaN(n.getTime()))return{absolute:"Date unknown",relative:"unknown",reliable:!1,fullDateTime:""};const r=new Date,i=r.getTime()-n.getTime(),s=Math.floor(i/6e4),a=Math.floor(s/60),u=Math.floor(a/24),c=new Date;c.setHours(0,0,0,0);const h=new Date(n);h.setHours(0,0,0,0);const p=Math.floor((c.getTime()-h.getTime())/(1e3*60*60*24));let v="",m=!0;i<0?(v=n.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),m=!1):u>730?(v=n.toLocaleDateString("en-US",{month:"short",year:"numeric"}),m=!1):p===0?v=n.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}):p===1?v="Yesterday "+n.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}):p<7?v=n.toLocaleDateString("en-US",{weekday:"short",hour:"numeric",minute:"2-digit",hour12:!0}):n.getFullYear()===r.getFullYear()?v=n.toLocaleDateString("en-US",{month:"short",day:"numeric"}):v=n.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"});let _="";if(i<0)_="in the future";else if(u>365){const k=Math.floor(u/365);_=`${k} year${k>1?"s":""} ago`}else if(u>30){const k=Math.floor(u/30);_=`${k} month${k>1?"s":""} ago`}else u>0?_=`${u} day${u>1?"s":""} ago`:a>0?_=`${a} hour${a>1?"s":""} ago`:s>0?_=`${s} minute${s>1?"s":""} ago`:_="just now";const y=n.toLocaleString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0});return{absolute:v,relative:_,reliable:m,fullDateTime:y}}catch{return{absolute:"Date unknown",relative:"unknown",reliable:!1,fullDateTime:""}}}function Mb({story:e,onClick:n}){const r=Mi(e.last_updated||e.created_at);return d.jsx("div",{onClick:n,className:"border border-slate-200 rounded-xl p-6 hover:shadow-lg transition cursor-pointer bg-white",children:d.jsxs("div",{className:"flex gap-4",children:[e.cover_image&&d.jsx("img",{src:e.cover_image,alt:e.title,className:"w-24 h-24 rounded-lg object-cover flex-shrink-0"}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("h3",{className:"text-xl font-semibold text-slate-900 mb-2 line-clamp-2",children:e.title}),e.description&&d.jsx("p",{className:"text-sm text-slate-600 mb-3 line-clamp-2",children:e.description}),d.jsxs("div",{className:"flex items-center gap-4 text-sm flex-wrap",children:[e.coherence!==void 0&&d.jsxs("div",{className:"flex items-center gap-1",children:[d.jsx("span",{className:"text-slate-500",children:"Coherence:"}),d.jsxs("span",{className:"font-semibold text-indigo-600",children:[(e.coherence*100).toFixed(0),"%"]})]}),e.claim_count!==void 0&&d.jsxs("div",{className:"flex items-center gap-1",children:[d.jsx("span",{className:"text-slate-500",children:"Claims:"}),d.jsx("span",{className:"font-semibold text-slate-700",children:e.claim_count})]}),r.absolute!=="Date unknown"&&d.jsxs("div",{className:"flex items-center gap-1 cursor-help",title:r.fullDateTime,children:[d.jsx("span",{className:"text-slate-400",children:""}),d.jsx("span",{className:"text-slate-500",children:r.relative})]})]})]})]})})}function bm(){return d.jsx("div",{className:"border border-slate-200 rounded-xl p-6 animate-pulse",children:d.jsxs("div",{className:"flex gap-4",children:[d.jsx("div",{className:"w-24 h-24 bg-slate-200 rounded-lg flex-shrink-0"}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("div",{className:"h-6 bg-slate-200 rounded w-3/4 mb-3"}),d.jsxs("div",{className:"space-y-2 mb-3",children:[d.jsx("div",{className:"h-4 bg-slate-200 rounded w-full"}),d.jsx("div",{className:"h-4 bg-slate-200 rounded w-5/6"})]}),d.jsxs("div",{className:"flex gap-4",children:[d.jsx("div",{className:"h-4 bg-slate-200 rounded w-24"}),d.jsx("div",{className:"h-4 bg-slate-200 rounded w-20"})]})]})]})})}function Ph({url:e}){const[n,r]=A.useState(null),[i,s]=A.useState(!0),[a,u]=A.useState(!1);A.useEffect(()=>{c()},[e]);const c=async()=>{try{s(!0),u(!1);const p=await fetch("/api/preview",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:e})});if(!p.ok){u(!0),s(!1);return}const v=await p.json();r(v),v.status==="fetching"?h(v.task_id):((v.status==="failed"||v.status==="timeout")&&u(!0),s(!1))}catch(p){console.error("Failed to fetch URL metadata:",p),u(!0),s(!1)}},h=async p=>{let v=0;const m=10,_=2e3,y=async()=>{try{const k=await fetch(`/api/preview/status/${p}`);if(k.ok){const S=await k.json();if(r(S),S.status==="completed"){s(!1);return}if(S.status==="failed"){u(!0),s(!1);return}}v++,v<m?setTimeout(y,_):s(!1)}catch(k){console.error("Polling error:",k),s(!1)}};setTimeout(y,_)};return i?d.jsxs("div",{className:"mt-2 border border-slate-200 rounded-lg p-3 bg-slate-50 animate-pulse",children:[d.jsx("div",{className:"h-4 bg-slate-200 rounded w-3/4 mb-2"}),d.jsx("div",{className:"h-3 bg-slate-200 rounded w-1/2"})]}):a||!n?d.jsxs("a",{href:e,target:"_blank",rel:"noopener noreferrer",className:"mt-2 flex items-center gap-2 text-sm text-indigo-600 hover:text-indigo-800 underline",children:[d.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})}),new URL(e).hostname]}):d.jsxs("a",{href:e,target:"_blank",rel:"noopener noreferrer",className:"mt-2 flex gap-3 border border-slate-200 rounded-lg overflow-hidden bg-white hover:border-indigo-300 hover:shadow-md transition-all p-3",children:[n.image&&d.jsx("img",{src:n.image,alt:n.title||e,className:"w-20 h-20 rounded object-cover flex-shrink-0",onError:p=>{p.currentTarget.style.display="none"}}),d.jsxs("div",{className:"flex-1 min-w-0",children:[n.site_name&&d.jsx("div",{className:"text-xs text-slate-500 mb-1",children:n.site_name}),d.jsx("div",{className:"font-semibold text-slate-900 text-sm line-clamp-2 mb-1",children:n.title||e}),n.description&&d.jsx("div",{className:"text-xs text-slate-600 line-clamp-2 mb-1",children:n.description}),d.jsxs("div",{className:"text-xs text-indigo-600 flex items-center gap-1",children:[d.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})}),new URL(e).hostname]})]})]})}function Eh(e){const n=/(https?:\/\/[^\s]+)/gi,r=e.match(n);return r?r.map(i=>i.replace(/[.,;:!?)]$/,"")):[]}function zb({onSubmit:e,onCancel:n}){const[r,i]=A.useState(""),[s,a]=A.useState(!1),u=A.useRef(null),[c,h]=A.useState([]);A.useEffect(()=>{u.current&&u.current.focus()},[]),A.useEffect(()=>{const y=Eh(r);h(y)},[r]);const p=async()=>{const y=r.trim();if(!(!y||s))try{a(!0),await e(y,c),i("")}catch(k){console.error("Failed to submit event:",k),alert(k instanceof Error?k.message:"Failed to submit event")}finally{a(!1)}},v=y=>{i(y.target.value);const k=y.target;k.style.height="auto";const S=Math.max(k.scrollHeight,120);k.style.height=`${S}px`},m=r.length,_=1e3;return d.jsxs("div",{className:"bg-white rounded-xl shadow-lg border-2 border-indigo-200 p-6 mb-6",children:[d.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:" What event do you want to report?"}),d.jsx("textarea",{ref:u,value:r,onChange:v,placeholder:`Describe the event and paste any relevant URLs...

Example:
New data suggests climate tipping point may be closer than expected
https://example.com/article
https://example.com/research-paper`,disabled:s,maxLength:_,className:"w-full p-3 border-2 border-slate-300 rounded-lg focus:outline-none focus:border-indigo-500 resize-none text-sm overflow-hidden disabled:bg-slate-100",style:{minHeight:"120px"}}),d.jsxs("div",{className:"flex items-center justify-between mt-1 mb-3",children:[d.jsxs("span",{className:`text-xs ${m>900?"text-red-600 font-semibold":m>800?"text-amber-600":"text-slate-500"}`,children:[m," / ",_]}),c.length>0&&d.jsxs("span",{className:"text-xs text-indigo-600",children:[" ",c.length," URL",c.length>1?"s":""," detected"]})]}),d.jsx("div",{className:"p-3 bg-blue-50 rounded-lg border border-blue-200 mb-3",children:d.jsxs("p",{className:"text-xs text-blue-800",children:[d.jsx("strong",{children:" Tips:"}),"  ","Describe the event clearly","  ","Paste URLs directly (we'll extract them automatically)","  ","Include source links for verification"]})}),c.length>0&&d.jsx("div",{className:"space-y-2 mb-3",children:c.map((y,k)=>d.jsx(Ph,{url:y},k))}),d.jsxs("div",{className:"flex gap-2 justify-between items-center",children:[d.jsx("div",{className:"text-sm text-slate-600",children:"Submission is free"}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx("button",{onClick:n,disabled:s,className:"px-4 py-2 text-sm border border-slate-300 rounded-lg hover:bg-slate-50 transition-colors disabled:opacity-50",children:"Cancel"}),d.jsx("button",{onClick:p,disabled:s||!r.trim(),className:"px-4 py-2 text-sm bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:s?"Submitting...":"Submit Event"})]})]})]})}function s_({submission:e}){var h,p,v;const[n,r]=A.useState(!1),i=Mi(e.created_at),s=e.urls?e.urls.split(",").filter(m=>m.trim()):[],u=(()=>{switch(e.status){case"pending":return{icon:"",text:"queued",color:"text-slate-600",borderColor:"border-slate-300"};case"extracting":case"processing":return{icon:"",text:"processing",color:"text-blue-600",borderColor:"border-blue-300"};case"failed":return{icon:"",text:"failed",color:"text-red-600",borderColor:"border-red-300"};case"blocked":return{icon:"",text:"blocked",color:"text-amber-600",borderColor:"border-amber-300"};case"completed":if(e.story_match){const m=e.story_match.is_new,_=Math.round(e.story_match.match_score*100);return{icon:"",text:m?"created new story":`merged (${_}% match)`,color:"text-green-600",borderColor:"border-green-300",storyLink:{id:e.story_match.story_id,title:e.story_match.matched_story_title}}}return{icon:"",text:"completed",color:"text-green-600",borderColor:"border-green-300"};default:return{icon:"",text:"processing",color:"text-slate-600",borderColor:"border-slate-300"}}})(),c=s.length>0?new URL(s[0]).hostname:null;return n?d.jsxs("div",{className:`rounded-lg border-2 ${u.borderColor} p-4 bg-slate-50 transition-all`,children:[d.jsxs("div",{className:"flex items-center justify-between mb-3",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[e.user_picture?d.jsx("img",{src:e.user_picture,alt:e.user_name,className:"w-8 h-8 rounded-full flex-shrink-0"}):d.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-indigo-400 to-purple-400 flex items-center justify-center text-white text-sm font-semibold flex-shrink-0",children:e.user_name.charAt(0).toUpperCase()}),d.jsxs("div",{children:[d.jsx("div",{className:"font-semibold text-slate-900",children:e.user_name}),d.jsx("div",{className:"text-xs text-slate-500",children:i.absolute})]})]}),d.jsx("button",{onClick:()=>r(!1),className:"text-slate-400 hover:text-slate-600 text-lg font-bold",children:""})]}),d.jsxs("div",{className:`inline-flex items-center gap-2 px-3 py-1 rounded-full ${u.color} bg-white border ${u.borderColor} text-sm font-medium mb-3`,children:[d.jsx("span",{children:u.icon}),d.jsx("span",{children:u.text})]}),(e.status==="extracting"||e.status==="processing"||e.status==="completed")&&e.current_stage&&d.jsx("div",{className:"mb-4 p-3 bg-white rounded-lg border border-slate-200",children:d.jsx("div",{className:"flex items-center justify-between gap-2",children:[{id:"extraction",label:"Metadata",icon:""},{id:"cleaning",label:"Metadata+",icon:""},{id:"content",label:"Content",icon:""},{id:"semantization",label:"Semantic",icon:""}].map((m,_,y)=>{const k=y.findIndex(w=>w.id===e.current_stage),S=_<k||e.status==="completed",E=_===k&&(e.status==="extracting"||e.status==="processing");return d.jsxs(Rr.Fragment,{children:[d.jsxs("div",{className:"flex flex-col items-center gap-1 flex-1",children:[d.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center text-lg font-semibold transition-all ${S?"bg-green-500 text-white":E?"bg-blue-500 text-white animate-pulse":"bg-slate-200 text-slate-400"}`,children:m.icon}),d.jsx("div",{className:`text-xs font-medium text-center ${S?"text-green-600":E?"text-blue-600 font-semibold":"text-slate-400"}`,children:m.label})]}),_<y.length-1&&d.jsx("div",{className:"text-slate-300 text-lg mb-6",children:""})]},m.id)})})}),e.content&&d.jsx("p",{className:"text-slate-700 text-sm leading-relaxed mb-3 whitespace-pre-wrap",children:e.content}),s.length>0&&d.jsx("div",{className:"space-y-2 mt-3",children:s.map((m,_)=>d.jsx("div",{children:e.preview_meta?d.jsxs("a",{href:m,target:"_blank",rel:"noopener noreferrer",className:"mt-2 flex gap-3 border border-slate-200 rounded-lg overflow-hidden bg-white hover:border-indigo-300 hover:shadow-md transition-all p-3",children:[e.preview_meta.thumbnail_url&&d.jsx("img",{src:e.preview_meta.thumbnail_url,alt:e.preview_meta.title||m,className:"w-20 h-20 rounded object-cover flex-shrink-0",onError:y=>{y.currentTarget.style.display="none"}}),d.jsxs("div",{className:"flex-1 min-w-0",children:[e.preview_meta.site_name&&d.jsx("div",{className:"text-xs text-slate-500 mb-1",children:e.preview_meta.site_name}),d.jsx("div",{className:"font-semibold text-slate-900 text-sm line-clamp-2 mb-1",children:e.preview_meta.title||m}),e.preview_meta.description&&d.jsx("div",{className:"text-xs text-slate-600 line-clamp-2 mb-1",children:e.preview_meta.description}),d.jsxs("div",{className:"text-xs text-indigo-600 flex items-center gap-1",children:[d.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})}),new URL(m).hostname]})]})]}):d.jsxs("a",{href:m,target:"_blank",rel:"noopener noreferrer",className:"mt-2 flex items-center gap-2 text-sm text-indigo-600 hover:text-indigo-800 underline",children:[d.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})}),new URL(m).hostname]})},_))}),u.storyLink&&d.jsxs("a",{href:`/story/${u.storyLink.id}`,className:"mt-3 inline-flex items-center gap-2 px-4 py-2 bg-indigo-600 text-white font-semibold rounded-lg hover:bg-indigo-700 transition-colors text-sm",children:[d.jsxs("span",{children:["View Story: ",u.storyLink.title]}),d.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]}),(e.task_id||e.current_stage)&&d.jsxs("div",{className:"mt-4 grid grid-cols-2 gap-3 text-xs",children:[e.task_id&&d.jsxs("div",{className:"bg-white p-2 rounded border border-slate-200",children:[d.jsx("div",{className:"text-slate-500 uppercase font-medium mb-1",children:"Task ID"}),d.jsxs("div",{className:"text-slate-700 font-mono",children:[e.task_id.substring(0,8),"..."]})]}),e.current_stage&&d.jsxs("div",{className:"bg-white p-2 rounded border border-slate-200",children:[d.jsx("div",{className:"text-slate-500 uppercase font-medium mb-1",children:"Current Stage"}),d.jsx("div",{className:"text-slate-700",children:e.current_stage})]}),((h=e.result)==null?void 0:h.word_count)&&d.jsxs("div",{className:"bg-white p-2 rounded border border-slate-200",children:[d.jsx("div",{className:"text-slate-500 uppercase font-medium mb-1",children:"Word Count"}),d.jsx("div",{className:"text-slate-700",children:e.result.word_count})]}),((p=e.result)==null?void 0:p.reading_time_minutes)&&d.jsxs("div",{className:"bg-white p-2 rounded border border-slate-200",children:[d.jsx("div",{className:"text-slate-500 uppercase font-medium mb-1",children:"Reading Time"}),d.jsxs("div",{className:"text-slate-700",children:[e.result.reading_time_minutes," min"]})]})]}),((v=e.result)==null?void 0:v.screenshot_url)&&d.jsxs("div",{className:"mt-4",children:[d.jsx("h4",{className:"font-semibold text-slate-900 mb-2 text-sm",children:"Screenshot"}),d.jsx("img",{src:e.result.screenshot_url,alt:"Page screenshot",className:"w-full max-w-2xl rounded-lg shadow-md border border-slate-200"})]}),e.status==="completed"&&e.result&&d.jsxs("div",{className:"mt-4 bg-white p-4 rounded-lg border border-slate-200",children:[d.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-2",children:e.result.title||"Untitled"}),e.result.author&&d.jsxs("p",{className:"text-sm text-slate-600 mb-1",children:[d.jsx("strong",{children:"Author:"})," ",e.result.author]}),e.result.publish_date&&d.jsxs("p",{className:"text-sm text-slate-600 mb-2",children:[d.jsx("strong",{children:"Published:"})," ",new Date(e.result.publish_date).toLocaleDateString()]}),e.result.meta_description&&d.jsx("p",{className:"text-sm text-slate-700 leading-relaxed mb-2",children:e.result.meta_description}),e.result.content_text&&d.jsxs("details",{className:"mt-3",children:[d.jsxs("summary",{className:"cursor-pointer font-semibold text-indigo-600 hover:text-indigo-800 text-sm",children:["Show Full Content (",e.result.word_count||0," words)"]}),d.jsxs("div",{className:"mt-2 p-3 bg-slate-50 rounded text-sm text-slate-700 leading-relaxed max-h-96 overflow-y-auto whitespace-pre-wrap",children:[e.result.content_text.substring(0,5e3),e.result.content_text.length>5e3&&"..."]})]}),e.result.language&&d.jsxs("div",{className:"flex flex-wrap gap-2 mt-3",children:[d.jsxs("span",{className:"px-2 py-1 bg-slate-100 text-slate-700 rounded text-xs",children:["Language: ",e.result.language]}),e.result.word_count&&d.jsxs("span",{className:"px-2 py-1 bg-slate-100 text-slate-700 rounded text-xs",children:[" ",e.result.word_count," words"]}),e.result.reading_time_minutes&&d.jsxs("span",{className:"px-2 py-1 bg-slate-100 text-slate-700 rounded text-xs",children:[" ",e.result.reading_time_minutes," min read"]})]})]}),e.semantic_data&&(e.semantic_data.claims||e.semantic_data.entities)&&d.jsxs("div",{className:"mt-4 bg-white p-4 rounded-lg border border-slate-200",children:[d.jsx("h4",{className:"font-semibold text-slate-900 mb-3 flex items-center gap-2 text-sm",children:" Semantic Analysis"}),e.semantic_data.claims&&e.semantic_data.claims.length>0&&d.jsxs("details",{open:!0,className:"mb-3",children:[d.jsxs("summary",{className:"cursor-pointer font-medium text-indigo-600 hover:text-indigo-800 text-sm mb-2",children:["Claims (",e.semantic_data.claims.length,")"]}),d.jsx("div",{className:"space-y-2",children:e.semantic_data.claims.slice(0,10).map((m,_)=>d.jsxs("div",{className:"p-2 bg-slate-50 border-l-2 border-indigo-500 rounded text-sm",children:[d.jsx("div",{className:"font-medium text-slate-900",children:m.text||m.claim_text||""}),m.claim_type&&d.jsxs("div",{className:"text-xs text-slate-500 mt-1",children:["Type: ",m.claim_type]})]},_))})]}),e.semantic_data.entities&&d.jsxs("details",{className:"mb-2",children:[d.jsx("summary",{className:"cursor-pointer font-medium text-indigo-600 hover:text-indigo-800 text-sm mb-2",children:"Entities"}),d.jsxs("div",{className:"space-y-2",children:[e.semantic_data.entities.people&&e.semantic_data.entities.people.length>0&&d.jsxs("div",{children:[d.jsx("strong",{className:"text-xs text-slate-600",children:"People:"}),d.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:e.semantic_data.entities.people.slice(0,10).map((m,_)=>d.jsx("span",{className:"px-2 py-1 bg-blue-50 text-blue-700 rounded text-xs",children:typeof m=="string"?m:m.name},_))})]}),e.semantic_data.entities.organizations&&e.semantic_data.entities.organizations.length>0&&d.jsxs("div",{children:[d.jsx("strong",{className:"text-xs text-slate-600",children:"Organizations:"}),d.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:e.semantic_data.entities.organizations.slice(0,10).map((m,_)=>d.jsx("span",{className:"px-2 py-1 bg-purple-50 text-purple-700 rounded text-xs",children:typeof m=="string"?m:m.name},_))})]}),e.semantic_data.entities.locations&&e.semantic_data.entities.locations.length>0&&d.jsxs("div",{children:[d.jsx("strong",{className:"text-xs text-slate-600",children:"Locations:"}),d.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:e.semantic_data.entities.locations.slice(0,10).map((m,_)=>d.jsx("span",{className:"px-2 py-1 bg-green-50 text-green-700 rounded text-xs",children:typeof m=="string"?m:m.name},_))})]})]})]})]}),e.status==="failed"&&e.error&&d.jsxs("div",{className:"mt-4 p-3 bg-red-50 border-l-4 border-red-500 rounded text-sm",children:[d.jsx("strong",{className:"text-red-900",children:"Error:"}),d.jsx("p",{className:"text-red-700 mt-1",children:e.error})]}),e.status==="blocked"&&e.block_reason&&d.jsxs("div",{className:"mt-4 p-3 bg-amber-50 border-l-4 border-amber-500 rounded text-sm",children:[d.jsx("strong",{className:"text-amber-900",children:"Blocked:"}),d.jsx("p",{className:"text-amber-700 mt-1",children:e.block_reason})]})]}):d.jsxs("div",{onClick:()=>r(!0),className:`py-2 px-3 bg-slate-50 border-l-2 ${u.borderColor} text-xs text-slate-500 cursor-pointer hover:bg-slate-100 transition-colors flex items-center gap-2`,children:[e.user_picture?d.jsx("img",{src:e.user_picture,alt:e.user_name,className:"w-6 h-6 rounded-full flex-shrink-0"}):d.jsx("div",{className:"w-6 h-6 rounded-full bg-gradient-to-br from-indigo-400 to-purple-400 flex items-center justify-center text-white text-xs font-semibold flex-shrink-0",children:e.user_name.charAt(0).toUpperCase()}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("span",{className:"font-medium text-slate-600",children:e.user_name})," ",d.jsxs("span",{className:u.color,children:["(",u.icon," ",u.text,")"]})," ","at ",i.absolute,c&&d.jsxs(d.Fragment,{children:[" "," ",d.jsx("span",{className:"text-slate-600",children:c})]}),u.storyLink&&d.jsxs(d.Fragment,{children:[" "," ",d.jsx("a",{href:`/story/${u.storyLink.id}`,className:"text-indigo-600 hover:text-indigo-800 underline",onClick:m=>m.stopPropagation(),children:u.storyLink.title})]})]}),d.jsx("span",{className:"text-slate-400 flex-shrink-0",children:""})]})}function Ob({submissions:e,onUpdate:n,enabled:r}){const i=A.useRef(null);A.useEffect(()=>{if(!e.some(u=>u.status==="pending"||u.status==="extracting")){i.current&&(clearInterval(i.current),i.current=null);return}const a=async()=>{try{const u=await fetch("/api/events/mine",{credentials:"include"});if(u.ok){const c=await u.json();n(c)}}catch(u){console.error("Failed to poll submission status:",u)}};return a(),i.current=setInterval(a,1e3),()=>{i.current&&(clearInterval(i.current),i.current=null)}},[e,r,n])}function Ab(){const[e,n]=A.useState([]),[r,i]=A.useState(!0),[s,a]=A.useState(!1),[u,c]=A.useState(null),[h,p]=A.useState(!0),[v,m]=A.useState(0),[_,y]=A.useState(!1),[k,S]=A.useState([]),[E,w]=A.useState([]),[b,N]=A.useState(0),[C,P]=A.useState(0),T=gn(),[M,z]=Tb(),D=12,F=1e3,V=A.useRef(null),H=A.useRef(null),Q=A.useCallback(te=>{S(te)},[]);Ob({submissions:k,onUpdate:Q,enabled:!0}),A.useEffect(()=>(R(),ee(!0),fe(),Z(),window.addEventListener("scroll",K),()=>{J(),window.removeEventListener("scroll",K)}),[]),A.useEffect(()=>{M.get("share")==="true"&&(y(!0),M.delete("share"),z(M,{replace:!0}))},[M,z]),A.useEffect(()=>{C!==b&&ee(!0)},[C]),A.useEffect(()=>{const te=[...e.map(oe=>({type:"story",data:oe,timestamp:oe.last_updated||oe.created_at||""})),...k.map(oe=>({type:"submission",data:oe,timestamp:oe.created_at}))];te.sort((oe,Re)=>{const He=new Date(oe.timestamp).getTime();return new Date(Re.timestamp).getTime()-He}),w(te)},[e,k]);const R=()=>{const te=localStorage.getItem("story_min_coherence");if(te){const oe=parseFloat(te);N(oe),P(oe)}},G=te=>{localStorage.setItem("story_min_coherence",te.toString())},W=te=>{const oe=parseFloat(te.target.value);N(oe),H.current&&clearTimeout(H.current),H.current=setTimeout(()=>{P(oe),G(oe)},500)},ee=async(te=!1)=>{try{te&&(i(!0),n([]));const oe=new URLSearchParams({limit:D.toString(),min_coherence:C.toString()}),Re=await fetch(`/api/coherence/feed?${oe}`);if(!Re.ok)throw new Error(`HTTP ${Re.status}: ${Re.statusText}`);const He=await Re.json();n(He.stories||[]),p((He.stories||[]).length===D)}catch(oe){c(oe instanceof Error?oe.message:"Failed to load feed")}finally{i(!1)}},U=async()=>{if(!(s||!h)){a(!0);try{const te=new URLSearchParams({limit:D.toString(),offset:e.length.toString(),min_coherence:C.toString()}),oe=await fetch(`/api/coherence/feed?${te}`);if(!oe.ok)throw new Error(`HTTP ${oe.status}: ${oe.statusText}`);const He=(await oe.json()).stories||[];n([...e,...He]),p(He.length===D)}catch(te){c(te instanceof Error?te.message:"Failed to load more stories")}finally{a(!1)}}},K=()=>{const te=document.documentElement.scrollHeight,oe=document.documentElement.scrollTop,Re=document.documentElement.clientHeight;te-oe-Re<F&&U()},Z=()=>{V.current=setInterval(()=>{re()},3e4)},J=()=>{V.current&&clearInterval(V.current)},re=async()=>{try{const te=new URLSearchParams({limit:D.toString(),min_coherence:C.toString()}),oe=await fetch(`/api/coherence/feed?${te}`);if(!oe.ok)return;const He=(await oe.json()).stories||[];if(He.length>0&&e.length>0){const Un=He[0].story_id;if(!e.some($n=>$n.story_id===Un)){const $n=He.findIndex(Zl=>e.some(ks=>ks.story_id===Zl.story_id));m($n===-1?He.length:$n),setTimeout(()=>{m(0)},5e3)}}}catch(te){console.error("Background refresh failed:",te)}},he=()=>{m(0),ee(!0)},ue=te=>{T(`/story/${te}`)},fe=async()=>{try{const te=await fetch("/api/events/mine",{credentials:"include"});if(te.ok){const oe=await te.json();console.log("Submissions data:",oe),oe.length>0&&console.log("First submission user_picture:",oe[0].user_picture),S(oe)}}catch(te){console.error("Failed to load pending submissions:",te)}},le=async(te,oe)=>{const Re=await fetch("/api/events",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({content:te,urls:oe.join(",")})});if(!Re.ok){const Un=await Re.json();throw new Error(Un.detail||"Failed to submit event")}const He=await Re.json();S([He,...k]),y(!1)};return d.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-indigo-500 via-purple-500 to-pink-500",children:[d.jsx(Ao,{}),v>0&&d.jsxs("div",{onClick:he,className:"fixed top-20 left-1/2 transform -translate-x-1/2 bg-gradient-to-r from-indigo-600 to-purple-600 text-white px-6 py-3 rounded-lg shadow-lg cursor-pointer z-50 animate-slideDown",children:[v," new ",v===1?"story":"stories"," available - Click to refresh"]}),d.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:d.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[!_&&d.jsx("button",{onClick:()=>y(!0),className:"w-full mb-6 p-4 border-2 border-dashed border-indigo-300 rounded-xl hover:border-indigo-500 hover:bg-indigo-50 transition-all group cursor-pointer",children:d.jsxs("div",{className:"flex items-center gap-3 text-slate-600 group-hover:text-indigo-600",children:[d.jsx("div",{className:"w-10 h-10 rounded-full bg-indigo-100 group-hover:bg-indigo-200 flex items-center justify-center text-2xl transition-colors",children:"+"}),d.jsx("span",{className:"text-base font-medium",children:"Report an event or breaking news"})]})}),_&&d.jsx(zb,{onSubmit:le,onCancel:()=>y(!1)}),d.jsxs("div",{className:"mb-6 pb-6 border-b border-slate-200",children:[d.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:["Minimum Coherence: ",(b*100).toFixed(0),"%"]}),d.jsx("input",{type:"range",min:"0",max:"1",step:"0.01",value:b,onChange:W,className:"w-full h-2 bg-slate-200 rounded-lg appearance-none cursor-pointer accent-indigo-600"}),d.jsxs("div",{className:"flex justify-between text-xs text-slate-500 mt-1",children:[d.jsx("span",{children:"0%"}),d.jsx("span",{children:"50%"}),d.jsx("span",{children:"100%"})]})]}),u&&d.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg mb-4",children:["Error: ",u]}),r?d.jsx("div",{className:"grid gap-6",children:Array(D).fill(0).map((te,oe)=>d.jsx(bm,{},oe))}):E.length===0?d.jsx("div",{className:"text-center py-16",children:d.jsx("div",{className:"text-lg text-slate-600",children:"No stories or submissions found"})}):d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"grid gap-6",children:E.map(te=>te.type==="story"?d.jsx(Mb,{story:te.data,onClick:()=>te.data.story_id&&ue(te.data.story_id)},te.data.story_id):d.jsx(s_,{submission:te.data},te.data.id))}),s&&d.jsx("div",{className:"mt-6 grid gap-6",children:Array(3).fill(0).map((te,oe)=>d.jsx(bm,{},oe))}),!h&&e.length>0&&d.jsx("div",{className:"text-center py-8 text-slate-400 text-sm italic",children:"No more stories"})]})]})})]})}function a_({comment:e,allComments:n,depth:r,onReply:i,replyingTo:s,replyInput:a,onReplyInputChange:u,onSubmitReply:c,onCancelReply:h,submitting:p}){const v=n.filter(k=>k.parent_comment_id===e.id),m=(s==null?void 0:s.id)===e.id,_=Eh(e.text),y=Mi(e.created_at);return d.jsxs("div",{className:`${r>0?"ml-8 pl-4 border-l-2 border-slate-200":""}`,children:[d.jsxs("div",{className:"flex gap-3 py-3",children:[e.user_picture?d.jsx("img",{src:e.user_picture,alt:e.user_name,className:"w-10 h-10 rounded-full flex-shrink-0"}):d.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-indigo-400 to-purple-400 flex items-center justify-center text-white font-semibold flex-shrink-0",children:e.user_name.charAt(0).toUpperCase()}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[d.jsx("span",{className:"font-semibold text-slate-900",children:e.user_name}),d.jsx("span",{className:"text-xs text-slate-400 cursor-help",title:y.fullDateTime,children:y.relative})]}),d.jsx("p",{className:"text-slate-700 leading-relaxed whitespace-pre-wrap text-sm mb-2",children:e.text}),_.length>0&&d.jsxs("div",{className:"space-y-2 mb-2",children:[_.slice(0,2).map((k,S)=>d.jsx(Ph,{url:k},S)),_.length>2&&d.jsxs("div",{className:"text-xs text-slate-500",children:["+",_.length-2," more link",_.length-2>1?"s":""]})]}),d.jsxs("button",{onClick:()=>i(e.id,e.user_name),className:"text-xs text-indigo-600 hover:text-indigo-800 font-medium flex items-center gap-1",children:[d.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h10a8 8 0 018 8v2M3 10l6 6m-6-6l6-6"})}),"Reply"]})]})]}),m&&d.jsxs("div",{className:"ml-13 mr-3 mb-3 bg-slate-50 rounded-lg p-3 border border-slate-200",children:[d.jsxs("div",{className:"text-xs text-slate-600 mb-2",children:["Replying to ",d.jsx("span",{className:"font-semibold",children:s.name})]}),d.jsx("textarea",{value:a,onChange:k=>u(k.target.value),onKeyDown:k=>{k.key==="Enter"&&!k.shiftKey&&(k.preventDefault(),c())},placeholder:"Write your reply...",disabled:p,rows:2,className:"w-full resize-none px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 text-sm"}),d.jsxs("div",{className:"flex justify-end gap-2 mt-2",children:[d.jsx("button",{onClick:h,className:"px-3 py-1.5 text-sm text-slate-600 hover:text-slate-800",children:"Cancel"}),d.jsxs("button",{onClick:c,disabled:p||!a.trim(),className:"px-4 py-1.5 text-sm bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-1",children:[p?"Posting...":"Reply",d.jsx("span",{className:"text-xs opacity-75",children:"(2)"})]})]})]}),v.length>0&&d.jsx("div",{className:"space-y-0",children:v.map(k=>d.jsx(a_,{comment:k,allComments:n,depth:r+1,onReply:i,replyingTo:s,replyInput:a,onReplyInputChange:u,onSubmitReply:c,onCancelReply:h,submitting:p},k.id))})]})}function Rb({storyId:e}){const[n,r]=A.useState([]),[i,s]=A.useState(""),[a,u]=A.useState(""),[c,h]=A.useState(!1),[p,v]=A.useState(!1),[m,_]=A.useState(null),[y,k]=A.useState([]),S=A.useRef(null);A.useEffect(()=>{E()},[e]),A.useEffect(()=>{const z=Eh(i);k(z)},[i]);const E=async()=>{try{h(!0);const z=await fetch(`/api/comments/story/${e}`);if(z.ok){const D=await z.json();r(D||[])}}catch(z){console.error("Error loading comments:",z)}finally{h(!1)}},w=async()=>{const z=i.trim();if(!(!z||p))try{v(!0);const D=await fetch("/api/comments",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({story_id:e,text:z})});if(D.ok){const F=await D.json();s(""),S.current&&(S.current.style.height="auto"),await E(),F.credits_remaining!==void 0&&console.log(`Comment posted! ${F.credits_remaining} credits remaining`)}else if(D.status===402){const F=await D.json();alert(F.detail||"Insufficient credits to post comment")}else{const F=await D.json();alert(F.detail||"Failed to post comment")}}catch(D){console.error("Error posting comment:",D),alert("Error posting comment")}finally{v(!1)}},b=async()=>{const z=a.trim();if(!(!z||p||!m))try{v(!0);const D=await fetch("/api/comments",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({story_id:e,text:z,parent_comment_id:m.id})});if(D.ok){const F=await D.json();u(""),_(null),await E(),F.credits_remaining!==void 0&&console.log(`Reply posted! ${F.credits_remaining} credits remaining`)}else if(D.status===402){const F=await D.json();alert(F.detail||"Insufficient credits to post reply")}else{const F=await D.json();alert(F.detail||"Failed to post reply")}}catch(D){console.error("Error posting reply:",D),alert("Error posting reply")}finally{v(!1)}},N=(z,D)=>{_({id:z,name:D}),u("")},C=()=>{_(null),u("")},P=z=>{z.key==="Enter"&&!z.shiftKey&&(z.preventDefault(),w())},T=z=>{s(z.target.value);const D=z.target;D.style.height="auto";const F=Math.max(Math.min(D.scrollHeight,200),80);D.style.height=`${F}px`},M=n.filter(z=>!z.parent_comment_id);return d.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[d.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-6",children:"Comments"}),!m&&d.jsxs("div",{className:"mb-8",children:[d.jsx("textarea",{ref:S,value:i,onChange:T,onKeyDown:P,placeholder:"Share your thoughts... (supports Chinese, Japanese, Korean)",disabled:p,rows:3,className:"w-full resize-none px-4 py-3 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 disabled:bg-slate-100 disabled:text-slate-400 text-sm leading-relaxed",style:{minHeight:"80px",maxHeight:"200px"}}),y.length>0&&d.jsxs("div",{className:"space-y-2 mt-3",children:[y.slice(0,2).map((z,D)=>d.jsx(Ph,{url:z},D)),y.length>2&&d.jsxs("div",{className:"text-xs text-slate-500",children:["+",y.length-2," more link",y.length-2>1?"s":""]})]}),d.jsxs("div",{className:"flex justify-between items-center mt-2",children:[d.jsxs("p",{className:"text-xs text-slate-500",children:["Press ",d.jsx("kbd",{className:"px-1.5 py-0.5 bg-slate-100 border border-slate-200 rounded",children:"Enter"})," to post,",d.jsx("kbd",{className:"px-1.5 py-0.5 bg-slate-100 border border-slate-200 rounded ml-1",children:"Shift+Enter"})," for new line"]}),d.jsx("button",{onClick:w,disabled:p||!i.trim(),className:"px-6 py-2 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-lg font-medium hover:opacity-90 disabled:opacity-50 disabled:cursor-not-allowed transition flex items-center gap-1.5",children:p?"Posting...":d.jsxs(d.Fragment,{children:["Post Comment",d.jsx("span",{className:"text-xs opacity-75",children:"(2)"})]})})]})]}),c?d.jsx("div",{className:"text-center py-8 text-slate-500",children:"Loading comments..."}):n.length===0?d.jsx("div",{className:"text-center py-8 text-slate-400",children:"No comments yet. Be the first to comment!"}):d.jsx("div",{className:"space-y-2",children:M.map(z=>d.jsx(a_,{comment:z,allComments:n,depth:0,onReply:N,replyingTo:m,replyInput:a,onReplyInputChange:u,onSubmitReply:b,onCancelReply:C,submitting:p},z.id))})]})}function Ib({onSubmit:e,disabled:n=!1,placeholder:r="Ask a question..."}){const[i,s]=A.useState(""),a=A.useRef(null),u=()=>{const p=i.trim();!p||n||(e(p),s(""),a.current&&(a.current.style.height="auto"))},c=p=>{p.key==="Enter"&&!p.shiftKey&&(p.preventDefault(),u())},h=p=>{s(p.target.value);const v=p.target;v.style.height="auto";const m=Math.max(Math.min(v.scrollHeight,200),56);v.style.height=`${m}px`};return d.jsxs("div",{className:"border-t border-slate-200 bg-white p-4",children:[d.jsxs("div",{className:"flex gap-3",children:[d.jsx("textarea",{ref:a,value:i,onChange:h,onKeyDown:c,placeholder:r,disabled:n,rows:2,className:"flex-1 resize-none px-4 py-3 border border-slate-200 rounded-xl bg-slate-50 focus:bg-white focus:outline-none focus:ring-2 focus:ring-indigo-500 disabled:bg-slate-100 disabled:text-slate-400 text-sm leading-relaxed",style:{maxHeight:"200px",minHeight:"56px",height:"56px"}}),d.jsx("button",{onClick:u,disabled:n||!i.trim(),className:"self-end px-4 py-3 bg-gradient-to-r from-indigo-600 to-purple-600 hover:opacity-90 disabled:opacity-50 disabled:cursor-not-allowed text-white font-semibold rounded-xl transition",children:"Send"})]}),d.jsxs("p",{className:"text-xs text-slate-400 mt-2",children:["Press ",d.jsx("kbd",{className:"px-1.5 py-0.5 bg-slate-100 border border-slate-200 rounded",children:"Enter"})," to send,",d.jsx("kbd",{className:"px-1.5 py-0.5 bg-slate-100 border border-slate-200 rounded ml-1",children:"Shift+Enter"})," for new line"]})]})}const sa=10;function Db({storyTitle:e,userCredits:n,onUnlock:r,onCancel:i}){const[s,a]=A.useState(!1),u=n>=sa,c=async()=>{if(!(!u||s)){a(!0);try{await r()}catch(h){console.error("Unlock failed:",h),a(!1)}}};return d.jsx(d.Fragment,{children:d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:d.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full p-8 relative",children:[d.jsx("button",{onClick:i,className:"absolute top-4 right-4 text-slate-400 hover:text-slate-600 transition",children:d.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),d.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-gradient-to-br from-indigo-500 to-purple-500 flex items-center justify-center",children:d.jsx("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})})}),d.jsx("h2",{className:"text-2xl font-bold text-center text-slate-900 mb-2",children:"Unlock AI Chat"}),d.jsx("p",{className:"text-center text-slate-600 mb-6",children:"Get AI-powered insights and answers about:"}),d.jsx("div",{className:"bg-slate-50 rounded-lg p-4 mb-6",children:d.jsx("p",{className:"text-sm font-medium text-slate-900 line-clamp-2",children:e})}),d.jsxs("div",{className:"space-y-3 mb-6",children:[d.jsxs("div",{className:"flex items-center gap-3 text-sm text-slate-700",children:[d.jsx("svg",{className:"w-5 h-5 text-green-500 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:d.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),d.jsx("span",{children:"Up to 100 messages per story"})]}),d.jsxs("div",{className:"flex items-center gap-3 text-sm text-slate-700",children:[d.jsx("svg",{className:"w-5 h-5 text-green-500 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:d.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),d.jsx("span",{children:"Access to verified claims & entities"})]}),d.jsxs("div",{className:"flex items-center gap-3 text-sm text-slate-700",children:[d.jsx("svg",{className:"w-5 h-5 text-green-500 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:d.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),d.jsx("span",{children:"Powered by GPT-4"})]})]}),d.jsxs("div",{className:"flex items-center justify-between bg-gradient-to-r from-amber-50 to-yellow-50 border border-amber-200 rounded-lg p-4 mb-6",children:[d.jsxs("div",{children:[d.jsx("div",{className:"text-sm text-slate-600",children:"Unlock Cost"}),d.jsxs("div",{className:"text-2xl font-bold text-amber-700 flex items-center gap-1",children:[d.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 20 20",children:d.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})}),sa]})]}),d.jsxs("div",{children:[d.jsx("div",{className:"text-sm text-slate-600 text-right",children:"Your Balance"}),d.jsxs("div",{className:`text-2xl font-bold text-right ${u?"text-green-600":"text-red-600"}`,children:[n,""]})]})]}),!u&&d.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3 mb-6",children:d.jsxs("p",{className:"text-sm text-red-800 text-center",children:["Insufficient credits. You need ",sa-n," more credits."]})}),d.jsxs("div",{className:"flex gap-3",children:[d.jsx("button",{onClick:i,className:"flex-1 px-6 py-3 border border-slate-300 rounded-lg font-medium text-slate-700 hover:bg-slate-50 transition",children:"Cancel"}),d.jsx("button",{onClick:c,disabled:!u||s,className:"flex-1 px-6 py-3 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-lg font-medium hover:opacity-90 disabled:opacity-50 disabled:cursor-not-allowed transition",children:s?"Unlocking...":`Unlock for ${sa}`})]})]})})})}function Fb({storyId:e,storyTitle:n="this story",isOpen:r,onClose:i}){const[s,a]=A.useState([]),[u,c]=A.useState(!1),[h,p]=A.useState(null),[v,m]=A.useState(100),[_,y]=A.useState(!1),[k,S]=A.useState(!1),[E,w]=A.useState(null),b=A.useRef(null);A.useEffect(()=>{e&&r&&(N(),C())},[e,r]);const N=async()=>{try{const H=await fetch("/api/auth/status",{credentials:"include"});if(H.ok){const Q=await H.json();Q.authenticated&&w(Q.user)}}catch(H){console.error("Failed to load user:",H)}},C=async()=>{P(),await M()||y(!0)};A.useEffect(()=>{F()},[s]);const P=()=>{try{const H=localStorage.getItem(`chat_${e}`);H&&a(JSON.parse(H))}catch(H){console.error("Failed to load conversation history:",H)}},T=H=>{try{localStorage.setItem(`chat_${e}`,JSON.stringify(H))}catch(Q){console.error("Failed to save conversation history:",Q)}},M=async()=>{try{const H=await fetch(`/api/chat/session/${e}`,{credentials:"include"});if(H.ok){const Q=await H.json();return p(Q),Q&&m(Math.max(0,100-Q.message_count)),Q}return null}catch(H){return console.error("Failed to load session:",H),null}},z=async H=>{if(!H||u)return;const Q=[...s,{role:"user",content:H}];a(Q),c(!0);try{const R=await fetch("/api/chat/message",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({story_id:e,message:H,conversation_history:s.slice(-10)})});if(!R.ok){const ee=await R.json();if(R.status===402){alert(ee.detail||"Insufficient credits to continue chatting"),a(s);return}throw new Error(ee.detail||"Failed to send message")}const G=await R.json(),W=[...Q,{role:"assistant",content:G.message}];a(W),T(W),m(G.remaining_messages),G.session_status==="exhausted"&&p({...h,status:"exhausted"}),G.credits_remaining!==void 0&&console.log(`Message sent! ${G.credits_remaining} credits remaining`)}catch(R){console.error("Error sending message:",R),alert(R instanceof Error?R.message:"Failed to send message"),a(s)}finally{c(!1)}},D=async()=>{try{S(!0);const H=await fetch("/api/chat/unlock",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({story_id:e})});if(!H.ok){const R=await H.json();throw new Error(R.detail||"Failed to unlock chat")}const Q=await H.json();p(Q),y(!1),await N()}catch(H){throw console.error("Unlock failed:",H),alert(H instanceof Error?H.message:"Failed to unlock chat"),H}finally{S(!1)}},F=()=>{setTimeout(()=>{var H;(H=b.current)==null||H.scrollIntoView({behavior:"smooth"})},100)},V=(h==null?void 0:h.status)==="exhausted";return r?_&&E?d.jsx(Db,{storyTitle:n,userCredits:E.credits,onUnlock:D,onCancel:i}):d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-30 z-40",onClick:i}),d.jsxs("div",{className:"fixed top-0 right-0 bottom-0 w-96 bg-white shadow-2xl z-50 flex flex-col",children:[d.jsxs("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 text-white p-6 flex-shrink-0",children:[d.jsxs("div",{className:"flex justify-between items-center mb-2",children:[d.jsx("h2",{className:"text-xl font-bold",children:"Story Chat"}),d.jsx("button",{onClick:i,className:"w-8 h-8 rounded-full bg-white bg-opacity-20 hover:bg-opacity-30 flex items-center justify-center transition",children:""})]}),d.jsxs("div",{className:"text-sm opacity-90",children:[v," / 100 messages remaining"]})]}),d.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-4",children:[s.length===0?d.jsxs("div",{className:"text-center text-slate-400 mt-16",children:[d.jsx("div",{className:"text-4xl mb-4",children:""}),d.jsxs("p",{className:"leading-relaxed",children:["Start a conversation about this story.",d.jsx("br",{}),"Ask questions, explore connections, or get AI-powered insights."]})]}):s.map((H,Q)=>d.jsxs("div",{className:`flex ${H.role==="user"?"justify-end":"justify-start"}`,children:[H.role==="assistant"&&d.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-indigo-500 to-purple-500 flex items-center justify-center text-white font-bold flex-shrink-0 mr-2",children:""}),d.jsx("div",{className:`max-w-[80%] px-4 py-3 rounded-xl ${H.role==="user"?"bg-gradient-to-r from-indigo-600 to-purple-600 text-white":"bg-slate-100 text-slate-800"}`,children:H.content})]},Q)),u&&d.jsxs("div",{className:"flex justify-start",children:[d.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-indigo-500 to-purple-500 flex items-center justify-center text-white font-bold flex-shrink-0 mr-2",children:""}),d.jsx("div",{className:"bg-slate-100 px-4 py-3 rounded-xl",children:d.jsxs("div",{className:"flex gap-1",children:[d.jsx("div",{className:"w-2 h-2 bg-slate-400 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),d.jsx("div",{className:"w-2 h-2 bg-slate-400 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),d.jsx("div",{className:"w-2 h-2 bg-slate-400 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]})})]}),d.jsx("div",{ref:b})]}),V?d.jsx("div",{className:"p-6 bg-red-50 border-t border-red-200",children:d.jsx("p",{className:"text-sm text-red-800",children:"You've reached the 100-message limit for this story. Start a new conversation by visiting another story."})}):d.jsx(Ib,{onSubmit:z,disabled:u,placeholder:"Ask a question about this story..."})]})]}):null}const Ku={person:"#805ad5",organization:"#3182ce",location:"#38a169",event:"#d69e2e",default:"#718096"};function Bb({name:e,canonicalId:n,metadata:r}){var h;const[i,s]=A.useState(!1),a=r!=null&&r.entity_type&&Ku[r.entity_type.toLowerCase()]||Ku.default,u=p=>{p.preventDefault(),console.log("Entity clicked:",e,n)},c=((h=r==null?void 0:r.entity_type)==null?void 0:h.toLowerCase())==="person";return d.jsxs("span",{style:{position:"relative",display:"inline-block"},children:[d.jsx("span",{onClick:u,onMouseEnter:()=>s(!0),onMouseLeave:()=>s(!1),style:{cursor:"pointer",color:c?"#92400e":a,fontWeight:500,backgroundColor:c?"#fef3c7":"transparent",padding:c?"2px 4px":"0",borderRadius:c?"3px":"0",borderBottom:c?"none":`2px solid ${a}`,transition:"opacity 0.2s"},className:"hover:opacity-70",children:e}),i&&r&&d.jsxs("div",{style:{position:"absolute",bottom:"100%",left:"50%",transform:"translateX(-50%)",marginBottom:"8px",backgroundColor:"#2d3748",color:"white",padding:"12px",borderRadius:"8px",minWidth:"250px",maxWidth:"350px",zIndex:1e3,boxShadow:"0 4px 12px rgba(0,0,0,0.3)",pointerEvents:"none"},children:[d.jsx("div",{style:{position:"absolute",top:"100%",left:"50%",transform:"translateX(-50%)",width:0,height:0,borderLeft:"6px solid transparent",borderRight:"6px solid transparent",borderTop:"6px solid #2d3748"}}),d.jsxs("div",{className:"flex gap-3",children:[r.wikidata_thumbnail&&d.jsx("img",{src:r.wikidata_thumbnail,alt:r.name,className:"w-16 h-16 rounded-lg object-cover flex-shrink-0 border-2",style:{borderColor:a}}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[d.jsx("span",{className:"font-semibold text-blue-300 truncate",children:r.name}),r.entity_type&&d.jsx("span",{className:"px-2 py-0.5 rounded text-xs font-medium text-white flex-shrink-0",style:{backgroundColor:a},children:r.entity_type})]}),d.jsxs("div",{className:"text-xs text-gray-300 mb-1",children:[r.wikidata_qid&&d.jsx("span",{children:r.wikidata_qid}),r.claim_count!==void 0&&d.jsxs("span",{className:"ml-2",children:[" ",r.claim_count," claims"]})]}),(r.description||r.wikidata_description)&&d.jsx("div",{className:"text-xs text-gray-200 line-clamp-3",children:r.description||r.wikidata_description})]})]})]})]})}function Ub({content:e,entities:n}){const[r,i]=A.useState({});A.useEffect(()=>{var p,v,m;if(!n)return;const c={},h=(_,y)=>{const k=_.canonical_id||_.name;c[k]={name:_.name,canonical_id:_.canonical_id,qid:_.wikidata_qid,wikidata_qid:_.wikidata_qid,description:_.description,wikidata_description:_.wikidata_description,wikidata_thumbnail:_.wikidata_thumbnail,entity_type:y,claim_count:_.claim_count},c[_.name]=c[k]};(p=n.people)==null||p.forEach(_=>h(_,"person")),(v=n.organizations)==null||v.forEach(_=>h(_,"organization")),(m=n.locations)==null||m.forEach(_=>h(_,"location")),i(c)},[n]);const s=c=>{const h=[];let p=0;const v=/\[\[([^\]|]+)(?:\|([^\]]+))?\]\]|\{\{cite:([^}]+)\}\}/g;let m;for(;(m=v.exec(c))!==null;)m.index>p&&h.push({type:"text",content:c.substring(p,m.index)}),m[1]?h.push({type:"entity",content:m[0],entityName:m[1],entityId:m[2]||m[1]}):m[3]&&h.push({type:"citation",content:m[0],citationId:m[3]}),p=v.lastIndex;return p<c.length&&h.push({type:"text",content:c.substring(p)}),h},a=(c,h)=>{const p=s(c);return d.jsx("p",{className:"mb-4 leading-relaxed text-slate-700",children:p.map((v,m)=>{if(v.type==="text")return d.jsx("span",{children:v.content},m);if(v.type==="entity"){const _=r[v.entityId]||r[v.entityName];return d.jsx(Bb,{name:v.entityName,canonicalId:v.entityId,metadata:_},m)}else if(v.type==="citation")return d.jsx("sup",{className:"citation-marker","data-citation-id":v.citationId,title:`Citation: ${v.citationId}`,children:"[cite]"},m);return null})},h)},u=e.split(`

`).filter(c=>c.trim());return d.jsxs("div",{className:"prose max-w-none",children:[d.jsx("style",{dangerouslySetInnerHTML:{__html:`
          .citation-marker {
            color: #6366f1;
            font-size: 0.75em;
            font-weight: 600;
            margin-left: 0.1em;
            cursor: pointer;
          }
          .citation-marker:hover {
            text-decoration: underline;
          }
        `}}),u.map((c,h)=>a(c,h))]})}function Yu({entity:e,type:n}){const r={person:"",organization:"",location:""},i={person:"from-blue-500 to-indigo-500",organization:"from-purple-500 to-pink-500",location:"from-green-500 to-teal-500"};return d.jsx("div",{className:"border border-slate-200 rounded-lg p-4 hover:shadow-md transition",children:d.jsxs("div",{className:"flex gap-3",children:[e.wikidata_thumbnail?d.jsx("img",{src:e.wikidata_thumbnail,alt:e.name,className:"w-16 h-16 rounded-lg object-cover flex-shrink-0"}):d.jsx("div",{className:`w-16 h-16 rounded-lg bg-gradient-to-br ${i[n]} flex items-center justify-center text-2xl flex-shrink-0`,children:r[n]}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("h4",{className:"font-semibold text-slate-900 mb-1",children:e.name}),(e.description||e.wikidata_description)&&d.jsx("p",{className:"text-sm text-slate-600 line-clamp-2",children:e.description||e.wikidata_description}),e.wikidata_qid&&d.jsx("a",{href:`https://www.wikidata.org/wiki/${e.wikidata_qid}`,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-indigo-600 hover:text-indigo-700 mt-1 inline-block",children:"View on Wikidata "})]})]})})}function $b({claims:e}){return e.length===0?d.jsx("div",{className:"text-center py-8 text-slate-400",children:"No claims extracted yet"}):d.jsx("div",{className:"space-y-3",children:e.map((n,r)=>d.jsx("div",{className:"border border-slate-200 rounded-lg p-4 hover:bg-slate-50 transition",children:d.jsxs("div",{className:"flex gap-3",children:[d.jsx("div",{className:"w-8 h-8 rounded-full bg-indigo-100 text-indigo-600 flex items-center justify-center font-semibold text-sm flex-shrink-0",children:r+1}),d.jsxs("div",{className:"flex-1",children:[d.jsx("p",{className:"text-slate-800 leading-relaxed",children:n.text}),n.confidence!==void 0&&d.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[d.jsx("div",{className:"flex-1 bg-slate-200 rounded-full h-2",children:d.jsx("div",{className:"bg-gradient-to-r from-indigo-500 to-purple-500 h-2 rounded-full transition-all",style:{width:`${n.confidence*100}%`}})}),d.jsxs("span",{className:"text-xs text-slate-500 font-medium",children:[(n.confidence*100).toFixed(0),"%"]})]})]})]})},n.id||r))})}function Hb({artifacts:e}){return e.length===0?d.jsx("div",{className:"text-center py-8 text-slate-400",children:"No source articles found"}):d.jsx("div",{className:"space-y-3",children:e.map((n,r)=>{const i=Mi(n.published_at);return d.jsx("a",{href:n.url,target:"_blank",rel:"noopener noreferrer",className:"block border border-slate-200 rounded-lg p-4 hover:shadow-md hover:border-indigo-300 transition",children:d.jsxs("div",{className:"flex items-start gap-3",children:[d.jsx("div",{className:"w-10 h-10 rounded bg-slate-100 flex items-center justify-center text-slate-400 flex-shrink-0",children:""}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("h4",{className:"font-medium text-slate-900 mb-1 line-clamp-2",children:n.title||"Untitled Article"}),d.jsxs("div",{className:"flex items-center gap-3 text-xs text-slate-500",children:[d.jsx("span",{className:"font-medium text-indigo-600",children:n.domain}),n.published_at&&i.absolute!=="Date unknown"&&d.jsxs("span",{className:`cursor-help ${i.reliable?"":"opacity-50"}`,title:i.fullDateTime,children:[i.absolute,!i.reliable&&d.jsx("span",{className:"ml-1",children:""})]})]})]}),d.jsx("svg",{className:"w-5 h-5 text-slate-400 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})]})},r)})})}function Zb({breakdown:e}){const n=[{label:"Entity Overlap",value:e.entity_overlap,color:"indigo"},{label:"Centrality",value:e.centrality,color:"purple"},{label:"Claim Density",value:e.claim_density,color:"pink"}],r=i=>({indigo:"bg-indigo-500",purple:"bg-purple-500",pink:"bg-pink-500"})[i]||"bg-slate-500";return d.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-6",children:[d.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-4",children:"Coherence Breakdown"}),d.jsxs("div",{className:"mb-6 pb-6 border-b border-slate-200",children:[d.jsxs("div",{className:"flex justify-between items-center mb-2",children:[d.jsx("span",{className:"text-sm font-medium text-slate-600",children:"Overall Coherence"}),d.jsxs("span",{className:"text-2xl font-bold text-indigo-600",children:[e.score.toFixed(1),"/100"]})]}),d.jsx("div",{className:"w-full bg-slate-200 rounded-full h-3",children:d.jsx("div",{className:"bg-gradient-to-r from-indigo-500 to-purple-500 h-3 rounded-full transition-all",style:{width:`${e.score}%`}})})]}),d.jsx("div",{className:"space-y-4 mb-6",children:n.map(i=>d.jsxs("div",{children:[d.jsxs("div",{className:"flex justify-between items-center mb-2",children:[d.jsx("span",{className:"text-sm text-slate-600",children:i.label}),d.jsxs("span",{className:"text-sm font-semibold text-slate-900",children:[i.value.toFixed(1),"%"]})]}),d.jsx("div",{className:"w-full bg-slate-200 rounded-full h-2",children:d.jsx("div",{className:`${r(i.color)} h-2 rounded-full transition-all`,style:{width:`${i.value}%`}})})]},i.label))}),d.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-4 border-t border-slate-200",children:[d.jsxs("div",{className:"text-center",children:[d.jsx("div",{className:"text-2xl font-bold text-slate-900",children:e.breakdown.shared_entities}),d.jsx("div",{className:"text-xs text-slate-500",children:"Shared Entities"})]}),d.jsxs("div",{className:"text-center",children:[d.jsx("div",{className:"text-2xl font-bold text-slate-900",children:e.breakdown.total_entities}),d.jsx("div",{className:"text-xs text-slate-500",children:"Total Entities"})]}),d.jsxs("div",{className:"text-center",children:[d.jsx("div",{className:"text-2xl font-bold text-slate-900",children:e.breakdown.avg_entity_stories.toFixed(1)}),d.jsx("div",{className:"text-xs text-slate-500",children:"Avg Stories/Entity"})]}),d.jsxs("div",{className:"text-center",children:[d.jsx("div",{className:"text-2xl font-bold text-slate-900",children:e.breakdown.claim_count}),d.jsx("div",{className:"text-xs text-slate-500",children:"Claims"})]})]})]})}function Wb({stories:e}){const n=gn();return e.length===0?d.jsx("div",{className:"text-center py-8 text-slate-400",children:"No related stories found"}):d.jsx("div",{className:"space-y-3",children:e.map(r=>d.jsx("div",{onClick:()=>n(`/story/${r.id}`),className:"border border-slate-200 rounded-lg p-4 hover:shadow-md hover:border-indigo-300 transition cursor-pointer",children:d.jsxs("div",{className:"flex items-start justify-between gap-3",children:[d.jsxs("div",{className:"flex-1",children:[d.jsx("h4",{className:"font-medium text-slate-900 mb-2 line-clamp-2",children:r.title}),d.jsx("div",{className:"flex items-center gap-2 text-xs text-slate-500",children:d.jsxs("span",{className:"inline-flex items-center gap-1",children:[d.jsx("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:d.jsx("path",{d:"M13 6a3 3 0 11-6 0 3 3 0 016 0zM18 8a2 2 0 11-4 0 2 2 0 014 0zM14 15a4 4 0 00-8 0v3h8v-3zM6 8a2 2 0 11-4 0 2 2 0 014 0zM16 18v-3a5.972 5.972 0 00-.75-2.906A3.005 3.005 0 0119 15v3h-3zM4.75 12.094A5.973 5.973 0 004 15v3H1v-3a3 3 0 013.75-2.906z"})}),r.shared_entities," shared ",r.shared_entities===1?"entity":"entities"]})})]}),d.jsx("svg",{className:"w-5 h-5 text-slate-400 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})},r.id))})}function km(){var y,k,S,E,w,b,N,C;const{storyId:e}=t_(),[n,r]=A.useState(null),[i,s]=A.useState(!0),[a,u]=A.useState(null),[c,h]=A.useState(!1),[p,v]=A.useState("entities");A.useEffect(()=>{e&&m()},[e]);const m=async()=>{try{s(!0);const P=await fetch(`/api/stories/${e}`);if(!P.ok)throw new Error(`HTTP ${P.status}: ${P.statusText}`);const T=await P.json();r(T.story)}catch(P){u(P instanceof Error?P.message:"Failed to load story")}finally{s(!1)}};if(i)return d.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-indigo-500 via-purple-500 to-pink-500",children:[d.jsx(Ao,{}),d.jsx("div",{className:"max-w-7xl mx-auto px-4 py-16 text-center",children:d.jsx("div",{className:"text-white text-xl",children:"Loading story..."})})]});if(a||!n)return d.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-indigo-500 via-purple-500 to-pink-500",children:[d.jsx(Ao,{}),d.jsx("div",{className:"max-w-7xl mx-auto px-4 py-16",children:d.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-6 py-4 rounded-lg",children:["Error: ",a||"Story not found"]})})]});const _=[...((y=n.entities)==null?void 0:y.people)||[],...((k=n.entities)==null?void 0:k.organizations)||[],...((S=n.entities)==null?void 0:S.locations)||[]];return d.jsxs("div",{className:"min-h-screen bg-slate-50",children:[d.jsx(Ao,{}),d.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[d.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[d.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-8",children:[d.jsx("h1",{className:"text-4xl font-bold text-slate-900 mb-4",children:n.title}),n.description&&d.jsx("p",{className:"text-lg text-slate-600 leading-relaxed mb-6",children:n.description}),d.jsxs("div",{className:"flex flex-wrap items-center gap-6 text-sm border-y border-slate-200 py-4",children:[n.coherence!==void 0&&d.jsxs("div",{children:[d.jsx("span",{className:"text-slate-500",children:"Coherence: "}),d.jsxs("span",{className:"font-bold text-indigo-600 text-lg",children:[(n.coherence*100).toFixed(0),"%"]})]}),n.claim_count!==void 0&&d.jsxs("div",{children:[d.jsx("span",{className:"text-slate-500",children:"Claims: "}),d.jsx("span",{className:"font-semibold text-slate-700",children:n.claim_count})]}),n.artifact_count!==void 0&&d.jsxs("div",{children:[d.jsx("span",{className:"text-slate-500",children:"Sources: "}),d.jsx("span",{className:"font-semibold text-slate-700",children:n.artifact_count})]}),n.timely!==void 0&&d.jsxs("div",{children:[d.jsx("span",{className:"text-slate-500",children:"Timely: "}),d.jsxs("span",{className:"font-semibold text-emerald-600",children:[n.timely.toFixed(0),"%"]})]}),(()=>{const P=Mi(n.created_at),T=Mi(n.last_updated),M=n.last_updated&&n.last_updated!==n.created_at;return d.jsxs("div",{className:"flex items-center gap-4",children:[P.absolute!=="Date unknown"&&d.jsxs("div",{className:"cursor-help",title:`Created: ${P.fullDateTime}`,children:[d.jsx("span",{className:"text-slate-500",children:"Created: "}),d.jsx("span",{className:"text-slate-700",children:P.absolute})]}),M&&T.absolute!=="Date unknown"&&d.jsxs("div",{className:"cursor-help",title:`Last updated: ${T.fullDateTime}`,children:[d.jsx("span",{className:"text-slate-500",children:"Updated: "}),d.jsx("span",{className:"text-slate-700",children:T.relative})]})]})})()]}),n.content&&d.jsx("div",{className:"mt-6",children:d.jsx(Ub,{content:n.content})})]}),d.jsxs("div",{className:"bg-white rounded-xl shadow-sm",children:[d.jsx("div",{className:"border-b border-slate-200",children:d.jsxs("div",{className:"flex",children:[d.jsxs("button",{onClick:()=>v("entities"),className:`flex-1 px-6 py-4 text-sm font-medium transition ${p==="entities"?"text-indigo-600 border-b-2 border-indigo-600":"text-slate-600 hover:text-slate-900"}`,children:["Entities (",_.length,")"]}),d.jsxs("button",{onClick:()=>v("claims"),className:`flex-1 px-6 py-4 text-sm font-medium transition ${p==="claims"?"text-indigo-600 border-b-2 border-indigo-600":"text-slate-600 hover:text-slate-900"}`,children:["Claims (",((E=n.claims)==null?void 0:E.length)||0,")"]}),d.jsxs("button",{onClick:()=>v("sources"),className:`flex-1 px-6 py-4 text-sm font-medium transition ${p==="sources"?"text-indigo-600 border-b-2 border-indigo-600":"text-slate-600 hover:text-slate-900"}`,children:["Sources (",((w=n.artifacts)==null?void 0:w.length)||0,")"]})]})}),d.jsxs("div",{className:"p-6",children:[p==="entities"&&d.jsxs("div",{className:"space-y-6",children:[((b=n.entities)==null?void 0:b.people)&&n.entities.people.length>0&&d.jsxs("div",{children:[d.jsx("h3",{className:"text-sm font-semibold text-slate-700 mb-3",children:"People"}),d.jsx("div",{className:"grid gap-3",children:n.entities.people.map(P=>d.jsx(Yu,{entity:P,type:"person"},P.id))})]}),((N=n.entities)==null?void 0:N.organizations)&&n.entities.organizations.length>0&&d.jsxs("div",{children:[d.jsx("h3",{className:"text-sm font-semibold text-slate-700 mb-3",children:"Organizations"}),d.jsx("div",{className:"grid gap-3",children:n.entities.organizations.map(P=>d.jsx(Yu,{entity:P,type:"organization"},P.id))})]}),((C=n.entities)==null?void 0:C.locations)&&n.entities.locations.length>0&&d.jsxs("div",{children:[d.jsx("h3",{className:"text-sm font-semibold text-slate-700 mb-3",children:"Locations"}),d.jsx("div",{className:"grid gap-3",children:n.entities.locations.map(P=>d.jsx(Yu,{entity:P,type:"location"},P.id))})]}),_.length===0&&d.jsx("div",{className:"text-center py-8 text-slate-400",children:"No entities extracted yet"})]}),p==="claims"&&d.jsx($b,{claims:n.claims||[]}),p==="sources"&&d.jsx(Hb,{artifacts:n.artifacts||[]})]})]}),e&&d.jsx(Rb,{storyId:e})]}),d.jsxs("div",{className:"space-y-6",children:[n.coherence_breakdown&&d.jsx(Zb,{breakdown:n.coherence_breakdown}),n.related_stories&&n.related_stories.length>0&&d.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-6",children:[d.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-4",children:"Related Stories"}),d.jsx(Wb,{stories:n.related_stories})]})]})]})}),!c&&d.jsx("button",{onClick:()=>h(!0),className:"fixed bottom-6 right-6 w-14 h-14 rounded-full bg-gradient-to-r from-indigo-600 to-purple-600 text-white shadow-lg hover:shadow-xl hover:scale-110 transition-all z-40 flex items-center justify-center","aria-label":"Open story chat",title:"Chat with Story",children:d.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"})})}),e&&d.jsx(Fb,{storyId:e,isOpen:c,onClose:()=>h(!1)})]})}/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Vb={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qb=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Ve=(e,n)=>{const r=A.forwardRef(({color:i="currentColor",size:s=24,strokeWidth:a=2,absoluteStrokeWidth:u,className:c="",children:h,...p},v)=>A.createElement("svg",{ref:v,...Vb,width:s,height:s,stroke:i,strokeWidth:u?Number(a)*24/Number(s):a,className:["lucide",`lucide-${qb(e)}`,c].join(" "),...p},[...n.map(([m,_])=>A.createElement(m,_)),...Array.isArray(h)?h:[h]]));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const of=Ve("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gb=Ve("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kb=Ve("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kn=Ve("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yb=Ve("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xb=Ve("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qb=Ve("CircleUser",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nm=Ve("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sm=Ve("Coins",[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jb=Ve("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sf=Ve("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ro=Ve("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ek=Ve("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jm=Ve("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xu=Ve("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ja=Ve("ThumbsDown",[["path",{d:"M17 14V2",key:"8ymqnk"}],["path",{d:"M9 18.12 10 14H4.17a2 2 0 0 1-1.92-2.56l2.33-8A2 2 0 0 1 6.5 2H20a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.76a2 2 0 0 0-1.79 1.11L12 22h0a3.13 3.13 0 0 1-3-3.88Z",key:"s6e0r"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ca=Ve("ThumbsUp",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2h0a3.13 3.13 0 0 1 3 3.88Z",key:"y3tblf"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l_=Ve("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cm=Ve("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),tk=e=>{const n=[];let r=0;const i=/\{\{([^|]+)\|([^|]+)\|([^}]+)\}\}/g;let s;for(;(s=i.exec(e))!==null;)s.index>r&&n.push({type:"text",content:e.substring(r,s.index)}),n.push({type:"entity",name:s[1],entityType:s[2],confidence:parseFloat(s[3])}),r=s.index+s[0].length;return r<e.length&&n.push({type:"text",content:e.substring(r)}),n},nk=({name:e,type:n,confidence:r,event:i})=>{const[s,a]=A.useState(!1),c=i?[...(i.people||[]).map(b=>({...b,entityType:"person"})),...(i.organizations||[]).map(b=>({...b,entityType:"org"})),...(i.locations||[]).map(b=>({...b,entityType:"loc"}))].find(b=>b.name===e||b.canonical_name===e):null,h=(c==null?void 0:c.thumbnail)||(c==null?void 0:c.wikidata_thumbnail),p=c==null?void 0:c.description,v=()=>{switch(n){case"person":return{icon:d.jsx(Qb,{size:12}),bg:"bg-green-50",text:"text-green-800",border:"border-green-200",hoverBg:"hover:bg-green-100"};case"org":return{icon:d.jsx(Gb,{size:12}),bg:"bg-blue-50",text:"text-blue-800",border:"border-blue-200",hoverBg:"hover:bg-blue-100"};case"loc":return{icon:d.jsx(ek,{size:12}),bg:"bg-red-50",text:"text-red-800",border:"border-red-200",hoverBg:"hover:bg-red-100"};default:return{icon:null,bg:"bg-gray-50",text:"text-gray-800",border:"border-gray-200",hoverBg:"hover:bg-gray-100"}}},{icon:m,bg:_,text:y,border:k,hoverBg:S}=v(),E=r>=.85;return d.jsxs("span",{className:"relative inline-block",children:[d.jsxs("span",{className:`inline-flex items-center gap-1.5 px-2 py-1 rounded-full ${_} ${y} ${k} ${S} border text-sm font-medium cursor-pointer transition-all ${E?"":"border-dashed"}`,onMouseEnter:()=>a(!0),onMouseLeave:()=>a(!1),children:[h?d.jsx("img",{src:h,alt:e,className:"w-5 h-5 rounded-full object-cover border border-white shadow-sm"}):m,d.jsx("span",{className:"font-semibold",children:e}),!E&&d.jsx(Ro,{size:10,className:"opacity-50"})]}),s&&d.jsxs("div",{className:"absolute z-50 bottom-full left-0 mb-2 bg-white border border-gray-300 rounded-lg shadow-xl overflow-hidden",style:{minWidth:"200px",maxWidth:"280px"},children:[h&&d.jsx("div",{className:"h-24 bg-gradient-to-br from-gray-100 to-gray-200 flex items-center justify-center",children:d.jsx("img",{src:h,alt:e,className:"h-20 w-20 rounded-full object-cover border-2 border-white shadow-lg"})}),d.jsxs("div",{className:"p-3",children:[d.jsx("div",{className:"font-bold text-gray-900 mb-1",children:e}),p&&d.jsx("div",{className:"text-xs text-gray-600 mb-2 line-clamp-2",children:p}),d.jsxs("div",{className:"flex items-center justify-between text-xs",children:[d.jsx("span",{className:"text-gray-500 capitalize",children:n}),d.jsxs("span",{className:`font-medium ${r>=.85?"text-green-600":r>=.7?"text-yellow-600":"text-orange-600"}`,children:[Math.round(r*100),"%"]})]})]})]})]})},rk=({claim:e})=>{const r=(()=>{switch(e.status){case"verified":return{bg:"bg-green-50",border:"border-green-300",icon:d.jsx(Kn,{size:14,className:"text-green-600"}),label:"Verified",textColor:"text-green-700"};case"disputed":return{bg:"bg-red-50",border:"border-red-300",icon:d.jsx(of,{size:14,className:"text-red-600"}),label:"Disputed",textColor:"text-red-700"};case"unverified":return{bg:"bg-yellow-50",border:"border-yellow-300",icon:d.jsx(Ro,{size:14,className:"text-yellow-600"}),label:"Unverified",textColor:"text-yellow-700"};default:return{bg:"bg-gray-50",border:"border-gray-300",icon:null,label:"Unknown",textColor:"text-gray-700"}}})(),i=Math.round(e.confidence*100);return d.jsxs("div",{className:`${r.bg} ${r.border} border rounded-lg p-3 mb-2`,children:[d.jsxs("div",{className:"flex items-start justify-between gap-3 mb-2",children:[d.jsx("div",{className:"flex-1",children:d.jsx("div",{className:"text-gray-900 leading-relaxed text-sm",children:e.text})}),d.jsxs("div",{className:"flex items-center gap-1.5",children:[r.icon,d.jsx("span",{className:`text-xs font-medium ${r.textColor}`,children:r.label})]})]}),d.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-600",children:[d.jsxs("div",{className:"flex items-center gap-1",children:[d.jsx(sf,{size:11}),e.sources," source",e.sources!==1?"s":""]}),d.jsxs("div",{className:`flex items-center gap-1 ${i>=85?"text-green-600":i>=70?"text-yellow-600":"text-orange-600"}`,children:[d.jsx(l_,{size:11}),i,"% confidence"]}),e.modality&&d.jsx("span",{className:"px-1.5 py-0.5 bg-gray-200 rounded text-gray-700 text-xs",children:e.modality})]}),e.dispute_reason&&d.jsx("div",{className:"mt-3 pt-3 border-t border-red-200 text-sm text-red-800",children:d.jsxs("div",{className:"flex items-start gap-2",children:[d.jsx(of,{size:13,className:"mt-0.5 flex-shrink-0"}),d.jsxs("div",{children:[d.jsx("div",{className:"font-medium",children:"Dispute:"}),d.jsx("div",{className:"text-red-700",children:e.dispute_reason}),d.jsxs("div",{className:"mt-1 flex items-center gap-3 text-xs",children:[d.jsxs("span",{className:"flex items-center gap-1",children:[d.jsx(Ca,{size:9})," ",e.votes_for||0," support"]}),d.jsxs("span",{className:"flex items-center gap-1",children:[d.jsx(ja,{size:9})," ",e.votes_against||0," oppose"]})]})]})]})}),e.note&&d.jsxs("div",{className:"mt-2 text-xs text-gray-600 italic",children:["Note: ",e.note]})]})},ik=()=>{var y,k,S,E,w;const{eventSlug:e}=t_(),n=gn(),[r,i]=A.useState(null),[s,a]=A.useState(!0),[u,c]=A.useState(null),[h,p]=A.useState("overview"),[v,m]=A.useState(new Set);if(A.useEffect(()=>{(async()=>{try{const N=await fetch(`/api/event/${e}`);if(!N.ok)throw new Error("Event not found");const C=await N.json();i(C.event)}catch(N){c(N instanceof Error?N.message:"Failed to load event")}finally{a(!1)}})()},[e]),s)return d.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-blue-900 to-gray-900 flex items-center justify-center",children:d.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-blue-400"})});if(u||!r)return d.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-blue-900 to-gray-900 flex items-center justify-center text-white",children:d.jsxs("div",{className:"text-center",children:[d.jsx("h1",{className:"text-4xl font-bold mb-4",children:"Event Not Found"}),d.jsx("p",{className:"text-gray-400 mb-8",children:u}),d.jsx("button",{onClick:()=>n("/feed"),className:"px-6 py-3 bg-blue-600 hover:bg-blue-700 rounded-lg transition",children:"Return to Feed"})]})});const _=b=>{if(!b)return"Unknown date";try{return new Date(b).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return b}};return[...(r.people||[]).map(b=>({...b,type:"person"})),...(r.organizations||[]).map(b=>({...b,type:"organization"})),...(r.locations||[]).map(b=>({...b,type:"location"}))],d.jsxs("div",{className:"min-h-screen bg-gray-50",children:[d.jsx("div",{className:"bg-white border-b border-gray-200",children:d.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-4",children:[d.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 mb-3",children:[d.jsx(wo,{to:"/feed",className:"hover:text-blue-600",children:"Feed"}),d.jsx("span",{children:"/"}),d.jsx("span",{className:"text-gray-900 font-medium",children:r.slug.replace(/_/g," ")})]}),d.jsxs("div",{className:"flex items-start justify-between gap-6",children:[d.jsxs("div",{className:"flex-1",children:[d.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2 leading-tight",children:r.title}),r.description&&d.jsx("p",{className:"text-base text-gray-600 leading-relaxed",children:r.description})]}),d.jsxs("div",{className:"flex items-center gap-6 text-sm",children:[d.jsxs("div",{className:"text-center",children:[d.jsxs("div",{className:"flex items-center gap-1 text-blue-600 mb-1",children:[d.jsx(l_,{size:14}),d.jsx("span",{className:"font-medium",children:"Coherence"})]}),d.jsx("div",{className:"text-2xl font-bold text-gray-900",children:Math.round(r.coherence)})]}),d.jsx("div",{className:"h-12 w-px bg-gray-200"}),d.jsxs("div",{className:"text-center",children:[d.jsxs("div",{className:"flex items-center gap-1 text-green-600 mb-1",children:[d.jsx(Cm,{size:14}),d.jsx("span",{className:"font-medium",children:"Entities"})]}),d.jsx("div",{className:"text-2xl font-bold text-gray-900",children:r.entity_count})]}),d.jsx("div",{className:"h-12 w-px bg-gray-200"}),d.jsxs("div",{className:"text-center",children:[d.jsxs("div",{className:"flex items-center gap-1 text-purple-600 mb-1",children:[d.jsx(sf,{size:14}),d.jsx("span",{className:"font-medium",children:"Claims"})]}),d.jsx("div",{className:"text-2xl font-bold text-gray-900",children:r.claim_count})]}),d.jsx("div",{className:"h-12 w-px bg-gray-200"}),d.jsxs("div",{className:"text-center",children:[d.jsxs("div",{className:"flex items-center gap-1 text-orange-600 mb-1",children:[d.jsx(Jb,{size:14}),d.jsx("span",{className:"font-medium",children:"Sources"})]}),d.jsx("div",{className:"text-2xl font-bold text-gray-900",children:r.source_count})]})]})]}),d.jsxs("div",{className:"flex items-center gap-2 text-gray-500 text-xs mt-3",children:[d.jsx(Nm,{size:12}),d.jsxs("span",{children:["Last updated: ",_(r.last_updated)]})]})]})}),d.jsx("div",{className:"sticky top-0 z-10 bg-white border-b border-gray-200 shadow-sm",children:d.jsx("div",{className:"max-w-7xl mx-auto px-6",children:d.jsx("div",{className:"flex gap-8",children:[{id:"overview",label:"Overview"},{id:"timeline",label:"Timeline"}].map(b=>d.jsx("button",{onClick:()=>p(b.id),className:`py-3 px-1 border-b-2 transition text-sm font-medium ${h===b.id?"border-blue-600 text-blue-600":"border-transparent text-gray-600 hover:text-gray-900 hover:border-gray-300"}`,children:b.label},b.id))})})}),d.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-12",children:[h==="overview"&&d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8 max-w-7xl mx-auto",children:[d.jsxs("div",{className:"lg:col-span-3 space-y-6",children:[r.overview&&d.jsxs("div",{className:"bg-white rounded-lg p-8 border border-gray-200",children:[d.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-6 leading-tight",children:"Complete Event Overview"}),d.jsxs("div",{className:"prose prose-gray max-w-none text-gray-800 leading-relaxed",children:[r.artifacts&&r.artifacts.find(b=>b.id==="img-1")&&(()=>{const b=r.artifacts.find(N=>N.id==="img-1");return d.jsxs("div",{className:"mb-6 rounded-lg overflow-hidden border border-gray-200",children:[d.jsx("img",{src:b.url,alt:b.caption,className:"w-full h-80 object-cover"}),d.jsxs("div",{className:"bg-gray-50 px-4 py-2 text-sm text-gray-600 flex items-center justify-between",children:[d.jsx("span",{children:b.caption}),d.jsxs("span",{className:"text-xs text-green-600 flex items-center gap-1",children:[d.jsx(Kn,{size:12}),"Verified"]})]})]})})(),r.overview.split(`
`).map((b,N)=>{const C=P=>{var T,M,z;if(N===3&&P==="after-intro"){const D=(T=r.artifacts)==null?void 0:T.find(F=>F.id==="img-2");if(D)return d.jsxs("div",{className:"float-right ml-6 mb-4 w-80 rounded-lg overflow-hidden border border-gray-200 shadow-sm",children:[d.jsx("img",{src:D.url,alt:D.caption,className:"w-full h-48 object-cover"}),d.jsxs("div",{className:"bg-gray-50 px-3 py-2 text-xs text-gray-600",children:[d.jsx("div",{className:"font-medium mb-1",children:D.caption}),d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("span",{className:"text-gray-500",children:D.source}),d.jsxs("span",{className:"text-green-600 flex items-center gap-1",children:[d.jsx(Kn,{size:10}),Math.round(D.confidence*100),"%"]})]})]})]})}if(N===10&&P==="missing-necklace"){const D=(M=r.artifacts)==null?void 0:M.find(F=>F.id==="bounty-1");if(D)return d.jsxs("div",{className:"float-left mr-6 mb-4 w-72 rounded-lg overflow-hidden border-2 border-dashed border-purple-300 bg-purple-50 shadow-sm cursor-pointer hover:border-purple-400 transition group",children:[d.jsxs("div",{className:"aspect-square bg-gradient-to-br from-purple-100 to-purple-50 flex flex-col items-center justify-center p-6",children:[d.jsx(Xu,{size:48,className:"text-purple-400 mb-3 group-hover:scale-110 transition"}),d.jsxs("div",{className:"text-center",children:[d.jsx("div",{className:"text-xs text-purple-600 font-bold mb-1",children:"MISSING IMAGE"}),d.jsx("div",{className:"text-sm font-semibold text-gray-900 mb-2",children:D.target}),d.jsxs("div",{className:"flex items-center justify-center gap-1 text-purple-700 font-bold text-sm",children:[d.jsx(Sm,{size:14}),D.reward," gems"]})]})]}),d.jsx("div",{className:"bg-purple-100 px-3 py-2 text-xs text-purple-800",children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("span",{children:[D.contributors," contributors"]}),d.jsx("span",{className:"font-medium",children:"Click to contribute "})]})})]})}if(N===16&&P==="crown-image"){const D=(z=r.artifacts)==null?void 0:z.find(F=>F.id==="img-3");if(D)return d.jsxs("div",{className:"float-right ml-6 mb-4 w-80 rounded-lg overflow-hidden border-2 border-yellow-300 bg-yellow-50 shadow-sm",children:[d.jsx("img",{src:D.url,alt:D.caption,className:"w-full h-48 object-cover"}),d.jsxs("div",{className:"bg-yellow-50 px-3 py-2 text-xs",children:[d.jsx("div",{className:"font-medium text-gray-900 mb-1",children:D.caption}),d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("span",{className:"text-gray-600",children:D.source}),d.jsxs("span",{className:"text-yellow-700 flex items-center gap-1 font-medium",children:[d.jsx(Ro,{size:10}),"Pending (",Math.round(D.confidence*100),"%)"]})]}),d.jsxs("div",{className:"mt-2 flex items-center gap-2 text-xs",children:[d.jsxs("span",{className:"flex items-center gap-1 text-green-600",children:[d.jsx(Ca,{size:10})," ",D.votes_for]}),d.jsxs("span",{className:"flex items-center gap-1 text-red-600",children:[d.jsx(ja,{size:10})," ",D.votes_against]}),d.jsx("button",{className:"ml-auto text-blue-600 font-medium hover:text-blue-700",children:"Vote"})]})]})]})}return null};if(b.startsWith("## "))return d.jsxs("div",{children:[d.jsx("div",{className:"clear-both"}),(()=>{var M;const P=b.replace("## ",""),T=(M=r.sub_events)==null?void 0:M.find(z=>z.title.toLowerCase().includes(P.toLowerCase())||P.toLowerCase().includes(z.title.toLowerCase()));if(T){const z=v.has(T.id),D=T.claim_count-T.verified_claims;return d.jsxs("div",{className:"mt-8 mb-4",children:[d.jsxs("button",{onClick:()=>{const F=new Set(v);z?F.delete(T.id):F.add(T.id),m(F)},className:"w-full flex items-center justify-between border-b border-gray-200 pb-2 hover:border-blue-400 transition group text-left",children:[d.jsx("h2",{className:"text-xl font-bold text-gray-900",children:P}),d.jsxs("div",{className:"flex items-center gap-3 flex-shrink-0",children:[d.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[d.jsxs("span",{className:"text-gray-600",children:[T.claim_count," claims"]}),T.disputed_claims>0&&d.jsxs("span",{className:"px-2 py-0.5 bg-red-50 text-red-700 rounded font-medium",children:[T.disputed_claims," disputed"]}),D>T.disputed_claims&&d.jsxs("span",{className:"px-2 py-0.5 bg-yellow-50 text-yellow-700 rounded font-medium",children:[D-T.disputed_claims," unverified"]})]}),z?d.jsx(Xb,{size:18,className:"text-gray-600 group-hover:text-blue-600"}):d.jsx(Yb,{size:18,className:"text-gray-600 group-hover:text-blue-600"})]})]}),z&&d.jsx("div",{className:"mt-4 space-y-2 pl-4 border-l-2 border-blue-200",children:T.claims.map(F=>d.jsx(rk,{claim:F},F.id))})]})}else return d.jsx("h2",{className:"text-xl font-bold text-gray-900 mt-8 mb-4 border-b border-gray-200 pb-2",children:P})})()]},N);if(b.startsWith("**"))return d.jsx("p",{className:"font-semibold text-blue-700 mb-2 mt-4",children:b.replace(/\*\*/g,"")},N);if(b.startsWith("- "))return d.jsx("li",{className:"ml-6 mb-2 text-gray-700 leading-relaxed",children:b.replace("- ","")},N);if(b.trim()==="")return d.jsx("div",{className:"h-2"},N);{const P=tk(b);return d.jsxs("div",{children:[C("after-intro"),C("missing-necklace"),C("crown-image"),d.jsx("p",{className:"mb-4 text-base leading-relaxed",children:P.map((T,M)=>T.type==="entity"?d.jsx(nk,{name:T.name||"",type:T.entityType||"unknown",confidence:T.confidence||0,event:r},M):d.jsx("span",{children:T.content},M))})]},N)}}),d.jsx("div",{className:"clear-both"})]})]}),r.artifacts&&r.artifacts.length>0&&d.jsxs("div",{className:"bg-white rounded-lg p-6 border border-gray-200",children:[d.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Visual Evidence"}),d.jsx("div",{className:"grid grid-cols-1 gap-4",children:r.artifacts.map(b=>{if(b.type==="image")return d.jsxs("div",{className:`rounded-lg overflow-hidden border ${b.status==="verified"?"border-green-300":"border-yellow-300"}`,children:[d.jsx("img",{src:b.url,alt:b.caption,className:"w-full aspect-video object-cover"}),d.jsxs("div",{className:`p-3 ${b.status==="verified"?"bg-green-50":"bg-yellow-50"}`,children:[d.jsxs("div",{className:"flex items-start justify-between gap-3 mb-2",children:[d.jsx("p",{className:"text-gray-900 font-medium flex-1 text-sm",children:b.caption}),d.jsx("div",{className:"flex items-center gap-1",children:b.status==="verified"?d.jsxs(d.Fragment,{children:[d.jsx(Kn,{size:14,className:"text-green-600"}),d.jsx("span",{className:"text-xs text-green-700 font-medium",children:"Verified"})]}):d.jsxs(d.Fragment,{children:[d.jsx(Ro,{size:14,className:"text-yellow-600"}),d.jsx("span",{className:"text-xs text-yellow-700 font-medium",children:"Pending"})]})})]}),d.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-600",children:[d.jsxs("span",{children:["Source: ",b.source]}),d.jsxs("span",{children:[Math.round(b.confidence*100),"% confidence"]}),b.votes_for&&d.jsxs("span",{className:"flex items-center gap-1",children:[d.jsx(Ca,{size:10})," ",b.votes_for," / ",d.jsx(ja,{size:10})," ",b.votes_against]})]})]})]},b.id);if(b.type==="image_bounty")return d.jsx("div",{className:"border-2 border-dashed border-purple-300 bg-purple-50 rounded-lg p-4",children:d.jsxs("div",{className:"flex items-start gap-4",children:[d.jsx("div",{className:"p-2.5 bg-purple-100 rounded-lg",children:d.jsx(Xu,{size:28,className:"text-purple-600"})}),d.jsxs("div",{className:"flex-1",children:[d.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[d.jsx("h4",{className:"text-base font-semibold text-gray-900",children:b.target}),d.jsx("span",{className:"px-2 py-0.5 bg-purple-200 text-purple-700 text-xs font-bold rounded",children:"BOUNTY"})]}),d.jsx("p",{className:"text-gray-700 text-sm mb-3",children:b.description}),d.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[d.jsxs("div",{className:"flex items-center gap-1 text-purple-700 font-semibold",children:[d.jsx(Sm,{size:14}),b.reward," ",b.currency]}),d.jsxs("span",{className:"text-gray-600 text-xs",children:[b.contributors," contributors"]})]}),d.jsx("button",{className:"mt-3 px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg transition text-sm font-medium",children:"Submit Evidence"})]})]})},b.id)})})]}),r.comments&&r.comments.length>0&&d.jsxs("div",{className:"bg-white rounded-lg p-6 border border-gray-200",children:[d.jsxs("div",{className:"mb-6",children:[d.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"Narratives & Community Knowledge"}),d.jsx("p",{className:"text-sm text-gray-600",children:"Perspectives, analysis, and contributions from the community"})]}),d.jsx("div",{className:"space-y-4",children:r.comments.map(b=>{var P;const N={knowledge_contribution:{bg:"bg-green-50",border:"border-green-200",icon:d.jsx(Kn,{size:14,className:"text-green-600"}),label:"Knowledge Contribution",color:"text-green-700"},potential_clue:{bg:"bg-blue-50",border:"border-blue-200",icon:d.jsx(of,{size:14,className:"text-blue-600"}),label:"Potential Clue",color:"text-blue-700"},dispute_resolution:{bg:"bg-orange-50",border:"border-orange-200",icon:d.jsx(jm,{size:14,className:"text-orange-600"}),label:"Dispute Resolution",color:"text-orange-700"},question:{bg:"bg-purple-50",border:"border-purple-200",icon:d.jsx(Ro,{size:14,className:"text-purple-600"}),label:"Question",color:"text-purple-700"}},C=N[b.type]||N.knowledge_contribution;return d.jsxs("div",{className:`${C.bg} ${C.border} border rounded-lg p-4`,children:[d.jsxs("div",{className:"flex items-start justify-between mb-3",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-purple-500 rounded-full flex items-center justify-center text-white font-bold text-sm",children:b.author.name.charAt(0)}),d.jsxs("div",{children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{className:"text-gray-900 font-semibold",children:b.author.name}),b.author.badges&&b.author.badges.map(T=>d.jsxs("span",{className:"px-2 py-0.5 bg-blue-100 text-blue-700 text-xs rounded flex items-center gap-1",children:[d.jsx(jm,{size:10}),T]},T))]}),d.jsxs("div",{className:"flex items-center gap-3 text-xs text-gray-600",children:[d.jsxs("span",{children:["Reputation: ",b.author.reputation]}),d.jsx("span",{children:new Date(b.created_at).toLocaleDateString()})]})]})]}),d.jsxs("div",{className:"flex items-center gap-2",children:[C.icon,d.jsx("span",{className:`text-xs font-medium ${C.color}`,children:C.label})]})]}),d.jsx("p",{className:"text-gray-700 leading-relaxed mb-3",children:b.text}),b.extracted_claims&&b.extracted_claims.length>0&&d.jsxs("div",{className:"mt-3 pt-3 border-t border-green-300",children:[d.jsxs("div",{className:"text-sm font-medium text-green-700 mb-2 flex items-center gap-1",children:[d.jsx(Kn,{size:14}),"Claim Extracted:"]}),b.extracted_claims.map((T,M)=>d.jsxs("div",{className:"bg-green-100 border border-green-300 rounded px-3 py-2 text-sm text-green-900",children:['"',T.text,'"',d.jsxs("span",{className:"text-xs text-green-700 ml-2",children:["(",Math.round(T.confidence*100),"% confidence  ",T.status.replace(/_/g," "),")"]})]},M))]}),b.moderator_note&&d.jsx("div",{className:"mt-3 pt-3 border-t border-gray-300",children:d.jsxs("div",{className:"text-xs text-gray-600 italic",children:[d.jsx("span",{className:"font-medium",children:"Moderator:"})," ",b.moderator_note]})}),d.jsxs("div",{className:"flex items-center justify-between mt-4 pt-3 border-t border-gray-200",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsxs("button",{className:"flex items-center gap-1 text-gray-600 hover:text-green-600 transition",children:[d.jsx(Ca,{size:16}),d.jsx("span",{className:"text-sm font-medium",children:b.votes.for})]}),d.jsxs("button",{className:"flex items-center gap-1 text-gray-600 hover:text-red-600 transition",children:[d.jsx(ja,{size:16}),d.jsx("span",{className:"text-sm font-medium",children:b.votes.against})]})]}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("button",{className:"text-sm text-gray-600 hover:text-gray-900 transition font-medium",children:"Reply"}),b.type==="knowledge_contribution"&&!((P=b.extracted_claims)!=null&&P.length)&&d.jsx("button",{className:"text-sm text-blue-600 hover:text-blue-700 transition font-medium",children:"Extract Claim"})]})]})]},b.id)})}),d.jsxs("div",{className:"mt-6 bg-gray-50 border border-gray-200 rounded-lg p-4",children:[d.jsx("h4",{className:"text-base font-bold text-gray-900 mb-3",children:"Contribute to this Event"}),d.jsx("textarea",{className:"w-full bg-white border border-gray-300 rounded-lg p-3 text-gray-900 placeholder-gray-500 focus:outline-none focus:border-blue-500 transition text-sm",rows:4,placeholder:"Share knowledge, raise questions, or submit clues..."}),d.jsxs("div",{className:"flex items-center justify-between mt-3",children:[d.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-600",children:[d.jsx("span",{children:" Submit a clue"}),d.jsx("span",{children:""}),d.jsx("span",{children:" Ask a question"}),d.jsx("span",{children:""}),d.jsx("span",{children:" Report error"})]}),d.jsx("button",{className:"px-5 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition font-medium text-sm",children:"Post Comment"})]})]})]})]}),d.jsxs("div",{className:"lg:col-span-1 space-y-4",children:[d.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-purple-50 rounded-lg p-4 border border-blue-200 sticky top-24",children:[d.jsxs("div",{className:"mb-4",children:[d.jsxs("div",{className:"flex items-center justify-between mb-2",children:[d.jsx("span",{className:"text-xs text-gray-600 font-medium",children:"EVENT COHERENCE"}),d.jsx("span",{className:`text-xs font-bold ${r.coherence>=80?"text-green-600":r.coherence>=60?"text-blue-600":"text-yellow-600"}`,children:r.coherence>=80?"Excellent":r.coherence>=60?"Good":"Developing"})]}),d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:"flex-1",children:d.jsx("div",{className:"h-2 bg-gray-200 rounded-full overflow-hidden",children:d.jsx("div",{className:`h-full rounded-full transition-all ${r.coherence>=80?"bg-green-500":r.coherence>=60?"bg-blue-500":"bg-yellow-500"}`,style:{width:`${r.coherence}%`}})})}),d.jsx("div",{className:"text-2xl font-bold text-gray-900",children:Math.round(r.coherence)})]}),d.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Based on source agreement & verification"})]}),d.jsxs("div",{className:"border-t border-gray-200 pt-4 mb-4",children:[d.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[d.jsx(Cm,{size:18,className:"text-blue-600"}),d.jsx("h3",{className:"font-bold text-gray-900 text-sm",children:"Fund Event Contributors"})]}),d.jsxs("div",{className:"bg-white rounded-lg p-3 border border-gray-200 mb-3",children:[d.jsxs("div",{className:"flex items-center justify-between mb-2",children:[d.jsx("span",{className:"text-xs text-gray-600",children:"Total Funded"}),d.jsxs("span",{className:"text-lg font-bold text-blue-600",children:[r.economics.total_tips," ",d.jsx("span",{className:"text-xs text-gray-600",children:"credits"})]})]}),d.jsxs("div",{className:"flex items-center justify-between text-xs",children:[d.jsx("span",{className:"text-gray-600",children:"Contributors"}),d.jsxs("span",{className:"font-semibold text-gray-900",children:[r.economics.contributor_count," people"]})]})]}),d.jsxs("div",{className:"bg-gray-50 rounded p-2 mb-3",children:[d.jsx("div",{className:"text-xs text-gray-500 mb-2 font-medium",children:"Distribution"}),d.jsx("div",{className:"space-y-1 text-xs",children:Object.entries(r.economics.funding_breakdown).map(([b,N])=>d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("span",{className:"text-gray-600 capitalize",children:[" ",b.replace(/_/g," ")]}),d.jsxs("span",{className:"font-semibold text-gray-900",children:[N,""]})]},b))}),d.jsx("button",{className:"text-xs text-blue-600 hover:text-blue-700 mt-2 font-medium",children:"View full breakdown "})]}),d.jsxs("div",{className:"bg-white rounded-lg p-3 border-2 border-blue-400 mb-2",children:[d.jsx("div",{className:"text-xs font-medium text-gray-900 mb-2",children:"Support contributors who:"}),d.jsxs("ul",{className:"text-xs text-gray-600 space-y-1 mb-3",children:[d.jsxs("li",{children:[" Verified ",r.claim_count," claims"]}),d.jsxs("li",{children:[" Submitted ",(y=r.artifacts)==null?void 0:y.filter(b=>b.type==="image").length," verified images"]}),d.jsx("li",{children:" Contributed sources & analysis"})]}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx("button",{className:"flex-1 py-2 bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded transition text-xs",children:"Fund 100"}),d.jsx("button",{className:"px-3 py-2 bg-blue-100 hover:bg-blue-200 text-blue-700 font-medium rounded transition text-xs",children:"Custom"})]})]}),d.jsx("div",{className:"text-xs text-gray-500 text-center",children:"1 credit = 1  Distributed to all contributors"})]})]}),r.bounties&&r.bounties.length>0&&d.jsxs("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:[d.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[d.jsx(Xu,{size:18,className:"text-purple-600"}),d.jsx("h3",{className:"font-bold text-gray-900 text-sm",children:"Active Bounties"})]}),d.jsx("div",{className:"space-y-2",children:r.bounties.slice(0,3).map(b=>d.jsxs("div",{className:"p-2 bg-purple-50 rounded border border-purple-200",children:[d.jsx("div",{className:"text-xs font-medium text-gray-900 mb-1",children:b.target}),d.jsxs("div",{className:"flex items-center justify-between text-xs",children:[d.jsxs("span",{className:"text-purple-700 font-bold",children:[b.reward," gems"]}),d.jsxs("span",{className:"text-gray-600",children:[b.submissions," submissions"]})]})]},b.id))}),d.jsx("button",{className:"w-full mt-2 py-1.5 text-xs text-purple-600 hover:text-purple-700 font-medium",children:"View All Bounties "})]}),d.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[d.jsx("h3",{className:"font-bold text-gray-900 text-sm mb-3",children:"Event Stats"}),d.jsxs("div",{className:"space-y-2 text-xs",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("span",{className:"text-gray-600",children:"Verified Claims"}),d.jsx("span",{className:"font-semibold text-green-600",children:((k=r.sub_events)==null?void 0:k.reduce((b,N)=>b+N.verified_claims,0))||0})]}),d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("span",{className:"text-gray-600",children:"Disputed Claims"}),d.jsx("span",{className:"font-semibold text-red-600",children:((S=r.sub_events)==null?void 0:S.reduce((b,N)=>b+N.disputed_claims,0))||0})]}),d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("span",{className:"text-gray-600",children:"Images"}),d.jsxs("span",{className:"font-semibold text-gray-900",children:[((E=r.artifacts)==null?void 0:E.filter(b=>b.type==="image").length)||0," verified"]})]}),d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("span",{className:"text-gray-600",children:"Missing"}),d.jsxs("span",{className:"font-semibold text-purple-600",children:[((w=r.artifacts)==null?void 0:w.filter(b=>b.type==="image_bounty").length)||0," bounties"]})]})]})]})]})]}),h==="timeline"&&d.jsxs("div",{className:"max-w-4xl",children:[d.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Complete Event Timeline"}),d.jsx("p",{className:"text-gray-600 mb-8",children:"Chronological sequence of all verified developments in the Louvre Heist 2025"}),r.timeline&&r.timeline.length>0?d.jsxs("div",{className:"relative",children:[d.jsx("div",{className:"absolute left-8 top-0 bottom-0 w-0.5 bg-blue-200"}),d.jsx("div",{className:"space-y-6",children:r.timeline.map(b=>d.jsxs("div",{className:"relative flex gap-6",children:[d.jsx("div",{className:`relative z-10 flex items-center justify-center w-16 h-16 rounded-full border-4 border-white shadow-md ${b.severity==="critical"?"bg-red-500":b.severity==="high"?"bg-orange-500":b.severity==="medium"?"bg-blue-500":"bg-green-500"}`,children:d.jsx(Kn,{size:24,className:"text-white"})}),d.jsxs("div",{className:"flex-1 bg-white rounded-lg p-6 border border-gray-200 shadow-sm",children:[d.jsxs("div",{className:"flex items-start justify-between mb-3",children:[d.jsxs("div",{className:"flex-1",children:[d.jsxs("div",{className:"text-sm text-blue-600 mb-2 flex items-center gap-2",children:[d.jsx(Kb,{size:14}),_(b.date)]}),d.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:b.title})]}),b.verified&&d.jsxs("div",{className:"flex items-center gap-1 text-green-600 text-sm",children:[d.jsx(Kn,{size:16}),d.jsx("span",{children:"Verified"})]})]}),d.jsx("p",{className:"text-gray-700 leading-relaxed mb-3",children:b.description}),d.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[d.jsx("span",{className:`px-2 py-1 rounded ${b.type==="event"?"bg-red-50 text-red-700":b.type==="development"?"bg-blue-50 text-blue-700":"bg-purple-50 text-purple-700"}`,children:b.type}),b.sources&&d.jsxs("span",{className:"flex items-center gap-1",children:[d.jsx(sf,{size:14}),b.sources," source",b.sources!==1?"s":""]})]})]})]},b.id))})]}):d.jsxs("div",{className:"text-center py-12 text-gray-500",children:[d.jsx(Nm,{size:48,className:"mx-auto mb-4 opacity-50"}),d.jsx("p",{children:"Timeline data will be added as more events are verified"})]})]})]})]})};function ok(){const e=gn(),[n,r]=A.useState([]),[i,s]=A.useState(!0),[a,u]=A.useState("all"),[c,h]=A.useState("");A.useEffect(()=>{p();const _=setInterval(p,2e3);return()=>clearInterval(_)},[]);const p=async()=>{try{const _=await fetch("/api/events/mine",{credentials:"include"});if(_.ok){const y=await _.json();r(y)}s(!1)}catch(_){console.error("Failed to load submissions:",_),s(!1)}},v=n.filter(_=>{var y,k;if(a!=="all"&&_.status!==a)return!1;if(c){const S=c.toLowerCase();return((y=_.urls)==null?void 0:y.toLowerCase().includes(S))||((k=_.content)==null?void 0:k.toLowerCase().includes(S))}return!0}),m={all:n.length,pending:n.filter(_=>_.status==="pending").length,extracting:n.filter(_=>_.status==="extracting").length,completed:n.filter(_=>_.status==="completed").length,failed:n.filter(_=>_.status==="failed").length};return d.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 to-white",children:[d.jsx(Ao,{}),d.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[d.jsxs("div",{className:"mb-8",children:[d.jsxs("button",{onClick:()=>e("/"),className:"text-indigo-600 hover:text-indigo-800 mb-4 flex items-center gap-2",children:[d.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back to Feed"]}),d.jsx("h1",{className:"text-3xl font-bold text-slate-900 mb-2",children:"My Archive"}),d.jsx("p",{className:"text-slate-600",children:"View and manage your submitted URLs"})]}),d.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4 mb-6",children:[d.jsx("div",{className:"mb-4",children:d.jsx("input",{type:"text",placeholder:"Search by URL or content...",value:c,onChange:_=>h(_.target.value),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500"})}),d.jsx("div",{className:"flex gap-2 flex-wrap",children:["all","pending","extracting","completed","failed"].map(_=>d.jsxs("button",{onClick:()=>u(_),className:`px-4 py-2 rounded-lg font-medium transition-colors ${a===_?"bg-indigo-600 text-white":"bg-slate-100 text-slate-700 hover:bg-slate-200"}`,children:[_.charAt(0).toUpperCase()+_.slice(1),d.jsxs("span",{className:"ml-2 text-sm opacity-75",children:["(",m[_],")"]})]},_))})]}),i?d.jsxs("div",{className:"text-center py-16",children:[d.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto"}),d.jsx("p",{className:"mt-4 text-slate-600",children:"Loading your archive..."})]}):v.length===0?d.jsxs("div",{className:"text-center py-16 bg-white rounded-lg shadow-sm",children:[d.jsx("svg",{className:"w-16 h-16 mx-auto text-slate-300 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),d.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"No submissions found"}),d.jsx("p",{className:"text-slate-600 mb-4",children:c||a!=="all"?"Try adjusting your filters or search query":"Start by submitting your first URL from the home page"}),(c||a!=="all")&&d.jsx("button",{onClick:()=>{h(""),u("all")},className:"text-indigo-600 hover:text-indigo-800 font-medium",children:"Clear filters"})]}):d.jsx("div",{className:"space-y-4",children:v.map(_=>d.jsx(s_,{submission:_},_.id))}),!i&&n.length>0&&d.jsxs("div",{className:"mt-8 text-center text-sm text-slate-500",children:["Showing ",v.length," of ",n.length," submission",n.length!==1?"s":""]})]})]})}function sk(e,n){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var i,s,a,u,c=[],h=!0,p=!1;try{if(a=(r=r.call(e)).next,n===0){if(Object(r)!==r)return;h=!1}else for(;!(h=(i=a.call(r)).done)&&(c.push(i.value),c.length!==n);h=!0);}catch(v){p=!0,s=v}finally{try{if(!h&&r.return!=null&&(u=r.return(),Object(u)!==u))return}finally{if(p)throw s}}return c}}function ak(e,n,r){return n=mk(n),n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function Pm(e,n){return ck(e)||sk(e,n)||u_(e,n)||dk()}function lk(e){return uk(e)||fk(e)||u_(e)||hk()}function uk(e){if(Array.isArray(e))return af(e)}function ck(e){if(Array.isArray(e))return e}function fk(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function u_(e,n){if(e){if(typeof e=="string")return af(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return af(e,n)}}function af(e,n){(n==null||n>e.length)&&(n=e.length);for(var r=0,i=new Array(n);r<n;r++)i[r]=e[r];return i}function hk(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dk(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pk(e,n){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,n);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(e)}function mk(e){var n=pk(e,"string");return typeof n=="symbol"?n:String(n)}var gk=function(n,r){var i=new Set(r);return Object.assign.apply(Object,[{}].concat(lk(Object.entries(n).filter(function(s){var a=Pm(s,1),u=a[0];return!i.has(u)}).map(function(s){var a=Pm(s,2),u=a[0],c=a[1];return ak({},u,c)}))))};function lf(e,n){(n==null||n>e.length)&&(n=e.length);for(var r=0,i=Array(n);r<n;r++)i[r]=e[r];return i}function vk(e){if(Array.isArray(e))return e}function _k(e){if(Array.isArray(e))return lf(e)}function yk(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function xk(e,n){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var i,s,a,u,c=[],h=!0,p=!1;try{if(a=(r=r.call(e)).next,n!==0)for(;!(h=(i=a.call(r)).done)&&(c.push(i.value),c.length!==n);h=!0);}catch(v){p=!0,s=v}finally{try{if(!h&&r.return!=null&&(u=r.return(),Object(u)!==u))return}finally{if(p)throw s}}return c}}function wk(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bk(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kk(e,n){return vk(e)||xk(e,n)||c_(e,n)||wk()}function Em(e){return _k(e)||yk(e)||c_(e)||bk()}function c_(e,n){if(e){if(typeof e=="string")return lf(e,n);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?lf(e,n):void 0}}function Nk(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=n.wrapperElementType,i=r===void 0?"div":r,s=n.nodeMapper,a=s===void 0?function(v){return v}:s,u=n.methodNames,c=u===void 0?[]:u,h=n.initPropNames,p=h===void 0?[]:h;return A.forwardRef(function(v,m){var _=A.useRef(),y=A.useMemo(function(){var E=Object.fromEntries(p.filter(function(w){return v.hasOwnProperty(w)}).map(function(w){return[w,v[w]]}));return e(E)},[]);Tm(function(){y(a(_.current))},A.useLayoutEffect),Tm(function(){return y._destructor instanceof Function?y._destructor:void 0});var k=A.useCallback(function(E){for(var w=arguments.length,b=new Array(w>1?w-1:0),N=1;N<w;N++)b[N-1]=arguments[N];return y[E]instanceof Function?y[E].apply(y,b):void 0},[y]),S=A.useRef({});return Object.keys(gk(v,[].concat(Em(c),Em(p)))).filter(function(E){return S.current[E]!==v[E]}).forEach(function(E){return k(E,v[E])}),S.current=v,A.useImperativeHandle(m,function(){return Object.fromEntries(c.map(function(E){return[E,function(){for(var w=arguments.length,b=new Array(w),N=0;N<w;N++)b[N]=arguments[N];return k.apply(void 0,[E].concat(b))}]}))},[k]),Rr.createElement(i,{ref:_})})}function Tm(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:A.useEffect,r=A.useRef(),i=A.useRef(!1),s=A.useRef(!1),a=A.useState(0),u=kk(a,2);u[0];var c=u[1];i.current&&(s.current=!0),n(function(){return i.current||(r.current=e(),i.current=!0),c(function(h){return h+1}),function(){s.current&&r.current&&r.current()}},[])}var uf="http://www.w3.org/1999/xhtml";const Lm={svg:"http://www.w3.org/2000/svg",xhtml:uf,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function zl(e){var n=e+="",r=n.indexOf(":");return r>=0&&(n=e.slice(0,r))!=="xmlns"&&(e=e.slice(r+1)),Lm.hasOwnProperty(n)?{space:Lm[n],local:e}:e}function Sk(e){return function(){var n=this.ownerDocument,r=this.namespaceURI;return r===uf&&n.documentElement.namespaceURI===uf?n.createElement(e):n.createElementNS(r,e)}}function jk(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function f_(e){var n=zl(e);return(n.local?jk:Sk)(n)}function Ck(){}function Th(e){return e==null?Ck:function(){return this.querySelector(e)}}function Pk(e){typeof e!="function"&&(e=Th(e));for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s)for(var a=n[s],u=a.length,c=i[s]=new Array(u),h,p,v=0;v<u;++v)(h=a[v])&&(p=e.call(h,h.__data__,v,a))&&("__data__"in h&&(p.__data__=h.__data__),c[v]=p);return new jt(i,this._parents)}function Ek(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Tk(){return[]}function h_(e){return e==null?Tk:function(){return this.querySelectorAll(e)}}function Lk(e){return function(){return Ek(e.apply(this,arguments))}}function Mk(e){typeof e=="function"?e=Lk(e):e=h_(e);for(var n=this._groups,r=n.length,i=[],s=[],a=0;a<r;++a)for(var u=n[a],c=u.length,h,p=0;p<c;++p)(h=u[p])&&(i.push(e.call(h,h.__data__,p,u)),s.push(h));return new jt(i,s)}function d_(e){return function(){return this.matches(e)}}function p_(e){return function(n){return n.matches(e)}}var zk=Array.prototype.find;function Ok(e){return function(){return zk.call(this.children,e)}}function Ak(){return this.firstElementChild}function Rk(e){return this.select(e==null?Ak:Ok(typeof e=="function"?e:p_(e)))}var Ik=Array.prototype.filter;function Dk(){return Array.from(this.children)}function Fk(e){return function(){return Ik.call(this.children,e)}}function Bk(e){return this.selectAll(e==null?Dk:Fk(typeof e=="function"?e:p_(e)))}function Uk(e){typeof e!="function"&&(e=d_(e));for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s)for(var a=n[s],u=a.length,c=i[s]=[],h,p=0;p<u;++p)(h=a[p])&&e.call(h,h.__data__,p,a)&&c.push(h);return new jt(i,this._parents)}function m_(e){return new Array(e.length)}function $k(){return new jt(this._enter||this._groups.map(m_),this._parents)}function il(e,n){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=n}il.prototype={constructor:il,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,n){return this._parent.insertBefore(e,n)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Hk(e){return function(){return e}}function Zk(e,n,r,i,s,a){for(var u=0,c,h=n.length,p=a.length;u<p;++u)(c=n[u])?(c.__data__=a[u],i[u]=c):r[u]=new il(e,a[u]);for(;u<h;++u)(c=n[u])&&(s[u]=c)}function Wk(e,n,r,i,s,a,u){var c,h,p=new Map,v=n.length,m=a.length,_=new Array(v),y;for(c=0;c<v;++c)(h=n[c])&&(_[c]=y=u.call(h,h.__data__,c,n)+"",p.has(y)?s[c]=h:p.set(y,h));for(c=0;c<m;++c)y=u.call(e,a[c],c,a)+"",(h=p.get(y))?(i[c]=h,h.__data__=a[c],p.delete(y)):r[c]=new il(e,a[c]);for(c=0;c<v;++c)(h=n[c])&&p.get(_[c])===h&&(s[c]=h)}function Vk(e){return e.__data__}function qk(e,n){if(!arguments.length)return Array.from(this,Vk);var r=n?Wk:Zk,i=this._parents,s=this._groups;typeof e!="function"&&(e=Hk(e));for(var a=s.length,u=new Array(a),c=new Array(a),h=new Array(a),p=0;p<a;++p){var v=i[p],m=s[p],_=m.length,y=Gk(e.call(v,v&&v.__data__,p,i)),k=y.length,S=c[p]=new Array(k),E=u[p]=new Array(k),w=h[p]=new Array(_);r(v,m,S,E,w,y,n);for(var b=0,N=0,C,P;b<k;++b)if(C=S[b]){for(b>=N&&(N=b+1);!(P=E[N])&&++N<k;);C._next=P||null}}return u=new jt(u,i),u._enter=c,u._exit=h,u}function Gk(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Kk(){return new jt(this._exit||this._groups.map(m_),this._parents)}function Yk(e,n,r){var i=this.enter(),s=this,a=this.exit();return typeof e=="function"?(i=e(i),i&&(i=i.selection())):i=i.append(e+""),n!=null&&(s=n(s),s&&(s=s.selection())),r==null?a.remove():r(a),i&&s?i.merge(s).order():s}function Xk(e){for(var n=e.selection?e.selection():e,r=this._groups,i=n._groups,s=r.length,a=i.length,u=Math.min(s,a),c=new Array(s),h=0;h<u;++h)for(var p=r[h],v=i[h],m=p.length,_=c[h]=new Array(m),y,k=0;k<m;++k)(y=p[k]||v[k])&&(_[k]=y);for(;h<s;++h)c[h]=r[h];return new jt(c,this._parents)}function Qk(){for(var e=this._groups,n=-1,r=e.length;++n<r;)for(var i=e[n],s=i.length-1,a=i[s],u;--s>=0;)(u=i[s])&&(a&&u.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(u,a),a=u);return this}function Jk(e){e||(e=eN);function n(m,_){return m&&_?e(m.__data__,_.__data__):!m-!_}for(var r=this._groups,i=r.length,s=new Array(i),a=0;a<i;++a){for(var u=r[a],c=u.length,h=s[a]=new Array(c),p,v=0;v<c;++v)(p=u[v])&&(h[v]=p);h.sort(n)}return new jt(s,this._parents).order()}function eN(e,n){return e<n?-1:e>n?1:e>=n?0:NaN}function tN(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function nN(){return Array.from(this)}function rN(){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],s=0,a=i.length;s<a;++s){var u=i[s];if(u)return u}return null}function iN(){let e=0;for(const n of this)++e;return e}function oN(){return!this.node()}function sN(e){for(var n=this._groups,r=0,i=n.length;r<i;++r)for(var s=n[r],a=0,u=s.length,c;a<u;++a)(c=s[a])&&e.call(c,c.__data__,a,s);return this}function aN(e){return function(){this.removeAttribute(e)}}function lN(e){return function(){this.removeAttributeNS(e.space,e.local)}}function uN(e,n){return function(){this.setAttribute(e,n)}}function cN(e,n){return function(){this.setAttributeNS(e.space,e.local,n)}}function fN(e,n){return function(){var r=n.apply(this,arguments);r==null?this.removeAttribute(e):this.setAttribute(e,r)}}function hN(e,n){return function(){var r=n.apply(this,arguments);r==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,r)}}function dN(e,n){var r=zl(e);if(arguments.length<2){var i=this.node();return r.local?i.getAttributeNS(r.space,r.local):i.getAttribute(r)}return this.each((n==null?r.local?lN:aN:typeof n=="function"?r.local?hN:fN:r.local?cN:uN)(r,n))}function g_(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function pN(e){return function(){this.style.removeProperty(e)}}function mN(e,n,r){return function(){this.style.setProperty(e,n,r)}}function gN(e,n,r){return function(){var i=n.apply(this,arguments);i==null?this.style.removeProperty(e):this.style.setProperty(e,i,r)}}function vN(e,n,r){return arguments.length>1?this.each((n==null?pN:typeof n=="function"?gN:mN)(e,n,r??"")):zi(this.node(),e)}function zi(e,n){return e.style.getPropertyValue(n)||g_(e).getComputedStyle(e,null).getPropertyValue(n)}function _N(e){return function(){delete this[e]}}function yN(e,n){return function(){this[e]=n}}function xN(e,n){return function(){var r=n.apply(this,arguments);r==null?delete this[e]:this[e]=r}}function wN(e,n){return arguments.length>1?this.each((n==null?_N:typeof n=="function"?xN:yN)(e,n)):this.node()[e]}function v_(e){return e.trim().split(/^|\s+/)}function Lh(e){return e.classList||new __(e)}function __(e){this._node=e,this._names=v_(e.getAttribute("class")||"")}__.prototype={add:function(e){var n=this._names.indexOf(e);n<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var n=this._names.indexOf(e);n>=0&&(this._names.splice(n,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function y_(e,n){for(var r=Lh(e),i=-1,s=n.length;++i<s;)r.add(n[i])}function x_(e,n){for(var r=Lh(e),i=-1,s=n.length;++i<s;)r.remove(n[i])}function bN(e){return function(){y_(this,e)}}function kN(e){return function(){x_(this,e)}}function NN(e,n){return function(){(n.apply(this,arguments)?y_:x_)(this,e)}}function SN(e,n){var r=v_(e+"");if(arguments.length<2){for(var i=Lh(this.node()),s=-1,a=r.length;++s<a;)if(!i.contains(r[s]))return!1;return!0}return this.each((typeof n=="function"?NN:n?bN:kN)(r,n))}function jN(){this.textContent=""}function CN(e){return function(){this.textContent=e}}function PN(e){return function(){var n=e.apply(this,arguments);this.textContent=n??""}}function EN(e){return arguments.length?this.each(e==null?jN:(typeof e=="function"?PN:CN)(e)):this.node().textContent}function TN(){this.innerHTML=""}function LN(e){return function(){this.innerHTML=e}}function MN(e){return function(){var n=e.apply(this,arguments);this.innerHTML=n??""}}function zN(e){return arguments.length?this.each(e==null?TN:(typeof e=="function"?MN:LN)(e)):this.node().innerHTML}function ON(){this.nextSibling&&this.parentNode.appendChild(this)}function AN(){return this.each(ON)}function RN(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function IN(){return this.each(RN)}function DN(e){var n=typeof e=="function"?e:f_(e);return this.select(function(){return this.appendChild(n.apply(this,arguments))})}function FN(){return null}function BN(e,n){var r=typeof e=="function"?e:f_(e),i=n==null?FN:typeof n=="function"?n:Th(n);return this.select(function(){return this.insertBefore(r.apply(this,arguments),i.apply(this,arguments)||null)})}function UN(){var e=this.parentNode;e&&e.removeChild(this)}function $N(){return this.each(UN)}function HN(){var e=this.cloneNode(!1),n=this.parentNode;return n?n.insertBefore(e,this.nextSibling):e}function ZN(){var e=this.cloneNode(!0),n=this.parentNode;return n?n.insertBefore(e,this.nextSibling):e}function WN(e){return this.select(e?ZN:HN)}function VN(e){return arguments.length?this.property("__data__",e):this.node().__data__}function qN(e){return function(n){e.call(this,n,this.__data__)}}function GN(e){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");return i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),{type:n,name:r}})}function KN(e){return function(){var n=this.__on;if(n){for(var r=0,i=-1,s=n.length,a;r<s;++r)a=n[r],(!e.type||a.type===e.type)&&a.name===e.name?this.removeEventListener(a.type,a.listener,a.options):n[++i]=a;++i?n.length=i:delete this.__on}}}function YN(e,n,r){return function(){var i=this.__on,s,a=qN(n);if(i){for(var u=0,c=i.length;u<c;++u)if((s=i[u]).type===e.type&&s.name===e.name){this.removeEventListener(s.type,s.listener,s.options),this.addEventListener(s.type,s.listener=a,s.options=r),s.value=n;return}}this.addEventListener(e.type,a,r),s={type:e.type,name:e.name,value:n,listener:a,options:r},i?i.push(s):this.__on=[s]}}function XN(e,n,r){var i=GN(e+""),s,a=i.length,u;if(arguments.length<2){var c=this.node().__on;if(c){for(var h=0,p=c.length,v;h<p;++h)for(s=0,v=c[h];s<a;++s)if((u=i[s]).type===v.type&&u.name===v.name)return v.value}return}for(c=n?YN:KN,s=0;s<a;++s)this.each(c(i[s],n,r));return this}function w_(e,n,r){var i=g_(e),s=i.CustomEvent;typeof s=="function"?s=new s(n,r):(s=i.document.createEvent("Event"),r?(s.initEvent(n,r.bubbles,r.cancelable),s.detail=r.detail):s.initEvent(n,!1,!1)),e.dispatchEvent(s)}function QN(e,n){return function(){return w_(this,e,n)}}function JN(e,n){return function(){return w_(this,e,n.apply(this,arguments))}}function eS(e,n){return this.each((typeof n=="function"?JN:QN)(e,n))}function*tS(){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],s=0,a=i.length,u;s<a;++s)(u=i[s])&&(yield u)}var b_=[null];function jt(e,n){this._groups=e,this._parents=n}function ys(){return new jt([[document.documentElement]],b_)}function nS(){return this}jt.prototype=ys.prototype={constructor:jt,select:Pk,selectAll:Mk,selectChild:Rk,selectChildren:Bk,filter:Uk,data:qk,enter:$k,exit:Kk,join:Yk,merge:Xk,selection:nS,order:Qk,sort:Jk,call:tN,nodes:nN,node:rN,size:iN,empty:oN,each:sN,attr:dN,style:vN,property:wN,classed:SN,text:EN,html:zN,raise:AN,lower:IN,append:DN,insert:BN,remove:$N,clone:WN,datum:VN,on:XN,dispatch:eS,[Symbol.iterator]:tS};function Rt(e){return typeof e=="string"?new jt([[document.querySelector(e)]],[document.documentElement]):new jt([[e]],b_)}function rS(e){let n;for(;n=e.sourceEvent;)e=n;return e}function un(e,n){if(e=rS(e),n===void 0&&(n=e.currentTarget),n){var r=n.ownerSVGElement||n;if(r.createSVGPoint){var i=r.createSVGPoint();return i.x=e.clientX,i.y=e.clientY,i=i.matrixTransform(n.getScreenCTM().inverse()),[i.x,i.y]}if(n.getBoundingClientRect){var s=n.getBoundingClientRect();return[e.clientX-s.left-n.clientLeft,e.clientY-s.top-n.clientTop]}}return[e.pageX,e.pageY]}var iS={value:()=>{}};function xs(){for(var e=0,n=arguments.length,r={},i;e<n;++e){if(!(i=arguments[e]+"")||i in r||/[\s.]/.test(i))throw new Error("illegal type: "+i);r[i]=[]}return new Pa(r)}function Pa(e){this._=e}function oS(e,n){return e.trim().split(/^|\s+/).map(function(r){var i="",s=r.indexOf(".");if(s>=0&&(i=r.slice(s+1),r=r.slice(0,s)),r&&!n.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:i}})}Pa.prototype=xs.prototype={constructor:Pa,on:function(e,n){var r=this._,i=oS(e+"",r),s,a=-1,u=i.length;if(arguments.length<2){for(;++a<u;)if((s=(e=i[a]).type)&&(s=sS(r[s],e.name)))return s;return}if(n!=null&&typeof n!="function")throw new Error("invalid callback: "+n);for(;++a<u;)if(s=(e=i[a]).type)r[s]=Mm(r[s],e.name,n);else if(n==null)for(s in r)r[s]=Mm(r[s],e.name,null);return this},copy:function(){var e={},n=this._;for(var r in n)e[r]=n[r].slice();return new Pa(e)},call:function(e,n){if((s=arguments.length-2)>0)for(var r=new Array(s),i=0,s,a;i<s;++i)r[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=this._[e],i=0,s=a.length;i<s;++i)a[i].value.apply(n,r)},apply:function(e,n,r){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var i=this._[e],s=0,a=i.length;s<a;++s)i[s].value.apply(n,r)}};function sS(e,n){for(var r=0,i=e.length,s;r<i;++r)if((s=e[r]).name===n)return s.value}function Mm(e,n,r){for(var i=0,s=e.length;i<s;++i)if(e[i].name===n){e[i]=iS,e=e.slice(0,i).concat(e.slice(i+1));break}return r!=null&&e.push({name:n,value:r}),e}const aS={passive:!1},os={capture:!0,passive:!1};function Qu(e){e.stopImmediatePropagation()}function ki(e){e.preventDefault(),e.stopImmediatePropagation()}function k_(e){var n=e.document.documentElement,r=Rt(e).on("dragstart.drag",ki,os);"onselectstart"in n?r.on("selectstart.drag",ki,os):(n.__noselect=n.style.MozUserSelect,n.style.MozUserSelect="none")}function N_(e,n){var r=e.document.documentElement,i=Rt(e).on("dragstart.drag",null);n&&(i.on("click.drag",ki,os),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in r?i.on("selectstart.drag",null):(r.style.MozUserSelect=r.__noselect,delete r.__noselect)}const aa=e=>()=>e;function cf(e,{sourceEvent:n,subject:r,target:i,identifier:s,active:a,x:u,y:c,dx:h,dy:p,dispatch:v}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},subject:{value:r,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:s,enumerable:!0,configurable:!0},active:{value:a,enumerable:!0,configurable:!0},x:{value:u,enumerable:!0,configurable:!0},y:{value:c,enumerable:!0,configurable:!0},dx:{value:h,enumerable:!0,configurable:!0},dy:{value:p,enumerable:!0,configurable:!0},_:{value:v}})}cf.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function lS(e){return!e.ctrlKey&&!e.button}function uS(){return this.parentNode}function cS(e,n){return n??{x:e.x,y:e.y}}function fS(){return navigator.maxTouchPoints||"ontouchstart"in this}function hS(){var e=lS,n=uS,r=cS,i=fS,s={},a=xs("start","drag","end"),u=0,c,h,p,v,m=0;function _(C){C.on("mousedown.drag",y).filter(i).on("touchstart.drag",E).on("touchmove.drag",w,aS).on("touchend.drag touchcancel.drag",b).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function y(C,P){if(!(v||!e.call(this,C,P))){var T=N(this,n.call(this,C,P),C,P,"mouse");T&&(Rt(C.view).on("mousemove.drag",k,os).on("mouseup.drag",S,os),k_(C.view),Qu(C),p=!1,c=C.clientX,h=C.clientY,T("start",C))}}function k(C){if(ki(C),!p){var P=C.clientX-c,T=C.clientY-h;p=P*P+T*T>m}s.mouse("drag",C)}function S(C){Rt(C.view).on("mousemove.drag mouseup.drag",null),N_(C.view,p),ki(C),s.mouse("end",C)}function E(C,P){if(e.call(this,C,P)){var T=C.changedTouches,M=n.call(this,C,P),z=T.length,D,F;for(D=0;D<z;++D)(F=N(this,M,C,P,T[D].identifier,T[D]))&&(Qu(C),F("start",C,T[D]))}}function w(C){var P=C.changedTouches,T=P.length,M,z;for(M=0;M<T;++M)(z=s[P[M].identifier])&&(ki(C),z("drag",C,P[M]))}function b(C){var P=C.changedTouches,T=P.length,M,z;for(v&&clearTimeout(v),v=setTimeout(function(){v=null},500),M=0;M<T;++M)(z=s[P[M].identifier])&&(Qu(C),z("end",C,P[M]))}function N(C,P,T,M,z,D){var F=a.copy(),V=un(D||T,P),H,Q,R;if((R=r.call(C,new cf("beforestart",{sourceEvent:T,target:_,identifier:z,active:u,x:V[0],y:V[1],dx:0,dy:0,dispatch:F}),M))!=null)return H=R.x-V[0]||0,Q=R.y-V[1]||0,function G(W,ee,U){var K=V,Z;switch(W){case"start":s[z]=G,Z=u++;break;case"end":delete s[z],--u;case"drag":V=un(U||ee,P),Z=u;break}F.call(W,C,new cf(W,{sourceEvent:ee,subject:R,target:_,identifier:z,active:Z,x:V[0]+H,y:V[1]+Q,dx:V[0]-K[0],dy:V[1]-K[1],dispatch:F}),M)}}return _.filter=function(C){return arguments.length?(e=typeof C=="function"?C:aa(!!C),_):e},_.container=function(C){return arguments.length?(n=typeof C=="function"?C:aa(C),_):n},_.subject=function(C){return arguments.length?(r=typeof C=="function"?C:aa(C),_):r},_.touchable=function(C){return arguments.length?(i=typeof C=="function"?C:aa(!!C),_):i},_.on=function(){var C=a.on.apply(a,arguments);return C===a?_:C},_.clickDistance=function(C){return arguments.length?(m=(C=+C)*C,_):Math.sqrt(m)},_}function Mh(e,n,r){e.prototype=n.prototype=r,r.constructor=e}function S_(e,n){var r=Object.create(e.prototype);for(var i in n)r[i]=n[i];return r}function ws(){}var ss=.7,ol=1/ss,Ni="\\s*([+-]?\\d+)\\s*",as="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",pn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",dS=/^#([0-9a-f]{3,8})$/,pS=new RegExp(`^rgb\\(${Ni},${Ni},${Ni}\\)$`),mS=new RegExp(`^rgb\\(${pn},${pn},${pn}\\)$`),gS=new RegExp(`^rgba\\(${Ni},${Ni},${Ni},${as}\\)$`),vS=new RegExp(`^rgba\\(${pn},${pn},${pn},${as}\\)$`),_S=new RegExp(`^hsl\\(${as},${pn},${pn}\\)$`),yS=new RegExp(`^hsla\\(${as},${pn},${pn},${as}\\)$`),zm={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Mh(ws,ls,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Om,formatHex:Om,formatHex8:xS,formatHsl:wS,formatRgb:Am,toString:Am});function Om(){return this.rgb().formatHex()}function xS(){return this.rgb().formatHex8()}function wS(){return j_(this).formatHsl()}function Am(){return this.rgb().formatRgb()}function ls(e){var n,r;return e=(e+"").trim().toLowerCase(),(n=dS.exec(e))?(r=n[1].length,n=parseInt(n[1],16),r===6?Rm(n):r===3?new gt(n>>8&15|n>>4&240,n>>4&15|n&240,(n&15)<<4|n&15,1):r===8?la(n>>24&255,n>>16&255,n>>8&255,(n&255)/255):r===4?la(n>>12&15|n>>8&240,n>>8&15|n>>4&240,n>>4&15|n&240,((n&15)<<4|n&15)/255):null):(n=pS.exec(e))?new gt(n[1],n[2],n[3],1):(n=mS.exec(e))?new gt(n[1]*255/100,n[2]*255/100,n[3]*255/100,1):(n=gS.exec(e))?la(n[1],n[2],n[3],n[4]):(n=vS.exec(e))?la(n[1]*255/100,n[2]*255/100,n[3]*255/100,n[4]):(n=_S.exec(e))?Fm(n[1],n[2]/100,n[3]/100,1):(n=yS.exec(e))?Fm(n[1],n[2]/100,n[3]/100,n[4]):zm.hasOwnProperty(e)?Rm(zm[e]):e==="transparent"?new gt(NaN,NaN,NaN,0):null}function Rm(e){return new gt(e>>16&255,e>>8&255,e&255,1)}function la(e,n,r,i){return i<=0&&(e=n=r=NaN),new gt(e,n,r,i)}function bS(e){return e instanceof ws||(e=ls(e)),e?(e=e.rgb(),new gt(e.r,e.g,e.b,e.opacity)):new gt}function ff(e,n,r,i){return arguments.length===1?bS(e):new gt(e,n,r,i??1)}function gt(e,n,r,i){this.r=+e,this.g=+n,this.b=+r,this.opacity=+i}Mh(gt,ff,S_(ws,{brighter(e){return e=e==null?ol:Math.pow(ol,e),new gt(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?ss:Math.pow(ss,e),new gt(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new gt(Or(this.r),Or(this.g),Or(this.b),sl(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Im,formatHex:Im,formatHex8:kS,formatRgb:Dm,toString:Dm}));function Im(){return`#${Lr(this.r)}${Lr(this.g)}${Lr(this.b)}`}function kS(){return`#${Lr(this.r)}${Lr(this.g)}${Lr(this.b)}${Lr((isNaN(this.opacity)?1:this.opacity)*255)}`}function Dm(){const e=sl(this.opacity);return`${e===1?"rgb(":"rgba("}${Or(this.r)}, ${Or(this.g)}, ${Or(this.b)}${e===1?")":`, ${e})`}`}function sl(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Or(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Lr(e){return e=Or(e),(e<16?"0":"")+e.toString(16)}function Fm(e,n,r,i){return i<=0?e=n=r=NaN:r<=0||r>=1?e=n=NaN:n<=0&&(e=NaN),new Kt(e,n,r,i)}function j_(e){if(e instanceof Kt)return new Kt(e.h,e.s,e.l,e.opacity);if(e instanceof ws||(e=ls(e)),!e)return new Kt;if(e instanceof Kt)return e;e=e.rgb();var n=e.r/255,r=e.g/255,i=e.b/255,s=Math.min(n,r,i),a=Math.max(n,r,i),u=NaN,c=a-s,h=(a+s)/2;return c?(n===a?u=(r-i)/c+(r<i)*6:r===a?u=(i-n)/c+2:u=(n-r)/c+4,c/=h<.5?a+s:2-a-s,u*=60):c=h>0&&h<1?0:u,new Kt(u,c,h,e.opacity)}function NS(e,n,r,i){return arguments.length===1?j_(e):new Kt(e,n,r,i??1)}function Kt(e,n,r,i){this.h=+e,this.s=+n,this.l=+r,this.opacity=+i}Mh(Kt,NS,S_(ws,{brighter(e){return e=e==null?ol:Math.pow(ol,e),new Kt(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?ss:Math.pow(ss,e),new Kt(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,n=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,i=r+(r<.5?r:1-r)*n,s=2*r-i;return new gt(Ju(e>=240?e-240:e+120,s,i),Ju(e,s,i),Ju(e<120?e+240:e-120,s,i),this.opacity)},clamp(){return new Kt(Bm(this.h),ua(this.s),ua(this.l),sl(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=sl(this.opacity);return`${e===1?"hsl(":"hsla("}${Bm(this.h)}, ${ua(this.s)*100}%, ${ua(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Bm(e){return e=(e||0)%360,e<0?e+360:e}function ua(e){return Math.max(0,Math.min(1,e||0))}function Ju(e,n,r){return(e<60?n+(r-n)*e/60:e<180?r:e<240?n+(r-n)*(240-e)/60:n)*255}const C_=e=>()=>e;function SS(e,n){return function(r){return e+r*n}}function jS(e,n,r){return e=Math.pow(e,r),n=Math.pow(n,r)-e,r=1/r,function(i){return Math.pow(e+i*n,r)}}function CS(e){return(e=+e)==1?P_:function(n,r){return r-n?jS(n,r,e):C_(isNaN(n)?r:n)}}function P_(e,n){var r=n-e;return r?SS(e,r):C_(isNaN(e)?n:e)}const Um=function e(n){var r=CS(n);function i(s,a){var u=r((s=ff(s)).r,(a=ff(a)).r),c=r(s.g,a.g),h=r(s.b,a.b),p=P_(s.opacity,a.opacity);return function(v){return s.r=u(v),s.g=c(v),s.b=h(v),s.opacity=p(v),s+""}}return i.gamma=e,i}(1);function Qn(e,n){return e=+e,n=+n,function(r){return e*(1-r)+n*r}}var hf=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ec=new RegExp(hf.source,"g");function PS(e){return function(){return e}}function ES(e){return function(n){return e(n)+""}}function TS(e,n){var r=hf.lastIndex=ec.lastIndex=0,i,s,a,u=-1,c=[],h=[];for(e=e+"",n=n+"";(i=hf.exec(e))&&(s=ec.exec(n));)(a=s.index)>r&&(a=n.slice(r,a),c[u]?c[u]+=a:c[++u]=a),(i=i[0])===(s=s[0])?c[u]?c[u]+=s:c[++u]=s:(c[++u]=null,h.push({i:u,x:Qn(i,s)})),r=ec.lastIndex;return r<n.length&&(a=n.slice(r),c[u]?c[u]+=a:c[++u]=a),c.length<2?h[0]?ES(h[0].x):PS(n):(n=h.length,function(p){for(var v=0,m;v<n;++v)c[(m=h[v]).i]=m.x(p);return c.join("")})}var $m=180/Math.PI,df={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function E_(e,n,r,i,s,a){var u,c,h;return(u=Math.sqrt(e*e+n*n))&&(e/=u,n/=u),(h=e*r+n*i)&&(r-=e*h,i-=n*h),(c=Math.sqrt(r*r+i*i))&&(r/=c,i/=c,h/=c),e*i<n*r&&(e=-e,n=-n,h=-h,u=-u),{translateX:s,translateY:a,rotate:Math.atan2(n,e)*$m,skewX:Math.atan(h)*$m,scaleX:u,scaleY:c}}var ca;function LS(e){const n=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return n.isIdentity?df:E_(n.a,n.b,n.c,n.d,n.e,n.f)}function MS(e){return e==null||(ca||(ca=document.createElementNS("http://www.w3.org/2000/svg","g")),ca.setAttribute("transform",e),!(e=ca.transform.baseVal.consolidate()))?df:(e=e.matrix,E_(e.a,e.b,e.c,e.d,e.e,e.f))}function T_(e,n,r,i){function s(p){return p.length?p.pop()+" ":""}function a(p,v,m,_,y,k){if(p!==m||v!==_){var S=y.push("translate(",null,n,null,r);k.push({i:S-4,x:Qn(p,m)},{i:S-2,x:Qn(v,_)})}else(m||_)&&y.push("translate("+m+n+_+r)}function u(p,v,m,_){p!==v?(p-v>180?v+=360:v-p>180&&(p+=360),_.push({i:m.push(s(m)+"rotate(",null,i)-2,x:Qn(p,v)})):v&&m.push(s(m)+"rotate("+v+i)}function c(p,v,m,_){p!==v?_.push({i:m.push(s(m)+"skewX(",null,i)-2,x:Qn(p,v)}):v&&m.push(s(m)+"skewX("+v+i)}function h(p,v,m,_,y,k){if(p!==m||v!==_){var S=y.push(s(y)+"scale(",null,",",null,")");k.push({i:S-4,x:Qn(p,m)},{i:S-2,x:Qn(v,_)})}else(m!==1||_!==1)&&y.push(s(y)+"scale("+m+","+_+")")}return function(p,v){var m=[],_=[];return p=e(p),v=e(v),a(p.translateX,p.translateY,v.translateX,v.translateY,m,_),u(p.rotate,v.rotate,m,_),c(p.skewX,v.skewX,m,_),h(p.scaleX,p.scaleY,v.scaleX,v.scaleY,m,_),p=v=null,function(y){for(var k=-1,S=_.length,E;++k<S;)m[(E=_[k]).i]=E.x(y);return m.join("")}}}var zS=T_(LS,"px, ","px)","deg)"),OS=T_(MS,", ",")",")"),AS=1e-12;function Hm(e){return((e=Math.exp(e))+1/e)/2}function RS(e){return((e=Math.exp(e))-1/e)/2}function IS(e){return((e=Math.exp(2*e))-1)/(e+1)}const DS=function e(n,r,i){function s(a,u){var c=a[0],h=a[1],p=a[2],v=u[0],m=u[1],_=u[2],y=v-c,k=m-h,S=y*y+k*k,E,w;if(S<AS)w=Math.log(_/p)/n,E=function(M){return[c+M*y,h+M*k,p*Math.exp(n*M*w)]};else{var b=Math.sqrt(S),N=(_*_-p*p+i*S)/(2*p*r*b),C=(_*_-p*p-i*S)/(2*_*r*b),P=Math.log(Math.sqrt(N*N+1)-N),T=Math.log(Math.sqrt(C*C+1)-C);w=(T-P)/n,E=function(M){var z=M*w,D=Hm(P),F=p/(r*b)*(D*IS(n*z+P)-RS(P));return[c+F*y,h+F*k,p*D/Hm(n*z+P)]}}return E.duration=w*1e3*n/Math.SQRT2,E}return s.rho=function(a){var u=Math.max(.001,+a),c=u*u,h=c*c;return e(u,c,h)},s}(Math.SQRT2,2,4);var Oi=0,bo=0,lo=0,L_=1e3,al,ko,ll=0,$r=0,Ol=0,us=typeof performance=="object"&&performance.now?performance:Date,M_=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function zh(){return $r||(M_(FS),$r=us.now()+Ol)}function FS(){$r=0}function ul(){this._call=this._time=this._next=null}ul.prototype=Oh.prototype={constructor:ul,restart:function(e,n,r){if(typeof e!="function")throw new TypeError("callback is not a function");r=(r==null?zh():+r)+(n==null?0:+n),!this._next&&ko!==this&&(ko?ko._next=this:al=this,ko=this),this._call=e,this._time=r,pf()},stop:function(){this._call&&(this._call=null,this._time=1/0,pf())}};function Oh(e,n,r){var i=new ul;return i.restart(e,n,r),i}function BS(){zh(),++Oi;for(var e=al,n;e;)(n=$r-e._time)>=0&&e._call.call(void 0,n),e=e._next;--Oi}function Zm(){$r=(ll=us.now())+Ol,Oi=bo=0;try{BS()}finally{Oi=0,$S(),$r=0}}function US(){var e=us.now(),n=e-ll;n>L_&&(Ol-=n,ll=e)}function $S(){for(var e,n=al,r,i=1/0;n;)n._call?(i>n._time&&(i=n._time),e=n,n=n._next):(r=n._next,n._next=null,n=e?e._next=r:al=r);ko=e,pf(i)}function pf(e){if(!Oi){bo&&(bo=clearTimeout(bo));var n=e-$r;n>24?(e<1/0&&(bo=setTimeout(Zm,e-us.now()-Ol)),lo&&(lo=clearInterval(lo))):(lo||(ll=us.now(),lo=setInterval(US,L_)),Oi=1,M_(Zm))}}function Wm(e,n,r){var i=new ul;return n=n==null?0:+n,i.restart(s=>{i.stop(),e(s+n)},n,r),i}var HS=xs("start","end","cancel","interrupt"),ZS=[],z_=0,Vm=1,mf=2,Ea=3,qm=4,gf=5,Ta=6;function Al(e,n,r,i,s,a){var u=e.__transition;if(!u)e.__transition={};else if(r in u)return;WS(e,r,{name:n,index:i,group:s,on:HS,tween:ZS,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:z_})}function Ah(e,n){var r=en(e,n);if(r.state>z_)throw new Error("too late; already scheduled");return r}function vn(e,n){var r=en(e,n);if(r.state>Ea)throw new Error("too late; already running");return r}function en(e,n){var r=e.__transition;if(!r||!(r=r[n]))throw new Error("transition not found");return r}function WS(e,n,r){var i=e.__transition,s;i[n]=r,r.timer=Oh(a,0,r.time);function a(p){r.state=Vm,r.timer.restart(u,r.delay,r.time),r.delay<=p&&u(p-r.delay)}function u(p){var v,m,_,y;if(r.state!==Vm)return h();for(v in i)if(y=i[v],y.name===r.name){if(y.state===Ea)return Wm(u);y.state===qm?(y.state=Ta,y.timer.stop(),y.on.call("interrupt",e,e.__data__,y.index,y.group),delete i[v]):+v<n&&(y.state=Ta,y.timer.stop(),y.on.call("cancel",e,e.__data__,y.index,y.group),delete i[v])}if(Wm(function(){r.state===Ea&&(r.state=qm,r.timer.restart(c,r.delay,r.time),c(p))}),r.state=mf,r.on.call("start",e,e.__data__,r.index,r.group),r.state===mf){for(r.state=Ea,s=new Array(_=r.tween.length),v=0,m=-1;v<_;++v)(y=r.tween[v].value.call(e,e.__data__,r.index,r.group))&&(s[++m]=y);s.length=m+1}}function c(p){for(var v=p<r.duration?r.ease.call(null,p/r.duration):(r.timer.restart(h),r.state=gf,1),m=-1,_=s.length;++m<_;)s[m].call(e,v);r.state===gf&&(r.on.call("end",e,e.__data__,r.index,r.group),h())}function h(){r.state=Ta,r.timer.stop(),delete i[n];for(var p in i)return;delete e.__transition}}function La(e,n){var r=e.__transition,i,s,a=!0,u;if(r){n=n==null?null:n+"";for(u in r){if((i=r[u]).name!==n){a=!1;continue}s=i.state>mf&&i.state<gf,i.state=Ta,i.timer.stop(),i.on.call(s?"interrupt":"cancel",e,e.__data__,i.index,i.group),delete r[u]}a&&delete e.__transition}}function VS(e){return this.each(function(){La(this,e)})}function qS(e,n){var r,i;return function(){var s=vn(this,e),a=s.tween;if(a!==r){i=r=a;for(var u=0,c=i.length;u<c;++u)if(i[u].name===n){i=i.slice(),i.splice(u,1);break}}s.tween=i}}function GS(e,n,r){var i,s;if(typeof r!="function")throw new Error;return function(){var a=vn(this,e),u=a.tween;if(u!==i){s=(i=u).slice();for(var c={name:n,value:r},h=0,p=s.length;h<p;++h)if(s[h].name===n){s[h]=c;break}h===p&&s.push(c)}a.tween=s}}function KS(e,n){var r=this._id;if(e+="",arguments.length<2){for(var i=en(this.node(),r).tween,s=0,a=i.length,u;s<a;++s)if((u=i[s]).name===e)return u.value;return null}return this.each((n==null?qS:GS)(r,e,n))}function Rh(e,n,r){var i=e._id;return e.each(function(){var s=vn(this,i);(s.value||(s.value={}))[n]=r.apply(this,arguments)}),function(s){return en(s,i).value[n]}}function O_(e,n){var r;return(typeof n=="number"?Qn:n instanceof ls?Um:(r=ls(n))?(n=r,Um):TS)(e,n)}function YS(e){return function(){this.removeAttribute(e)}}function XS(e){return function(){this.removeAttributeNS(e.space,e.local)}}function QS(e,n,r){var i,s=r+"",a;return function(){var u=this.getAttribute(e);return u===s?null:u===i?a:a=n(i=u,r)}}function JS(e,n,r){var i,s=r+"",a;return function(){var u=this.getAttributeNS(e.space,e.local);return u===s?null:u===i?a:a=n(i=u,r)}}function ej(e,n,r){var i,s,a;return function(){var u,c=r(this),h;return c==null?void this.removeAttribute(e):(u=this.getAttribute(e),h=c+"",u===h?null:u===i&&h===s?a:(s=h,a=n(i=u,c)))}}function tj(e,n,r){var i,s,a;return function(){var u,c=r(this),h;return c==null?void this.removeAttributeNS(e.space,e.local):(u=this.getAttributeNS(e.space,e.local),h=c+"",u===h?null:u===i&&h===s?a:(s=h,a=n(i=u,c)))}}function nj(e,n){var r=zl(e),i=r==="transform"?OS:O_;return this.attrTween(e,typeof n=="function"?(r.local?tj:ej)(r,i,Rh(this,"attr."+e,n)):n==null?(r.local?XS:YS)(r):(r.local?JS:QS)(r,i,n))}function rj(e,n){return function(r){this.setAttribute(e,n.call(this,r))}}function ij(e,n){return function(r){this.setAttributeNS(e.space,e.local,n.call(this,r))}}function oj(e,n){var r,i;function s(){var a=n.apply(this,arguments);return a!==i&&(r=(i=a)&&ij(e,a)),r}return s._value=n,s}function sj(e,n){var r,i;function s(){var a=n.apply(this,arguments);return a!==i&&(r=(i=a)&&rj(e,a)),r}return s._value=n,s}function aj(e,n){var r="attr."+e;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(n==null)return this.tween(r,null);if(typeof n!="function")throw new Error;var i=zl(e);return this.tween(r,(i.local?oj:sj)(i,n))}function lj(e,n){return function(){Ah(this,e).delay=+n.apply(this,arguments)}}function uj(e,n){return n=+n,function(){Ah(this,e).delay=n}}function cj(e){var n=this._id;return arguments.length?this.each((typeof e=="function"?lj:uj)(n,e)):en(this.node(),n).delay}function fj(e,n){return function(){vn(this,e).duration=+n.apply(this,arguments)}}function hj(e,n){return n=+n,function(){vn(this,e).duration=n}}function dj(e){var n=this._id;return arguments.length?this.each((typeof e=="function"?fj:hj)(n,e)):en(this.node(),n).duration}function pj(e,n){if(typeof n!="function")throw new Error;return function(){vn(this,e).ease=n}}function mj(e){var n=this._id;return arguments.length?this.each(pj(n,e)):en(this.node(),n).ease}function gj(e,n){return function(){var r=n.apply(this,arguments);if(typeof r!="function")throw new Error;vn(this,e).ease=r}}function vj(e){if(typeof e!="function")throw new Error;return this.each(gj(this._id,e))}function _j(e){typeof e!="function"&&(e=d_(e));for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s)for(var a=n[s],u=a.length,c=i[s]=[],h,p=0;p<u;++p)(h=a[p])&&e.call(h,h.__data__,p,a)&&c.push(h);return new Fn(i,this._parents,this._name,this._id)}function yj(e){if(e._id!==this._id)throw new Error;for(var n=this._groups,r=e._groups,i=n.length,s=r.length,a=Math.min(i,s),u=new Array(i),c=0;c<a;++c)for(var h=n[c],p=r[c],v=h.length,m=u[c]=new Array(v),_,y=0;y<v;++y)(_=h[y]||p[y])&&(m[y]=_);for(;c<i;++c)u[c]=n[c];return new Fn(u,this._parents,this._name,this._id)}function xj(e){return(e+"").trim().split(/^|\s+/).every(function(n){var r=n.indexOf(".");return r>=0&&(n=n.slice(0,r)),!n||n==="start"})}function wj(e,n,r){var i,s,a=xj(n)?Ah:vn;return function(){var u=a(this,e),c=u.on;c!==i&&(s=(i=c).copy()).on(n,r),u.on=s}}function bj(e,n){var r=this._id;return arguments.length<2?en(this.node(),r).on.on(e):this.each(wj(r,e,n))}function kj(e){return function(){var n=this.parentNode;for(var r in this.__transition)if(+r!==e)return;n&&n.removeChild(this)}}function Nj(){return this.on("end.remove",kj(this._id))}function Sj(e){var n=this._name,r=this._id;typeof e!="function"&&(e=Th(e));for(var i=this._groups,s=i.length,a=new Array(s),u=0;u<s;++u)for(var c=i[u],h=c.length,p=a[u]=new Array(h),v,m,_=0;_<h;++_)(v=c[_])&&(m=e.call(v,v.__data__,_,c))&&("__data__"in v&&(m.__data__=v.__data__),p[_]=m,Al(p[_],n,r,_,p,en(v,r)));return new Fn(a,this._parents,n,r)}function jj(e){var n=this._name,r=this._id;typeof e!="function"&&(e=h_(e));for(var i=this._groups,s=i.length,a=[],u=[],c=0;c<s;++c)for(var h=i[c],p=h.length,v,m=0;m<p;++m)if(v=h[m]){for(var _=e.call(v,v.__data__,m,h),y,k=en(v,r),S=0,E=_.length;S<E;++S)(y=_[S])&&Al(y,n,r,S,_,k);a.push(_),u.push(v)}return new Fn(a,u,n,r)}var Cj=ys.prototype.constructor;function Pj(){return new Cj(this._groups,this._parents)}function Ej(e,n){var r,i,s;return function(){var a=zi(this,e),u=(this.style.removeProperty(e),zi(this,e));return a===u?null:a===r&&u===i?s:s=n(r=a,i=u)}}function A_(e){return function(){this.style.removeProperty(e)}}function Tj(e,n,r){var i,s=r+"",a;return function(){var u=zi(this,e);return u===s?null:u===i?a:a=n(i=u,r)}}function Lj(e,n,r){var i,s,a;return function(){var u=zi(this,e),c=r(this),h=c+"";return c==null&&(h=c=(this.style.removeProperty(e),zi(this,e))),u===h?null:u===i&&h===s?a:(s=h,a=n(i=u,c))}}function Mj(e,n){var r,i,s,a="style."+n,u="end."+a,c;return function(){var h=vn(this,e),p=h.on,v=h.value[a]==null?c||(c=A_(n)):void 0;(p!==r||s!==v)&&(i=(r=p).copy()).on(u,s=v),h.on=i}}function zj(e,n,r){var i=(e+="")=="transform"?zS:O_;return n==null?this.styleTween(e,Ej(e,i)).on("end.style."+e,A_(e)):typeof n=="function"?this.styleTween(e,Lj(e,i,Rh(this,"style."+e,n))).each(Mj(this._id,e)):this.styleTween(e,Tj(e,i,n),r).on("end.style."+e,null)}function Oj(e,n,r){return function(i){this.style.setProperty(e,n.call(this,i),r)}}function Aj(e,n,r){var i,s;function a(){var u=n.apply(this,arguments);return u!==s&&(i=(s=u)&&Oj(e,u,r)),i}return a._value=n,a}function Rj(e,n,r){var i="style."+(e+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(n==null)return this.tween(i,null);if(typeof n!="function")throw new Error;return this.tween(i,Aj(e,n,r??""))}function Ij(e){return function(){this.textContent=e}}function Dj(e){return function(){var n=e(this);this.textContent=n??""}}function Fj(e){return this.tween("text",typeof e=="function"?Dj(Rh(this,"text",e)):Ij(e==null?"":e+""))}function Bj(e){return function(n){this.textContent=e.call(this,n)}}function Uj(e){var n,r;function i(){var s=e.apply(this,arguments);return s!==r&&(n=(r=s)&&Bj(s)),n}return i._value=e,i}function $j(e){var n="text";if(arguments.length<1)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;return this.tween(n,Uj(e))}function Hj(){for(var e=this._name,n=this._id,r=R_(),i=this._groups,s=i.length,a=0;a<s;++a)for(var u=i[a],c=u.length,h,p=0;p<c;++p)if(h=u[p]){var v=en(h,n);Al(h,e,r,p,u,{time:v.time+v.delay+v.duration,delay:0,duration:v.duration,ease:v.ease})}return new Fn(i,this._parents,e,r)}function Zj(){var e,n,r=this,i=r._id,s=r.size();return new Promise(function(a,u){var c={value:u},h={value:function(){--s===0&&a()}};r.each(function(){var p=vn(this,i),v=p.on;v!==e&&(n=(e=v).copy(),n._.cancel.push(c),n._.interrupt.push(c),n._.end.push(h)),p.on=n}),s===0&&a()})}var Wj=0;function Fn(e,n,r,i){this._groups=e,this._parents=n,this._name=r,this._id=i}function R_(){return++Wj}var bn=ys.prototype;Fn.prototype={constructor:Fn,select:Sj,selectAll:jj,selectChild:bn.selectChild,selectChildren:bn.selectChildren,filter:_j,merge:yj,selection:Pj,transition:Hj,call:bn.call,nodes:bn.nodes,node:bn.node,size:bn.size,empty:bn.empty,each:bn.each,on:bj,attr:nj,attrTween:aj,style:zj,styleTween:Rj,text:Fj,textTween:$j,remove:Nj,tween:KS,delay:cj,duration:dj,ease:mj,easeVarying:vj,end:Zj,[Symbol.iterator]:bn[Symbol.iterator]};function Vj(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var qj={time:null,delay:0,duration:250,ease:Vj};function Gj(e,n){for(var r;!(r=e.__transition)||!(r=r[n]);)if(!(e=e.parentNode))throw new Error(`transition ${n} not found`);return r}function Kj(e){var n,r;e instanceof Fn?(n=e._id,e=e._name):(n=R_(),(r=qj).time=zh(),e=e==null?null:e+"");for(var i=this._groups,s=i.length,a=0;a<s;++a)for(var u=i[a],c=u.length,h,p=0;p<c;++p)(h=u[p])&&Al(h,e,n,p,u,r||Gj(h,n));return new Fn(i,this._parents,e,n)}ys.prototype.interrupt=VS;ys.prototype.transition=Kj;const fa=e=>()=>e;function Yj(e,{sourceEvent:n,target:r,transform:i,dispatch:s}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:s}})}function Ln(e,n,r){this.k=e,this.x=n,this.y=r}Ln.prototype={constructor:Ln,scale:function(e){return e===1?this:new Ln(this.k*e,this.x,this.y)},translate:function(e,n){return e===0&n===0?this:new Ln(this.k,this.x+this.k*e,this.y+this.k*n)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Ih=new Ln(1,0,0);ln.prototype=Ln.prototype;function ln(e){for(;!e.__zoom;)if(!(e=e.parentNode))return Ih;return e.__zoom}function tc(e){e.stopImmediatePropagation()}function uo(e){e.preventDefault(),e.stopImmediatePropagation()}function Xj(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function Qj(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function Gm(){return this.__zoom||Ih}function Jj(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function eC(){return navigator.maxTouchPoints||"ontouchstart"in this}function tC(e,n,r){var i=e.invertX(n[0][0])-r[0][0],s=e.invertX(n[1][0])-r[1][0],a=e.invertY(n[0][1])-r[0][1],u=e.invertY(n[1][1])-r[1][1];return e.translate(s>i?(i+s)/2:Math.min(0,i)||Math.max(0,s),u>a?(a+u)/2:Math.min(0,a)||Math.max(0,u))}function nC(){var e=Xj,n=Qj,r=tC,i=Jj,s=eC,a=[0,1/0],u=[[-1/0,-1/0],[1/0,1/0]],c=250,h=DS,p=xs("start","zoom","end"),v,m,_,y=500,k=150,S=0,E=10;function w(R){R.property("__zoom",Gm).on("wheel.zoom",z,{passive:!1}).on("mousedown.zoom",D).on("dblclick.zoom",F).filter(s).on("touchstart.zoom",V).on("touchmove.zoom",H).on("touchend.zoom touchcancel.zoom",Q).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}w.transform=function(R,G,W,ee){var U=R.selection?R.selection():R;U.property("__zoom",Gm),R!==U?P(R,G,W,ee):U.interrupt().each(function(){T(this,arguments).event(ee).start().zoom(null,typeof G=="function"?G.apply(this,arguments):G).end()})},w.scaleBy=function(R,G,W,ee){w.scaleTo(R,function(){var U=this.__zoom.k,K=typeof G=="function"?G.apply(this,arguments):G;return U*K},W,ee)},w.scaleTo=function(R,G,W,ee){w.transform(R,function(){var U=n.apply(this,arguments),K=this.__zoom,Z=W==null?C(U):typeof W=="function"?W.apply(this,arguments):W,J=K.invert(Z),re=typeof G=="function"?G.apply(this,arguments):G;return r(N(b(K,re),Z,J),U,u)},W,ee)},w.translateBy=function(R,G,W,ee){w.transform(R,function(){return r(this.__zoom.translate(typeof G=="function"?G.apply(this,arguments):G,typeof W=="function"?W.apply(this,arguments):W),n.apply(this,arguments),u)},null,ee)},w.translateTo=function(R,G,W,ee,U){w.transform(R,function(){var K=n.apply(this,arguments),Z=this.__zoom,J=ee==null?C(K):typeof ee=="function"?ee.apply(this,arguments):ee;return r(Ih.translate(J[0],J[1]).scale(Z.k).translate(typeof G=="function"?-G.apply(this,arguments):-G,typeof W=="function"?-W.apply(this,arguments):-W),K,u)},ee,U)};function b(R,G){return G=Math.max(a[0],Math.min(a[1],G)),G===R.k?R:new Ln(G,R.x,R.y)}function N(R,G,W){var ee=G[0]-W[0]*R.k,U=G[1]-W[1]*R.k;return ee===R.x&&U===R.y?R:new Ln(R.k,ee,U)}function C(R){return[(+R[0][0]+ +R[1][0])/2,(+R[0][1]+ +R[1][1])/2]}function P(R,G,W,ee){R.on("start.zoom",function(){T(this,arguments).event(ee).start()}).on("interrupt.zoom end.zoom",function(){T(this,arguments).event(ee).end()}).tween("zoom",function(){var U=this,K=arguments,Z=T(U,K).event(ee),J=n.apply(U,K),re=W==null?C(J):typeof W=="function"?W.apply(U,K):W,he=Math.max(J[1][0]-J[0][0],J[1][1]-J[0][1]),ue=U.__zoom,fe=typeof G=="function"?G.apply(U,K):G,le=h(ue.invert(re).concat(he/ue.k),fe.invert(re).concat(he/fe.k));return function(te){if(te===1)te=fe;else{var oe=le(te),Re=he/oe[2];te=new Ln(Re,re[0]-oe[0]*Re,re[1]-oe[1]*Re)}Z.zoom(null,te)}})}function T(R,G,W){return!W&&R.__zooming||new M(R,G)}function M(R,G){this.that=R,this.args=G,this.active=0,this.sourceEvent=null,this.extent=n.apply(R,G),this.taps=0}M.prototype={event:function(R){return R&&(this.sourceEvent=R),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(R,G){return this.mouse&&R!=="mouse"&&(this.mouse[1]=G.invert(this.mouse[0])),this.touch0&&R!=="touch"&&(this.touch0[1]=G.invert(this.touch0[0])),this.touch1&&R!=="touch"&&(this.touch1[1]=G.invert(this.touch1[0])),this.that.__zoom=G,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(R){var G=Rt(this.that).datum();p.call(R,this.that,new Yj(R,{sourceEvent:this.sourceEvent,target:w,transform:this.that.__zoom,dispatch:p}),G)}};function z(R,...G){if(!e.apply(this,arguments))return;var W=T(this,G).event(R),ee=this.__zoom,U=Math.max(a[0],Math.min(a[1],ee.k*Math.pow(2,i.apply(this,arguments)))),K=un(R);if(W.wheel)(W.mouse[0][0]!==K[0]||W.mouse[0][1]!==K[1])&&(W.mouse[1]=ee.invert(W.mouse[0]=K)),clearTimeout(W.wheel);else{if(ee.k===U)return;W.mouse=[K,ee.invert(K)],La(this),W.start()}uo(R),W.wheel=setTimeout(Z,k),W.zoom("mouse",r(N(b(ee,U),W.mouse[0],W.mouse[1]),W.extent,u));function Z(){W.wheel=null,W.end()}}function D(R,...G){if(_||!e.apply(this,arguments))return;var W=R.currentTarget,ee=T(this,G,!0).event(R),U=Rt(R.view).on("mousemove.zoom",re,!0).on("mouseup.zoom",he,!0),K=un(R,W),Z=R.clientX,J=R.clientY;k_(R.view),tc(R),ee.mouse=[K,this.__zoom.invert(K)],La(this),ee.start();function re(ue){if(uo(ue),!ee.moved){var fe=ue.clientX-Z,le=ue.clientY-J;ee.moved=fe*fe+le*le>S}ee.event(ue).zoom("mouse",r(N(ee.that.__zoom,ee.mouse[0]=un(ue,W),ee.mouse[1]),ee.extent,u))}function he(ue){U.on("mousemove.zoom mouseup.zoom",null),N_(ue.view,ee.moved),uo(ue),ee.event(ue).end()}}function F(R,...G){if(e.apply(this,arguments)){var W=this.__zoom,ee=un(R.changedTouches?R.changedTouches[0]:R,this),U=W.invert(ee),K=W.k*(R.shiftKey?.5:2),Z=r(N(b(W,K),ee,U),n.apply(this,G),u);uo(R),c>0?Rt(this).transition().duration(c).call(P,Z,ee,R):Rt(this).call(w.transform,Z,ee,R)}}function V(R,...G){if(e.apply(this,arguments)){var W=R.touches,ee=W.length,U=T(this,G,R.changedTouches.length===ee).event(R),K,Z,J,re;for(tc(R),Z=0;Z<ee;++Z)J=W[Z],re=un(J,this),re=[re,this.__zoom.invert(re),J.identifier],U.touch0?!U.touch1&&U.touch0[2]!==re[2]&&(U.touch1=re,U.taps=0):(U.touch0=re,K=!0,U.taps=1+!!v);v&&(v=clearTimeout(v)),K&&(U.taps<2&&(m=re[0],v=setTimeout(function(){v=null},y)),La(this),U.start())}}function H(R,...G){if(this.__zooming){var W=T(this,G).event(R),ee=R.changedTouches,U=ee.length,K,Z,J,re;for(uo(R),K=0;K<U;++K)Z=ee[K],J=un(Z,this),W.touch0&&W.touch0[2]===Z.identifier?W.touch0[0]=J:W.touch1&&W.touch1[2]===Z.identifier&&(W.touch1[0]=J);if(Z=W.that.__zoom,W.touch1){var he=W.touch0[0],ue=W.touch0[1],fe=W.touch1[0],le=W.touch1[1],te=(te=fe[0]-he[0])*te+(te=fe[1]-he[1])*te,oe=(oe=le[0]-ue[0])*oe+(oe=le[1]-ue[1])*oe;Z=b(Z,Math.sqrt(te/oe)),J=[(he[0]+fe[0])/2,(he[1]+fe[1])/2],re=[(ue[0]+le[0])/2,(ue[1]+le[1])/2]}else if(W.touch0)J=W.touch0[0],re=W.touch0[1];else return;W.zoom("touch",r(N(Z,J,re),W.extent,u))}}function Q(R,...G){if(this.__zooming){var W=T(this,G).event(R),ee=R.changedTouches,U=ee.length,K,Z;for(tc(R),_&&clearTimeout(_),_=setTimeout(function(){_=null},y),K=0;K<U;++K)Z=ee[K],W.touch0&&W.touch0[2]===Z.identifier?delete W.touch0:W.touch1&&W.touch1[2]===Z.identifier&&delete W.touch1;if(W.touch1&&!W.touch0&&(W.touch0=W.touch1,delete W.touch1),W.touch0)W.touch0[1]=this.__zoom.invert(W.touch0[0]);else if(W.end(),W.taps===2&&(Z=un(Z,this),Math.hypot(m[0]-Z[0],m[1]-Z[1])<E)){var J=Rt(this).on("dblclick.zoom");J&&J.apply(this,arguments)}}}return w.wheelDelta=function(R){return arguments.length?(i=typeof R=="function"?R:fa(+R),w):i},w.filter=function(R){return arguments.length?(e=typeof R=="function"?R:fa(!!R),w):e},w.touchable=function(R){return arguments.length?(s=typeof R=="function"?R:fa(!!R),w):s},w.extent=function(R){return arguments.length?(n=typeof R=="function"?R:fa([[+R[0][0],+R[0][1]],[+R[1][0],+R[1][1]]]),w):n},w.scaleExtent=function(R){return arguments.length?(a[0]=+R[0],a[1]=+R[1],w):[a[0],a[1]]},w.translateExtent=function(R){return arguments.length?(u[0][0]=+R[0][0],u[1][0]=+R[1][0],u[0][1]=+R[0][1],u[1][1]=+R[1][1],w):[[u[0][0],u[0][1]],[u[1][0],u[1][1]]]},w.constrain=function(R){return arguments.length?(r=R,w):r},w.duration=function(R){return arguments.length?(c=+R,w):c},w.interpolate=function(R){return arguments.length?(h=R,w):h},w.on=function(){var R=p.on.apply(p,arguments);return R===p?w:R},w.clickDistance=function(R){return arguments.length?(S=(R=+R)*R,w):Math.sqrt(S)},w.tapDistance=function(R){return arguments.length?(E=+R,w):E},w}class Km extends Map{constructor(n,r=oC){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),n!=null)for(const[i,s]of n)this.set(i,s)}get(n){return super.get(Ym(this,n))}has(n){return super.has(Ym(this,n))}set(n,r){return super.set(rC(this,n),r)}delete(n){return super.delete(iC(this,n))}}function Ym({_intern:e,_key:n},r){const i=n(r);return e.has(i)?e.get(i):r}function rC({_intern:e,_key:n},r){const i=n(r);return e.has(i)?e.get(i):(e.set(i,r),r)}function iC({_intern:e,_key:n},r){const i=n(r);return e.has(i)&&(r=e.get(i),e.delete(i)),r}function oC(e){return e!==null&&typeof e=="object"?e.valueOf():e}function Xm(e,n){let r;if(n===void 0)for(const i of e)i!=null&&(r<i||r===void 0&&i>=i)&&(r=i);else{let i=-1;for(let s of e)(s=n(s,++i,e))!=null&&(r<s||r===void 0&&s>=s)&&(r=s)}return r}function Qm(e,n){let r;if(n===void 0)for(const i of e)i!=null&&(r>i||r===void 0&&i>=i)&&(r=i);else{let i=-1;for(let s of e)(s=n(s,++i,e))!=null&&(r>s||r===void 0&&s>=s)&&(r=s)}return r}function sC(e,n){let r=0;for(let i of e)(i=+i)&&(r+=i);return r}var aC=typeof global=="object"&&global&&global.Object===Object&&global,lC=typeof self=="object"&&self&&self.Object===Object&&self,I_=aC||lC||Function("return this")(),cl=I_.Symbol,D_=Object.prototype,uC=D_.hasOwnProperty,cC=D_.toString,co=cl?cl.toStringTag:void 0;function fC(e){var n=uC.call(e,co),r=e[co];try{e[co]=void 0;var i=!0}catch{}var s=cC.call(e);return i&&(n?e[co]=r:delete e[co]),s}var hC=Object.prototype,dC=hC.toString;function pC(e){return dC.call(e)}var mC="[object Null]",gC="[object Undefined]",Jm=cl?cl.toStringTag:void 0;function vC(e){return e==null?e===void 0?gC:mC:Jm&&Jm in Object(e)?fC(e):pC(e)}function _C(e){return e!=null&&typeof e=="object"}var yC="[object Symbol]";function xC(e){return typeof e=="symbol"||_C(e)&&vC(e)==yC}var wC=/\s/;function bC(e){for(var n=e.length;n--&&wC.test(e.charAt(n)););return n}var kC=/^\s+/;function NC(e){return e&&e.slice(0,bC(e)+1).replace(kC,"")}function fl(e){var n=typeof e;return e!=null&&(n=="object"||n=="function")}var eg=NaN,SC=/^[-+]0x[0-9a-f]+$/i,jC=/^0b[01]+$/i,CC=/^0o[0-7]+$/i,PC=parseInt;function tg(e){if(typeof e=="number")return e;if(xC(e))return eg;if(fl(e)){var n=typeof e.valueOf=="function"?e.valueOf():e;e=fl(n)?n+"":n}if(typeof e!="string")return e===0?e:+e;e=NC(e);var r=jC.test(e);return r||CC.test(e)?PC(e.slice(2),r?2:8):SC.test(e)?eg:+e}var nc=function(){return I_.Date.now()},EC="Expected a function",TC=Math.max,LC=Math.min;function F_(e,n,r){var i,s,a,u,c,h,p=0,v=!1,m=!1,_=!0;if(typeof e!="function")throw new TypeError(EC);n=tg(n)||0,fl(r)&&(v=!!r.leading,m="maxWait"in r,a=m?TC(tg(r.maxWait)||0,n):a,_="trailing"in r?!!r.trailing:_);function y(T){var M=i,z=s;return i=s=void 0,p=T,u=e.apply(z,M),u}function k(T){return p=T,c=setTimeout(w,n),v?y(T):u}function S(T){var M=T-h,z=T-p,D=n-M;return m?LC(D,a-z):D}function E(T){var M=T-h,z=T-p;return h===void 0||M>=n||M<0||m&&z>=a}function w(){var T=nc();if(E(T))return b(T);c=setTimeout(w,S(T))}function b(T){return c=void 0,_&&i?y(T):(i=s=void 0,u)}function N(){c!==void 0&&clearTimeout(c),p=0,i=h=s=c=void 0}function C(){return c===void 0?u:b(nc())}function P(){var T=nc(),M=E(T);if(i=arguments,s=this,h=T,M){if(c===void 0)return k(h);if(m)return clearTimeout(c),c=setTimeout(w,n),y(h)}return c===void 0&&(c=setTimeout(w,n)),u}return P.cancel=N,P.flush=C,P}var MC="Expected a function";function zC(e,n,r){var i=!0,s=!0;if(typeof e!="function")throw new TypeError(MC);return fl(r)&&(i="leading"in r?!!r.leading:i,s="trailing"in r?!!r.trailing:s),F_(e,n,{leading:i,maxWait:n,trailing:s})}var Ar=Object.freeze({Linear:Object.freeze({None:function(e){return e},In:function(e){return e},Out:function(e){return e},InOut:function(e){return e}}),Quadratic:Object.freeze({In:function(e){return e*e},Out:function(e){return e*(2-e)},InOut:function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)}}),Cubic:Object.freeze({In:function(e){return e*e*e},Out:function(e){return--e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)}}),Quartic:Object.freeze({In:function(e){return e*e*e*e},Out:function(e){return 1- --e*e*e*e},InOut:function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)}}),Quintic:Object.freeze({In:function(e){return e*e*e*e*e},Out:function(e){return--e*e*e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)}}),Sinusoidal:Object.freeze({In:function(e){return 1-Math.sin((1-e)*Math.PI/2)},Out:function(e){return Math.sin(e*Math.PI/2)},InOut:function(e){return .5*(1-Math.sin(Math.PI*(.5-e)))}}),Exponential:Object.freeze({In:function(e){return e===0?0:Math.pow(1024,e-1)},Out:function(e){return e===1?1:1-Math.pow(2,-10*e)},InOut:function(e){return e===0?0:e===1?1:(e*=2)<1?.5*Math.pow(1024,e-1):.5*(-Math.pow(2,-10*(e-1))+2)}}),Circular:Object.freeze({In:function(e){return 1-Math.sqrt(1-e*e)},Out:function(e){return Math.sqrt(1- --e*e)},InOut:function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)}}),Elastic:Object.freeze({In:function(e){return e===0?0:e===1?1:-Math.pow(2,10*(e-1))*Math.sin((e-1.1)*5*Math.PI)},Out:function(e){return e===0?0:e===1?1:Math.pow(2,-10*e)*Math.sin((e-.1)*5*Math.PI)+1},InOut:function(e){return e===0?0:e===1?1:(e*=2,e<1?-.5*Math.pow(2,10*(e-1))*Math.sin((e-1.1)*5*Math.PI):.5*Math.pow(2,-10*(e-1))*Math.sin((e-1.1)*5*Math.PI)+1)}}),Back:Object.freeze({In:function(e){var n=1.70158;return e===1?1:e*e*((n+1)*e-n)},Out:function(e){var n=1.70158;return e===0?0:--e*e*((n+1)*e+n)+1},InOut:function(e){var n=2.5949095;return(e*=2)<1?.5*(e*e*((n+1)*e-n)):.5*((e-=2)*e*((n+1)*e+n)+2)}}),Bounce:Object.freeze({In:function(e){return 1-Ar.Bounce.Out(1-e)},Out:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},InOut:function(e){return e<.5?Ar.Bounce.In(e*2)*.5:Ar.Bounce.Out(e*2-1)*.5+.5}}),generatePow:function(e){return e===void 0&&(e=4),e=e<Number.EPSILON?Number.EPSILON:e,e=e>1e4?1e4:e,{In:function(n){return Math.pow(n,e)},Out:function(n){return 1-Math.pow(1-n,e)},InOut:function(n){return n<.5?Math.pow(n*2,e)/2:(1-Math.pow(2-n*2,e))/2+.5}}}}),No=function(){return performance.now()},B_=function(){function e(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];this._tweens={},this._tweensAddedDuringUpdate={},this.add.apply(this,n)}return e.prototype.getAll=function(){var n=this;return Object.keys(this._tweens).map(function(r){return n._tweens[r]})},e.prototype.removeAll=function(){this._tweens={}},e.prototype.add=function(){for(var n,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];for(var s=0,a=r;s<a.length;s++){var u=a[s];(n=u._group)===null||n===void 0||n.remove(u),u._group=this,this._tweens[u.getId()]=u,this._tweensAddedDuringUpdate[u.getId()]=u}},e.prototype.remove=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];for(var i=0,s=n;i<s.length;i++){var a=s[i];a._group=void 0,delete this._tweens[a.getId()],delete this._tweensAddedDuringUpdate[a.getId()]}},e.prototype.allStopped=function(){return this.getAll().every(function(n){return!n.isPlaying()})},e.prototype.update=function(n,r){n===void 0&&(n=No()),r===void 0&&(r=!0);var i=Object.keys(this._tweens);if(i.length!==0)for(;i.length>0;){this._tweensAddedDuringUpdate={};for(var s=0;s<i.length;s++){var a=this._tweens[i[s]],u=!r;a&&a.update(n,u)===!1&&!r&&this.remove(a)}i=Object.keys(this._tweensAddedDuringUpdate)}},e}(),vf={Linear:function(e,n){var r=e.length-1,i=r*n,s=Math.floor(i),a=vf.Utils.Linear;return n<0?a(e[0],e[1],i):n>1?a(e[r],e[r-1],r-i):a(e[s],e[s+1>r?r:s+1],i-s)},Utils:{Linear:function(e,n,r){return(n-e)*r+e}}},U_=function(){function e(){}return e.nextId=function(){return e._nextId++},e._nextId=0,e}(),_f=new B_,ng=function(){function e(n,r){this._isPaused=!1,this._pauseStart=0,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._isDynamic=!1,this._initialRepeat=0,this._repeat=0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=0,this._easingFunction=Ar.Linear.None,this._interpolationFunction=vf.Linear,this._chainedTweens=[],this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._id=U_.nextId(),this._isChainStopped=!1,this._propertiesAreSetUp=!1,this._goToEnd=!1,this._object=n,typeof r=="object"?(this._group=r,r.add(this)):r===!0&&(this._group=_f,_f.add(this))}return e.prototype.getId=function(){return this._id},e.prototype.isPlaying=function(){return this._isPlaying},e.prototype.isPaused=function(){return this._isPaused},e.prototype.getDuration=function(){return this._duration},e.prototype.to=function(n,r){if(r===void 0&&(r=1e3),this._isPlaying)throw new Error("Can not call Tween.to() while Tween is already started or paused. Stop the Tween first.");return this._valuesEnd=n,this._propertiesAreSetUp=!1,this._duration=r<0?0:r,this},e.prototype.duration=function(n){return n===void 0&&(n=1e3),this._duration=n<0?0:n,this},e.prototype.dynamic=function(n){return n===void 0&&(n=!1),this._isDynamic=n,this},e.prototype.start=function(n,r){if(n===void 0&&(n=No()),r===void 0&&(r=!1),this._isPlaying)return this;if(this._repeat=this._initialRepeat,this._reversed){this._reversed=!1;for(var i in this._valuesStartRepeat)this._swapEndStartRepeatValues(i),this._valuesStart[i]=this._valuesStartRepeat[i]}if(this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._isChainStopped=!1,this._startTime=n,this._startTime+=this._delayTime,!this._propertiesAreSetUp||r){if(this._propertiesAreSetUp=!0,!this._isDynamic){var s={};for(var a in this._valuesEnd)s[a]=this._valuesEnd[a];this._valuesEnd=s}this._setupProperties(this._object,this._valuesStart,this._valuesEnd,this._valuesStartRepeat,r)}return this},e.prototype.startFromCurrentValues=function(n){return this.start(n,!0)},e.prototype._setupProperties=function(n,r,i,s,a){for(var u in i){var c=n[u],h=Array.isArray(c),p=h?"array":typeof c,v=!h&&Array.isArray(i[u]);if(!(p==="undefined"||p==="function")){if(v){var m=i[u];if(m.length===0)continue;for(var _=[c],y=0,k=m.length;y<k;y+=1){var S=this._handleRelativeValue(c,m[y]);if(isNaN(S)){v=!1,console.warn("Found invalid interpolation list. Skipping.");break}_.push(S)}v&&(i[u]=_)}if((p==="object"||h)&&c&&!v){r[u]=h?[]:{};var E=c;for(var w in E)r[u][w]=E[w];s[u]=h?[]:{};var m=i[u];if(!this._isDynamic){var b={};for(var w in m)b[w]=m[w];i[u]=m=b}this._setupProperties(E,r[u],m,s[u],a)}else(typeof r[u]>"u"||a)&&(r[u]=c),h||(r[u]*=1),v?s[u]=i[u].slice().reverse():s[u]=r[u]||0}}},e.prototype.stop=function(){return this._isChainStopped||(this._isChainStopped=!0,this.stopChainedTweens()),this._isPlaying?(this._isPlaying=!1,this._isPaused=!1,this._onStopCallback&&this._onStopCallback(this._object),this):this},e.prototype.end=function(){return this._goToEnd=!0,this.update(this._startTime+this._duration),this},e.prototype.pause=function(n){return n===void 0&&(n=No()),this._isPaused||!this._isPlaying?this:(this._isPaused=!0,this._pauseStart=n,this)},e.prototype.resume=function(n){return n===void 0&&(n=No()),!this._isPaused||!this._isPlaying?this:(this._isPaused=!1,this._startTime+=n-this._pauseStart,this._pauseStart=0,this)},e.prototype.stopChainedTweens=function(){for(var n=0,r=this._chainedTweens.length;n<r;n++)this._chainedTweens[n].stop();return this},e.prototype.group=function(n){return n?(n.add(this),this):(console.warn("tween.group() without args has been removed, use group.add(tween) instead."),this)},e.prototype.remove=function(){var n;return(n=this._group)===null||n===void 0||n.remove(this),this},e.prototype.delay=function(n){return n===void 0&&(n=0),this._delayTime=n,this},e.prototype.repeat=function(n){return n===void 0&&(n=0),this._initialRepeat=n,this._repeat=n,this},e.prototype.repeatDelay=function(n){return this._repeatDelayTime=n,this},e.prototype.yoyo=function(n){return n===void 0&&(n=!1),this._yoyo=n,this},e.prototype.easing=function(n){return n===void 0&&(n=Ar.Linear.None),this._easingFunction=n,this},e.prototype.interpolation=function(n){return n===void 0&&(n=vf.Linear),this._interpolationFunction=n,this},e.prototype.chain=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return this._chainedTweens=n,this},e.prototype.onStart=function(n){return this._onStartCallback=n,this},e.prototype.onEveryStart=function(n){return this._onEveryStartCallback=n,this},e.prototype.onUpdate=function(n){return this._onUpdateCallback=n,this},e.prototype.onRepeat=function(n){return this._onRepeatCallback=n,this},e.prototype.onComplete=function(n){return this._onCompleteCallback=n,this},e.prototype.onStop=function(n){return this._onStopCallback=n,this},e.prototype.update=function(n,r){var i=this,s;if(n===void 0&&(n=No()),r===void 0&&(r=e.autoStartOnUpdate),this._isPaused)return!0;var a;if(!this._goToEnd&&!this._isPlaying)if(r)this.start(n,!0);else return!1;if(this._goToEnd=!1,n<this._startTime)return!0;this._onStartCallbackFired===!1&&(this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),this._onEveryStartCallbackFired===!1&&(this._onEveryStartCallback&&this._onEveryStartCallback(this._object),this._onEveryStartCallbackFired=!0);var u=n-this._startTime,c=this._duration+((s=this._repeatDelayTime)!==null&&s!==void 0?s:this._delayTime),h=this._duration+this._repeat*c,p=function(){if(i._duration===0||u>h)return 1;var S=Math.trunc(u/c),E=u-S*c,w=Math.min(E/i._duration,1);return w===0&&u===i._duration?1:w},v=p(),m=this._easingFunction(v);if(this._updateProperties(this._object,this._valuesStart,this._valuesEnd,m),this._onUpdateCallback&&this._onUpdateCallback(this._object,v),this._duration===0||u>=this._duration)if(this._repeat>0){var _=Math.min(Math.trunc((u-this._duration)/c)+1,this._repeat);isFinite(this._repeat)&&(this._repeat-=_);for(a in this._valuesStartRepeat)!this._yoyo&&typeof this._valuesEnd[a]=="string"&&(this._valuesStartRepeat[a]=this._valuesStartRepeat[a]+parseFloat(this._valuesEnd[a])),this._yoyo&&this._swapEndStartRepeatValues(a),this._valuesStart[a]=this._valuesStartRepeat[a];return this._yoyo&&(this._reversed=!this._reversed),this._startTime+=c*_,this._onRepeatCallback&&this._onRepeatCallback(this._object),this._onEveryStartCallbackFired=!1,!0}else{this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var y=0,k=this._chainedTweens.length;y<k;y++)this._chainedTweens[y].start(this._startTime+this._duration,!1);return this._isPlaying=!1,!1}return!0},e.prototype._updateProperties=function(n,r,i,s){for(var a in i)if(r[a]!==void 0){var u=r[a]||0,c=i[a],h=Array.isArray(n[a]),p=Array.isArray(c),v=!h&&p;v?n[a]=this._interpolationFunction(c,s):typeof c=="object"&&c?this._updateProperties(n[a],u,c,s):(c=this._handleRelativeValue(u,c),typeof c=="number"&&(n[a]=u+(c-u)*s))}},e.prototype._handleRelativeValue=function(n,r){return typeof r!="string"?r:r.charAt(0)==="+"||r.charAt(0)==="-"?n+parseFloat(r):parseFloat(r)},e.prototype._swapEndStartRepeatValues=function(n){var r=this._valuesStartRepeat[n],i=this._valuesEnd[n];typeof i=="string"?this._valuesStartRepeat[n]=this._valuesStartRepeat[n]+parseFloat(i):this._valuesStartRepeat[n]=this._valuesEnd[n],this._valuesEnd[n]=r},e.autoStartOnUpdate=!1,e}();U_.nextId;var mn=_f;mn.getAll.bind(mn);mn.removeAll.bind(mn);mn.add.bind(mn);mn.remove.bind(mn);mn.update.bind(mn);function rg(e,n){(n==null||n>e.length)&&(n=e.length);for(var r=0,i=Array(n);r<n;r++)i[r]=e[r];return i}function OC(e){if(Array.isArray(e))return e}function AC(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function RC(e,n,r){return Object.defineProperty(e,"prototype",{writable:!1}),e}function IC(e,n){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var i,s,a,u,c=[],h=!0,p=!1;try{if(a=(r=r.call(e)).next,n!==0)for(;!(h=(i=a.call(r)).done)&&(c.push(i.value),c.length!==n);h=!0);}catch(v){p=!0,s=v}finally{try{if(!h&&r.return!=null&&(u=r.return(),Object(u)!==u))return}finally{if(p)throw s}}return c}}function DC(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function FC(e,n){return OC(e)||IC(e,n)||BC(e,n)||DC()}function BC(e,n){if(e){if(typeof e=="string")return rg(e,n);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?rg(e,n):void 0}}var UC=RC(function e(n,r){var i=r.default,s=i===void 0?null:i,a=r.triggerUpdate,u=a===void 0?!0:a,c=r.onChange,h=c===void 0?function(p,v){}:c;AC(this,e),this.name=n,this.defaultVal=s,this.triggerUpdate=u,this.onChange=h});function Dh(e){var n=e.stateInit,r=n===void 0?function(){return{}}:n,i=e.props,s=i===void 0?{}:i,a=e.methods,u=a===void 0?{}:a,c=e.aliases,h=c===void 0?{}:c,p=e.init,v=p===void 0?function(){}:p,m=e.update,_=m===void 0?function(){}:m,y=Object.keys(s).map(function(k){return new UC(k,s[k])});return function k(){for(var S=arguments.length,E=new Array(S),w=0;w<S;w++)E[w]=arguments[w];var b=!!(this instanceof k&&this.constructor),N=b?E.shift():void 0,C=E[0],P=C===void 0?{}:C,T=Object.assign({},r instanceof Function?r(P):r,{initialised:!1}),M={};function z(V){return D(V,P),F(),z}var D=function(H,Q){v.call(z,H,T,Q),T.initialised=!0},F=F_(function(){T.initialised&&(_.call(z,T,M),M={})},1);return y.forEach(function(V){z[V.name]=H(V);function H(Q){var R=Q.name,G=Q.triggerUpdate,W=G===void 0?!1:G,ee=Q.onChange,U=ee===void 0?function(J,re){}:ee,K=Q.defaultVal,Z=K===void 0?null:K;return function(J){var re=T[R];if(!arguments.length)return re;var he=J===void 0?Z:J;return T[R]=he,U.call(z,he,T,re),!M.hasOwnProperty(R)&&(M[R]=re),W&&F(),z}}}),Object.keys(u).forEach(function(V){z[V]=function(){for(var H,Q=arguments.length,R=new Array(Q),G=0;G<Q;G++)R[G]=arguments[G];return(H=u[V]).call.apply(H,[z,T].concat(R))}}),Object.entries(h).forEach(function(V){var H=FC(V,2),Q=H[0],R=H[1];return z[Q]=z[R]}),z.resetProps=function(){return y.forEach(function(V){z[V.name](V.defaultVal)}),z},z.resetProps(),T._rerender=F,b&&N&&z(N),z}}var xe=function(e){return typeof e=="function"?e:typeof e=="string"?function(n){return n[e]}:function(n){return e}};function hl(e){"@babel/helpers - typeof";return hl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},hl(e)}var $C=/^\s+/,HC=/\s+$/;function se(e,n){if(e=e||"",n=n||{},e instanceof se)return e;if(!(this instanceof se))return new se(e,n);var r=ZC(e);this._originalInput=e,this._r=r.r,this._g=r.g,this._b=r.b,this._a=r.a,this._roundA=Math.round(100*this._a)/100,this._format=n.format||r.format,this._gradientType=n.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=r.ok}se.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var n=this.toRgb();return(n.r*299+n.g*587+n.b*114)/1e3},getLuminance:function(){var n=this.toRgb(),r,i,s,a,u,c;return r=n.r/255,i=n.g/255,s=n.b/255,r<=.03928?a=r/12.92:a=Math.pow((r+.055)/1.055,2.4),i<=.03928?u=i/12.92:u=Math.pow((i+.055)/1.055,2.4),s<=.03928?c=s/12.92:c=Math.pow((s+.055)/1.055,2.4),.2126*a+.7152*u+.0722*c},setAlpha:function(n){return this._a=$_(n),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var n=og(this._r,this._g,this._b);return{h:n.h*360,s:n.s,v:n.v,a:this._a}},toHsvString:function(){var n=og(this._r,this._g,this._b),r=Math.round(n.h*360),i=Math.round(n.s*100),s=Math.round(n.v*100);return this._a==1?"hsv("+r+", "+i+"%, "+s+"%)":"hsva("+r+", "+i+"%, "+s+"%, "+this._roundA+")"},toHsl:function(){var n=ig(this._r,this._g,this._b);return{h:n.h*360,s:n.s,l:n.l,a:this._a}},toHslString:function(){var n=ig(this._r,this._g,this._b),r=Math.round(n.h*360),i=Math.round(n.s*100),s=Math.round(n.l*100);return this._a==1?"hsl("+r+", "+i+"%, "+s+"%)":"hsla("+r+", "+i+"%, "+s+"%, "+this._roundA+")"},toHex:function(n){return sg(this._r,this._g,this._b,n)},toHexString:function(n){return"#"+this.toHex(n)},toHex8:function(n){return GC(this._r,this._g,this._b,this._a,n)},toHex8String:function(n){return"#"+this.toHex8(n)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(Pe(this._r,255)*100)+"%",g:Math.round(Pe(this._g,255)*100)+"%",b:Math.round(Pe(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+Math.round(Pe(this._r,255)*100)+"%, "+Math.round(Pe(this._g,255)*100)+"%, "+Math.round(Pe(this._b,255)*100)+"%)":"rgba("+Math.round(Pe(this._r,255)*100)+"%, "+Math.round(Pe(this._g,255)*100)+"%, "+Math.round(Pe(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:sP[sg(this._r,this._g,this._b,!0)]||!1},toFilter:function(n){var r="#"+ag(this._r,this._g,this._b,this._a),i=r,s=this._gradientType?"GradientType = 1, ":"";if(n){var a=se(n);i="#"+ag(a._r,a._g,a._b,a._a)}return"progid:DXImageTransform.Microsoft.gradient("+s+"startColorstr="+r+",endColorstr="+i+")"},toString:function(n){var r=!!n;n=n||this._format;var i=!1,s=this._a<1&&this._a>=0,a=!r&&s&&(n==="hex"||n==="hex6"||n==="hex3"||n==="hex4"||n==="hex8"||n==="name");return a?n==="name"&&this._a===0?this.toName():this.toRgbString():(n==="rgb"&&(i=this.toRgbString()),n==="prgb"&&(i=this.toPercentageRgbString()),(n==="hex"||n==="hex6")&&(i=this.toHexString()),n==="hex3"&&(i=this.toHexString(!0)),n==="hex4"&&(i=this.toHex8String(!0)),n==="hex8"&&(i=this.toHex8String()),n==="name"&&(i=this.toName()),n==="hsl"&&(i=this.toHslString()),n==="hsv"&&(i=this.toHsvString()),i||this.toHexString())},clone:function(){return se(this.toString())},_applyModification:function(n,r){var i=n.apply(null,[this].concat([].slice.call(r)));return this._r=i._r,this._g=i._g,this._b=i._b,this.setAlpha(i._a),this},lighten:function(){return this._applyModification(QC,arguments)},brighten:function(){return this._applyModification(JC,arguments)},darken:function(){return this._applyModification(eP,arguments)},desaturate:function(){return this._applyModification(KC,arguments)},saturate:function(){return this._applyModification(YC,arguments)},greyscale:function(){return this._applyModification(XC,arguments)},spin:function(){return this._applyModification(tP,arguments)},_applyCombination:function(n,r){return n.apply(null,[this].concat([].slice.call(r)))},analogous:function(){return this._applyCombination(iP,arguments)},complement:function(){return this._applyCombination(nP,arguments)},monochromatic:function(){return this._applyCombination(oP,arguments)},splitcomplement:function(){return this._applyCombination(rP,arguments)},triad:function(){return this._applyCombination(lg,[3])},tetrad:function(){return this._applyCombination(lg,[4])}};se.fromRatio=function(e,n){if(hl(e)=="object"){var r={};for(var i in e)e.hasOwnProperty(i)&&(i==="a"?r[i]=e[i]:r[i]=So(e[i]));e=r}return se(e,n)};function ZC(e){var n={r:0,g:0,b:0},r=1,i=null,s=null,a=null,u=!1,c=!1;return typeof e=="string"&&(e=cP(e)),hl(e)=="object"&&(kn(e.r)&&kn(e.g)&&kn(e.b)?(n=WC(e.r,e.g,e.b),u=!0,c=String(e.r).substr(-1)==="%"?"prgb":"rgb"):kn(e.h)&&kn(e.s)&&kn(e.v)?(i=So(e.s),s=So(e.v),n=qC(e.h,i,s),u=!0,c="hsv"):kn(e.h)&&kn(e.s)&&kn(e.l)&&(i=So(e.s),a=So(e.l),n=VC(e.h,i,a),u=!0,c="hsl"),e.hasOwnProperty("a")&&(r=e.a)),r=$_(r),{ok:u,format:e.format||c,r:Math.min(255,Math.max(n.r,0)),g:Math.min(255,Math.max(n.g,0)),b:Math.min(255,Math.max(n.b,0)),a:r}}function WC(e,n,r){return{r:Pe(e,255)*255,g:Pe(n,255)*255,b:Pe(r,255)*255}}function ig(e,n,r){e=Pe(e,255),n=Pe(n,255),r=Pe(r,255);var i=Math.max(e,n,r),s=Math.min(e,n,r),a,u,c=(i+s)/2;if(i==s)a=u=0;else{var h=i-s;switch(u=c>.5?h/(2-i-s):h/(i+s),i){case e:a=(n-r)/h+(n<r?6:0);break;case n:a=(r-e)/h+2;break;case r:a=(e-n)/h+4;break}a/=6}return{h:a,s:u,l:c}}function VC(e,n,r){var i,s,a;e=Pe(e,360),n=Pe(n,100),r=Pe(r,100);function u(p,v,m){return m<0&&(m+=1),m>1&&(m-=1),m<1/6?p+(v-p)*6*m:m<1/2?v:m<2/3?p+(v-p)*(2/3-m)*6:p}if(n===0)i=s=a=r;else{var c=r<.5?r*(1+n):r+n-r*n,h=2*r-c;i=u(h,c,e+1/3),s=u(h,c,e),a=u(h,c,e-1/3)}return{r:i*255,g:s*255,b:a*255}}function og(e,n,r){e=Pe(e,255),n=Pe(n,255),r=Pe(r,255);var i=Math.max(e,n,r),s=Math.min(e,n,r),a,u,c=i,h=i-s;if(u=i===0?0:h/i,i==s)a=0;else{switch(i){case e:a=(n-r)/h+(n<r?6:0);break;case n:a=(r-e)/h+2;break;case r:a=(e-n)/h+4;break}a/=6}return{h:a,s:u,v:c}}function qC(e,n,r){e=Pe(e,360)*6,n=Pe(n,100),r=Pe(r,100);var i=Math.floor(e),s=e-i,a=r*(1-n),u=r*(1-s*n),c=r*(1-(1-s)*n),h=i%6,p=[r,u,a,a,c,r][h],v=[c,r,r,u,a,a][h],m=[a,a,c,r,r,u][h];return{r:p*255,g:v*255,b:m*255}}function sg(e,n,r,i){var s=[Yt(Math.round(e).toString(16)),Yt(Math.round(n).toString(16)),Yt(Math.round(r).toString(16))];return i&&s[0].charAt(0)==s[0].charAt(1)&&s[1].charAt(0)==s[1].charAt(1)&&s[2].charAt(0)==s[2].charAt(1)?s[0].charAt(0)+s[1].charAt(0)+s[2].charAt(0):s.join("")}function GC(e,n,r,i,s){var a=[Yt(Math.round(e).toString(16)),Yt(Math.round(n).toString(16)),Yt(Math.round(r).toString(16)),Yt(H_(i))];return s&&a[0].charAt(0)==a[0].charAt(1)&&a[1].charAt(0)==a[1].charAt(1)&&a[2].charAt(0)==a[2].charAt(1)&&a[3].charAt(0)==a[3].charAt(1)?a[0].charAt(0)+a[1].charAt(0)+a[2].charAt(0)+a[3].charAt(0):a.join("")}function ag(e,n,r,i){var s=[Yt(H_(i)),Yt(Math.round(e).toString(16)),Yt(Math.round(n).toString(16)),Yt(Math.round(r).toString(16))];return s.join("")}se.equals=function(e,n){return!e||!n?!1:se(e).toRgbString()==se(n).toRgbString()};se.random=function(){return se.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})};function KC(e,n){n=n===0?0:n||10;var r=se(e).toHsl();return r.s-=n/100,r.s=Rl(r.s),se(r)}function YC(e,n){n=n===0?0:n||10;var r=se(e).toHsl();return r.s+=n/100,r.s=Rl(r.s),se(r)}function XC(e){return se(e).desaturate(100)}function QC(e,n){n=n===0?0:n||10;var r=se(e).toHsl();return r.l+=n/100,r.l=Rl(r.l),se(r)}function JC(e,n){n=n===0?0:n||10;var r=se(e).toRgb();return r.r=Math.max(0,Math.min(255,r.r-Math.round(255*-(n/100)))),r.g=Math.max(0,Math.min(255,r.g-Math.round(255*-(n/100)))),r.b=Math.max(0,Math.min(255,r.b-Math.round(255*-(n/100)))),se(r)}function eP(e,n){n=n===0?0:n||10;var r=se(e).toHsl();return r.l-=n/100,r.l=Rl(r.l),se(r)}function tP(e,n){var r=se(e).toHsl(),i=(r.h+n)%360;return r.h=i<0?360+i:i,se(r)}function nP(e){var n=se(e).toHsl();return n.h=(n.h+180)%360,se(n)}function lg(e,n){if(isNaN(n)||n<=0)throw new Error("Argument to polyad must be a positive number");for(var r=se(e).toHsl(),i=[se(e)],s=360/n,a=1;a<n;a++)i.push(se({h:(r.h+a*s)%360,s:r.s,l:r.l}));return i}function rP(e){var n=se(e).toHsl(),r=n.h;return[se(e),se({h:(r+72)%360,s:n.s,l:n.l}),se({h:(r+216)%360,s:n.s,l:n.l})]}function iP(e,n,r){n=n||6,r=r||30;var i=se(e).toHsl(),s=360/r,a=[se(e)];for(i.h=(i.h-(s*n>>1)+720)%360;--n;)i.h=(i.h+s)%360,a.push(se(i));return a}function oP(e,n){n=n||6;for(var r=se(e).toHsv(),i=r.h,s=r.s,a=r.v,u=[],c=1/n;n--;)u.push(se({h:i,s,v:a})),a=(a+c)%1;return u}se.mix=function(e,n,r){r=r===0?0:r||50;var i=se(e).toRgb(),s=se(n).toRgb(),a=r/100,u={r:(s.r-i.r)*a+i.r,g:(s.g-i.g)*a+i.g,b:(s.b-i.b)*a+i.b,a:(s.a-i.a)*a+i.a};return se(u)};se.readability=function(e,n){var r=se(e),i=se(n);return(Math.max(r.getLuminance(),i.getLuminance())+.05)/(Math.min(r.getLuminance(),i.getLuminance())+.05)};se.isReadable=function(e,n,r){var i=se.readability(e,n),s,a;switch(a=!1,s=fP(r),s.level+s.size){case"AAsmall":case"AAAlarge":a=i>=4.5;break;case"AAlarge":a=i>=3;break;case"AAAsmall":a=i>=7;break}return a};se.mostReadable=function(e,n,r){var i=null,s=0,a,u,c,h;r=r||{},u=r.includeFallbackColors,c=r.level,h=r.size;for(var p=0;p<n.length;p++)a=se.readability(e,n[p]),a>s&&(s=a,i=se(n[p]));return se.isReadable(e,i,{level:c,size:h})||!u?i:(r.includeFallbackColors=!1,se.mostReadable(e,["#fff","#000"],r))};var yf=se.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},sP=se.hexNames=aP(yf);function aP(e){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[e[r]]=r);return n}function $_(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function Pe(e,n){lP(e)&&(e="100%");var r=uP(e);return e=Math.min(n,Math.max(0,parseFloat(e))),r&&(e=parseInt(e*n,10)/100),Math.abs(e-n)<1e-6?1:e%n/parseFloat(n)}function Rl(e){return Math.min(1,Math.max(0,e))}function wt(e){return parseInt(e,16)}function lP(e){return typeof e=="string"&&e.indexOf(".")!=-1&&parseFloat(e)===1}function uP(e){return typeof e=="string"&&e.indexOf("%")!=-1}function Yt(e){return e.length==1?"0"+e:""+e}function So(e){return e<=1&&(e=e*100+"%"),e}function H_(e){return Math.round(parseFloat(e)*255).toString(16)}function ug(e){return wt(e)/255}var Wt=function(){var e="[-\\+]?\\d+%?",n="[-\\+]?\\d*\\.\\d+%?",r="(?:"+n+")|(?:"+e+")",i="[\\s|\\(]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")\\s*\\)?",s="[\\s|\\(]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")\\s*\\)?";return{CSS_UNIT:new RegExp(r),rgb:new RegExp("rgb"+i),rgba:new RegExp("rgba"+s),hsl:new RegExp("hsl"+i),hsla:new RegExp("hsla"+s),hsv:new RegExp("hsv"+i),hsva:new RegExp("hsva"+s),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function kn(e){return!!Wt.CSS_UNIT.exec(e)}function cP(e){e=e.replace($C,"").replace(HC,"").toLowerCase();var n=!1;if(yf[e])e=yf[e],n=!0;else if(e=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var r;return(r=Wt.rgb.exec(e))?{r:r[1],g:r[2],b:r[3]}:(r=Wt.rgba.exec(e))?{r:r[1],g:r[2],b:r[3],a:r[4]}:(r=Wt.hsl.exec(e))?{h:r[1],s:r[2],l:r[3]}:(r=Wt.hsla.exec(e))?{h:r[1],s:r[2],l:r[3],a:r[4]}:(r=Wt.hsv.exec(e))?{h:r[1],s:r[2],v:r[3]}:(r=Wt.hsva.exec(e))?{h:r[1],s:r[2],v:r[3],a:r[4]}:(r=Wt.hex8.exec(e))?{r:wt(r[1]),g:wt(r[2]),b:wt(r[3]),a:ug(r[4]),format:n?"name":"hex8"}:(r=Wt.hex6.exec(e))?{r:wt(r[1]),g:wt(r[2]),b:wt(r[3]),format:n?"name":"hex"}:(r=Wt.hex4.exec(e))?{r:wt(r[1]+""+r[1]),g:wt(r[2]+""+r[2]),b:wt(r[3]+""+r[3]),a:ug(r[4]+""+r[4]),format:n?"name":"hex8"}:(r=Wt.hex3.exec(e))?{r:wt(r[1]+""+r[1]),g:wt(r[2]+""+r[2]),b:wt(r[3]+""+r[3]),format:n?"name":"hex"}:!1}function fP(e){var n,r;return e=e||{level:"AA",size:"small"},n=(e.level||"AA").toUpperCase(),r=(e.size||"small").toLowerCase(),n!=="AA"&&n!=="AAA"&&(n="AA"),r!=="small"&&r!=="large"&&(r="small"),{level:n,size:r}}function xf(e,n){(n==null||n>e.length)&&(n=e.length);for(var r=0,i=Array(n);r<n;r++)i[r]=e[r];return i}function hP(e){if(Array.isArray(e))return xf(e)}function Z_(e,n,r){if(typeof e=="function"?e===n:e.has(n))return arguments.length<3?n:r;throw new TypeError("Private element is not present on this object")}function dP(e,n){if(n.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function pP(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function Mt(e,n){return e.get(Z_(e,n))}function cg(e,n,r){dP(e,n),n.set(e,r)}function fg(e,n,r){return e.set(Z_(e,n),r),r}function mP(e,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,wP(i.key),i)}}function gP(e,n,r){return n&&mP(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function vP(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function _P(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yP(e){return hP(e)||vP(e)||bP(e)||_P()}function xP(e,n){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,n);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function wP(e){var n=xP(e,"string");return typeof n=="symbol"?n:n+""}function bP(e,n){if(e){if(typeof e=="string")return xf(e,n);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?xf(e,n):void 0}}var kP=123,NP=function(n){return"#".concat(Math.min(n,Math.pow(2,24)).toString(16).padStart(6,"0"))},W_=function(n,r,i){return(n<<16)+(r<<8)+i},SP=function(n){var r=se(n).toRgb(),i=r.r,s=r.g,a=r.b;return W_(i,s,a)},hg=function(n,r){return n*kP%Math.pow(2,r)},Nr=new WeakMap,Nn=new WeakMap,jP=function(){function e(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:6;pP(this,e),cg(this,Nr,void 0),cg(this,Nn,void 0),fg(Nn,this,n),this.reset()}return gP(e,[{key:"reset",value:function(){fg(Nr,this,["__reserved for background__"])}},{key:"register",value:function(r){if(Mt(Nr,this).length>=Math.pow(2,24-Mt(Nn,this)))return null;var i=Mt(Nr,this).length,s=hg(i,Mt(Nn,this)),a=NP(i+(s<<24-Mt(Nn,this)));return Mt(Nr,this).push(r),a}},{key:"lookup",value:function(r){if(!r)return null;var i=typeof r=="string"?SP(r):W_.apply(void 0,yP(r));if(!i)return null;var s=i&Math.pow(2,24-Mt(Nn,this))-1,a=i>>24-Mt(Nn,this)&Math.pow(2,Mt(Nn,this))-1;return hg(s,Mt(Nn,this))!==a||s>=Mt(Nr,this).length?null:Mt(Nr,this)[s]}}])}(),bs,Te,V_,q_,Cr,dg,G_,K_,Y_,Fh,wf,bf,cs={},X_=[],CP=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,Il=Array.isArray;function fn(e,n){for(var r in n)e[r]=n[r];return e}function Bh(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function PP(e,n,r){var i,s,a,u={};for(a in n)a=="key"?i=n[a]:a=="ref"?s=n[a]:u[a]=n[a];if(arguments.length>2&&(u.children=arguments.length>3?bs.call(arguments,2):r),typeof e=="function"&&e.defaultProps!=null)for(a in e.defaultProps)u[a]===void 0&&(u[a]=e.defaultProps[a]);return Io(e,u,i,s,null)}function Io(e,n,r,i,s){var a={type:e,props:n,key:r,ref:i,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:s??++V_,__i:-1,__u:0};return s==null&&Te.vnode!=null&&Te.vnode(a),a}function Dl(e){return e.children}function Ma(e,n){this.props=e,this.context=n}function Ai(e,n){if(n==null)return e.__?Ai(e.__,e.__i+1):null;for(var r;n<e.__k.length;n++)if((r=e.__k[n])!=null&&r.__e!=null)return r.__e;return typeof e.type=="function"?Ai(e):null}function Q_(e){var n,r;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,n=0;n<e.__k.length;n++)if((r=e.__k[n])!=null&&r.__e!=null){e.__e=e.__c.base=r.__e;break}return Q_(e)}}function pg(e){(!e.__d&&(e.__d=!0)&&Cr.push(e)&&!dl.__r++||dg!=Te.debounceRendering)&&((dg=Te.debounceRendering)||G_)(dl)}function dl(){for(var e,n,r,i,s,a,u,c=1;Cr.length;)Cr.length>c&&Cr.sort(K_),e=Cr.shift(),c=Cr.length,e.__d&&(r=void 0,i=void 0,s=(i=(n=e).__v).__e,a=[],u=[],n.__P&&((r=fn({},i)).__v=i.__v+1,Te.vnode&&Te.vnode(r),Uh(n.__P,r,i,n.__n,n.__P.namespaceURI,32&i.__u?[s]:null,a,s??Ai(i),!!(32&i.__u),u),r.__v=i.__v,r.__.__k[r.__i]=r,ty(a,r,u),i.__e=i.__=null,r.__e!=s&&Q_(r)));dl.__r=0}function J_(e,n,r,i,s,a,u,c,h,p,v){var m,_,y,k,S,E,w,b=i&&i.__k||X_,N=n.length;for(h=EP(r,n,b,h,N),m=0;m<N;m++)(y=r.__k[m])!=null&&(_=y.__i==-1?cs:b[y.__i]||cs,y.__i=m,E=Uh(e,y,_,s,a,u,c,h,p,v),k=y.__e,y.ref&&_.ref!=y.ref&&(_.ref&&$h(_.ref,null,y),v.push(y.ref,y.__c||k,y)),S==null&&k!=null&&(S=k),(w=!!(4&y.__u))||_.__k===y.__k?h=ey(y,h,e,w):typeof y.type=="function"&&E!==void 0?h=E:k&&(h=k.nextSibling),y.__u&=-7);return r.__e=S,h}function EP(e,n,r,i,s){var a,u,c,h,p,v=r.length,m=v,_=0;for(e.__k=new Array(s),a=0;a<s;a++)(u=n[a])!=null&&typeof u!="boolean"&&typeof u!="function"?(typeof u=="string"||typeof u=="number"||typeof u=="bigint"||u.constructor==String?u=e.__k[a]=Io(null,u,null,null,null):Il(u)?u=e.__k[a]=Io(Dl,{children:u},null,null,null):u.constructor==null&&u.__b>0?u=e.__k[a]=Io(u.type,u.props,u.key,u.ref?u.ref:null,u.__v):e.__k[a]=u,h=a+_,u.__=e,u.__b=e.__b+1,(p=u.__i=TP(u,r,h,m))!=-1&&(m--,(c=r[p])&&(c.__u|=2)),c==null||c.__v==null?(p==-1&&(s>v?_--:s<v&&_++),typeof u.type!="function"&&(u.__u|=4)):p!=h&&(p==h-1?_--:p==h+1?_++:(p>h?_--:_++,u.__u|=4))):e.__k[a]=null;if(m)for(a=0;a<v;a++)(c=r[a])!=null&&!(2&c.__u)&&(c.__e==i&&(i=Ai(c)),ry(c,c));return i}function ey(e,n,r,i){var s,a;if(typeof e.type=="function"){for(s=e.__k,a=0;s&&a<s.length;a++)s[a]&&(s[a].__=e,n=ey(s[a],n,r,i));return n}e.__e!=n&&(i&&(n&&e.type&&!n.parentNode&&(n=Ai(e)),r.insertBefore(e.__e,n||null)),n=e.__e);do n=n&&n.nextSibling;while(n!=null&&n.nodeType==8);return n}function TP(e,n,r,i){var s,a,u,c=e.key,h=e.type,p=n[r],v=p!=null&&(2&p.__u)==0;if(p===null&&c==null||v&&c==p.key&&h==p.type)return r;if(i>(v?1:0)){for(s=r-1,a=r+1;s>=0||a<n.length;)if((p=n[u=s>=0?s--:a++])!=null&&!(2&p.__u)&&c==p.key&&h==p.type)return u}return-1}function mg(e,n,r){n[0]=="-"?e.setProperty(n,r??""):e[n]=r==null?"":typeof r!="number"||CP.test(n)?r:r+"px"}function ha(e,n,r,i,s){var a,u;e:if(n=="style")if(typeof r=="string")e.style.cssText=r;else{if(typeof i=="string"&&(e.style.cssText=i=""),i)for(n in i)r&&n in r||mg(e.style,n,"");if(r)for(n in r)i&&r[n]==i[n]||mg(e.style,n,r[n])}else if(n[0]=="o"&&n[1]=="n")a=n!=(n=n.replace(Y_,"$1")),u=n.toLowerCase(),n=u in e||n=="onFocusOut"||n=="onFocusIn"?u.slice(2):n.slice(2),e.l||(e.l={}),e.l[n+a]=r,r?i?r.u=i.u:(r.u=Fh,e.addEventListener(n,a?bf:wf,a)):e.removeEventListener(n,a?bf:wf,a);else{if(s=="http://www.w3.org/2000/svg")n=n.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(n!="width"&&n!="height"&&n!="href"&&n!="list"&&n!="form"&&n!="tabIndex"&&n!="download"&&n!="rowSpan"&&n!="colSpan"&&n!="role"&&n!="popover"&&n in e)try{e[n]=r??"";break e}catch{}typeof r=="function"||(r==null||r===!1&&n[4]!="-"?e.removeAttribute(n):e.setAttribute(n,n=="popover"&&r==1?"":r))}}function gg(e){return function(n){if(this.l){var r=this.l[n.type+e];if(n.t==null)n.t=Fh++;else if(n.t<r.u)return;return r(Te.event?Te.event(n):n)}}}function Uh(e,n,r,i,s,a,u,c,h,p){var v,m,_,y,k,S,E,w,b,N,C,P,T,M,z,D,F,V=n.type;if(n.constructor!=null)return null;128&r.__u&&(h=!!(32&r.__u),a=[c=n.__e=r.__e]),(v=Te.__b)&&v(n);e:if(typeof V=="function")try{if(w=n.props,b="prototype"in V&&V.prototype.render,N=(v=V.contextType)&&i[v.__c],C=v?N?N.props.value:v.__:i,r.__c?E=(m=n.__c=r.__c).__=m.__E:(b?n.__c=m=new V(w,C):(n.__c=m=new Ma(w,C),m.constructor=V,m.render=MP),N&&N.sub(m),m.state||(m.state={}),m.__n=i,_=m.__d=!0,m.__h=[],m._sb=[]),b&&m.__s==null&&(m.__s=m.state),b&&V.getDerivedStateFromProps!=null&&(m.__s==m.state&&(m.__s=fn({},m.__s)),fn(m.__s,V.getDerivedStateFromProps(w,m.__s))),y=m.props,k=m.state,m.__v=n,_)b&&V.getDerivedStateFromProps==null&&m.componentWillMount!=null&&m.componentWillMount(),b&&m.componentDidMount!=null&&m.__h.push(m.componentDidMount);else{if(b&&V.getDerivedStateFromProps==null&&w!==y&&m.componentWillReceiveProps!=null&&m.componentWillReceiveProps(w,C),n.__v==r.__v||!m.__e&&m.shouldComponentUpdate!=null&&m.shouldComponentUpdate(w,m.__s,C)===!1){for(n.__v!=r.__v&&(m.props=w,m.state=m.__s,m.__d=!1),n.__e=r.__e,n.__k=r.__k,n.__k.some(function(H){H&&(H.__=n)}),P=0;P<m._sb.length;P++)m.__h.push(m._sb[P]);m._sb=[],m.__h.length&&u.push(m);break e}m.componentWillUpdate!=null&&m.componentWillUpdate(w,m.__s,C),b&&m.componentDidUpdate!=null&&m.__h.push(function(){m.componentDidUpdate(y,k,S)})}if(m.context=C,m.props=w,m.__P=e,m.__e=!1,T=Te.__r,M=0,b){for(m.state=m.__s,m.__d=!1,T&&T(n),v=m.render(m.props,m.state,m.context),z=0;z<m._sb.length;z++)m.__h.push(m._sb[z]);m._sb=[]}else do m.__d=!1,T&&T(n),v=m.render(m.props,m.state,m.context),m.state=m.__s;while(m.__d&&++M<25);m.state=m.__s,m.getChildContext!=null&&(i=fn(fn({},i),m.getChildContext())),b&&!_&&m.getSnapshotBeforeUpdate!=null&&(S=m.getSnapshotBeforeUpdate(y,k)),D=v,v!=null&&v.type===Dl&&v.key==null&&(D=ny(v.props.children)),c=J_(e,Il(D)?D:[D],n,r,i,s,a,u,c,h,p),m.base=n.__e,n.__u&=-161,m.__h.length&&u.push(m),E&&(m.__E=m.__=null)}catch(H){if(n.__v=null,h||a!=null)if(H.then){for(n.__u|=h?160:128;c&&c.nodeType==8&&c.nextSibling;)c=c.nextSibling;a[a.indexOf(c)]=null,n.__e=c}else{for(F=a.length;F--;)Bh(a[F]);kf(n)}else n.__e=r.__e,n.__k=r.__k,H.then||kf(n);Te.__e(H,n,r)}else a==null&&n.__v==r.__v?(n.__k=r.__k,n.__e=r.__e):c=n.__e=LP(r.__e,n,r,i,s,a,u,h,p);return(v=Te.diffed)&&v(n),128&n.__u?void 0:c}function kf(e){e&&e.__c&&(e.__c.__e=!0),e&&e.__k&&e.__k.forEach(kf)}function ty(e,n,r){for(var i=0;i<r.length;i++)$h(r[i],r[++i],r[++i]);Te.__c&&Te.__c(n,e),e.some(function(s){try{e=s.__h,s.__h=[],e.some(function(a){a.call(s)})}catch(a){Te.__e(a,s.__v)}})}function ny(e){return typeof e!="object"||e==null||e.__b&&e.__b>0?e:Il(e)?e.map(ny):fn({},e)}function LP(e,n,r,i,s,a,u,c,h){var p,v,m,_,y,k,S,E=r.props||cs,w=n.props,b=n.type;if(b=="svg"?s="http://www.w3.org/2000/svg":b=="math"?s="http://www.w3.org/1998/Math/MathML":s||(s="http://www.w3.org/1999/xhtml"),a!=null){for(p=0;p<a.length;p++)if((y=a[p])&&"setAttribute"in y==!!b&&(b?y.localName==b:y.nodeType==3)){e=y,a[p]=null;break}}if(e==null){if(b==null)return document.createTextNode(w);e=document.createElementNS(s,b,w.is&&w),c&&(Te.__m&&Te.__m(n,a),c=!1),a=null}if(b==null)E===w||c&&e.data==w||(e.data=w);else{if(a=a&&bs.call(e.childNodes),!c&&a!=null)for(E={},p=0;p<e.attributes.length;p++)E[(y=e.attributes[p]).name]=y.value;for(p in E)if(y=E[p],p!="children"){if(p=="dangerouslySetInnerHTML")m=y;else if(!(p in w)){if(p=="value"&&"defaultValue"in w||p=="checked"&&"defaultChecked"in w)continue;ha(e,p,null,y,s)}}for(p in w)y=w[p],p=="children"?_=y:p=="dangerouslySetInnerHTML"?v=y:p=="value"?k=y:p=="checked"?S=y:c&&typeof y!="function"||E[p]===y||ha(e,p,y,E[p],s);if(v)c||m&&(v.__html==m.__html||v.__html==e.innerHTML)||(e.innerHTML=v.__html),n.__k=[];else if(m&&(e.innerHTML=""),J_(n.type=="template"?e.content:e,Il(_)?_:[_],n,r,i,b=="foreignObject"?"http://www.w3.org/1999/xhtml":s,a,u,a?a[0]:r.__k&&Ai(r,0),c,h),a!=null)for(p=a.length;p--;)Bh(a[p]);c||(p="value",b=="progress"&&k==null?e.removeAttribute("value"):k!=null&&(k!==e[p]||b=="progress"&&!k||b=="option"&&k!=E[p])&&ha(e,p,k,E[p],s),p="checked",S!=null&&S!=e[p]&&ha(e,p,S,E[p],s))}return e}function $h(e,n,r){try{if(typeof e=="function"){var i=typeof e.__u=="function";i&&e.__u(),i&&n==null||(e.__u=e(n))}else e.current=n}catch(s){Te.__e(s,r)}}function ry(e,n,r){var i,s;if(Te.unmount&&Te.unmount(e),(i=e.ref)&&(i.current&&i.current!=e.__e||$h(i,null,n)),(i=e.__c)!=null){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(a){Te.__e(a,n)}i.base=i.__P=null}if(i=e.__k)for(s=0;s<i.length;s++)i[s]&&ry(i[s],n,r||typeof e.type!="function");r||Bh(e.__e),e.__c=e.__=e.__e=void 0}function MP(e,n,r){return this.constructor(e,r)}function zP(e,n,r){var i,s,a,u;n==document&&(n=document.documentElement),Te.__&&Te.__(e,n),s=(i=!1)?null:n.__k,a=[],u=[],Uh(n,e=n.__k=PP(Dl,null,[e]),s||cs,cs,n.namespaceURI,s?null:n.firstChild?bs.call(n.childNodes):null,a,s?s.__e:n.firstChild,i,u),ty(a,e,u)}function iy(e,n,r){var i,s,a,u,c=fn({},e.props);for(a in e.type&&e.type.defaultProps&&(u=e.type.defaultProps),n)a=="key"?i=n[a]:a=="ref"?s=n[a]:c[a]=n[a]===void 0&&u!=null?u[a]:n[a];return arguments.length>2&&(c.children=arguments.length>3?bs.call(arguments,2):r),Io(e.type,c,i||e.key,s||e.ref,null)}bs=X_.slice,Te={__e:function(e,n,r,i){for(var s,a,u;n=n.__;)if((s=n.__c)&&!s.__)try{if((a=s.constructor)&&a.getDerivedStateFromError!=null&&(s.setState(a.getDerivedStateFromError(e)),u=s.__d),s.componentDidCatch!=null&&(s.componentDidCatch(e,i||{}),u=s.__d),u)return s.__E=s}catch(c){e=c}throw e}},V_=0,q_=function(e){return e!=null&&e.constructor==null},Ma.prototype.setState=function(e,n){var r;r=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=fn({},this.state),typeof e=="function"&&(e=e(fn({},r),this.props)),e&&fn(r,e),e!=null&&this.__v&&(n&&this._sb.push(n),pg(this))},Ma.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),pg(this))},Ma.prototype.render=Dl,Cr=[],G_=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,K_=function(e,n){return e.__v.__b-n.__v.__b},dl.__r=0,Y_=/(PointerCapture)$|Capture$/i,Fh=0,wf=gg(!1),bf=gg(!0);function vg(e,n){(n==null||n>e.length)&&(n=e.length);for(var r=0,i=Array(n);r<n;r++)i[r]=e[r];return i}function OP(e){if(Array.isArray(e))return e}function AP(e,n,r){return(n=UP(n))in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function RP(e,n){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var i,s,a,u,c=[],h=!0,p=!1;try{if(a=(r=r.call(e)).next,n!==0)for(;!(h=(i=a.call(r)).done)&&(c.push(i.value),c.length!==n);h=!0);}catch(v){p=!0,s=v}finally{try{if(!h&&r.return!=null&&(u=r.return(),Object(u)!==u))return}finally{if(p)throw s}}return c}}function IP(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _g(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,i)}return r}function DP(e){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?_g(Object(r),!0).forEach(function(i){AP(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_g(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}function FP(e,n){return OP(e)||RP(e,n)||$P(e,n)||IP()}function BP(e,n){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,n);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(e)}function UP(e){var n=BP(e,"string");return typeof n=="symbol"?n:n+""}function pl(e){"@babel/helpers - typeof";return pl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},pl(e)}function $P(e,n){if(e){if(typeof e=="string")return vg(e,n);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?vg(e,n):void 0}}var Nf=function(n){if(pl(n)!=="object")return n;var r=iy(n);if(r.props){var i;r.props=DP({},r.props),r!=null&&(i=r.props)!==null&&i!==void 0&&i.children&&(r.props.children=Array.isArray(r.props.children)?r.props.children.map(Nf):Nf(r.props.children))}return r},HP=function(n){return q_(iy(n))},ZP=function(n,r){delete r.__k,zP(Nf(n),r)};function WP(e,n){n===void 0&&(n={});var r=n.insertAt;if(!(typeof document>"u")){var i=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css",r==="top"&&i.firstChild?i.insertBefore(s,i.firstChild):i.appendChild(s),s.styleSheet?s.styleSheet.cssText=e:s.appendChild(document.createTextNode(e))}}var VP=`.float-tooltip-kap {
  position: absolute;
  width: max-content; /* prevent shrinking near right edge */
  max-width: max(50%, 150px);
  padding: 3px 5px;
  border-radius: 3px;
  font: 12px sans-serif;
  color: #eee;
  background: rgba(0,0,0,0.6);
  pointer-events: none;
}
`;WP(VP);var qP=Dh({props:{content:{default:!1},offsetX:{triggerUpdate:!1},offsetY:{triggerUpdate:!1}},init:function(n,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=i.style,a=s===void 0?{}:s,u=!!n&&pl(n)==="object"&&!!n.node&&typeof n.node=="function",c=Rt(u?n.node():n);c.style("position")==="static"&&c.style("position","relative"),r.tooltipEl=c.append("div").attr("class","float-tooltip-kap"),Object.entries(a).forEach(function(p){var v=FP(p,2),m=v[0],_=v[1];return r.tooltipEl.style(m,_)}),r.tooltipEl.style("left","-10000px").style("display","none");var h="tooltip-".concat(Math.round(Math.random()*1e12));r.mouseInside=!1,c.on("mousemove.".concat(h),function(p){r.mouseInside=!0;var v=un(p),m=c.node(),_=m.offsetWidth,y=m.offsetHeight,k=[r.offsetX===null||r.offsetX===void 0?"-".concat(v[0]/_*100,"%"):typeof r.offsetX=="number"?"calc(-50% + ".concat(r.offsetX,"px)"):r.offsetX,r.offsetY===null||r.offsetY===void 0?y>130&&y-v[1]<100?"calc(-100% - 6px)":"21px":typeof r.offsetY=="number"?r.offsetY<0?"calc(-100% - ".concat(Math.abs(r.offsetY),"px)"):"".concat(r.offsetY,"px"):r.offsetY];r.tooltipEl.style("left",v[0]+"px").style("top",v[1]+"px").style("transform","translate(".concat(k.join(","),")")),r.content&&r.tooltipEl.style("display","inline")}),c.on("mouseover.".concat(h),function(){r.mouseInside=!0,r.content&&r.tooltipEl.style("display","inline")}),c.on("mouseout.".concat(h),function(){r.mouseInside=!1,r.tooltipEl.style("display","none")})},update:function(n){n.tooltipEl.style("display",n.content&&n.mouseInside?"inline":"none"),n.content?n.content instanceof HTMLElement?(n.tooltipEl.text(""),n.tooltipEl.append(function(){return n.content})):typeof n.content=="string"?n.tooltipEl.html(n.content):HP(n.content)?(n.tooltipEl.text(""),ZP(n.content,n.tooltipEl.node())):(n.tooltipEl.style("display","none"),console.warn("Tooltip content is invalid, skipping.",n.content,n.content.toString())):n.tooltipEl.text("")}});function GP(e,n,r){var i,s=1;e==null&&(e=0),n==null&&(n=0),r==null&&(r=0);function a(){var u,c=i.length,h,p=0,v=0,m=0;for(u=0;u<c;++u)h=i[u],p+=h.x||0,v+=h.y||0,m+=h.z||0;for(p=(p/c-e)*s,v=(v/c-n)*s,m=(m/c-r)*s,u=0;u<c;++u)h=i[u],p&&(h.x-=p),v&&(h.y-=v),m&&(h.z-=m)}return a.initialize=function(u){i=u},a.x=function(u){return arguments.length?(e=+u,a):e},a.y=function(u){return arguments.length?(n=+u,a):n},a.z=function(u){return arguments.length?(r=+u,a):r},a.strength=function(u){return arguments.length?(s=+u,a):s},a}function KP(e){const n=+this._x.call(null,e);return oy(this.cover(n),n,e)}function oy(e,n,r){if(isNaN(n))return e;var i,s=e._root,a={data:r},u=e._x0,c=e._x1,h,p,v,m,_;if(!s)return e._root=a,e;for(;s.length;)if((v=n>=(h=(u+c)/2))?u=h:c=h,i=s,!(s=s[m=+v]))return i[m]=a,e;if(p=+e._x.call(null,s.data),n===p)return a.next=s,i?i[m]=a:e._root=a,e;do i=i?i[m]=new Array(2):e._root=new Array(2),(v=n>=(h=(u+c)/2))?u=h:c=h;while((m=+v)==(_=+(p>=h)));return i[_]=s,i[m]=a,e}function YP(e){Array.isArray(e)||(e=Array.from(e));const n=e.length,r=new Float64Array(n);let i=1/0,s=-1/0;for(let a=0,u;a<n;++a)isNaN(u=+this._x.call(null,e[a]))||(r[a]=u,u<i&&(i=u),u>s&&(s=u));if(i>s)return this;this.cover(i).cover(s);for(let a=0;a<n;++a)oy(this,r[a],e[a]);return this}function XP(e){if(isNaN(e=+e))return this;var n=this._x0,r=this._x1;if(isNaN(n))r=(n=Math.floor(e))+1;else{for(var i=r-n||1,s=this._root,a,u;n>e||e>=r;)switch(u=+(e<n),a=new Array(2),a[u]=s,s=a,i*=2,u){case 0:r=n+i;break;case 1:n=r-i;break}this._root&&this._root.length&&(this._root=s)}return this._x0=n,this._x1=r,this}function QP(){var e=[];return this.visit(function(n){if(!n.length)do e.push(n.data);while(n=n.next)}),e}function JP(e){return arguments.length?this.cover(+e[0][0]).cover(+e[1][0]):isNaN(this._x0)?void 0:[[this._x0],[this._x1]]}function On(e,n,r){this.node=e,this.x0=n,this.x1=r}function e3(e,n){var r,i=this._x0,s,a,u=this._x1,c=[],h=this._root,p,v;for(h&&c.push(new On(h,i,u)),n==null?n=1/0:(i=e-n,u=e+n);p=c.pop();)if(!(!(h=p.node)||(s=p.x0)>u||(a=p.x1)<i))if(h.length){var m=(s+a)/2;c.push(new On(h[1],m,a),new On(h[0],s,m)),(v=+(e>=m))&&(p=c[c.length-1],c[c.length-1]=c[c.length-1-v],c[c.length-1-v]=p)}else{var _=Math.abs(e-+this._x.call(null,h.data));_<n&&(n=_,i=e-_,u=e+_,r=h.data)}return r}function t3(e){if(isNaN(h=+this._x.call(null,e)))return this;var n,r=this._root,i,s,a,u=this._x0,c=this._x1,h,p,v,m,_;if(!r)return this;if(r.length)for(;;){if((v=h>=(p=(u+c)/2))?u=p:c=p,n=r,!(r=r[m=+v]))return this;if(!r.length)break;n[m+1&1]&&(i=n,_=m)}for(;r.data!==e;)if(s=r,!(r=r.next))return this;return(a=r.next)&&delete r.next,s?(a?s.next=a:delete s.next,this):n?(a?n[m]=a:delete n[m],(r=n[0]||n[1])&&r===(n[1]||n[0])&&!r.length&&(i?i[_]=r:this._root=r),this):(this._root=a,this)}function n3(e){for(var n=0,r=e.length;n<r;++n)this.remove(e[n]);return this}function r3(){return this._root}function i3(){var e=0;return this.visit(function(n){if(!n.length)do++e;while(n=n.next)}),e}function o3(e){var n=[],r,i=this._root,s,a,u;for(i&&n.push(new On(i,this._x0,this._x1));r=n.pop();)if(!e(i=r.node,a=r.x0,u=r.x1)&&i.length){var c=(a+u)/2;(s=i[1])&&n.push(new On(s,c,u)),(s=i[0])&&n.push(new On(s,a,c))}return this}function s3(e){var n=[],r=[],i;for(this._root&&n.push(new On(this._root,this._x0,this._x1));i=n.pop();){var s=i.node;if(s.length){var a,u=i.x0,c=i.x1,h=(u+c)/2;(a=s[0])&&n.push(new On(a,u,h)),(a=s[1])&&n.push(new On(a,h,c))}r.push(i)}for(;i=r.pop();)e(i.node,i.x0,i.x1);return this}function a3(e){return e[0]}function l3(e){return arguments.length?(this._x=e,this):this._x}function sy(e,n){var r=new Hh(n??a3,NaN,NaN);return e==null?r:r.addAll(e)}function Hh(e,n,r){this._x=e,this._x0=n,this._x1=r,this._root=void 0}function yg(e){for(var n={data:e.data},r=n;e=e.next;)r=r.next={data:e.data};return n}var xt=sy.prototype=Hh.prototype;xt.copy=function(){var e=new Hh(this._x,this._x0,this._x1),n=this._root,r,i;if(!n)return e;if(!n.length)return e._root=yg(n),e;for(r=[{source:n,target:e._root=new Array(2)}];n=r.pop();)for(var s=0;s<2;++s)(i=n.source[s])&&(i.length?r.push({source:i,target:n.target[s]=new Array(2)}):n.target[s]=yg(i));return e};xt.add=KP;xt.addAll=YP;xt.cover=XP;xt.data=QP;xt.extent=JP;xt.find=e3;xt.remove=t3;xt.removeAll=n3;xt.root=r3;xt.size=i3;xt.visit=o3;xt.visitAfter=s3;xt.x=l3;function u3(e){const n=+this._x.call(null,e),r=+this._y.call(null,e);return ay(this.cover(n,r),n,r,e)}function ay(e,n,r,i){if(isNaN(n)||isNaN(r))return e;var s,a=e._root,u={data:i},c=e._x0,h=e._y0,p=e._x1,v=e._y1,m,_,y,k,S,E,w,b;if(!a)return e._root=u,e;for(;a.length;)if((S=n>=(m=(c+p)/2))?c=m:p=m,(E=r>=(_=(h+v)/2))?h=_:v=_,s=a,!(a=a[w=E<<1|S]))return s[w]=u,e;if(y=+e._x.call(null,a.data),k=+e._y.call(null,a.data),n===y&&r===k)return u.next=a,s?s[w]=u:e._root=u,e;do s=s?s[w]=new Array(4):e._root=new Array(4),(S=n>=(m=(c+p)/2))?c=m:p=m,(E=r>=(_=(h+v)/2))?h=_:v=_;while((w=E<<1|S)===(b=(k>=_)<<1|y>=m));return s[b]=a,s[w]=u,e}function c3(e){var n,r,i=e.length,s,a,u=new Array(i),c=new Array(i),h=1/0,p=1/0,v=-1/0,m=-1/0;for(r=0;r<i;++r)isNaN(s=+this._x.call(null,n=e[r]))||isNaN(a=+this._y.call(null,n))||(u[r]=s,c[r]=a,s<h&&(h=s),s>v&&(v=s),a<p&&(p=a),a>m&&(m=a));if(h>v||p>m)return this;for(this.cover(h,p).cover(v,m),r=0;r<i;++r)ay(this,u[r],c[r],e[r]);return this}function f3(e,n){if(isNaN(e=+e)||isNaN(n=+n))return this;var r=this._x0,i=this._y0,s=this._x1,a=this._y1;if(isNaN(r))s=(r=Math.floor(e))+1,a=(i=Math.floor(n))+1;else{for(var u=s-r||1,c=this._root,h,p;r>e||e>=s||i>n||n>=a;)switch(p=(n<i)<<1|e<r,h=new Array(4),h[p]=c,c=h,u*=2,p){case 0:s=r+u,a=i+u;break;case 1:r=s-u,a=i+u;break;case 2:s=r+u,i=a-u;break;case 3:r=s-u,i=a-u;break}this._root&&this._root.length&&(this._root=c)}return this._x0=r,this._y0=i,this._x1=s,this._y1=a,this}function h3(){var e=[];return this.visit(function(n){if(!n.length)do e.push(n.data);while(n=n.next)}),e}function d3(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function lt(e,n,r,i,s){this.node=e,this.x0=n,this.y0=r,this.x1=i,this.y1=s}function p3(e,n,r){var i,s=this._x0,a=this._y0,u,c,h,p,v=this._x1,m=this._y1,_=[],y=this._root,k,S;for(y&&_.push(new lt(y,s,a,v,m)),r==null?r=1/0:(s=e-r,a=n-r,v=e+r,m=n+r,r*=r);k=_.pop();)if(!(!(y=k.node)||(u=k.x0)>v||(c=k.y0)>m||(h=k.x1)<s||(p=k.y1)<a))if(y.length){var E=(u+h)/2,w=(c+p)/2;_.push(new lt(y[3],E,w,h,p),new lt(y[2],u,w,E,p),new lt(y[1],E,c,h,w),new lt(y[0],u,c,E,w)),(S=(n>=w)<<1|e>=E)&&(k=_[_.length-1],_[_.length-1]=_[_.length-1-S],_[_.length-1-S]=k)}else{var b=e-+this._x.call(null,y.data),N=n-+this._y.call(null,y.data),C=b*b+N*N;if(C<r){var P=Math.sqrt(r=C);s=e-P,a=n-P,v=e+P,m=n+P,i=y.data}}return i}function m3(e){if(isNaN(v=+this._x.call(null,e))||isNaN(m=+this._y.call(null,e)))return this;var n,r=this._root,i,s,a,u=this._x0,c=this._y0,h=this._x1,p=this._y1,v,m,_,y,k,S,E,w;if(!r)return this;if(r.length)for(;;){if((k=v>=(_=(u+h)/2))?u=_:h=_,(S=m>=(y=(c+p)/2))?c=y:p=y,n=r,!(r=r[E=S<<1|k]))return this;if(!r.length)break;(n[E+1&3]||n[E+2&3]||n[E+3&3])&&(i=n,w=E)}for(;r.data!==e;)if(s=r,!(r=r.next))return this;return(a=r.next)&&delete r.next,s?(a?s.next=a:delete s.next,this):n?(a?n[E]=a:delete n[E],(r=n[0]||n[1]||n[2]||n[3])&&r===(n[3]||n[2]||n[1]||n[0])&&!r.length&&(i?i[w]=r:this._root=r),this):(this._root=a,this)}function g3(e){for(var n=0,r=e.length;n<r;++n)this.remove(e[n]);return this}function v3(){return this._root}function _3(){var e=0;return this.visit(function(n){if(!n.length)do++e;while(n=n.next)}),e}function y3(e){var n=[],r,i=this._root,s,a,u,c,h;for(i&&n.push(new lt(i,this._x0,this._y0,this._x1,this._y1));r=n.pop();)if(!e(i=r.node,a=r.x0,u=r.y0,c=r.x1,h=r.y1)&&i.length){var p=(a+c)/2,v=(u+h)/2;(s=i[3])&&n.push(new lt(s,p,v,c,h)),(s=i[2])&&n.push(new lt(s,a,v,p,h)),(s=i[1])&&n.push(new lt(s,p,u,c,v)),(s=i[0])&&n.push(new lt(s,a,u,p,v))}return this}function x3(e){var n=[],r=[],i;for(this._root&&n.push(new lt(this._root,this._x0,this._y0,this._x1,this._y1));i=n.pop();){var s=i.node;if(s.length){var a,u=i.x0,c=i.y0,h=i.x1,p=i.y1,v=(u+h)/2,m=(c+p)/2;(a=s[0])&&n.push(new lt(a,u,c,v,m)),(a=s[1])&&n.push(new lt(a,v,c,h,m)),(a=s[2])&&n.push(new lt(a,u,m,v,p)),(a=s[3])&&n.push(new lt(a,v,m,h,p))}r.push(i)}for(;i=r.pop();)e(i.node,i.x0,i.y0,i.x1,i.y1);return this}function w3(e){return e[0]}function b3(e){return arguments.length?(this._x=e,this):this._x}function k3(e){return e[1]}function N3(e){return arguments.length?(this._y=e,this):this._y}function ly(e,n,r){var i=new Zh(n??w3,r??k3,NaN,NaN,NaN,NaN);return e==null?i:i.addAll(e)}function Zh(e,n,r,i,s,a){this._x=e,this._y=n,this._x0=r,this._y0=i,this._x1=s,this._y1=a,this._root=void 0}function xg(e){for(var n={data:e.data},r=n;e=e.next;)r=r.next={data:e.data};return n}var ht=ly.prototype=Zh.prototype;ht.copy=function(){var e=new Zh(this._x,this._y,this._x0,this._y0,this._x1,this._y1),n=this._root,r,i;if(!n)return e;if(!n.length)return e._root=xg(n),e;for(r=[{source:n,target:e._root=new Array(4)}];n=r.pop();)for(var s=0;s<4;++s)(i=n.source[s])&&(i.length?r.push({source:i,target:n.target[s]=new Array(4)}):n.target[s]=xg(i));return e};ht.add=u3;ht.addAll=c3;ht.cover=f3;ht.data=h3;ht.extent=d3;ht.find=p3;ht.remove=m3;ht.removeAll=g3;ht.root=v3;ht.size=_3;ht.visit=y3;ht.visitAfter=x3;ht.x=b3;ht.y=N3;function S3(e){const n=+this._x.call(null,e),r=+this._y.call(null,e),i=+this._z.call(null,e);return uy(this.cover(n,r,i),n,r,i,e)}function uy(e,n,r,i,s){if(isNaN(n)||isNaN(r)||isNaN(i))return e;var a,u=e._root,c={data:s},h=e._x0,p=e._y0,v=e._z0,m=e._x1,_=e._y1,y=e._z1,k,S,E,w,b,N,C,P,T,M,z;if(!u)return e._root=c,e;for(;u.length;)if((C=n>=(k=(h+m)/2))?h=k:m=k,(P=r>=(S=(p+_)/2))?p=S:_=S,(T=i>=(E=(v+y)/2))?v=E:y=E,a=u,!(u=u[M=T<<2|P<<1|C]))return a[M]=c,e;if(w=+e._x.call(null,u.data),b=+e._y.call(null,u.data),N=+e._z.call(null,u.data),n===w&&r===b&&i===N)return c.next=u,a?a[M]=c:e._root=c,e;do a=a?a[M]=new Array(8):e._root=new Array(8),(C=n>=(k=(h+m)/2))?h=k:m=k,(P=r>=(S=(p+_)/2))?p=S:_=S,(T=i>=(E=(v+y)/2))?v=E:y=E;while((M=T<<2|P<<1|C)===(z=(N>=E)<<2|(b>=S)<<1|w>=k));return a[z]=u,a[M]=c,e}function j3(e){Array.isArray(e)||(e=Array.from(e));const n=e.length,r=new Float64Array(n),i=new Float64Array(n),s=new Float64Array(n);let a=1/0,u=1/0,c=1/0,h=-1/0,p=-1/0,v=-1/0;for(let m=0,_,y,k,S;m<n;++m)isNaN(y=+this._x.call(null,_=e[m]))||isNaN(k=+this._y.call(null,_))||isNaN(S=+this._z.call(null,_))||(r[m]=y,i[m]=k,s[m]=S,y<a&&(a=y),y>h&&(h=y),k<u&&(u=k),k>p&&(p=k),S<c&&(c=S),S>v&&(v=S));if(a>h||u>p||c>v)return this;this.cover(a,u,c).cover(h,p,v);for(let m=0;m<n;++m)uy(this,r[m],i[m],s[m],e[m]);return this}function C3(e,n,r){if(isNaN(e=+e)||isNaN(n=+n)||isNaN(r=+r))return this;var i=this._x0,s=this._y0,a=this._z0,u=this._x1,c=this._y1,h=this._z1;if(isNaN(i))u=(i=Math.floor(e))+1,c=(s=Math.floor(n))+1,h=(a=Math.floor(r))+1;else{for(var p=u-i||1,v=this._root,m,_;i>e||e>=u||s>n||n>=c||a>r||r>=h;)switch(_=(r<a)<<2|(n<s)<<1|e<i,m=new Array(8),m[_]=v,v=m,p*=2,_){case 0:u=i+p,c=s+p,h=a+p;break;case 1:i=u-p,c=s+p,h=a+p;break;case 2:u=i+p,s=c-p,h=a+p;break;case 3:i=u-p,s=c-p,h=a+p;break;case 4:u=i+p,c=s+p,a=h-p;break;case 5:i=u-p,c=s+p,a=h-p;break;case 6:u=i+p,s=c-p,a=h-p;break;case 7:i=u-p,s=c-p,a=h-p;break}this._root&&this._root.length&&(this._root=v)}return this._x0=i,this._y0=s,this._z0=a,this._x1=u,this._y1=c,this._z1=h,this}function P3(){var e=[];return this.visit(function(n){if(!n.length)do e.push(n.data);while(n=n.next)}),e}function E3(e){return arguments.length?this.cover(+e[0][0],+e[0][1],+e[0][2]).cover(+e[1][0],+e[1][1],+e[1][2]):isNaN(this._x0)?void 0:[[this._x0,this._y0,this._z0],[this._x1,this._y1,this._z1]]}function be(e,n,r,i,s,a,u){this.node=e,this.x0=n,this.y0=r,this.z0=i,this.x1=s,this.y1=a,this.z1=u}function T3(e,n,r,i){var s,a=this._x0,u=this._y0,c=this._z0,h,p,v,m,_,y,k=this._x1,S=this._y1,E=this._z1,w=[],b=this._root,N,C;for(b&&w.push(new be(b,a,u,c,k,S,E)),i==null?i=1/0:(a=e-i,u=n-i,c=r-i,k=e+i,S=n+i,E=r+i,i*=i);N=w.pop();)if(!(!(b=N.node)||(h=N.x0)>k||(p=N.y0)>S||(v=N.z0)>E||(m=N.x1)<a||(_=N.y1)<u||(y=N.z1)<c))if(b.length){var P=(h+m)/2,T=(p+_)/2,M=(v+y)/2;w.push(new be(b[7],P,T,M,m,_,y),new be(b[6],h,T,M,P,_,y),new be(b[5],P,p,M,m,T,y),new be(b[4],h,p,M,P,T,y),new be(b[3],P,T,v,m,_,M),new be(b[2],h,T,v,P,_,M),new be(b[1],P,p,v,m,T,M),new be(b[0],h,p,v,P,T,M)),(C=(r>=M)<<2|(n>=T)<<1|e>=P)&&(N=w[w.length-1],w[w.length-1]=w[w.length-1-C],w[w.length-1-C]=N)}else{var z=e-+this._x.call(null,b.data),D=n-+this._y.call(null,b.data),F=r-+this._z.call(null,b.data),V=z*z+D*D+F*F;if(V<i){var H=Math.sqrt(i=V);a=e-H,u=n-H,c=r-H,k=e+H,S=n+H,E=r+H,s=b.data}}return s}const L3=(e,n,r,i,s,a)=>Math.sqrt((e-i)**2+(n-s)**2+(r-a)**2);function M3(e,n,r,i){const s=[],a=e-i,u=n-i,c=r-i,h=e+i,p=n+i,v=r+i;return this.visit((m,_,y,k,S,E,w)=>{if(!m.length)do{const b=m.data;L3(e,n,r,this._x(b),this._y(b),this._z(b))<=i&&s.push(b)}while(m=m.next);return _>h||y>p||k>v||S<a||E<u||w<c}),s}function z3(e){if(isNaN(_=+this._x.call(null,e))||isNaN(y=+this._y.call(null,e))||isNaN(k=+this._z.call(null,e)))return this;var n,r=this._root,i,s,a,u=this._x0,c=this._y0,h=this._z0,p=this._x1,v=this._y1,m=this._z1,_,y,k,S,E,w,b,N,C,P,T;if(!r)return this;if(r.length)for(;;){if((b=_>=(S=(u+p)/2))?u=S:p=S,(N=y>=(E=(c+v)/2))?c=E:v=E,(C=k>=(w=(h+m)/2))?h=w:m=w,n=r,!(r=r[P=C<<2|N<<1|b]))return this;if(!r.length)break;(n[P+1&7]||n[P+2&7]||n[P+3&7]||n[P+4&7]||n[P+5&7]||n[P+6&7]||n[P+7&7])&&(i=n,T=P)}for(;r.data!==e;)if(s=r,!(r=r.next))return this;return(a=r.next)&&delete r.next,s?(a?s.next=a:delete s.next,this):n?(a?n[P]=a:delete n[P],(r=n[0]||n[1]||n[2]||n[3]||n[4]||n[5]||n[6]||n[7])&&r===(n[7]||n[6]||n[5]||n[4]||n[3]||n[2]||n[1]||n[0])&&!r.length&&(i?i[T]=r:this._root=r),this):(this._root=a,this)}function O3(e){for(var n=0,r=e.length;n<r;++n)this.remove(e[n]);return this}function A3(){return this._root}function R3(){var e=0;return this.visit(function(n){if(!n.length)do++e;while(n=n.next)}),e}function I3(e){var n=[],r,i=this._root,s,a,u,c,h,p,v;for(i&&n.push(new be(i,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));r=n.pop();)if(!e(i=r.node,a=r.x0,u=r.y0,c=r.z0,h=r.x1,p=r.y1,v=r.z1)&&i.length){var m=(a+h)/2,_=(u+p)/2,y=(c+v)/2;(s=i[7])&&n.push(new be(s,m,_,y,h,p,v)),(s=i[6])&&n.push(new be(s,a,_,y,m,p,v)),(s=i[5])&&n.push(new be(s,m,u,y,h,_,v)),(s=i[4])&&n.push(new be(s,a,u,y,m,_,v)),(s=i[3])&&n.push(new be(s,m,_,c,h,p,y)),(s=i[2])&&n.push(new be(s,a,_,c,m,p,y)),(s=i[1])&&n.push(new be(s,m,u,c,h,_,y)),(s=i[0])&&n.push(new be(s,a,u,c,m,_,y))}return this}function D3(e){var n=[],r=[],i;for(this._root&&n.push(new be(this._root,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));i=n.pop();){var s=i.node;if(s.length){var a,u=i.x0,c=i.y0,h=i.z0,p=i.x1,v=i.y1,m=i.z1,_=(u+p)/2,y=(c+v)/2,k=(h+m)/2;(a=s[0])&&n.push(new be(a,u,c,h,_,y,k)),(a=s[1])&&n.push(new be(a,_,c,h,p,y,k)),(a=s[2])&&n.push(new be(a,u,y,h,_,v,k)),(a=s[3])&&n.push(new be(a,_,y,h,p,v,k)),(a=s[4])&&n.push(new be(a,u,c,k,_,y,m)),(a=s[5])&&n.push(new be(a,_,c,k,p,y,m)),(a=s[6])&&n.push(new be(a,u,y,k,_,v,m)),(a=s[7])&&n.push(new be(a,_,y,k,p,v,m))}r.push(i)}for(;i=r.pop();)e(i.node,i.x0,i.y0,i.z0,i.x1,i.y1,i.z1);return this}function F3(e){return e[0]}function B3(e){return arguments.length?(this._x=e,this):this._x}function U3(e){return e[1]}function $3(e){return arguments.length?(this._y=e,this):this._y}function H3(e){return e[2]}function Z3(e){return arguments.length?(this._z=e,this):this._z}function cy(e,n,r,i){var s=new Wh(n??F3,r??U3,i??H3,NaN,NaN,NaN,NaN,NaN,NaN);return e==null?s:s.addAll(e)}function Wh(e,n,r,i,s,a,u,c,h){this._x=e,this._y=n,this._z=r,this._x0=i,this._y0=s,this._z0=a,this._x1=u,this._y1=c,this._z1=h,this._root=void 0}function wg(e){for(var n={data:e.data},r=n;e=e.next;)r=r.next={data:e.data};return n}var et=cy.prototype=Wh.prototype;et.copy=function(){var e=new Wh(this._x,this._y,this._z,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1),n=this._root,r,i;if(!n)return e;if(!n.length)return e._root=wg(n),e;for(r=[{source:n,target:e._root=new Array(8)}];n=r.pop();)for(var s=0;s<8;++s)(i=n.source[s])&&(i.length?r.push({source:i,target:n.target[s]=new Array(8)}):n.target[s]=wg(i));return e};et.add=S3;et.addAll=j3;et.cover=C3;et.data=P3;et.extent=E3;et.find=T3;et.findAllWithinRadius=M3;et.remove=z3;et.removeAll=O3;et.root=A3;et.size=R3;et.visit=I3;et.visitAfter=D3;et.x=B3;et.y=$3;et.z=Z3;function Mn(e){return function(){return e}}function Pn(e){return(e()-.5)*1e-6}function W3(e){return e.index}function bg(e,n){var r=e.get(n);if(!r)throw new Error("node not found: "+n);return r}function V3(e){var n=W3,r=_,i,s=Mn(30),a,u,c,h,p,v,m=1;e==null&&(e=[]);function _(w){return 1/Math.min(h[w.source.index],h[w.target.index])}function y(w){for(var b=0,N=e.length;b<m;++b)for(var C=0,P,T,M,z=0,D=0,F=0,V,H;C<N;++C)P=e[C],T=P.source,M=P.target,z=M.x+M.vx-T.x-T.vx||Pn(v),c>1&&(D=M.y+M.vy-T.y-T.vy||Pn(v)),c>2&&(F=M.z+M.vz-T.z-T.vz||Pn(v)),V=Math.sqrt(z*z+D*D+F*F),V=(V-a[C])/V*w*i[C],z*=V,D*=V,F*=V,M.vx-=z*(H=p[C]),c>1&&(M.vy-=D*H),c>2&&(M.vz-=F*H),T.vx+=z*(H=1-H),c>1&&(T.vy+=D*H),c>2&&(T.vz+=F*H)}function k(){if(u){var w,b=u.length,N=e.length,C=new Map(u.map((T,M)=>[n(T,M,u),T])),P;for(w=0,h=new Array(b);w<N;++w)P=e[w],P.index=w,typeof P.source!="object"&&(P.source=bg(C,P.source)),typeof P.target!="object"&&(P.target=bg(C,P.target)),h[P.source.index]=(h[P.source.index]||0)+1,h[P.target.index]=(h[P.target.index]||0)+1;for(w=0,p=new Array(N);w<N;++w)P=e[w],p[w]=h[P.source.index]/(h[P.source.index]+h[P.target.index]);i=new Array(N),S(),a=new Array(N),E()}}function S(){if(u)for(var w=0,b=e.length;w<b;++w)i[w]=+r(e[w],w,e)}function E(){if(u)for(var w=0,b=e.length;w<b;++w)a[w]=+s(e[w],w,e)}return y.initialize=function(w,...b){u=w,v=b.find(N=>typeof N=="function")||Math.random,c=b.find(N=>[1,2,3].includes(N))||2,k()},y.links=function(w){return arguments.length?(e=w,k(),y):e},y.id=function(w){return arguments.length?(n=w,y):n},y.iterations=function(w){return arguments.length?(m=+w,y):m},y.strength=function(w){return arguments.length?(r=typeof w=="function"?w:Mn(+w),S(),y):r},y.distance=function(w){return arguments.length?(s=typeof w=="function"?w:Mn(+w),E(),y):s},y}const q3=1664525,G3=1013904223,kg=4294967296;function K3(){let e=1;return()=>(e=(q3*e+G3)%kg)/kg}var Ng=3;function rc(e){return e.x}function Sg(e){return e.y}function Y3(e){return e.z}var X3=10,Q3=Math.PI*(3-Math.sqrt(5)),J3=Math.PI*20/(9+Math.sqrt(221));function eE(e,n){n=n||2;var r=Math.min(Ng,Math.max(1,Math.round(n))),i,s=1,a=.001,u=1-Math.pow(a,1/300),c=0,h=.6,p=new Map,v=Oh(y),m=xs("tick","end"),_=K3();e==null&&(e=[]);function y(){k(),m.call("tick",i),s<a&&(v.stop(),m.call("end",i))}function k(w){var b,N=e.length,C;w===void 0&&(w=1);for(var P=0;P<w;++P)for(s+=(c-s)*u,p.forEach(function(T){T(s)}),b=0;b<N;++b)C=e[b],C.fx==null?C.x+=C.vx*=h:(C.x=C.fx,C.vx=0),r>1&&(C.fy==null?C.y+=C.vy*=h:(C.y=C.fy,C.vy=0)),r>2&&(C.fz==null?C.z+=C.vz*=h:(C.z=C.fz,C.vz=0));return i}function S(){for(var w=0,b=e.length,N;w<b;++w){if(N=e[w],N.index=w,N.fx!=null&&(N.x=N.fx),N.fy!=null&&(N.y=N.fy),N.fz!=null&&(N.z=N.fz),isNaN(N.x)||r>1&&isNaN(N.y)||r>2&&isNaN(N.z)){var C=X3*(r>2?Math.cbrt(.5+w):r>1?Math.sqrt(.5+w):w),P=w*Q3,T=w*J3;r===1?N.x=C:r===2?(N.x=C*Math.cos(P),N.y=C*Math.sin(P)):(N.x=C*Math.sin(P)*Math.cos(T),N.y=C*Math.cos(P),N.z=C*Math.sin(P)*Math.sin(T))}(isNaN(N.vx)||r>1&&isNaN(N.vy)||r>2&&isNaN(N.vz))&&(N.vx=0,r>1&&(N.vy=0),r>2&&(N.vz=0))}}function E(w){return w.initialize&&w.initialize(e,_,r),w}return S(),i={tick:k,restart:function(){return v.restart(y),i},stop:function(){return v.stop(),i},numDimensions:function(w){return arguments.length?(r=Math.min(Ng,Math.max(1,Math.round(w))),p.forEach(E),i):r},nodes:function(w){return arguments.length?(e=w,S(),p.forEach(E),i):e},alpha:function(w){return arguments.length?(s=+w,i):s},alphaMin:function(w){return arguments.length?(a=+w,i):a},alphaDecay:function(w){return arguments.length?(u=+w,i):+u},alphaTarget:function(w){return arguments.length?(c=+w,i):c},velocityDecay:function(w){return arguments.length?(h=1-w,i):1-h},randomSource:function(w){return arguments.length?(_=w,p.forEach(E),i):_},force:function(w,b){return arguments.length>1?(b==null?p.delete(w):p.set(w,E(b)),i):p.get(w)},find:function(){var w=Array.prototype.slice.call(arguments),b=w.shift()||0,N=(r>1?w.shift():null)||0,C=(r>2?w.shift():null)||0,P=w.shift()||1/0,T=0,M=e.length,z,D,F,V,H,Q;for(P*=P,T=0;T<M;++T)H=e[T],z=b-H.x,D=N-(H.y||0),F=C-(H.z||0),V=z*z+D*D+F*F,V<P&&(Q=H,P=V);return Q},on:function(w,b){return arguments.length>1?(m.on(w,b),i):m.on(w)}}}function tE(){var e,n,r,i,s,a=Mn(-30),u,c=1,h=1/0,p=.81;function v(k){var S,E=e.length,w=(n===1?sy(e,rc):n===2?ly(e,rc,Sg):n===3?cy(e,rc,Sg,Y3):null).visitAfter(_);for(s=k,S=0;S<E;++S)r=e[S],w.visit(y)}function m(){if(e){var k,S=e.length,E;for(u=new Array(S),k=0;k<S;++k)E=e[k],u[E.index]=+a(E,k,e)}}function _(k){var S=0,E,w,b=0,N,C,P,T,M=k.length;if(M){for(N=C=P=T=0;T<M;++T)(E=k[T])&&(w=Math.abs(E.value))&&(S+=E.value,b+=w,N+=w*(E.x||0),C+=w*(E.y||0),P+=w*(E.z||0));S*=Math.sqrt(4/M),k.x=N/b,n>1&&(k.y=C/b),n>2&&(k.z=P/b)}else{E=k,E.x=E.data.x,n>1&&(E.y=E.data.y),n>2&&(E.z=E.data.z);do S+=u[E.data.index];while(E=E.next)}k.value=S}function y(k,S,E,w,b){if(!k.value)return!0;var N=[E,w,b][n-1],C=k.x-r.x,P=n>1?k.y-r.y:0,T=n>2?k.z-r.z:0,M=N-S,z=C*C+P*P+T*T;if(M*M/p<z)return z<h&&(C===0&&(C=Pn(i),z+=C*C),n>1&&P===0&&(P=Pn(i),z+=P*P),n>2&&T===0&&(T=Pn(i),z+=T*T),z<c&&(z=Math.sqrt(c*z)),r.vx+=C*k.value*s/z,n>1&&(r.vy+=P*k.value*s/z),n>2&&(r.vz+=T*k.value*s/z)),!0;if(k.length||z>=h)return;(k.data!==r||k.next)&&(C===0&&(C=Pn(i),z+=C*C),n>1&&P===0&&(P=Pn(i),z+=P*P),n>2&&T===0&&(T=Pn(i),z+=T*T),z<c&&(z=Math.sqrt(c*z)));do k.data!==r&&(M=u[k.data.index]*s/z,r.vx+=C*M,n>1&&(r.vy+=P*M),n>2&&(r.vz+=T*M));while(k=k.next)}return v.initialize=function(k,...S){e=k,i=S.find(E=>typeof E=="function")||Math.random,n=S.find(E=>[1,2,3].includes(E))||2,m()},v.strength=function(k){return arguments.length?(a=typeof k=="function"?k:Mn(+k),m(),v):a},v.distanceMin=function(k){return arguments.length?(c=k*k,v):Math.sqrt(c)},v.distanceMax=function(k){return arguments.length?(h=k*k,v):Math.sqrt(h)},v.theta=function(k){return arguments.length?(p=k*k,v):Math.sqrt(p)},v}function nE(e,n,r,i){var s,a,u=Mn(.1),c,h;typeof e!="function"&&(e=Mn(+e)),n==null&&(n=0),r==null&&(r=0),i==null&&(i=0);function p(m){for(var _=0,y=s.length;_<y;++_){var k=s[_],S=k.x-n||1e-6,E=(k.y||0)-r||1e-6,w=(k.z||0)-i||1e-6,b=Math.sqrt(S*S+E*E+w*w),N=(h[_]-b)*c[_]*m/b;k.vx+=S*N,a>1&&(k.vy+=E*N),a>2&&(k.vz+=w*N)}}function v(){if(s){var m,_=s.length;for(c=new Array(_),h=new Array(_),m=0;m<_;++m)h[m]=+e(s[m],m,s),c[m]=isNaN(h[m])?0:+u(s[m],m,s)}}return p.initialize=function(m,..._){s=m,a=_.find(y=>[1,2,3].includes(y))||2,v()},p.strength=function(m){return arguments.length?(u=typeof m=="function"?m:Mn(+m),v(),p):u},p.radius=function(m){return arguments.length?(e=typeof m=="function"?m:Mn(+m),v(),p):e},p.x=function(m){return arguments.length?(n=+m,p):n},p.y=function(m){return arguments.length?(r=+m,p):r},p.z=function(m){return arguments.length?(i=+m,p):i},p}const{abs:fo,cos:Sn,sin:ri,acos:rE,atan2:ho,sqrt:Vn,pow:zt}=Math;function po(e){return e<0?-zt(-e,1/3):zt(e,1/3)}const fy=Math.PI,da=2*fy,qn=fy/2,iE=1e-6,ic=Number.MAX_SAFE_INTEGER||9007199254740991,oc=Number.MIN_SAFE_INTEGER||-9007199254740991,oE={x:0,y:0,z:0},X={Tvalues:[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213],Cvalues:[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872],arcfn:function(e,n){const r=n(e);let i=r.x*r.x+r.y*r.y;return typeof r.z<"u"&&(i+=r.z*r.z),Vn(i)},compute:function(e,n,r){if(e===0)return n[0].t=0,n[0];const i=n.length-1;if(e===1)return n[i].t=1,n[i];const s=1-e;let a=n;if(i===0)return n[0].t=e,n[0];if(i===1){const c={x:s*a[0].x+e*a[1].x,y:s*a[0].y+e*a[1].y,t:e};return r&&(c.z=s*a[0].z+e*a[1].z),c}if(i<4){let c=s*s,h=e*e,p,v,m,_=0;i===2?(a=[a[0],a[1],a[2],oE],p=c,v=s*e*2,m=h):i===3&&(p=c*s,v=c*e*3,m=s*h*3,_=e*h);const y={x:p*a[0].x+v*a[1].x+m*a[2].x+_*a[3].x,y:p*a[0].y+v*a[1].y+m*a[2].y+_*a[3].y,t:e};return r&&(y.z=p*a[0].z+v*a[1].z+m*a[2].z+_*a[3].z),y}const u=JSON.parse(JSON.stringify(n));for(;u.length>1;){for(let c=0;c<u.length-1;c++)u[c]={x:u[c].x+(u[c+1].x-u[c].x)*e,y:u[c].y+(u[c+1].y-u[c].y)*e},typeof u[c].z<"u"&&(u[c].z=u[c].z+(u[c+1].z-u[c].z)*e);u.splice(u.length-1,1)}return u[0].t=e,u[0]},computeWithRatios:function(e,n,r,i){const s=1-e,a=r,u=n;let c=a[0],h=a[1],p=a[2],v=a[3],m;if(c*=s,h*=e,u.length===2)return m=c+h,{x:(c*u[0].x+h*u[1].x)/m,y:(c*u[0].y+h*u[1].y)/m,z:i?(c*u[0].z+h*u[1].z)/m:!1,t:e};if(c*=s,h*=2*s,p*=e*e,u.length===3)return m=c+h+p,{x:(c*u[0].x+h*u[1].x+p*u[2].x)/m,y:(c*u[0].y+h*u[1].y+p*u[2].y)/m,z:i?(c*u[0].z+h*u[1].z+p*u[2].z)/m:!1,t:e};if(c*=s,h*=1.5*s,p*=3*s,v*=e*e*e,u.length===4)return m=c+h+p+v,{x:(c*u[0].x+h*u[1].x+p*u[2].x+v*u[3].x)/m,y:(c*u[0].y+h*u[1].y+p*u[2].y+v*u[3].y)/m,z:i?(c*u[0].z+h*u[1].z+p*u[2].z+v*u[3].z)/m:!1,t:e}},derive:function(e,n){const r=[];for(let i=e,s=i.length,a=s-1;s>1;s--,a--){const u=[];for(let c=0,h;c<a;c++)h={x:a*(i[c+1].x-i[c].x),y:a*(i[c+1].y-i[c].y)},n&&(h.z=a*(i[c+1].z-i[c].z)),u.push(h);r.push(u),i=u}return r},between:function(e,n,r){return n<=e&&e<=r||X.approximately(e,n)||X.approximately(e,r)},approximately:function(e,n,r){return fo(e-n)<=(r||iE)},length:function(e){const r=X.Tvalues.length;let i=0;for(let s=0,a;s<r;s++)a=.5*X.Tvalues[s]+.5,i+=X.Cvalues[s]*X.arcfn(a,e);return .5*i},map:function(e,n,r,i,s){const a=r-n,u=s-i,c=e-n,h=c/a;return i+u*h},lerp:function(e,n,r){const i={x:n.x+e*(r.x-n.x),y:n.y+e*(r.y-n.y)};return n.z!==void 0&&r.z!==void 0&&(i.z=n.z+e*(r.z-n.z)),i},pointToString:function(e){let n=e.x+"/"+e.y;return typeof e.z<"u"&&(n+="/"+e.z),n},pointsToString:function(e){return"["+e.map(X.pointToString).join(", ")+"]"},copy:function(e){return JSON.parse(JSON.stringify(e))},angle:function(e,n,r){const i=n.x-e.x,s=n.y-e.y,a=r.x-e.x,u=r.y-e.y,c=i*u-s*a,h=i*a+s*u;return ho(c,h)},round:function(e,n){const r=""+e,i=r.indexOf(".");return parseFloat(r.substring(0,i+1+n))},dist:function(e,n){const r=e.x-n.x,i=e.y-n.y;return Vn(r*r+i*i)},closest:function(e,n){let r=zt(2,63),i,s;return e.forEach(function(a,u){s=X.dist(n,a),s<r&&(r=s,i=u)}),{mdist:r,mpos:i}},abcratio:function(e,n){if(n!==2&&n!==3)return!1;if(typeof e>"u")e=.5;else if(e===0||e===1)return e;const r=zt(e,n)+zt(1-e,n),i=r-1;return fo(i/r)},projectionratio:function(e,n){if(n!==2&&n!==3)return!1;if(typeof e>"u")e=.5;else if(e===0||e===1)return e;const r=zt(1-e,n),i=zt(e,n)+r;return r/i},lli8:function(e,n,r,i,s,a,u,c){const h=(e*i-n*r)*(s-u)-(e-r)*(s*c-a*u),p=(e*i-n*r)*(a-c)-(n-i)*(s*c-a*u),v=(e-r)*(a-c)-(n-i)*(s-u);return v==0?!1:{x:h/v,y:p/v}},lli4:function(e,n,r,i){const s=e.x,a=e.y,u=n.x,c=n.y,h=r.x,p=r.y,v=i.x,m=i.y;return X.lli8(s,a,u,c,h,p,v,m)},lli:function(e,n){return X.lli4(e,e.c,n,n.c)},makeline:function(e,n){return new je(e.x,e.y,(e.x+n.x)/2,(e.y+n.y)/2,n.x,n.y)},findbbox:function(e){let n=ic,r=ic,i=oc,s=oc;return e.forEach(function(a){const u=a.bbox();n>u.x.min&&(n=u.x.min),r>u.y.min&&(r=u.y.min),i<u.x.max&&(i=u.x.max),s<u.y.max&&(s=u.y.max)}),{x:{min:n,mid:(n+i)/2,max:i,size:i-n},y:{min:r,mid:(r+s)/2,max:s,size:s-r}}},shapeintersections:function(e,n,r,i,s){if(!X.bboxoverlap(n,i))return[];const a=[],u=[e.startcap,e.forward,e.back,e.endcap],c=[r.startcap,r.forward,r.back,r.endcap];return u.forEach(function(h){h.virtual||c.forEach(function(p){if(p.virtual)return;const v=h.intersects(p,s);v.length>0&&(v.c1=h,v.c2=p,v.s1=e,v.s2=r,a.push(v))})}),a},makeshape:function(e,n,r){const i=n.points.length,s=e.points.length,a=X.makeline(n.points[i-1],e.points[0]),u=X.makeline(e.points[s-1],n.points[0]),c={startcap:a,forward:e,back:n,endcap:u,bbox:X.findbbox([a,e,n,u])};return c.intersections=function(h){return X.shapeintersections(c,c.bbox,h,h.bbox,r)},c},getminmax:function(e,n,r){if(!r)return{min:0,max:0};let i=ic,s=oc,a,u;r.indexOf(0)===-1&&(r=[0].concat(r)),r.indexOf(1)===-1&&r.push(1);for(let c=0,h=r.length;c<h;c++)a=r[c],u=e.get(a),u[n]<i&&(i=u[n]),u[n]>s&&(s=u[n]);return{min:i,mid:(i+s)/2,max:s,size:s-i}},align:function(e,n){const r=n.p1.x,i=n.p1.y,s=-ho(n.p2.y-i,n.p2.x-r),a=function(u){return{x:(u.x-r)*Sn(s)-(u.y-i)*ri(s),y:(u.x-r)*ri(s)+(u.y-i)*Sn(s)}};return e.map(a)},roots:function(e,n){n=n||{p1:{x:0,y:0},p2:{x:1,y:0}};const r=e.length-1,i=X.align(e,n),s=function(M){return 0<=M&&M<=1};if(r===2){const M=i[0].y,z=i[1].y,D=i[2].y,F=M-2*z+D;if(F!==0){const V=-Vn(z*z-M*D),H=-M+z,Q=-(V+H)/F,R=-(-V+H)/F;return[Q,R].filter(s)}else if(z!==D&&F===0)return[(2*z-D)/(2*z-2*D)].filter(s);return[]}const a=i[0].y,u=i[1].y,c=i[2].y,h=i[3].y;let p=-a+3*u-3*c+h,v=3*a-6*u+3*c,m=-3*a+3*u,_=a;if(X.approximately(p,0)){if(X.approximately(v,0))return X.approximately(m,0)?[]:[-_/m].filter(s);const M=Vn(m*m-4*v*_),z=2*v;return[(M-m)/z,(-m-M)/z].filter(s)}v/=p,m/=p,_/=p;const y=(3*m-v*v)/3,k=y/3,S=(2*v*v*v-9*v*m+27*_)/27,E=S/2,w=E*E+k*k*k;let b,N,C,P,T;if(w<0){const M=-y/3,z=M*M*M,D=Vn(z),F=-S/(2*D),V=F<-1?-1:F>1?1:F,H=rE(V),Q=po(D),R=2*Q;return C=R*Sn(H/3)-v/3,P=R*Sn((H+da)/3)-v/3,T=R*Sn((H+2*da)/3)-v/3,[C,P,T].filter(s)}else{if(w===0)return b=E<0?po(-E):-po(E),C=2*b-v/3,P=-b-v/3,[C,P].filter(s);{const M=Vn(w);return b=po(-E+M),N=po(E+M),[b-N-v/3].filter(s)}}},droots:function(e){if(e.length===3){const n=e[0],r=e[1],i=e[2],s=n-2*r+i;if(s!==0){const a=-Vn(r*r-n*i),u=-n+r,c=-(a+u)/s,h=-(-a+u)/s;return[c,h]}else if(r!==i&&s===0)return[(2*r-i)/(2*(r-i))];return[]}if(e.length===2){const n=e[0],r=e[1];return n!==r?[n/(n-r)]:[]}return[]},curvature:function(e,n,r,i,s){let a,u,c,h,p=0,v=0;const m=X.compute(e,n),_=X.compute(e,r),y=m.x*m.x+m.y*m.y;if(i?(a=Vn(zt(m.y*_.z-_.y*m.z,2)+zt(m.z*_.x-_.z*m.x,2)+zt(m.x*_.y-_.x*m.y,2)),u=zt(y+m.z*m.z,3/2)):(a=m.x*_.y-m.y*_.x,u=zt(y,3/2)),a===0||u===0)return{k:0,r:0};if(p=a/u,v=u/a,!s){const k=X.curvature(e-.001,n,r,i,!0).k,S=X.curvature(e+.001,n,r,i,!0).k;h=(S-p+(p-k))/2,c=(fo(S-p)+fo(p-k))/2}return{k:p,r:v,dk:h,adk:c}},inflections:function(e){if(e.length<4)return[];const n=X.align(e,{p1:e[0],p2:e.slice(-1)[0]}),r=n[2].x*n[1].y,i=n[3].x*n[1].y,s=n[1].x*n[2].y,a=n[3].x*n[2].y,u=18*(-3*r+2*i+3*s-a),c=18*(3*r-i-3*s),h=18*(s-r);if(X.approximately(u,0)){if(!X.approximately(c,0)){let _=-h/c;if(0<=_&&_<=1)return[_]}return[]}const p=2*u;if(X.approximately(p,0))return[];const v=c*c-4*u*h;if(v<0)return[];const m=Math.sqrt(v);return[(m-c)/p,-(c+m)/p].filter(function(_){return 0<=_&&_<=1})},bboxoverlap:function(e,n){const r=["x","y"],i=r.length;for(let s=0,a,u,c,h;s<i;s++)if(a=r[s],u=e[a].mid,c=n[a].mid,h=(e[a].size+n[a].size)/2,fo(u-c)>=h)return!1;return!0},expandbox:function(e,n){n.x.min<e.x.min&&(e.x.min=n.x.min),n.y.min<e.y.min&&(e.y.min=n.y.min),n.z&&n.z.min<e.z.min&&(e.z.min=n.z.min),n.x.max>e.x.max&&(e.x.max=n.x.max),n.y.max>e.y.max&&(e.y.max=n.y.max),n.z&&n.z.max>e.z.max&&(e.z.max=n.z.max),e.x.mid=(e.x.min+e.x.max)/2,e.y.mid=(e.y.min+e.y.max)/2,e.z&&(e.z.mid=(e.z.min+e.z.max)/2),e.x.size=e.x.max-e.x.min,e.y.size=e.y.max-e.y.min,e.z&&(e.z.size=e.z.max-e.z.min)},pairiteration:function(e,n,r){const i=e.bbox(),s=n.bbox(),a=1e5,u=r||.5;if(i.x.size+i.y.size<u&&s.x.size+s.y.size<u)return[(a*(e._t1+e._t2)/2|0)/a+"/"+(a*(n._t1+n._t2)/2|0)/a];let c=e.split(.5),h=n.split(.5),p=[{left:c.left,right:h.left},{left:c.left,right:h.right},{left:c.right,right:h.right},{left:c.right,right:h.left}];p=p.filter(function(m){return X.bboxoverlap(m.left.bbox(),m.right.bbox())});let v=[];return p.length===0||(p.forEach(function(m){v=v.concat(X.pairiteration(m.left,m.right,u))}),v=v.filter(function(m,_){return v.indexOf(m)===_})),v},getccenter:function(e,n,r){const i=n.x-e.x,s=n.y-e.y,a=r.x-n.x,u=r.y-n.y,c=i*Sn(qn)-s*ri(qn),h=i*ri(qn)+s*Sn(qn),p=a*Sn(qn)-u*ri(qn),v=a*ri(qn)+u*Sn(qn),m=(e.x+n.x)/2,_=(e.y+n.y)/2,y=(n.x+r.x)/2,k=(n.y+r.y)/2,S=m+c,E=_+h,w=y+p,b=k+v,N=X.lli8(m,_,S,E,y,k,w,b),C=X.dist(N,e);let P=ho(e.y-N.y,e.x-N.x),T=ho(n.y-N.y,n.x-N.x),M=ho(r.y-N.y,r.x-N.x),z;return P<M?((P>T||T>M)&&(P+=da),P>M&&(z=M,M=P,P=z)):M<T&&T<P?(z=M,M=P,P=z):M+=da,N.s=P,N.e=M,N.r=C,N},numberSort:function(e,n){return e-n}};class Do{constructor(n){this.curves=[],this._3d=!1,n&&(this.curves=n,this._3d=this.curves[0]._3d)}valueOf(){return this.toString()}toString(){return"["+this.curves.map(function(n){return X.pointsToString(n.points)}).join(", ")+"]"}addCurve(n){this.curves.push(n),this._3d=this._3d||n._3d}length(){return this.curves.map(function(n){return n.length()}).reduce(function(n,r){return n+r})}curve(n){return this.curves[n]}bbox(){const n=this.curves;for(var r=n[0].bbox(),i=1;i<n.length;i++)X.expandbox(r,n[i].bbox());return r}offset(n){const r=[];return this.curves.forEach(function(i){r.push(...i.offset(n))}),new Do(r)}}const{abs:mo,min:jg,max:Cg,cos:sE,sin:aE,acos:lE,sqrt:go}=Math,uE=Math.PI;class je{constructor(n){let r=n&&n.forEach?n:Array.from(arguments).slice(),i=!1;if(typeof r[0]=="object"){i=r.length;const y=[];r.forEach(function(k){["x","y","z"].forEach(function(S){typeof k[S]<"u"&&y.push(k[S])})}),r=y}let s=!1;const a=r.length;if(i){if(i>4){if(arguments.length!==1)throw new Error("Only new Bezier(point[]) is accepted for 4th and higher order curves");s=!0}}else if(a!==6&&a!==8&&a!==9&&a!==12&&arguments.length!==1)throw new Error("Only new Bezier(point[]) is accepted for 4th and higher order curves");const u=this._3d=!s&&(a===9||a===12)||n&&n[0]&&typeof n[0].z<"u",c=this.points=[];for(let y=0,k=u?3:2;y<a;y+=k){var h={x:r[y],y:r[y+1]};u&&(h.z=r[y+2]),c.push(h)}const p=this.order=c.length-1,v=this.dims=["x","y"];u&&v.push("z"),this.dimlen=v.length;const m=X.align(c,{p1:c[0],p2:c[p]}),_=X.dist(c[0],c[p]);this._linear=m.reduce((y,k)=>y+mo(k.y),0)<_/50,this._lut=[],this._t1=0,this._t2=1,this.update()}static quadraticFromPoints(n,r,i,s){if(typeof s>"u"&&(s=.5),s===0)return new je(r,r,i);if(s===1)return new je(n,r,r);const a=je.getABC(2,n,r,i,s);return new je(n,a.A,i)}static cubicFromPoints(n,r,i,s,a){typeof s>"u"&&(s=.5);const u=je.getABC(3,n,r,i,s);typeof a>"u"&&(a=X.dist(r,u.C));const c=a*(1-s)/s,h=X.dist(n,i),p=(i.x-n.x)/h,v=(i.y-n.y)/h,m=a*p,_=a*v,y=c*p,k=c*v,S={x:r.x-m,y:r.y-_},E={x:r.x+y,y:r.y+k},w=u.A,b={x:w.x+(S.x-w.x)/(1-s),y:w.y+(S.y-w.y)/(1-s)},N={x:w.x+(E.x-w.x)/s,y:w.y+(E.y-w.y)/s},C={x:n.x+(b.x-n.x)/s,y:n.y+(b.y-n.y)/s},P={x:i.x+(N.x-i.x)/(1-s),y:i.y+(N.y-i.y)/(1-s)};return new je(n,C,P,i)}static getUtils(){return X}getUtils(){return je.getUtils()}static get PolyBezier(){return Do}valueOf(){return this.toString()}toString(){return X.pointsToString(this.points)}toSVG(){if(this._3d)return!1;const n=this.points,r=n[0].x,i=n[0].y,s=["M",r,i,this.order===2?"Q":"C"];for(let a=1,u=n.length;a<u;a++)s.push(n[a].x),s.push(n[a].y);return s.join(" ")}setRatios(n){if(n.length!==this.points.length)throw new Error("incorrect number of ratio values");this.ratios=n,this._lut=[]}verify(){const n=this.coordDigest();n!==this._print&&(this._print=n,this.update())}coordDigest(){return this.points.map(function(n,r){return""+r+n.x+n.y+(n.z?n.z:0)}).join("")}update(){this._lut=[],this.dpoints=X.derive(this.points,this._3d),this.computedirection()}computedirection(){const n=this.points,r=X.angle(n[0],n[this.order],n[1]);this.clockwise=r>0}length(){return X.length(this.derivative.bind(this))}static getABC(n=2,r,i,s,a=.5){const u=X.projectionratio(a,n),c=1-u,h={x:u*r.x+c*s.x,y:u*r.y+c*s.y},p=X.abcratio(a,n);return{A:{x:i.x+(i.x-h.x)/p,y:i.y+(i.y-h.y)/p},B:i,C:h,S:r,E:s}}getABC(n,r){r=r||this.get(n);let i=this.points[0],s=this.points[this.order];return je.getABC(this.order,i,r,s,n)}getLUT(n){if(this.verify(),n=n||100,this._lut.length===n+1)return this._lut;this._lut=[],n++,this._lut=[];for(let r=0,i,s;r<n;r++)s=r/(n-1),i=this.compute(s),i.t=s,this._lut.push(i);return this._lut}on(n,r){r=r||5;const i=this.getLUT(),s=[];for(let a=0,u,c=0;a<i.length;a++)u=i[a],X.dist(u,n)<r&&(s.push(u),c+=a/i.length);return s.length?t/=s.length:!1}project(n){const r=this.getLUT(),i=r.length-1,s=X.closest(r,n),a=s.mpos,u=(a-1)/i,c=(a+1)/i,h=.1/i;let p=s.mdist,v=u,m=v,_;p+=1;for(let y;v<c+h;v+=h)_=this.compute(v),y=X.dist(n,_),y<p&&(p=y,m=v);return m=m<0?0:m>1?1:m,_=this.compute(m),_.t=m,_.d=p,_}get(n){return this.compute(n)}point(n){return this.points[n]}compute(n){return this.ratios?X.computeWithRatios(n,this.points,this.ratios,this._3d):X.compute(n,this.points,this._3d,this.ratios)}raise(){const n=this.points,r=[n[0]],i=n.length;for(let s=1,a,u;s<i;s++)a=n[s],u=n[s-1],r[s]={x:(i-s)/i*a.x+s/i*u.x,y:(i-s)/i*a.y+s/i*u.y};return r[i]=n[i-1],new je(r)}derivative(n){return X.compute(n,this.dpoints[0],this._3d)}dderivative(n){return X.compute(n,this.dpoints[1],this._3d)}align(){let n=this.points;return new je(X.align(n,{p1:n[0],p2:n[n.length-1]}))}curvature(n){return X.curvature(n,this.dpoints[0],this.dpoints[1],this._3d)}inflections(){return X.inflections(this.points)}normal(n){return this._3d?this.__normal3(n):this.__normal2(n)}__normal2(n){const r=this.derivative(n),i=go(r.x*r.x+r.y*r.y);return{t:n,x:-r.y/i,y:r.x/i}}__normal3(n){const r=this.derivative(n),i=this.derivative(n+.01),s=go(r.x*r.x+r.y*r.y+r.z*r.z),a=go(i.x*i.x+i.y*i.y+i.z*i.z);r.x/=s,r.y/=s,r.z/=s,i.x/=a,i.y/=a,i.z/=a;const u={x:i.y*r.z-i.z*r.y,y:i.z*r.x-i.x*r.z,z:i.x*r.y-i.y*r.x},c=go(u.x*u.x+u.y*u.y+u.z*u.z);u.x/=c,u.y/=c,u.z/=c;const h=[u.x*u.x,u.x*u.y-u.z,u.x*u.z+u.y,u.x*u.y+u.z,u.y*u.y,u.y*u.z-u.x,u.x*u.z-u.y,u.y*u.z+u.x,u.z*u.z];return{t:n,x:h[0]*r.x+h[1]*r.y+h[2]*r.z,y:h[3]*r.x+h[4]*r.y+h[5]*r.z,z:h[6]*r.x+h[7]*r.y+h[8]*r.z}}hull(n){let r=this.points,i=[],s=[],a=0;for(s[a++]=r[0],s[a++]=r[1],s[a++]=r[2],this.order===3&&(s[a++]=r[3]);r.length>1;){i=[];for(let u=0,c,h=r.length-1;u<h;u++)c=X.lerp(n,r[u],r[u+1]),s[a++]=c,i.push(c);r=i}return s}split(n,r){if(n===0&&r)return this.split(r).left;if(r===1)return this.split(n).right;const i=this.hull(n),s={left:this.order===2?new je([i[0],i[3],i[5]]):new je([i[0],i[4],i[7],i[9]]),right:this.order===2?new je([i[5],i[4],i[2]]):new je([i[9],i[8],i[6],i[3]]),span:i};return s.left._t1=X.map(0,0,1,this._t1,this._t2),s.left._t2=X.map(n,0,1,this._t1,this._t2),s.right._t1=X.map(n,0,1,this._t1,this._t2),s.right._t2=X.map(1,0,1,this._t1,this._t2),r?(r=X.map(r,n,1,0,1),s.right.split(r).left):s}extrema(){const n={};let r=[];return this.dims.forEach((function(i){let s=function(u){return u[i]},a=this.dpoints[0].map(s);n[i]=X.droots(a),this.order===3&&(a=this.dpoints[1].map(s),n[i]=n[i].concat(X.droots(a))),n[i]=n[i].filter(function(u){return u>=0&&u<=1}),r=r.concat(n[i].sort(X.numberSort))}).bind(this)),n.values=r.sort(X.numberSort).filter(function(i,s){return r.indexOf(i)===s}),n}bbox(){const n=this.extrema(),r={};return this.dims.forEach((function(i){r[i]=X.getminmax(this,i,n[i])}).bind(this)),r}overlaps(n){const r=this.bbox(),i=n.bbox();return X.bboxoverlap(r,i)}offset(n,r){if(typeof r<"u"){const i=this.get(n),s=this.normal(n),a={c:i,n:s,x:i.x+s.x*r,y:i.y+s.y*r};return this._3d&&(a.z=i.z+s.z*r),a}if(this._linear){const i=this.normal(0),s=this.points.map(function(a){const u={x:a.x+n*i.x,y:a.y+n*i.y};return a.z&&i.z&&(u.z=a.z+n*i.z),u});return[new je(s)]}return this.reduce().map(function(i){return i._linear?i.offset(n)[0]:i.scale(n)})}simple(){if(this.order===3){const s=X.angle(this.points[0],this.points[3],this.points[1]),a=X.angle(this.points[0],this.points[3],this.points[2]);if(s>0&&a<0||s<0&&a>0)return!1}const n=this.normal(0),r=this.normal(1);let i=n.x*r.x+n.y*r.y;return this._3d&&(i+=n.z*r.z),mo(lE(i))<uE/3}reduce(){let n,r=0,i=0,s=.01,a,u=[],c=[],h=this.extrema().values;for(h.indexOf(0)===-1&&(h=[0].concat(h)),h.indexOf(1)===-1&&h.push(1),r=h[0],n=1;n<h.length;n++)i=h[n],a=this.split(r,i),a._t1=r,a._t2=i,u.push(a),r=i;return u.forEach(function(p){for(r=0,i=0;i<=1;)for(i=r+s;i<=1+s;i+=s)if(a=p.split(r,i),!a.simple()){if(i-=s,mo(r-i)<s)return[];a=p.split(r,i),a._t1=X.map(r,0,1,p._t1,p._t2),a._t2=X.map(i,0,1,p._t1,p._t2),c.push(a),r=i;break}r<1&&(a=p.split(r,1),a._t1=X.map(r,0,1,p._t1,p._t2),a._t2=p._t2,c.push(a))}),c}translate(n,r,i){i=typeof i=="number"?i:r;const s=this.order;let a=this.points.map((u,c)=>(1-c/s)*r+c/s*i);return new je(this.points.map((u,c)=>({x:u.x+n.x*a[c],y:u.y+n.y*a[c]})))}scale(n){const r=this.order;let i=!1;if(typeof n=="function"&&(i=n),i&&r===2)return this.raise().scale(i);const s=this.clockwise,a=this.points;if(this._linear)return this.translate(this.normal(0),i?i(0):n,i?i(1):n);const u=i?i(0):n,c=i?i(1):n,h=[this.offset(0,10),this.offset(1,10)],p=[],v=X.lli4(h[0],h[0].c,h[1],h[1].c);if(!v)throw new Error("cannot scale this curve. Try reducing it first.");return[0,1].forEach(function(m){const _=p[m*r]=X.copy(a[m*r]);_.x+=(m?c:u)*h[m].n.x,_.y+=(m?c:u)*h[m].n.y}),i?([0,1].forEach(function(m){if(!(r===2&&m)){var _=a[m+1],y={x:_.x-v.x,y:_.y-v.y},k=i?i((m+1)/r):n;i&&!s&&(k=-k);var S=go(y.x*y.x+y.y*y.y);y.x/=S,y.y/=S,p[m+1]={x:_.x+k*y.x,y:_.y+k*y.y}}}),new je(p)):([0,1].forEach(m=>{if(r===2&&m)return;const _=p[m*r],y=this.derivative(m),k={x:_.x+y.x,y:_.y+y.y};p[m+1]=X.lli4(_,k,v,a[m+1])}),new je(p))}outline(n,r,i,s){if(r=r===void 0?n:r,this._linear){const P=this.normal(0),T=this.points[0],M=this.points[this.points.length-1];let z,D,F;i===void 0&&(i=n,s=r),z={x:T.x+P.x*n,y:T.y+P.y*n},F={x:M.x+P.x*i,y:M.y+P.y*i},D={x:(z.x+F.x)/2,y:(z.y+F.y)/2};const V=[z,D,F];z={x:T.x-P.x*r,y:T.y-P.y*r},F={x:M.x-P.x*s,y:M.y-P.y*s},D={x:(z.x+F.x)/2,y:(z.y+F.y)/2};const H=[F,D,z],Q=X.makeline(H[2],V[0]),R=X.makeline(V[2],H[0]),G=[Q,new je(V),R,new je(H)];return new Do(G)}const a=this.reduce(),u=a.length,c=[];let h=[],p,v=0,m=this.length();const _=typeof i<"u"&&typeof s<"u";function y(P,T,M,z,D){return function(F){const V=z/M,H=(z+D)/M,Q=T-P;return X.map(F,0,1,P+V*Q,P+H*Q)}}a.forEach(function(P){const T=P.length();_?(c.push(P.scale(y(n,i,m,v,T))),h.push(P.scale(y(-r,-s,m,v,T)))):(c.push(P.scale(n)),h.push(P.scale(-r))),v+=T}),h=h.map(function(P){return p=P.points,p[3]?P.points=[p[3],p[2],p[1],p[0]]:P.points=[p[2],p[1],p[0]],P}).reverse();const k=c[0].points[0],S=c[u-1].points[c[u-1].points.length-1],E=h[u-1].points[h[u-1].points.length-1],w=h[0].points[0],b=X.makeline(E,k),N=X.makeline(S,w),C=[b].concat(c).concat([N]).concat(h);return new Do(C)}outlineshapes(n,r,i){r=r||n;const s=this.outline(n,r).curves,a=[];for(let u=1,c=s.length;u<c/2;u++){const h=X.makeshape(s[u],s[c-u],i);h.startcap.virtual=u>1,h.endcap.virtual=u<c/2-1,a.push(h)}return a}intersects(n,r){return n?n.p1&&n.p2?this.lineIntersects(n):(n instanceof je&&(n=n.reduce()),this.curveintersects(this.reduce(),n,r)):this.selfintersects(r)}lineIntersects(n){const r=jg(n.p1.x,n.p2.x),i=jg(n.p1.y,n.p2.y),s=Cg(n.p1.x,n.p2.x),a=Cg(n.p1.y,n.p2.y);return X.roots(this.points,n).filter(u=>{var c=this.get(u);return X.between(c.x,r,s)&&X.between(c.y,i,a)})}selfintersects(n){const r=this.reduce(),i=r.length-2,s=[];for(let a=0,u,c,h;a<i;a++)c=r.slice(a,a+1),h=r.slice(a+2),u=this.curveintersects(c,h,n),s.push(...u);return s}curveintersects(n,r,i){const s=[];n.forEach(function(u){r.forEach(function(c){u.overlaps(c)&&s.push({left:u,right:c})})});let a=[];return s.forEach(function(u){const c=X.pairiteration(u.left,u.right,i);c.length>0&&(a=a.concat(c))}),a}arcs(n){return n=n||.5,this._iterate(n,[])}_error(n,r,i,s){const a=(s-i)/4,u=this.get(i+a),c=this.get(s-a),h=X.dist(n,r),p=X.dist(n,u),v=X.dist(n,c);return mo(p-h)+mo(v-h)}_iterate(n,r){let i=0,s=1,a;do{a=0,s=1;let u=this.get(i),c,h,p,v,m=!1,_=!1,y,k=s,S=1;do if(_=m,v=p,k=(i+s)/2,c=this.get(k),h=this.get(s),p=X.getccenter(u,c,h),p.interval={start:i,end:s},m=this._error(p,u,i,s)<=n,y=_&&!m,y||(S=s),m){if(s>=1){if(p.interval.end=S=1,v=p,s>1){let w={x:p.x+p.r*sE(p.e),y:p.y+p.r*aE(p.e)};p.e+=X.angle({x:p.x,y:p.y},w,this.get(1))}break}s=s+(s-i)/2}else s=k;while(!y&&a++<100);if(a>=100)break;v=v||p,r.push(v),i=S}while(s<1);return r}}function Sf(e,n){(n==null||n>e.length)&&(n=e.length);for(var r=0,i=Array(n);r<n;r++)i[r]=e[r];return i}function cE(e){if(Array.isArray(e))return e}function fE(e){if(Array.isArray(e))return Sf(e)}function hE(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function dE(e,n){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var i,s,a,u,c=[],h=!0,p=!1;try{if(a=(r=r.call(e)).next,n!==0)for(;!(h=(i=a.call(r)).done)&&(c.push(i.value),c.length!==n);h=!0);}catch(v){p=!0,s=v}finally{try{if(!h&&r.return!=null&&(u=r.return(),Object(u)!==u))return}finally{if(p)throw s}}return c}}function pE(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mE(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gE(e,n){if(e==null)return{};var r,i,s=vE(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],n.includes(r)||{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function vE(e,n){if(e==null)return{};var r={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(n.includes(i))continue;r[i]=e[i]}return r}function _E(e,n){return cE(e)||dE(e,n)||hy(e,n)||pE()}function yE(e){return fE(e)||hE(e)||hy(e)||mE()}function xE(e,n){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,n);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function wE(e){var n=xE(e,"string");return typeof n=="symbol"?n:n+""}function hy(e,n){if(e){if(typeof e=="string")return Sf(e,n);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Sf(e,n):void 0}}var bE=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,s=(n instanceof Array?n.length?n:[void 0]:[n]).map(function(c){return{keyAccessor:c,isProp:!(c instanceof Function)}}),a=e.reduce(function(c,h){var p=c,v=h;return s.forEach(function(m,_){var y=m.keyAccessor,k=m.isProp,S;if(k){var E=v,w=E[y],b=gE(E,[y].map(wE));S=w,v=b}else S=y(v,_);_+1<s.length?(p.hasOwnProperty(S)||(p[S]={}),p=p[S]):r?(p.hasOwnProperty(S)||(p[S]=[]),p[S].push(v)):p[S]=v}),c},{});r instanceof Function&&function c(h){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;p===s.length?Object.keys(h).forEach(function(v){return h[v]=r(h[v])}):Object.values(h).forEach(function(v){return c(v,p+1)})}(a);var u=a;return i&&(u=[],function c(h){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];p.length===s.length?u.push({keys:p,vals:h}):Object.entries(h).forEach(function(v){var m=_E(v,2),_=m[0],y=m[1];return c(y,[].concat(yE(p),[_]))})}(a),n instanceof Array&&n.length===0&&u.length===1&&(u[0].keys=[])),u};function kE(e,n){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(n).domain(e);break}return this}const Pg=Symbol("implicit");function dy(){var e=new Km,n=[],r=[],i=Pg;function s(a){let u=e.get(a);if(u===void 0){if(i!==Pg)return i;e.set(a,u=n.push(a)-1)}return r[u%r.length]}return s.domain=function(a){if(!arguments.length)return n.slice();n=[],e=new Km;for(const u of a)e.has(u)||e.set(u,n.push(u)-1);return s},s.range=function(a){return arguments.length?(r=Array.from(a),s):r.slice()},s.unknown=function(a){return arguments.length?(i=a,s):i},s.copy=function(){return dy(n,r).unknown(i)},kE.apply(s,arguments),s}function NE(e){for(var n=e.length/6|0,r=new Array(n),i=0;i<n;)r[i]="#"+e.slice(i*6,++i*6);return r}const SE=NE("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928");function jE(e,n){n===void 0&&(n={});var r=n.insertAt;if(!(typeof document>"u")){var i=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css",r==="top"&&i.firstChild?i.insertBefore(s,i.firstChild):i.appendChild(s),s.styleSheet?s.styleSheet.cssText=e:s.appendChild(document.createTextNode(e))}}var CE=`.force-graph-container canvas {
  display: block;
  user-select: none;
  outline: none;
  -webkit-tap-highlight-color: transparent;
}

.force-graph-container .clickable {
  cursor: pointer;
}

.force-graph-container .grabbable {
  cursor: move;
  cursor: grab;
  cursor: -moz-grab;
  cursor: -webkit-grab;
}

.force-graph-container .grabbable:active {
  cursor: grabbing;
  cursor: -moz-grabbing;
  cursor: -webkit-grabbing;
}
`;jE(CE);function jf(e,n){(n==null||n>e.length)&&(n=e.length);for(var r=0,i=Array(n);r<n;r++)i[r]=e[r];return i}function PE(e){if(Array.isArray(e))return e}function EE(e){if(Array.isArray(e))return jf(e)}function Eg(e,n,r){if(py())return Reflect.construct.apply(null,arguments);var i=[null];i.push.apply(i,n);var s=new(e.bind.apply(e,i));return s}function fs(e,n,r){return(n=AE(n))in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function py(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(py=function(){return!!e})()}function TE(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function LE(e,n){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var i,s,a,u,c=[],h=!0,p=!1;try{if(a=(r=r.call(e)).next,n!==0)for(;!(h=(i=a.call(r)).done)&&(c.push(i.value),c.length!==n);h=!0);}catch(v){p=!0,s=v}finally{try{if(!h&&r.return!=null&&(u=r.return(),Object(u)!==u))return}finally{if(p)throw s}}return c}}function ME(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zE(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Tg(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,i)}return r}function ii(e){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?Tg(Object(r),!0).forEach(function(i){fs(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Tg(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}function Fo(e,n){return PE(e)||LE(e,n)||my(e,n)||ME()}function It(e){return EE(e)||TE(e)||my(e)||zE()}function OE(e,n){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,n);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(e)}function AE(e){var n=OE(e,"string");return typeof n=="symbol"?n:n+""}function Cf(e){"@babel/helpers - typeof";return Cf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Cf(e)}function my(e,n){if(e){if(typeof e=="string")return jf(e,n);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?jf(e,n):void 0}}var RE=dy(SE);function Lg(e,n,r){!n||typeof r!="string"||e.filter(function(i){return!i[r]}).forEach(function(i){i[r]=RE(n(i))})}function IE(e,n){var r=e.nodes,i=e.links,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=s.nodeFilter,u=a===void 0?function(){return!0}:a,c=s.onLoopError,h=c===void 0?function(y){throw"Invalid DAG structure! Found cycle in node path: ".concat(y.join(" -> "),".")}:c,p={};r.forEach(function(y){return p[n(y)]={data:y,out:[],depth:-1,skip:!u(y)}}),i.forEach(function(y){var k=y.source,S=y.target,E=C(k),w=C(S);if(!p.hasOwnProperty(E))throw"Missing source node with id: ".concat(E);if(!p.hasOwnProperty(w))throw"Missing target node with id: ".concat(w);var b=p[E],N=p[w];b.out.push(N);function C(P){return Cf(P)==="object"?n(P):P}});var v=[];_(Object.values(p));var m=Object.assign.apply(Object,[{}].concat(It(Object.entries(p).filter(function(y){var k=Fo(y,2),S=k[1];return!S.skip}).map(function(y){var k=Fo(y,2),S=k[0],E=k[1];return fs({},S,E.depth)}))));return m;function _(y){for(var k=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],S=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,E=function(){var C=y[w];if(k.indexOf(C)!==-1){var P=[].concat(It(k.slice(k.indexOf(C))),[C]).map(function(T){return n(T.data)});return v.some(function(T){return T.length===P.length&&T.every(function(M,z){return M===P[z]})})||(v.push(P),h(P)),1}S>C.depth&&(C.depth=S,_(C.out,[].concat(It(k),[C]),S+(C.skip?0:1)))},w=0,b=y.length;w<b;w++)E()}}var DE=2,rt=function(n,r){return r.onNeedsRedraw&&r.onNeedsRedraw()},Mg=function(n,r){if(!r.isShadow){var i=xe(r.linkDirectionalParticles);r.graphData.links.forEach(function(s){var a=Math.round(Math.abs(i(s)));a?s.__photons=It(Array(a)).map(function(){return{}}):delete s.__photons})}},ml=Dh({props:{graphData:{default:{nodes:[],links:[]},onChange:function(n,r){r.engineRunning=!1,Mg(n,r)}},dagMode:{onChange:function(n,r){!n&&(r.graphData.nodes||[]).forEach(function(i){return i.fx=i.fy=void 0})}},dagLevelDistance:{},dagNodeFilter:{default:function(n){return!0}},onDagError:{triggerUpdate:!1},nodeRelSize:{default:4,triggerUpdate:!1,onChange:rt},nodeId:{default:"id"},nodeVal:{default:"val",triggerUpdate:!1,onChange:rt},nodeColor:{default:"color",triggerUpdate:!1,onChange:rt},nodeAutoColorBy:{},nodeCanvasObject:{triggerUpdate:!1,onChange:rt},nodeCanvasObjectMode:{default:function(){return"replace"},triggerUpdate:!1,onChange:rt},nodeVisibility:{default:!0,triggerUpdate:!1,onChange:rt},linkSource:{default:"source"},linkTarget:{default:"target"},linkVisibility:{default:!0,triggerUpdate:!1,onChange:rt},linkColor:{default:"color",triggerUpdate:!1,onChange:rt},linkAutoColorBy:{},linkLineDash:{triggerUpdate:!1,onChange:rt},linkWidth:{default:1,triggerUpdate:!1,onChange:rt},linkCurvature:{default:0,triggerUpdate:!1,onChange:rt},linkCanvasObject:{triggerUpdate:!1,onChange:rt},linkCanvasObjectMode:{default:function(){return"replace"},triggerUpdate:!1,onChange:rt},linkDirectionalArrowLength:{default:0,triggerUpdate:!1,onChange:rt},linkDirectionalArrowColor:{triggerUpdate:!1,onChange:rt},linkDirectionalArrowRelPos:{default:.5,triggerUpdate:!1,onChange:rt},linkDirectionalParticles:{default:0,triggerUpdate:!1,onChange:Mg},linkDirectionalParticleSpeed:{default:.01,triggerUpdate:!1},linkDirectionalParticleOffset:{default:0,triggerUpdate:!1},linkDirectionalParticleWidth:{default:4,triggerUpdate:!1},linkDirectionalParticleColor:{triggerUpdate:!1},linkDirectionalParticleCanvasObject:{triggerUpdate:!1},globalScale:{default:1,triggerUpdate:!1},d3AlphaMin:{default:0,triggerUpdate:!1},d3AlphaDecay:{default:.0228,triggerUpdate:!1,onChange:function(n,r){r.forceLayout.alphaDecay(n)}},d3AlphaTarget:{default:0,triggerUpdate:!1,onChange:function(n,r){r.forceLayout.alphaTarget(n)}},d3VelocityDecay:{default:.4,triggerUpdate:!1,onChange:function(n,r){r.forceLayout.velocityDecay(n)}},warmupTicks:{default:0,triggerUpdate:!1},cooldownTicks:{default:1/0,triggerUpdate:!1},cooldownTime:{default:15e3,triggerUpdate:!1},onUpdate:{default:function(){},triggerUpdate:!1},onFinishUpdate:{default:function(){},triggerUpdate:!1},onEngineTick:{default:function(){},triggerUpdate:!1},onEngineStop:{default:function(){},triggerUpdate:!1},onNeedsRedraw:{triggerUpdate:!1},isShadow:{default:!1,triggerUpdate:!1}},methods:{d3Force:function(n,r,i){return i===void 0?n.forceLayout.force(r):(n.forceLayout.force(r,i),this)},d3ReheatSimulation:function(n){return n.forceLayout.alpha(1),this.resetCountdown(),this},resetCountdown:function(n){return n.cntTicks=0,n.startTickTime=new Date,n.engineRunning=!0,this},isEngineRunning:function(n){return!!n.engineRunning},tickFrame:function(n){return!n.isShadow&&r(),s(),!n.isShadow&&a(),!n.isShadow&&u(),i(),this;function r(){n.engineRunning&&(++n.cntTicks>n.cooldownTicks||new Date-n.startTickTime>n.cooldownTime||n.d3AlphaMin>0&&n.forceLayout.alpha()<n.d3AlphaMin?(n.engineRunning=!1,n.onEngineStop()):(n.forceLayout.tick(),n.onEngineTick()))}function i(){var c=xe(n.nodeVisibility),h=xe(n.nodeVal),p=xe(n.nodeColor),v=xe(n.nodeCanvasObjectMode),m=n.ctx,_=n.isShadow/n.globalScale,y=n.graphData.nodes.filter(c);m.save(),y.forEach(function(k){var S=v(k);if(n.nodeCanvasObject&&(S==="before"||S==="replace")&&(n.nodeCanvasObject(k,m,n.globalScale),S==="replace")){m.restore();return}var E=Math.sqrt(Math.max(0,h(k)||1))*n.nodeRelSize+_;m.beginPath(),m.arc(k.x,k.y,E,0,2*Math.PI,!1),m.fillStyle=p(k)||"rgba(31, 120, 180, 0.92)",m.fill(),n.nodeCanvasObject&&S==="after"&&n.nodeCanvasObject(k,n.ctx,n.globalScale)}),m.restore()}function s(){var c=xe(n.linkVisibility),h=xe(n.linkColor),p=xe(n.linkWidth),v=xe(n.linkLineDash),m=xe(n.linkCurvature),_=xe(n.linkCanvasObjectMode),y=n.ctx,k=n.isShadow*2,S=n.graphData.links.filter(c);S.forEach(T);var E=[],w=[],b=S;if(n.linkCanvasObject){var N=[],C=[];S.forEach(function(M){return({before:E,after:w,replace:N}[_(M)]||C).push(M)}),b=[].concat(It(E),w,C),E=E.concat(N)}y.save(),E.forEach(function(M){return n.linkCanvasObject(M,y,n.globalScale)}),y.restore();var P=bE(b,[h,p,v]);y.save(),Object.entries(P).forEach(function(M){var z=Fo(M,2),D=z[0],F=z[1],V=!D||D==="undefined"?"rgba(0,0,0,0.15)":D;Object.entries(F).forEach(function(H){var Q=Fo(H,2),R=Q[0],G=Q[1],W=(R||1)/n.globalScale+k;Object.entries(G).forEach(function(ee){var U=Fo(ee,2);U[0];var K=U[1],Z=v(K[0]);y.beginPath(),K.forEach(function(J){var re=J.source,he=J.target;if(!(!re||!he||!re.hasOwnProperty("x")||!he.hasOwnProperty("x"))){y.moveTo(re.x,re.y);var ue=J.__controlPoints;ue?y[ue.length===2?"quadraticCurveTo":"bezierCurveTo"].apply(y,It(ue).concat([he.x,he.y])):y.lineTo(he.x,he.y)}}),y.strokeStyle=V,y.lineWidth=W,y.setLineDash(Z||[]),y.stroke()})})}),y.restore(),y.save(),w.forEach(function(M){return n.linkCanvasObject(M,y,n.globalScale)}),y.restore();function T(M){var z=m(M);if(!z){M.__controlPoints=null;return}var D=M.source,F=M.target;if(!(!D||!F||!D.hasOwnProperty("x")||!F.hasOwnProperty("x"))){var V=Math.sqrt(Math.pow(F.x-D.x,2)+Math.pow(F.y-D.y,2));if(V>0){var H=Math.atan2(F.y-D.y,F.x-D.x),Q=V*z,R={x:(D.x+F.x)/2+Q*Math.cos(H-Math.PI/2),y:(D.y+F.y)/2+Q*Math.sin(H-Math.PI/2)};M.__controlPoints=[R.x,R.y]}else{var G=z*70;M.__controlPoints=[F.x,F.y-G,F.x+G,F.y]}}}}function a(){var c=1.6,h=.2,p=xe(n.linkDirectionalArrowLength),v=xe(n.linkDirectionalArrowRelPos),m=xe(n.linkVisibility),_=xe(n.linkDirectionalArrowColor||n.linkColor),y=xe(n.nodeVal),k=n.ctx;k.save(),n.graphData.links.filter(m).forEach(function(S){var E=p(S);if(!(!E||E<0)){var w=S.source,b=S.target;if(!(!w||!b||!w.hasOwnProperty("x")||!b.hasOwnProperty("x"))){var N=Math.sqrt(Math.max(0,y(w)||1))*n.nodeRelSize,C=Math.sqrt(Math.max(0,y(b)||1))*n.nodeRelSize,P=Math.min(1,Math.max(0,v(S))),T=_(S)||"rgba(0,0,0,0.28)",M=E/c/2,z=S.__controlPoints&&Eg(je,[w.x,w.y].concat(It(S.__controlPoints),[b.x,b.y])),D=z?function(W){return z.get(W)}:function(W){return{x:w.x+(b.x-w.x)*W||0,y:w.y+(b.y-w.y)*W||0}},F=z?z.length():Math.sqrt(Math.pow(b.x-w.x,2)+Math.pow(b.y-w.y,2)),V=N+E+(F-N-C-E)*P,H=D(V/F),Q=D((V-E)/F),R=D((V-E*(1-h))/F),G=Math.atan2(H.y-Q.y,H.x-Q.x)-Math.PI/2;k.beginPath(),k.moveTo(H.x,H.y),k.lineTo(Q.x+M*Math.cos(G),Q.y+M*Math.sin(G)),k.lineTo(R.x,R.y),k.lineTo(Q.x-M*Math.cos(G),Q.y-M*Math.sin(G)),k.fillStyle=T,k.fill()}}}),k.restore()}function u(){var c=xe(n.linkDirectionalParticles),h=xe(n.linkDirectionalParticleSpeed),p=xe(n.linkDirectionalParticleOffset),v=xe(n.linkDirectionalParticleWidth),m=xe(n.linkVisibility),_=xe(n.linkDirectionalParticleColor||n.linkColor),y=n.ctx;y.save(),n.graphData.links.filter(m).forEach(function(k){var S=c(k);if(!(!k.hasOwnProperty("__photons")||!k.__photons.length)){var E=k.source,w=k.target;if(!(!E||!w||!E.hasOwnProperty("x")||!w.hasOwnProperty("x"))){var b=h(k),N=Math.abs(p(k)),C=k.__photons||[],P=Math.max(0,v(k)/2)/Math.sqrt(n.globalScale),T=_(k)||"rgba(0,0,0,0.28)";y.fillStyle=T;var M=k.__controlPoints?Eg(je,[E.x,E.y].concat(It(k.__controlPoints),[w.x,w.y])):null,z=0,D=!1;C.forEach(function(F){var V=!!F.__singleHop;if(F.hasOwnProperty("__progressRatio")||(F.__progressRatio=V?0:(z+N)/S),!V&&z++,F.__progressRatio+=b,F.__progressRatio>=1)if(!V)F.__progressRatio=F.__progressRatio%1;else{D=!0;return}var H=F.__progressRatio,Q=M?M.get(H):{x:E.x+(w.x-E.x)*H||0,y:E.y+(w.y-E.y)*H||0};n.linkDirectionalParticleCanvasObject?n.linkDirectionalParticleCanvasObject(Q.x,Q.y,k,y,n.globalScale):(y.beginPath(),y.arc(Q.x,Q.y,P,0,2*Math.PI,!1),y.fill())}),D&&(k.__photons=k.__photons.filter(function(F){return!F.__singleHop||F.__progressRatio<=1}))}}}),y.restore()}},emitParticle:function(n,r){return r&&(!r.__photons&&(r.__photons=[]),r.__photons.push({__singleHop:!0})),this}},stateInit:function(){return{forceLayout:eE().force("link",V3()).force("charge",tE()).force("center",GP()).force("dagRadial",null).stop(),engineRunning:!1}},init:function(n,r){r.ctx=n},update:function(n,r){n.engineRunning=!1,n.onUpdate(),n.nodeAutoColorBy!==null&&Lg(n.graphData.nodes,xe(n.nodeAutoColorBy),n.nodeColor),n.linkAutoColorBy!==null&&Lg(n.graphData.links,xe(n.linkAutoColorBy),n.linkColor),n.graphData.links.forEach(function(_){_.source=_[n.linkSource],_.target=_[n.linkTarget]}),n.forceLayout.stop().alpha(1).nodes(n.graphData.nodes);var i=n.forceLayout.force("link");i&&i.id(function(_){return _[n.nodeId]}).links(n.graphData.links);var s=n.dagMode&&IE(n.graphData,function(_){return _[n.nodeId]},{nodeFilter:n.dagNodeFilter,onLoopError:n.onDagError||void 0}),a=Math.max.apply(Math,It(Object.values(s||[]))),u=n.dagLevelDistance||n.graphData.nodes.length/(a||1)*DE*(["radialin","radialout"].indexOf(n.dagMode)!==-1?.7:1);if(["lr","rl","td","bu"].includes(r.dagMode)){var c=["lr","rl"].includes(r.dagMode)?"fx":"fy";n.graphData.nodes.filter(n.dagNodeFilter).forEach(function(_){return delete _[c]})}if(["lr","rl","td","bu"].includes(n.dagMode)){var h=["rl","bu"].includes(n.dagMode),p=function(y){return(s[y[n.nodeId]]-a/2)*u*(h?-1:1)},v=["lr","rl"].includes(n.dagMode)?"fx":"fy";n.graphData.nodes.filter(n.dagNodeFilter).forEach(function(_){return _[v]=p(_)})}n.forceLayout.force("dagRadial",["radialin","radialout"].indexOf(n.dagMode)!==-1?nE(function(_){var y=s[_[n.nodeId]]||-1;return(n.dagMode==="radialin"?a-y:y)*u}).strength(function(_){return n.dagNodeFilter(_)?1:0}):null);for(var m=0;m<n.warmupTicks&&!(n.d3AlphaMin>0&&n.forceLayout.alpha()<n.d3AlphaMin);m++)n.forceLayout.tick();this.resetCountdown(),n.onFinishUpdate()}});function gy(e,n){var r=e instanceof Array?e:[e],i=new n;return i._destructor&&i._destructor(),{linkProp:function(a){return{default:i[a](),onChange:function(c,h){r.forEach(function(p){return h[p][a](c)})},triggerUpdate:!1}},linkMethod:function(a){return function(u){for(var c=arguments.length,h=new Array(c>1?c-1:0),p=1;p<c;p++)h[p-1]=arguments[p];var v=[];return r.forEach(function(m){var _=u[m],y=_[a].apply(_,h);y!==_&&v.push(y)}),v.length?v[0]:this}}}}var FE=800,BE=4,UE=5,vy=gy("forceGraph",ml),$E=gy(["forceGraph","shadowGraph"],ml),HE=Object.assign.apply(Object,It(["nodeColor","nodeAutoColorBy","nodeCanvasObject","nodeCanvasObjectMode","linkColor","linkAutoColorBy","linkLineDash","linkWidth","linkCanvasObject","linkCanvasObjectMode","linkDirectionalArrowLength","linkDirectionalArrowColor","linkDirectionalArrowRelPos","linkDirectionalParticles","linkDirectionalParticleSpeed","linkDirectionalParticleOffset","linkDirectionalParticleWidth","linkDirectionalParticleColor","linkDirectionalParticleCanvasObject","dagMode","dagLevelDistance","dagNodeFilter","onDagError","d3AlphaMin","d3AlphaDecay","d3VelocityDecay","warmupTicks","cooldownTicks","cooldownTime","onEngineTick","onEngineStop"].map(function(e){return fs({},e,vy.linkProp(e))})).concat(It(["nodeRelSize","nodeId","nodeVal","nodeVisibility","linkSource","linkTarget","linkVisibility","linkCurvature"].map(function(e){return fs({},e,$E.linkProp(e))})))),ZE=Object.assign.apply(Object,It(["d3Force","d3ReheatSimulation","emitParticle"].map(function(e){return fs({},e,vy.linkMethod(e))})));function sc(e){if(e.canvas){var n=e.canvas.width,r=e.canvas.height;n===300&&r===150&&(n=r=0);var i=window.devicePixelRatio;n/=i,r/=i,[e.canvas,e.shadowCanvas].forEach(function(a){a.style.width="".concat(e.width,"px"),a.style.height="".concat(e.height,"px"),a.width=e.width*i,a.height=e.height*i,!n&&!r&&a.getContext("2d").scale(i,i)});var s=ln(e.canvas).k;e.zoom.translateBy(e.zoom.__baseElem,(e.width-n)/2/s,(e.height-r)/2/s),e.needsRedraw=!0}}function _y(e){var n=window.devicePixelRatio;e.setTransform(n,0,0,n,0,0)}function zg(e,n,r){e.save(),_y(e),e.clearRect(0,0,n,r),e.restore()}var WE=Dh({props:ii({width:{default:window.innerWidth,onChange:function(n,r){return sc(r)},triggerUpdate:!1},height:{default:window.innerHeight,onChange:function(n,r){return sc(r)},triggerUpdate:!1},graphData:{default:{nodes:[],links:[]},onChange:function(n,r){[n.nodes,n.links].every(function(s){return(s||[]).every(function(a){return!a.hasOwnProperty("__indexColor")})})&&r.colorTracker.reset(),[{type:"Node",objs:n.nodes},{type:"Link",objs:n.links}].forEach(i),r.forceGraph.graphData(n),r.shadowGraph.graphData(n);function i(s){var a=s.type,u=s.objs;u.filter(function(c){if(!c.hasOwnProperty("__indexColor"))return!0;var h=r.colorTracker.lookup(c.__indexColor);return!h||!h.hasOwnProperty("d")||h.d!==c}).forEach(function(c){c.__indexColor=r.colorTracker.register({type:a,d:c})})}},triggerUpdate:!1},backgroundColor:{onChange:function(n,r){r.canvas&&n&&(r.canvas.style.background=n)},triggerUpdate:!1},nodeLabel:{default:"name",triggerUpdate:!1},nodePointerAreaPaint:{onChange:function(n,r){r.shadowGraph.nodeCanvasObject(n?function(i,s,a){return n(i,i.__indexColor,s,a)}:null),r.flushShadowCanvas&&r.flushShadowCanvas()},triggerUpdate:!1},linkPointerAreaPaint:{onChange:function(n,r){r.shadowGraph.linkCanvasObject(n?function(i,s,a){return n(i,i.__indexColor,s,a)}:null),r.flushShadowCanvas&&r.flushShadowCanvas()},triggerUpdate:!1},linkLabel:{default:"name",triggerUpdate:!1},linkHoverPrecision:{default:4,triggerUpdate:!1},minZoom:{default:.01,onChange:function(n,r){r.zoom.scaleExtent([n,r.zoom.scaleExtent()[1]])},triggerUpdate:!1},maxZoom:{default:1e3,onChange:function(n,r){r.zoom.scaleExtent([r.zoom.scaleExtent()[0],n])},triggerUpdate:!1},enableNodeDrag:{default:!0,triggerUpdate:!1},enableZoomInteraction:{default:!0,triggerUpdate:!1},enablePanInteraction:{default:!0,triggerUpdate:!1},enableZoomPanInteraction:{default:!0,triggerUpdate:!1},enablePointerInteraction:{default:!0,onChange:function(n,r){r.hoverObj=null},triggerUpdate:!1},autoPauseRedraw:{default:!0,triggerUpdate:!1},onNodeDrag:{default:function(){},triggerUpdate:!1},onNodeDragEnd:{default:function(){},triggerUpdate:!1},onNodeClick:{triggerUpdate:!1},onNodeRightClick:{triggerUpdate:!1},onNodeHover:{triggerUpdate:!1},onLinkClick:{triggerUpdate:!1},onLinkRightClick:{triggerUpdate:!1},onLinkHover:{triggerUpdate:!1},onBackgroundClick:{triggerUpdate:!1},onBackgroundRightClick:{triggerUpdate:!1},showPointerCursor:{default:!0,triggerUpdate:!1},onZoom:{triggerUpdate:!1},onZoomEnd:{triggerUpdate:!1},onRenderFramePre:{triggerUpdate:!1},onRenderFramePost:{triggerUpdate:!1}},HE),aliases:{stopAnimation:"pauseAnimation"},methods:ii({graph2ScreenCoords:function(n,r,i){var s=ln(n.canvas);return{x:r*s.k+s.x,y:i*s.k+s.y}},screen2GraphCoords:function(n,r,i){var s=ln(n.canvas);return{x:(r-s.x)/s.k,y:(i-s.y)/s.k}},centerAt:function(n,r,i,s){if(!n.canvas)return null;if(r!==void 0||i!==void 0){var a=Object.assign({},r!==void 0?{x:r}:{},i!==void 0?{y:i}:{});return s?n.tweenGroup.add(new ng(u()).to(a,s).easing(Ar.Quadratic.Out).onUpdate(c).start()):c(a),this}return u();function u(){var h=ln(n.canvas);return{x:(n.width/2-h.x)/h.k,y:(n.height/2-h.y)/h.k}}function c(h){var p=h.x,v=h.y;n.zoom.translateTo(n.zoom.__baseElem,p===void 0?u().x:p,v===void 0?u().y:v),n.needsRedraw=!0}},zoom:function(n,r,i){if(!n.canvas)return null;if(r!==void 0)return i?n.tweenGroup.add(new ng({k:s()}).to({k:r},i).easing(Ar.Quadratic.Out).onUpdate(function(u){var c=u.k;return a(c)}).start()):a(r),this;return s();function s(){return ln(n.canvas).k}function a(u){n.zoom.scaleTo(n.zoom.__baseElem,u),n.needsRedraw=!0}},zoomToFit:function(n){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:10,s=arguments.length,a=new Array(s>3?s-3:0),u=3;u<s;u++)a[u-3]=arguments[u];var c=this.getGraphBbox.apply(this,a);if(c){var h={x:(c.x[0]+c.x[1])/2,y:(c.y[0]+c.y[1])/2},p=Math.max(1e-12,Math.min(1e12,(n.width-i*2)/(c.x[1]-c.x[0]),(n.height-i*2)/(c.y[1]-c.y[0])));this.centerAt(h.x,h.y,r),this.zoom(p,r)}return this},getGraphBbox:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){return!0},i=xe(n.nodeVal),s=function(c){return Math.sqrt(Math.max(0,i(c)||1))*n.nodeRelSize},a=n.graphData.nodes.filter(r).map(function(u){return{x:u.x,y:u.y,r:s(u)}});return a.length?{x:[Qm(a,function(u){return u.x-u.r}),Xm(a,function(u){return u.x+u.r})],y:[Qm(a,function(u){return u.y-u.r}),Xm(a,function(u){return u.y+u.r})]}:null},pauseAnimation:function(n){return n.animationFrameRequestId&&(cancelAnimationFrame(n.animationFrameRequestId),n.animationFrameRequestId=null),this},resumeAnimation:function(n){return n.animationFrameRequestId||this._animationCycle(),this},_destructor:function(){this.pauseAnimation(),this.graphData({nodes:[],links:[]})}},ZE),stateInit:function(){return{lastSetZoom:1,zoom:nC(),forceGraph:new ml,shadowGraph:new ml().cooldownTicks(0).nodeColor("__indexColor").linkColor("__indexColor").isShadow(!0),colorTracker:new jP,tweenGroup:new B_}},init:function(n,r){var i=this;n.innerHTML="";var s=document.createElement("div");s.classList.add("force-graph-container"),s.style.position="relative",n.appendChild(s),r.canvas=document.createElement("canvas"),r.backgroundColor&&(r.canvas.style.background=r.backgroundColor),s.appendChild(r.canvas),r.shadowCanvas=document.createElement("canvas");var a=r.canvas.getContext("2d"),u=r.shadowCanvas.getContext("2d",{willReadFrequently:!0}),c={x:-1e12,y:-1e12},h=function(){var m=null,_=window.devicePixelRatio,y=c.x>0&&c.y>0?u.getImageData(c.x*_,c.y*_,1,1):null;return y&&(m=r.colorTracker.lookup(y.data)),m};Rt(r.canvas).call(hS().subject(function(){if(!r.enableNodeDrag)return null;var v=h();return v&&v.type==="Node"?v.d:null}).on("start",function(v){var m=v.subject;m.__initialDragPos={x:m.x,y:m.y,fx:m.fx,fy:m.fy},v.active||(m.fx=m.x,m.fy=m.y),r.canvas.classList.add("grabbable")}).on("drag",function(v){var m=v.subject,_=m.__initialDragPos,y=v,k=ln(r.canvas).k,S={x:_.x+(y.x-_.x)/k-m.x,y:_.y+(y.y-_.y)/k-m.y};["x","y"].forEach(function(E){return m["f".concat(E)]=m[E]=_[E]+(y[E]-_[E])/k}),!(!m.__dragged&&UE>=Math.sqrt(sC(["x","y"].map(function(E){return Math.pow(v[E]-_[E],2)}))))&&(r.forceGraph.d3AlphaTarget(.3).resetCountdown(),r.isPointerDragging=!0,m.__dragged=!0,r.onNodeDrag(m,S))}).on("end",function(v){var m=v.subject,_=m.__initialDragPos,y={x:m.x-_.x,y:m.y-_.y};_.fx===void 0&&(m.fx=void 0),_.fy===void 0&&(m.fy=void 0),delete m.__initialDragPos,r.forceGraph.d3AlphaTarget()&&r.forceGraph.d3AlphaTarget(0).resetCountdown(),r.canvas.classList.remove("grabbable"),r.isPointerDragging=!1,m.__dragged&&(delete m.__dragged,r.onNodeDragEnd(m,y))})),r.zoom(r.zoom.__baseElem=Rt(r.canvas)),r.zoom.__baseElem.on("dblclick.zoom",null),r.zoom.filter(function(v){return!v.button&&r.enableZoomPanInteraction&&(v.type!=="wheel"||xe(r.enableZoomInteraction)(v))&&(v.type==="wheel"||xe(r.enablePanInteraction)(v))}).on("zoom",function(v){var m=v.transform;[a,u].forEach(function(_){_y(_),_.translate(m.x,m.y),_.scale(m.k,m.k)}),r.isPointerDragging=!0,r.onZoom&&r.onZoom(ii(ii({},m),i.centerAt())),r.needsRedraw=!0}).on("end",function(v){r.isPointerDragging=!1,r.onZoomEnd&&r.onZoomEnd(ii(ii({},v.transform),i.centerAt()))}),sc(r),r.forceGraph.onNeedsRedraw(function(){return r.needsRedraw=!0}).onFinishUpdate(function(){ln(r.canvas).k===r.lastSetZoom&&r.graphData.nodes.length&&(r.zoom.scaleTo(r.zoom.__baseElem,r.lastSetZoom=BE/Math.cbrt(r.graphData.nodes.length)),r.needsRedraw=!0)}),r.tooltip=new qP(s),["pointermove","pointerdown"].forEach(function(v){return s.addEventListener(v,function(m){v==="pointerdown"&&(r.isPointerPressed=!0,r.pointerDownEvent=m),!r.isPointerDragging&&m.type==="pointermove"&&r.onBackgroundClick&&(m.pressure>0||r.isPointerPressed)&&(m.pointerType==="mouse"||m.movementX===void 0||[m.movementX,m.movementY].some(function(k){return Math.abs(k)>1}))&&(r.isPointerDragging=!0);var _=y(s);c.x=m.pageX-_.left,c.y=m.pageY-_.top;function y(k){var S=k.getBoundingClientRect(),E=window.pageXOffset||document.documentElement.scrollLeft,w=window.pageYOffset||document.documentElement.scrollTop;return{top:S.top+w,left:S.left+E}}},{passive:!0})}),s.addEventListener("pointerup",function(v){if(r.isPointerPressed){if(r.isPointerPressed=!1,r.isPointerDragging){r.isPointerDragging=!1;return}var m=[v,r.pointerDownEvent];requestAnimationFrame(function(){if(v.button===0)if(r.hoverObj){var _=r["on".concat(r.hoverObj.type,"Click")];_&&_.apply(void 0,[r.hoverObj.d].concat(m))}else r.onBackgroundClick&&r.onBackgroundClick.apply(r,m);if(v.button===2)if(r.hoverObj){var y=r["on".concat(r.hoverObj.type,"RightClick")];y&&y.apply(void 0,[r.hoverObj.d].concat(m))}else r.onBackgroundRightClick&&r.onBackgroundRightClick.apply(r,m)})}},{passive:!0}),s.addEventListener("contextmenu",function(v){return!r.onBackgroundRightClick&&!r.onNodeRightClick&&!r.onLinkRightClick?!0:(v.preventDefault(),!1)}),r.forceGraph(a),r.shadowGraph(u);var p=zC(function(){zg(u,r.width,r.height),r.shadowGraph.linkWidth(function(m){return xe(r.linkWidth)(m)+r.linkHoverPrecision});var v=ln(r.canvas);r.shadowGraph.globalScale(v.k).tickFrame()},FE);r.flushShadowCanvas=p.flush,(this._animationCycle=function v(){var m=!r.autoPauseRedraw||!!r.needsRedraw||r.forceGraph.isEngineRunning()||r.graphData.links.some(function(N){return N.__photons&&N.__photons.length});if(r.needsRedraw=!1,r.enablePointerInteraction){var _=r.isPointerDragging?null:h();if(_!==r.hoverObj){var y=r.hoverObj,k=y?y.type:null,S=_?_.type:null;if(k&&k!==S){var E=r["on".concat(k,"Hover")];E&&E(null,y.d)}if(S){var w=r["on".concat(S,"Hover")];w&&w(_.d,k===S?y.d:null)}r.tooltip.content(_&&xe(r["".concat(_.type.toLowerCase(),"Label")])(_.d)||null),r.canvas.classList[(_&&r["on".concat(S,"Click")]||!_&&r.onBackgroundClick)&&xe(r.showPointerCursor)(_==null?void 0:_.d)?"add":"remove"]("clickable"),r.hoverObj=_}m&&p()}if(m){zg(a,r.width,r.height);var b=ln(r.canvas).k;r.onRenderFramePre&&r.onRenderFramePre(a,b),r.forceGraph.globalScale(b).tickFrame(),r.onRenderFramePost&&r.onRenderFramePost(a,b)}r.tweenGroup.update(),r.animationFrameRequestId=requestAnimationFrame(v)})()},update:function(n){}}),yy={exports:{}},VE="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",qE=VE,GE=qE;function xy(){}function wy(){}wy.resetWarningCache=xy;var KE=function(){function e(i,s,a,u,c,h){if(h!==GE){var p=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw p.name="Invariant Violation",p}}e.isRequired=e;function n(){return e}var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:n,element:e,elementType:e,instanceOf:n,node:e,objectOf:n,oneOf:n,oneOfType:n,shape:n,exact:n,checkPropTypes:wy,resetWarningCache:xy};return r.PropTypes=r,r};yy.exports=KE();var YE=yy.exports;const I=Tf(YE),Fl={width:I.number,height:I.number,graphData:I.shape({nodes:I.arrayOf(I.object).isRequired,links:I.arrayOf(I.object).isRequired}),backgroundColor:I.string,nodeRelSize:I.number,nodeId:I.string,nodeLabel:I.oneOfType([I.string,I.func]),nodeVal:I.oneOfType([I.number,I.string,I.func]),nodeVisibility:I.oneOfType([I.bool,I.string,I.func]),nodeColor:I.oneOfType([I.string,I.func]),nodeAutoColorBy:I.oneOfType([I.string,I.func]),onNodeHover:I.func,onNodeClick:I.func,linkSource:I.string,linkTarget:I.string,linkLabel:I.oneOfType([I.string,I.func]),linkVisibility:I.oneOfType([I.bool,I.string,I.func]),linkColor:I.oneOfType([I.string,I.func]),linkAutoColorBy:I.oneOfType([I.string,I.func]),linkWidth:I.oneOfType([I.number,I.string,I.func]),linkCurvature:I.oneOfType([I.number,I.string,I.func]),linkDirectionalArrowLength:I.oneOfType([I.number,I.string,I.func]),linkDirectionalArrowColor:I.oneOfType([I.string,I.func]),linkDirectionalArrowRelPos:I.oneOfType([I.number,I.string,I.func]),linkDirectionalParticles:I.oneOfType([I.number,I.string,I.func]),linkDirectionalParticleSpeed:I.oneOfType([I.number,I.string,I.func]),linkDirectionalParticleOffset:I.oneOfType([I.number,I.string,I.func]),linkDirectionalParticleWidth:I.oneOfType([I.number,I.string,I.func]),linkDirectionalParticleColor:I.oneOfType([I.string,I.func]),onLinkHover:I.func,onLinkClick:I.func,dagMode:I.oneOf(["td","bu","lr","rl","zin","zout","radialin","radialout"]),dagLevelDistance:I.number,dagNodeFilter:I.func,onDagError:I.func,d3AlphaMin:I.number,d3AlphaDecay:I.number,d3VelocityDecay:I.number,warmupTicks:I.number,cooldownTicks:I.number,cooldownTime:I.number,onEngineTick:I.func,onEngineStop:I.func,getGraphBbox:I.func},by={zoomToFit:I.func,onNodeRightClick:I.func,onNodeDrag:I.func,onNodeDragEnd:I.func,onLinkRightClick:I.func,linkHoverPrecision:I.number,onBackgroundClick:I.func,onBackgroundRightClick:I.func,showPointerCursor:I.oneOfType([I.bool,I.func]),enablePointerInteraction:I.bool,enableNodeDrag:I.bool},Vh={showNavInfo:I.bool,nodeOpacity:I.number,nodeResolution:I.number,nodeThreeObject:I.oneOfType([I.object,I.string,I.func]),nodeThreeObjectExtend:I.oneOfType([I.bool,I.string,I.func]),nodePositionUpdate:I.func,linkOpacity:I.number,linkResolution:I.number,linkCurveRotation:I.oneOfType([I.number,I.string,I.func]),linkMaterial:I.oneOfType([I.object,I.string,I.func]),linkThreeObject:I.oneOfType([I.object,I.string,I.func]),linkThreeObjectExtend:I.oneOfType([I.bool,I.string,I.func]),linkPositionUpdate:I.func,linkDirectionalArrowResolution:I.number,linkDirectionalParticleResolution:I.number,linkDirectionalParticleThreeObject:I.oneOfType([I.object,I.string,I.func]),forceEngine:I.oneOf(["d3","ngraph"]),ngraphPhysics:I.object,numDimensions:I.oneOf([1,2,3])},XE=Object.assign({},Fl,by,{linkLineDash:I.oneOfType([I.arrayOf(I.number),I.string,I.func]),nodeCanvasObjectMode:I.oneOfType([I.string,I.func]),nodeCanvasObject:I.func,nodePointerAreaPaint:I.func,linkCanvasObjectMode:I.oneOfType([I.string,I.func]),linkCanvasObject:I.func,linkPointerAreaPaint:I.func,linkDirectionalParticleCanvasObject:I.func,autoPauseRedraw:I.bool,minZoom:I.number,maxZoom:I.number,enableZoomInteraction:I.oneOfType([I.bool,I.func]),enablePanInteraction:I.oneOfType([I.bool,I.func]),onZoom:I.func,onZoomEnd:I.func,onRenderFramePre:I.func,onRenderFramePost:I.func});Object.assign({},Fl,by,Vh,{enableNavigationControls:I.bool,controlType:I.oneOf(["trackball","orbit","fly"]),rendererConfig:I.object,extraRenderers:I.arrayOf(I.shape({render:I.func.isRequired}))});Object.assign({},Fl,Vh,{nodeDesc:I.oneOfType([I.string,I.func]),linkDesc:I.oneOfType([I.string,I.func])});Object.assign({},Fl,Vh,{markerAttrs:I.object,yOffset:I.number,glScale:I.number});const qh=Nk(WE,{methodNames:["emitParticle","d3Force","d3ReheatSimulation","stopAnimation","pauseAnimation","resumeAnimation","centerAt","zoom","zoomToFit","getGraphBbox","screen2GraphCoords","graph2ScreenCoords"]});qh.displayName="ForceGraph2D";qh.propTypes=XE;const QE=()=>{const[e,n]=A.useState({nodes:[],links:[]}),[r,i]=A.useState(!0),s=gn(),a=A.useRef(),u=A.useRef(null),[c,h]=A.useState({width:800,height:600});A.useEffect(()=>{const y=()=>{u.current&&h({width:u.current.offsetWidth,height:u.current.offsetHeight})};return window.addEventListener("resize",y),y(),()=>window.removeEventListener("resize",y)},[]),A.useEffect(()=>{(async()=>{try{const S=await(await fetch("/api/coherence/feed?limit=30")).json();if(!S.stories||S.stories.length===0){i(!1);return}const w=S.stories.slice(0,20).map(D=>fetch(`/api/stories/${D.story_id}`).then(F=>F.json()).catch(F=>(console.error(`Failed to fetch story ${D.story_id}:`,F),null))),N=(await Promise.all(w)).filter(D=>D&&D.story),C=new Map,P=new Map;N.forEach(D=>{var H;const F=D.story;P.set(F.id,F),(((H=F.entities)==null?void 0:H.people)||[]).forEach(Q=>{const R=Q.canonical_id||Q.id,G=Q.canonical_name||Q.name;R&&G&&(C.has(R)||C.set(R,{person:{id:R,name:G,canonical_id:Q.canonical_id,wikidata_thumbnail:Q.wikidata_thumbnail},storyIds:[]}),C.get(R).storyIds.push(F.id))})});const T=[],M=[],z=new Set;C.forEach(({person:D,storyIds:F},V)=>{if(F.length>=1){const Q=Math.min(F.length*6,30);T.push({id:V,name:D.name,type:"person",val:22+Q,color:"#a78bfa",imgUrl:D.wikidata_thumbnail,data:D,storyIds:F}),z.add(V)}}),P.forEach((D,F)=>{T.push({id:F,name:D.title,type:"story",val:1,color:"#3b82f6",data:D}),z.add(F)}),C.forEach(({storyIds:D},F)=>{z.has(F)&&D.forEach(V=>{z.has(V)&&M.push({source:F,target:V,color:"rgba(167, 139, 250, 0.2)",width:1})})}),T.forEach(D=>{if(D.imgUrl){const F=new Image;F.src=D.imgUrl,F.onload=()=>{D.img=F}}}),n({nodes:T,links:M}),console.log(`GraphPage: Loaded ${T.length} nodes (${Array.from(C.keys()).length} people, ${P.size} stories) and ${M.length} links`)}catch(k){console.error("Error fetching graph data:",k)}finally{i(!1)}})()},[]);const p=A.useCallback(y=>{y.type==="story"&&s(`/story/${y.id}`)},[s]);A.useEffect(()=>{if(a.current&&e.nodes.length>0){const y=a.current;y.d3Force("charge").strength(k=>k.type==="person"?-800:-100),y.d3Force("link").distance(()=>120).strength(.8)}},[e.nodes]);const v=A.useCallback((y,k,S)=>{if(typeof y.x!="number"||typeof y.y!="number"||!isFinite(y.x)||!isFinite(y.y))return;const E=y.name,w=12/S,b=1;if(k.globalAlpha=b,y.type==="person"){const N=y.val;if(y.img){k.save(),k.beginPath(),k.arc(y.x,y.y,N,0,2*Math.PI,!1),k.fillStyle=y.color||"#a78bfa",k.fill(),k.clip();try{const C=y.img.width,P=y.img.height,T=N*2,M=Math.max(T/C,T/P),z=C*M,D=P*M,F=(T-z)/2,V=(T-D)/2;k.drawImage(y.img,y.x-N+F,y.y-N+V,z,D)}catch{k.fillStyle="#a78bfa",k.fill()}k.restore()}else k.beginPath(),k.arc(y.x,y.y,N,0,2*Math.PI,!1),k.fillStyle=y.color||"#a78bfa",k.fill();k.beginPath(),k.arc(y.x,y.y,N,0,2*Math.PI,!1),k.lineWidth=1.5/S,k.strokeStyle="#8b5cf6",k.stroke(),k.font=`${w}px Sans-Serif`,k.textAlign="center",k.textBaseline="middle",k.fillStyle="rgba(255, 255, 255, 0.9)",k.fillText(E,y.x,y.y+N+w+2)}else if(y.type==="story"){k.font=`${w*.7}px Sans-Serif`,k.textAlign="center",k.textBaseline="middle";const N=150/S,C=w*.7*1.2,P=E.split(" "),T=[];let M="";for(const R of P){const G=M+(M?" ":"")+R;k.measureText(G).width>N&&M?(T.push(M),M=R):M=G}M&&T.push(M);const z=T.slice(0,2);T.length>2&&(z[1]=z[1].substring(0,z[1].length-3)+"...");const D=4/S;let F=0;for(const R of z){const G=k.measureText(R);F=Math.max(F,G.width)}const V=F+D*2,H=z.length*C+D*2;k.fillStyle="rgba(30, 58, 138, 0.2)",k.fillRect(y.x-V/2,y.y-H/2,V,H),k.strokeStyle="rgba(59, 130, 246, 0.3)",k.lineWidth=.5/S,k.strokeRect(y.x-V/2,y.y-H/2,V,H),k.fillStyle="rgba(156, 163, 175, 0.7)";let Q=y.y-(z.length-1)*C/2;for(const R of z)k.fillText(R,y.x,Q),Q+=C}k.globalAlpha=1},[e.nodes]),m=A.useCallback(y=>y.color||"rgba(167, 139, 250, 0.2)",[]),_=A.useCallback(y=>y.width||1,[]);return d.jsxs("div",{className:"h-screen flex flex-col bg-gray-900 text-white",children:[d.jsxs("div",{className:"p-4 border-b border-gray-800 flex justify-between items-center z-10 bg-gray-900",children:[d.jsx("h1",{className:"text-xl font-bold",children:"Knowledge Graph: People & Stories"}),d.jsx("div",{className:"text-sm text-gray-400",children:d.jsx("span",{children:"People (circles)  Stories (text boxes)  Click story to view details"})})]}),d.jsx("div",{ref:u,className:"flex-1 relative overflow-hidden",style:{minHeight:"500px"},children:r?d.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:d.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-white"})}):e.nodes.length===0?d.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-gray-400",children:"No data found to visualize."}):d.jsx(qh,{ref:a,width:c.width,height:c.height,graphData:e,nodeCanvasObject:v,nodePointerAreaPaint:(y,k,S)=>{S.fillStyle=k,y.type==="person"?(S.beginPath(),S.arc(y.x,y.y,y.val,0,2*Math.PI,!1),S.fill()):S.fillRect(y.x-120/2,y.y-40/2,120,40)},onNodeClick:p,backgroundColor:"#111827",linkColor:m,linkWidth:_,d3AlphaDecay:.02,d3VelocityDecay:.3,cooldownTicks:100,nodeRelSize:1})})]})};function ky(e,n){const r=A.useRef(n);A.useEffect(function(){n!==r.current&&e.attributionControl!=null&&(r.current!=null&&e.attributionControl.removeAttribution(r.current),n!=null&&e.attributionControl.addAttribution(n)),r.current=n},[e,n])}const JE=1;function eT(e){return Object.freeze({__version:JE,map:e})}function Ny(e,n){return Object.freeze({...e,...n})}const Sy=A.createContext(null),jy=Sy.Provider;function Bl(){const e=A.useContext(Sy);if(e==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return e}function Cy(e){function n(r,i){const{instance:s,context:a}=e(r).current;return A.useImperativeHandle(i,()=>s),r.children==null?null:Rr.createElement(jy,{value:a},r.children)}return A.forwardRef(n)}function tT(e){function n(r,i){const[s,a]=A.useState(!1),{instance:u}=e(r,a).current;A.useImperativeHandle(i,()=>u),A.useEffect(function(){s&&u.update()},[u,s,r.children]);const c=u._contentNode;return c?qv.createPortal(r.children,c):null}return A.forwardRef(n)}function nT(e){function n(r,i){const{instance:s}=e(r).current;return A.useImperativeHandle(i,()=>s),null}return A.forwardRef(n)}function Gh(e,n){const r=A.useRef();A.useEffect(function(){return n!=null&&e.instance.on(n),r.current=n,function(){r.current!=null&&e.instance.off(r.current),r.current=null}},[e,n])}function Ul(e,n){const r=e.pane??n.pane;return r?{...e,pane:r}:e}function rT(e,n){return function(i,s){const a=Bl(),u=e(Ul(i,a),a);return ky(a.map,i.attribution),Gh(u.current,i.eventHandlers),n(u.current,a,i,s),u}}var Pf={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(e,n){(function(r,i){i(n)})(e1,function(r){var i="1.9.4";function s(o){var l,f,g,x;for(f=1,g=arguments.length;f<g;f++){x=arguments[f];for(l in x)o[l]=x[l]}return o}var a=Object.create||function(){function o(){}return function(l){return o.prototype=l,new o}}();function u(o,l){var f=Array.prototype.slice;if(o.bind)return o.bind.apply(o,f.call(arguments,1));var g=f.call(arguments,2);return function(){return o.apply(l,g.length?g.concat(f.call(arguments)):arguments)}}var c=0;function h(o){return"_leaflet_id"in o||(o._leaflet_id=++c),o._leaflet_id}function p(o,l,f){var g,x,j,O;return O=function(){g=!1,x&&(j.apply(f,x),x=!1)},j=function(){g?x=arguments:(o.apply(f,arguments),setTimeout(O,l),g=!0)},j}function v(o,l,f){var g=l[1],x=l[0],j=g-x;return o===g&&f?o:((o-x)%j+j)%j+x}function m(){return!1}function _(o,l){if(l===!1)return o;var f=Math.pow(10,l===void 0?6:l);return Math.round(o*f)/f}function y(o){return o.trim?o.trim():o.replace(/^\s+|\s+$/g,"")}function k(o){return y(o).split(/\s+/)}function S(o,l){Object.prototype.hasOwnProperty.call(o,"options")||(o.options=o.options?a(o.options):{});for(var f in l)o.options[f]=l[f];return o.options}function E(o,l,f){var g=[];for(var x in o)g.push(encodeURIComponent(f?x.toUpperCase():x)+"="+encodeURIComponent(o[x]));return(!l||l.indexOf("?")===-1?"?":"&")+g.join("&")}var w=/\{ *([\w_ -]+) *\}/g;function b(o,l){return o.replace(w,function(f,g){var x=l[g];if(x===void 0)throw new Error("No value provided for variable "+f);return typeof x=="function"&&(x=x(l)),x})}var N=Array.isArray||function(o){return Object.prototype.toString.call(o)==="[object Array]"};function C(o,l){for(var f=0;f<o.length;f++)if(o[f]===l)return f;return-1}var P="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function T(o){return window["webkit"+o]||window["moz"+o]||window["ms"+o]}var M=0;function z(o){var l=+new Date,f=Math.max(0,16-(l-M));return M=l+f,window.setTimeout(o,f)}var D=window.requestAnimationFrame||T("RequestAnimationFrame")||z,F=window.cancelAnimationFrame||T("CancelAnimationFrame")||T("CancelRequestAnimationFrame")||function(o){window.clearTimeout(o)};function V(o,l,f){if(f&&D===z)o.call(l);else return D.call(window,u(o,l))}function H(o){o&&F.call(window,o)}var Q={__proto__:null,extend:s,create:a,bind:u,get lastId(){return c},stamp:h,throttle:p,wrapNum:v,falseFn:m,formatNum:_,trim:y,splitWords:k,setOptions:S,getParamString:E,template:b,isArray:N,indexOf:C,emptyImageUrl:P,requestFn:D,cancelFn:F,requestAnimFrame:V,cancelAnimFrame:H};function R(){}R.extend=function(o){var l=function(){S(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},f=l.__super__=this.prototype,g=a(f);g.constructor=l,l.prototype=g;for(var x in this)Object.prototype.hasOwnProperty.call(this,x)&&x!=="prototype"&&x!=="__super__"&&(l[x]=this[x]);return o.statics&&s(l,o.statics),o.includes&&(G(o.includes),s.apply(null,[g].concat(o.includes))),s(g,o),delete g.statics,delete g.includes,g.options&&(g.options=f.options?a(f.options):{},s(g.options,o.options)),g._initHooks=[],g.callInitHooks=function(){if(!this._initHooksCalled){f.callInitHooks&&f.callInitHooks.call(this),this._initHooksCalled=!0;for(var j=0,O=g._initHooks.length;j<O;j++)g._initHooks[j].call(this)}},l},R.include=function(o){var l=this.prototype.options;return s(this.prototype,o),o.options&&(this.prototype.options=l,this.mergeOptions(o.options)),this},R.mergeOptions=function(o){return s(this.prototype.options,o),this},R.addInitHook=function(o){var l=Array.prototype.slice.call(arguments,1),f=typeof o=="function"?o:function(){this[o].apply(this,l)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(f),this};function G(o){if(!(typeof L>"u"||!L||!L.Mixin)){o=N(o)?o:[o];for(var l=0;l<o.length;l++)o[l]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var W={on:function(o,l,f){if(typeof o=="object")for(var g in o)this._on(g,o[g],l);else{o=k(o);for(var x=0,j=o.length;x<j;x++)this._on(o[x],l,f)}return this},off:function(o,l,f){if(!arguments.length)delete this._events;else if(typeof o=="object")for(var g in o)this._off(g,o[g],l);else{o=k(o);for(var x=arguments.length===1,j=0,O=o.length;j<O;j++)x?this._off(o[j]):this._off(o[j],l,f)}return this},_on:function(o,l,f,g){if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}if(this._listens(o,l,f)===!1){f===this&&(f=void 0);var x={fn:l,ctx:f};g&&(x.once=!0),this._events=this._events||{},this._events[o]=this._events[o]||[],this._events[o].push(x)}},_off:function(o,l,f){var g,x,j;if(this._events&&(g=this._events[o],!!g)){if(arguments.length===1){if(this._firingCount)for(x=0,j=g.length;x<j;x++)g[x].fn=m;delete this._events[o];return}if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}var O=this._listens(o,l,f);if(O!==!1){var B=g[O];this._firingCount&&(B.fn=m,this._events[o]=g=g.slice()),g.splice(O,1)}}},fire:function(o,l,f){if(!this.listens(o,f))return this;var g=s({},l,{type:o,target:this,sourceTarget:l&&l.sourceTarget||this});if(this._events){var x=this._events[o];if(x){this._firingCount=this._firingCount+1||1;for(var j=0,O=x.length;j<O;j++){var B=x[j],$=B.fn;B.once&&this.off(o,$,B.ctx),$.call(B.ctx||this,g)}this._firingCount--}}return f&&this._propagateEvent(g),this},listens:function(o,l,f,g){typeof o!="string"&&console.warn('"string" type argument expected');var x=l;typeof l!="function"&&(g=!!l,x=void 0,f=void 0);var j=this._events&&this._events[o];if(j&&j.length&&this._listens(o,x,f)!==!1)return!0;if(g){for(var O in this._eventParents)if(this._eventParents[O].listens(o,l,f,g))return!0}return!1},_listens:function(o,l,f){if(!this._events)return!1;var g=this._events[o]||[];if(!l)return!!g.length;f===this&&(f=void 0);for(var x=0,j=g.length;x<j;x++)if(g[x].fn===l&&g[x].ctx===f)return x;return!1},once:function(o,l,f){if(typeof o=="object")for(var g in o)this._on(g,o[g],l,!0);else{o=k(o);for(var x=0,j=o.length;x<j;x++)this._on(o[x],l,f,!0)}return this},addEventParent:function(o){return this._eventParents=this._eventParents||{},this._eventParents[h(o)]=o,this},removeEventParent:function(o){return this._eventParents&&delete this._eventParents[h(o)],this},_propagateEvent:function(o){for(var l in this._eventParents)this._eventParents[l].fire(o.type,s({layer:o.target,propagatedFrom:o.target},o),!0)}};W.addEventListener=W.on,W.removeEventListener=W.clearAllEventListeners=W.off,W.addOneTimeEventListener=W.once,W.fireEvent=W.fire,W.hasEventListeners=W.listens;var ee=R.extend(W);function U(o,l,f){this.x=f?Math.round(o):o,this.y=f?Math.round(l):l}var K=Math.trunc||function(o){return o>0?Math.floor(o):Math.ceil(o)};U.prototype={clone:function(){return new U(this.x,this.y)},add:function(o){return this.clone()._add(Z(o))},_add:function(o){return this.x+=o.x,this.y+=o.y,this},subtract:function(o){return this.clone()._subtract(Z(o))},_subtract:function(o){return this.x-=o.x,this.y-=o.y,this},divideBy:function(o){return this.clone()._divideBy(o)},_divideBy:function(o){return this.x/=o,this.y/=o,this},multiplyBy:function(o){return this.clone()._multiplyBy(o)},_multiplyBy:function(o){return this.x*=o,this.y*=o,this},scaleBy:function(o){return new U(this.x*o.x,this.y*o.y)},unscaleBy:function(o){return new U(this.x/o.x,this.y/o.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=K(this.x),this.y=K(this.y),this},distanceTo:function(o){o=Z(o);var l=o.x-this.x,f=o.y-this.y;return Math.sqrt(l*l+f*f)},equals:function(o){return o=Z(o),o.x===this.x&&o.y===this.y},contains:function(o){return o=Z(o),Math.abs(o.x)<=Math.abs(this.x)&&Math.abs(o.y)<=Math.abs(this.y)},toString:function(){return"Point("+_(this.x)+", "+_(this.y)+")"}};function Z(o,l,f){return o instanceof U?o:N(o)?new U(o[0],o[1]):o==null?o:typeof o=="object"&&"x"in o&&"y"in o?new U(o.x,o.y):new U(o,l,f)}function J(o,l){if(o)for(var f=l?[o,l]:o,g=0,x=f.length;g<x;g++)this.extend(f[g])}J.prototype={extend:function(o){var l,f;if(!o)return this;if(o instanceof U||typeof o[0]=="number"||"x"in o)l=f=Z(o);else if(o=re(o),l=o.min,f=o.max,!l||!f)return this;return!this.min&&!this.max?(this.min=l.clone(),this.max=f.clone()):(this.min.x=Math.min(l.x,this.min.x),this.max.x=Math.max(f.x,this.max.x),this.min.y=Math.min(l.y,this.min.y),this.max.y=Math.max(f.y,this.max.y)),this},getCenter:function(o){return Z((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,o)},getBottomLeft:function(){return Z(this.min.x,this.max.y)},getTopRight:function(){return Z(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(o){var l,f;return typeof o[0]=="number"||o instanceof U?o=Z(o):o=re(o),o instanceof J?(l=o.min,f=o.max):l=f=o,l.x>=this.min.x&&f.x<=this.max.x&&l.y>=this.min.y&&f.y<=this.max.y},intersects:function(o){o=re(o);var l=this.min,f=this.max,g=o.min,x=o.max,j=x.x>=l.x&&g.x<=f.x,O=x.y>=l.y&&g.y<=f.y;return j&&O},overlaps:function(o){o=re(o);var l=this.min,f=this.max,g=o.min,x=o.max,j=x.x>l.x&&g.x<f.x,O=x.y>l.y&&g.y<f.y;return j&&O},isValid:function(){return!!(this.min&&this.max)},pad:function(o){var l=this.min,f=this.max,g=Math.abs(l.x-f.x)*o,x=Math.abs(l.y-f.y)*o;return re(Z(l.x-g,l.y-x),Z(f.x+g,f.y+x))},equals:function(o){return o?(o=re(o),this.min.equals(o.getTopLeft())&&this.max.equals(o.getBottomRight())):!1}};function re(o,l){return!o||o instanceof J?o:new J(o,l)}function he(o,l){if(o)for(var f=l?[o,l]:o,g=0,x=f.length;g<x;g++)this.extend(f[g])}he.prototype={extend:function(o){var l=this._southWest,f=this._northEast,g,x;if(o instanceof fe)g=o,x=o;else if(o instanceof he){if(g=o._southWest,x=o._northEast,!g||!x)return this}else return o?this.extend(le(o)||ue(o)):this;return!l&&!f?(this._southWest=new fe(g.lat,g.lng),this._northEast=new fe(x.lat,x.lng)):(l.lat=Math.min(g.lat,l.lat),l.lng=Math.min(g.lng,l.lng),f.lat=Math.max(x.lat,f.lat),f.lng=Math.max(x.lng,f.lng)),this},pad:function(o){var l=this._southWest,f=this._northEast,g=Math.abs(l.lat-f.lat)*o,x=Math.abs(l.lng-f.lng)*o;return new he(new fe(l.lat-g,l.lng-x),new fe(f.lat+g,f.lng+x))},getCenter:function(){return new fe((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new fe(this.getNorth(),this.getWest())},getSouthEast:function(){return new fe(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(o){typeof o[0]=="number"||o instanceof fe||"lat"in o?o=le(o):o=ue(o);var l=this._southWest,f=this._northEast,g,x;return o instanceof he?(g=o.getSouthWest(),x=o.getNorthEast()):g=x=o,g.lat>=l.lat&&x.lat<=f.lat&&g.lng>=l.lng&&x.lng<=f.lng},intersects:function(o){o=ue(o);var l=this._southWest,f=this._northEast,g=o.getSouthWest(),x=o.getNorthEast(),j=x.lat>=l.lat&&g.lat<=f.lat,O=x.lng>=l.lng&&g.lng<=f.lng;return j&&O},overlaps:function(o){o=ue(o);var l=this._southWest,f=this._northEast,g=o.getSouthWest(),x=o.getNorthEast(),j=x.lat>l.lat&&g.lat<f.lat,O=x.lng>l.lng&&g.lng<f.lng;return j&&O},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(o,l){return o?(o=ue(o),this._southWest.equals(o.getSouthWest(),l)&&this._northEast.equals(o.getNorthEast(),l)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function ue(o,l){return o instanceof he?o:new he(o,l)}function fe(o,l,f){if(isNaN(o)||isNaN(l))throw new Error("Invalid LatLng object: ("+o+", "+l+")");this.lat=+o,this.lng=+l,f!==void 0&&(this.alt=+f)}fe.prototype={equals:function(o,l){if(!o)return!1;o=le(o);var f=Math.max(Math.abs(this.lat-o.lat),Math.abs(this.lng-o.lng));return f<=(l===void 0?1e-9:l)},toString:function(o){return"LatLng("+_(this.lat,o)+", "+_(this.lng,o)+")"},distanceTo:function(o){return oe.distance(this,le(o))},wrap:function(){return oe.wrapLatLng(this)},toBounds:function(o){var l=180*o/40075017,f=l/Math.cos(Math.PI/180*this.lat);return ue([this.lat-l,this.lng-f],[this.lat+l,this.lng+f])},clone:function(){return new fe(this.lat,this.lng,this.alt)}};function le(o,l,f){return o instanceof fe?o:N(o)&&typeof o[0]!="object"?o.length===3?new fe(o[0],o[1],o[2]):o.length===2?new fe(o[0],o[1]):null:o==null?o:typeof o=="object"&&"lat"in o?new fe(o.lat,"lng"in o?o.lng:o.lon,o.alt):l===void 0?null:new fe(o,l,f)}var te={latLngToPoint:function(o,l){var f=this.projection.project(o),g=this.scale(l);return this.transformation._transform(f,g)},pointToLatLng:function(o,l){var f=this.scale(l),g=this.transformation.untransform(o,f);return this.projection.unproject(g)},project:function(o){return this.projection.project(o)},unproject:function(o){return this.projection.unproject(o)},scale:function(o){return 256*Math.pow(2,o)},zoom:function(o){return Math.log(o/256)/Math.LN2},getProjectedBounds:function(o){if(this.infinite)return null;var l=this.projection.bounds,f=this.scale(o),g=this.transformation.transform(l.min,f),x=this.transformation.transform(l.max,f);return new J(g,x)},infinite:!1,wrapLatLng:function(o){var l=this.wrapLng?v(o.lng,this.wrapLng,!0):o.lng,f=this.wrapLat?v(o.lat,this.wrapLat,!0):o.lat,g=o.alt;return new fe(f,l,g)},wrapLatLngBounds:function(o){var l=o.getCenter(),f=this.wrapLatLng(l),g=l.lat-f.lat,x=l.lng-f.lng;if(g===0&&x===0)return o;var j=o.getSouthWest(),O=o.getNorthEast(),B=new fe(j.lat-g,j.lng-x),$=new fe(O.lat-g,O.lng-x);return new he(B,$)}},oe=s({},te,{wrapLng:[-180,180],R:6371e3,distance:function(o,l){var f=Math.PI/180,g=o.lat*f,x=l.lat*f,j=Math.sin((l.lat-o.lat)*f/2),O=Math.sin((l.lng-o.lng)*f/2),B=j*j+Math.cos(g)*Math.cos(x)*O*O,$=2*Math.atan2(Math.sqrt(B),Math.sqrt(1-B));return this.R*$}}),Re=6378137,He={R:Re,MAX_LATITUDE:85.0511287798,project:function(o){var l=Math.PI/180,f=this.MAX_LATITUDE,g=Math.max(Math.min(f,o.lat),-f),x=Math.sin(g*l);return new U(this.R*o.lng*l,this.R*Math.log((1+x)/(1-x))/2)},unproject:function(o){var l=180/Math.PI;return new fe((2*Math.atan(Math.exp(o.y/this.R))-Math.PI/2)*l,o.x*l/this.R)},bounds:function(){var o=Re*Math.PI;return new J([-o,-o],[o,o])}()};function Un(o,l,f,g){if(N(o)){this._a=o[0],this._b=o[1],this._c=o[2],this._d=o[3];return}this._a=o,this._b=l,this._c=f,this._d=g}Un.prototype={transform:function(o,l){return this._transform(o.clone(),l)},_transform:function(o,l){return l=l||1,o.x=l*(this._a*o.x+this._b),o.y=l*(this._c*o.y+this._d),o},untransform:function(o,l){return l=l||1,new U((o.x/l-this._b)/this._a,(o.y/l-this._d)/this._c)}};function Vr(o,l,f,g){return new Un(o,l,f,g)}var $n=s({},oe,{code:"EPSG:3857",projection:He,transformation:function(){var o=.5/(Math.PI*He.R);return Vr(o,.5,-o,.5)}()}),Zl=s({},$n,{code:"EPSG:900913"});function ks(o){return document.createElementNS("http://www.w3.org/2000/svg",o)}function Kh(o,l){var f="",g,x,j,O,B,$;for(g=0,j=o.length;g<j;g++){for(B=o[g],x=0,O=B.length;x<O;x++)$=B[x],f+=(x?"L":"M")+$.x+" "+$.y;f+=l?ae.svg?"z":"x":""}return f||"M0 0"}var Wl=document.documentElement.style,Ns="ActiveXObject"in window,Ty=Ns&&!document.addEventListener,Yh="msLaunchUri"in navigator&&!("documentMode"in document),Vl=tn("webkit"),Xh=tn("android"),Qh=tn("android 2")||tn("android 3"),Ly=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),My=Xh&&tn("Google")&&Ly<537&&!("AudioNode"in window),ql=!!window.opera,Jh=!Yh&&tn("chrome"),ed=tn("gecko")&&!Vl&&!ql&&!Ns,zy=!Jh&&tn("safari"),td=tn("phantom"),nd="OTransition"in Wl,Oy=navigator.platform.indexOf("Win")===0,rd=Ns&&"transition"in Wl,Gl="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Qh,id="MozPerspective"in Wl,Ay=!window.L_DISABLE_3D&&(rd||Gl||id)&&!nd&&!td,Ui=typeof orientation<"u"||tn("mobile"),Ry=Ui&&Vl,Iy=Ui&&Gl,od=!window.PointerEvent&&window.MSPointerEvent,sd=!!(window.PointerEvent||od),ad="ontouchstart"in window||!!window.TouchEvent,Dy=!window.L_NO_TOUCH&&(ad||sd),Fy=Ui&&ql,By=Ui&&ed,Uy=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,$y=function(){var o=!1;try{var l=Object.defineProperty({},"passive",{get:function(){o=!0}});window.addEventListener("testPassiveEventSupport",m,l),window.removeEventListener("testPassiveEventSupport",m,l)}catch{}return o}(),Hy=function(){return!!document.createElement("canvas").getContext}(),Kl=!!(document.createElementNS&&ks("svg").createSVGRect),Zy=!!Kl&&function(){var o=document.createElement("div");return o.innerHTML="<svg/>",(o.firstChild&&o.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Wy=!Kl&&function(){try{var o=document.createElement("div");o.innerHTML='<v:shape adj="1"/>';var l=o.firstChild;return l.style.behavior="url(#default#VML)",l&&typeof l.adj=="object"}catch{return!1}}(),Vy=navigator.platform.indexOf("Mac")===0,qy=navigator.platform.indexOf("Linux")===0;function tn(o){return navigator.userAgent.toLowerCase().indexOf(o)>=0}var ae={ie:Ns,ielt9:Ty,edge:Yh,webkit:Vl,android:Xh,android23:Qh,androidStock:My,opera:ql,chrome:Jh,gecko:ed,safari:zy,phantom:td,opera12:nd,win:Oy,ie3d:rd,webkit3d:Gl,gecko3d:id,any3d:Ay,mobile:Ui,mobileWebkit:Ry,mobileWebkit3d:Iy,msPointer:od,pointer:sd,touch:Dy,touchNative:ad,mobileOpera:Fy,mobileGecko:By,retina:Uy,passiveEvents:$y,canvas:Hy,svg:Kl,vml:Wy,inlineSvg:Zy,mac:Vy,linux:qy},ld=ae.msPointer?"MSPointerDown":"pointerdown",ud=ae.msPointer?"MSPointerMove":"pointermove",cd=ae.msPointer?"MSPointerUp":"pointerup",fd=ae.msPointer?"MSPointerCancel":"pointercancel",Yl={touchstart:ld,touchmove:ud,touchend:cd,touchcancel:fd},hd={touchstart:Jy,touchmove:Ss,touchend:Ss,touchcancel:Ss},qr={},dd=!1;function Gy(o,l,f){return l==="touchstart"&&Qy(),hd[l]?(f=hd[l].bind(this,f),o.addEventListener(Yl[l],f,!1),f):(console.warn("wrong event specified:",l),m)}function Ky(o,l,f){if(!Yl[l]){console.warn("wrong event specified:",l);return}o.removeEventListener(Yl[l],f,!1)}function Yy(o){qr[o.pointerId]=o}function Xy(o){qr[o.pointerId]&&(qr[o.pointerId]=o)}function pd(o){delete qr[o.pointerId]}function Qy(){dd||(document.addEventListener(ld,Yy,!0),document.addEventListener(ud,Xy,!0),document.addEventListener(cd,pd,!0),document.addEventListener(fd,pd,!0),dd=!0)}function Ss(o,l){if(l.pointerType!==(l.MSPOINTER_TYPE_MOUSE||"mouse")){l.touches=[];for(var f in qr)l.touches.push(qr[f]);l.changedTouches=[l],o(l)}}function Jy(o,l){l.MSPOINTER_TYPE_TOUCH&&l.pointerType===l.MSPOINTER_TYPE_TOUCH&&Ye(l),Ss(o,l)}function ex(o){var l={},f,g;for(g in o)f=o[g],l[g]=f&&f.bind?f.bind(o):f;return o=l,l.type="dblclick",l.detail=2,l.isTrusted=!1,l._simulated=!0,l}var tx=200;function nx(o,l){o.addEventListener("dblclick",l);var f=0,g;function x(j){if(j.detail!==1){g=j.detail;return}if(!(j.pointerType==="mouse"||j.sourceCapabilities&&!j.sourceCapabilities.firesTouchEvents)){var O=yd(j);if(!(O.some(function($){return $ instanceof HTMLLabelElement&&$.attributes.for})&&!O.some(function($){return $ instanceof HTMLInputElement||$ instanceof HTMLSelectElement}))){var B=Date.now();B-f<=tx?(g++,g===2&&l(ex(j))):g=1,f=B}}}return o.addEventListener("click",x),{dblclick:l,simDblclick:x}}function rx(o,l){o.removeEventListener("dblclick",l.dblclick),o.removeEventListener("click",l.simDblclick)}var Xl=Ps(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),$i=Ps(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),md=$i==="webkitTransition"||$i==="OTransition"?$i+"End":"transitionend";function gd(o){return typeof o=="string"?document.getElementById(o):o}function Hi(o,l){var f=o.style[l]||o.currentStyle&&o.currentStyle[l];if((!f||f==="auto")&&document.defaultView){var g=document.defaultView.getComputedStyle(o,null);f=g?g[l]:null}return f==="auto"?null:f}function ye(o,l,f){var g=document.createElement(o);return g.className=l||"",f&&f.appendChild(g),g}function Le(o){var l=o.parentNode;l&&l.removeChild(o)}function js(o){for(;o.firstChild;)o.removeChild(o.firstChild)}function Gr(o){var l=o.parentNode;l&&l.lastChild!==o&&l.appendChild(o)}function Kr(o){var l=o.parentNode;l&&l.firstChild!==o&&l.insertBefore(o,l.firstChild)}function Ql(o,l){if(o.classList!==void 0)return o.classList.contains(l);var f=Cs(o);return f.length>0&&new RegExp("(^|\\s)"+l+"(\\s|$)").test(f)}function pe(o,l){if(o.classList!==void 0)for(var f=k(l),g=0,x=f.length;g<x;g++)o.classList.add(f[g]);else if(!Ql(o,l)){var j=Cs(o);Jl(o,(j?j+" ":"")+l)}}function Ie(o,l){o.classList!==void 0?o.classList.remove(l):Jl(o,y((" "+Cs(o)+" ").replace(" "+l+" "," ")))}function Jl(o,l){o.className.baseVal===void 0?o.className=l:o.className.baseVal=l}function Cs(o){return o.correspondingElement&&(o=o.correspondingElement),o.className.baseVal===void 0?o.className:o.className.baseVal}function Et(o,l){"opacity"in o.style?o.style.opacity=l:"filter"in o.style&&ix(o,l)}function ix(o,l){var f=!1,g="DXImageTransform.Microsoft.Alpha";try{f=o.filters.item(g)}catch{if(l===1)return}l=Math.round(l*100),f?(f.Enabled=l!==100,f.Opacity=l):o.style.filter+=" progid:"+g+"(opacity="+l+")"}function Ps(o){for(var l=document.documentElement.style,f=0;f<o.length;f++)if(o[f]in l)return o[f];return!1}function yr(o,l,f){var g=l||new U(0,0);o.style[Xl]=(ae.ie3d?"translate("+g.x+"px,"+g.y+"px)":"translate3d("+g.x+"px,"+g.y+"px,0)")+(f?" scale("+f+")":"")}function Fe(o,l){o._leaflet_pos=l,ae.any3d?yr(o,l):(o.style.left=l.x+"px",o.style.top=l.y+"px")}function xr(o){return o._leaflet_pos||new U(0,0)}var Zi,Wi,eu;if("onselectstart"in document)Zi=function(){de(window,"selectstart",Ye)},Wi=function(){ke(window,"selectstart",Ye)};else{var Vi=Ps(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Zi=function(){if(Vi){var o=document.documentElement.style;eu=o[Vi],o[Vi]="none"}},Wi=function(){Vi&&(document.documentElement.style[Vi]=eu,eu=void 0)}}function tu(){de(window,"dragstart",Ye)}function nu(){ke(window,"dragstart",Ye)}var Es,ru;function iu(o){for(;o.tabIndex===-1;)o=o.parentNode;o.style&&(Ts(),Es=o,ru=o.style.outlineStyle,o.style.outlineStyle="none",de(window,"keydown",Ts))}function Ts(){Es&&(Es.style.outlineStyle=ru,Es=void 0,ru=void 0,ke(window,"keydown",Ts))}function vd(o){do o=o.parentNode;while((!o.offsetWidth||!o.offsetHeight)&&o!==document.body);return o}function ou(o){var l=o.getBoundingClientRect();return{x:l.width/o.offsetWidth||1,y:l.height/o.offsetHeight||1,boundingClientRect:l}}var ox={__proto__:null,TRANSFORM:Xl,TRANSITION:$i,TRANSITION_END:md,get:gd,getStyle:Hi,create:ye,remove:Le,empty:js,toFront:Gr,toBack:Kr,hasClass:Ql,addClass:pe,removeClass:Ie,setClass:Jl,getClass:Cs,setOpacity:Et,testProp:Ps,setTransform:yr,setPosition:Fe,getPosition:xr,get disableTextSelection(){return Zi},get enableTextSelection(){return Wi},disableImageDrag:tu,enableImageDrag:nu,preventOutline:iu,restoreOutline:Ts,getSizedParentNode:vd,getScale:ou};function de(o,l,f,g){if(l&&typeof l=="object")for(var x in l)au(o,x,l[x],f);else{l=k(l);for(var j=0,O=l.length;j<O;j++)au(o,l[j],f,g)}return this}var nn="_leaflet_events";function ke(o,l,f,g){if(arguments.length===1)_d(o),delete o[nn];else if(l&&typeof l=="object")for(var x in l)lu(o,x,l[x],f);else if(l=k(l),arguments.length===2)_d(o,function(B){return C(l,B)!==-1});else for(var j=0,O=l.length;j<O;j++)lu(o,l[j],f,g);return this}function _d(o,l){for(var f in o[nn]){var g=f.split(/\d/)[0];(!l||l(g))&&lu(o,g,null,null,f)}}var su={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function au(o,l,f,g){var x=l+h(f)+(g?"_"+h(g):"");if(o[nn]&&o[nn][x])return this;var j=function(B){return f.call(g||o,B||window.event)},O=j;!ae.touchNative&&ae.pointer&&l.indexOf("touch")===0?j=Gy(o,l,j):ae.touch&&l==="dblclick"?j=nx(o,j):"addEventListener"in o?l==="touchstart"||l==="touchmove"||l==="wheel"||l==="mousewheel"?o.addEventListener(su[l]||l,j,ae.passiveEvents?{passive:!1}:!1):l==="mouseenter"||l==="mouseleave"?(j=function(B){B=B||window.event,cu(o,B)&&O(B)},o.addEventListener(su[l],j,!1)):o.addEventListener(l,O,!1):o.attachEvent("on"+l,j),o[nn]=o[nn]||{},o[nn][x]=j}function lu(o,l,f,g,x){x=x||l+h(f)+(g?"_"+h(g):"");var j=o[nn]&&o[nn][x];if(!j)return this;!ae.touchNative&&ae.pointer&&l.indexOf("touch")===0?Ky(o,l,j):ae.touch&&l==="dblclick"?rx(o,j):"removeEventListener"in o?o.removeEventListener(su[l]||l,j,!1):o.detachEvent("on"+l,j),o[nn][x]=null}function wr(o){return o.stopPropagation?o.stopPropagation():o.originalEvent?o.originalEvent._stopped=!0:o.cancelBubble=!0,this}function uu(o){return au(o,"wheel",wr),this}function qi(o){return de(o,"mousedown touchstart dblclick contextmenu",wr),o._leaflet_disable_click=!0,this}function Ye(o){return o.preventDefault?o.preventDefault():o.returnValue=!1,this}function br(o){return Ye(o),wr(o),this}function yd(o){if(o.composedPath)return o.composedPath();for(var l=[],f=o.target;f;)l.push(f),f=f.parentNode;return l}function xd(o,l){if(!l)return new U(o.clientX,o.clientY);var f=ou(l),g=f.boundingClientRect;return new U((o.clientX-g.left)/f.x-l.clientLeft,(o.clientY-g.top)/f.y-l.clientTop)}var sx=ae.linux&&ae.chrome?window.devicePixelRatio:ae.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function wd(o){return ae.edge?o.wheelDeltaY/2:o.deltaY&&o.deltaMode===0?-o.deltaY/sx:o.deltaY&&o.deltaMode===1?-o.deltaY*20:o.deltaY&&o.deltaMode===2?-o.deltaY*60:o.deltaX||o.deltaZ?0:o.wheelDelta?(o.wheelDeltaY||o.wheelDelta)/2:o.detail&&Math.abs(o.detail)<32765?-o.detail*20:o.detail?o.detail/-32765*60:0}function cu(o,l){var f=l.relatedTarget;if(!f)return!0;try{for(;f&&f!==o;)f=f.parentNode}catch{return!1}return f!==o}var ax={__proto__:null,on:de,off:ke,stopPropagation:wr,disableScrollPropagation:uu,disableClickPropagation:qi,preventDefault:Ye,stop:br,getPropagationPath:yd,getMousePosition:xd,getWheelDelta:wd,isExternalTarget:cu,addListener:de,removeListener:ke},bd=ee.extend({run:function(o,l,f,g){this.stop(),this._el=o,this._inProgress=!0,this._duration=f||.25,this._easeOutPower=1/Math.max(g||.5,.2),this._startPos=xr(o),this._offset=l.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=V(this._animate,this),this._step()},_step:function(o){var l=+new Date-this._startTime,f=this._duration*1e3;l<f?this._runFrame(this._easeOut(l/f),o):(this._runFrame(1),this._complete())},_runFrame:function(o,l){var f=this._startPos.add(this._offset.multiplyBy(o));l&&f._round(),Fe(this._el,f),this.fire("step")},_complete:function(){H(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(o){return 1-Math.pow(1-o,this._easeOutPower)}}),ve=ee.extend({options:{crs:$n,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(o,l){l=S(this,l),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(o),this._initLayout(),this._onResize=u(this._onResize,this),this._initEvents(),l.maxBounds&&this.setMaxBounds(l.maxBounds),l.zoom!==void 0&&(this._zoom=this._limitZoom(l.zoom)),l.center&&l.zoom!==void 0&&this.setView(le(l.center),l.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=$i&&ae.any3d&&!ae.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),de(this._proxy,md,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(o,l,f){if(l=l===void 0?this._zoom:this._limitZoom(l),o=this._limitCenter(le(o),l,this.options.maxBounds),f=f||{},this._stop(),this._loaded&&!f.reset&&f!==!0){f.animate!==void 0&&(f.zoom=s({animate:f.animate},f.zoom),f.pan=s({animate:f.animate,duration:f.duration},f.pan));var g=this._zoom!==l?this._tryAnimatedZoom&&this._tryAnimatedZoom(o,l,f.zoom):this._tryAnimatedPan(o,f.pan);if(g)return clearTimeout(this._sizeTimer),this}return this._resetView(o,l,f.pan&&f.pan.noMoveStart),this},setZoom:function(o,l){return this._loaded?this.setView(this.getCenter(),o,{zoom:l}):(this._zoom=o,this)},zoomIn:function(o,l){return o=o||(ae.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+o,l)},zoomOut:function(o,l){return o=o||(ae.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-o,l)},setZoomAround:function(o,l,f){var g=this.getZoomScale(l),x=this.getSize().divideBy(2),j=o instanceof U?o:this.latLngToContainerPoint(o),O=j.subtract(x).multiplyBy(1-1/g),B=this.containerPointToLatLng(x.add(O));return this.setView(B,l,{zoom:f})},_getBoundsCenterZoom:function(o,l){l=l||{},o=o.getBounds?o.getBounds():ue(o);var f=Z(l.paddingTopLeft||l.padding||[0,0]),g=Z(l.paddingBottomRight||l.padding||[0,0]),x=this.getBoundsZoom(o,!1,f.add(g));if(x=typeof l.maxZoom=="number"?Math.min(l.maxZoom,x):x,x===1/0)return{center:o.getCenter(),zoom:x};var j=g.subtract(f).divideBy(2),O=this.project(o.getSouthWest(),x),B=this.project(o.getNorthEast(),x),$=this.unproject(O.add(B).divideBy(2).add(j),x);return{center:$,zoom:x}},fitBounds:function(o,l){if(o=ue(o),!o.isValid())throw new Error("Bounds are not valid.");var f=this._getBoundsCenterZoom(o,l);return this.setView(f.center,f.zoom,l)},fitWorld:function(o){return this.fitBounds([[-90,-180],[90,180]],o)},panTo:function(o,l){return this.setView(o,this._zoom,{pan:l})},panBy:function(o,l){if(o=Z(o).round(),l=l||{},!o.x&&!o.y)return this.fire("moveend");if(l.animate!==!0&&!this.getSize().contains(o))return this._resetView(this.unproject(this.project(this.getCenter()).add(o)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new bd,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),l.noMoveStart||this.fire("movestart"),l.animate!==!1){pe(this._mapPane,"leaflet-pan-anim");var f=this._getMapPanePos().subtract(o).round();this._panAnim.run(this._mapPane,f,l.duration||.25,l.easeLinearity)}else this._rawPanBy(o),this.fire("move").fire("moveend");return this},flyTo:function(o,l,f){if(f=f||{},f.animate===!1||!ae.any3d)return this.setView(o,l,f);this._stop();var g=this.project(this.getCenter()),x=this.project(o),j=this.getSize(),O=this._zoom;o=le(o),l=l===void 0?O:l;var B=Math.max(j.x,j.y),$=B*this.getZoomScale(O,l),q=x.distanceTo(g)||1,ne=1.42,ce=ne*ne;function me(Be){var $s=Be?-1:1,Kx=Be?$:B,Yx=$*$-B*B+$s*ce*ce*q*q,Xx=2*Kx*ce*q,wu=Yx/Xx,np=Math.sqrt(wu*wu+1)-wu,Qx=np<1e-9?-18:Math.log(np);return Qx}function st(Be){return(Math.exp(Be)-Math.exp(-Be))/2}function qe(Be){return(Math.exp(Be)+Math.exp(-Be))/2}function Lt(Be){return st(Be)/qe(Be)}var dt=me(0);function ti(Be){return B*(qe(dt)/qe(dt+ne*Be))}function Wx(Be){return B*(qe(dt)*Lt(dt+ne*Be)-st(dt))/ce}function Vx(Be){return 1-Math.pow(1-Be,1.5)}var qx=Date.now(),ep=(me(1)-dt)/ne,Gx=f.duration?1e3*f.duration:1e3*ep*.8;function tp(){var Be=(Date.now()-qx)/Gx,$s=Vx(Be)*ep;Be<=1?(this._flyToFrame=V(tp,this),this._move(this.unproject(g.add(x.subtract(g).multiplyBy(Wx($s)/q)),O),this.getScaleZoom(B/ti($s),O),{flyTo:!0})):this._move(o,l)._moveEnd(!0)}return this._moveStart(!0,f.noMoveStart),tp.call(this),this},flyToBounds:function(o,l){var f=this._getBoundsCenterZoom(o,l);return this.flyTo(f.center,f.zoom,l)},setMaxBounds:function(o){return o=ue(o),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),o.isValid()?(this.options.maxBounds=o,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(o){var l=this.options.minZoom;return this.options.minZoom=o,this._loaded&&l!==o&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(o):this},setMaxZoom:function(o){var l=this.options.maxZoom;return this.options.maxZoom=o,this._loaded&&l!==o&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(o):this},panInsideBounds:function(o,l){this._enforcingBounds=!0;var f=this.getCenter(),g=this._limitCenter(f,this._zoom,ue(o));return f.equals(g)||this.panTo(g,l),this._enforcingBounds=!1,this},panInside:function(o,l){l=l||{};var f=Z(l.paddingTopLeft||l.padding||[0,0]),g=Z(l.paddingBottomRight||l.padding||[0,0]),x=this.project(this.getCenter()),j=this.project(o),O=this.getPixelBounds(),B=re([O.min.add(f),O.max.subtract(g)]),$=B.getSize();if(!B.contains(j)){this._enforcingBounds=!0;var q=j.subtract(B.getCenter()),ne=B.extend(j).getSize().subtract($);x.x+=q.x<0?-ne.x:ne.x,x.y+=q.y<0?-ne.y:ne.y,this.panTo(this.unproject(x),l),this._enforcingBounds=!1}return this},invalidateSize:function(o){if(!this._loaded)return this;o=s({animate:!1,pan:!0},o===!0?{animate:!0}:o);var l=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var f=this.getSize(),g=l.divideBy(2).round(),x=f.divideBy(2).round(),j=g.subtract(x);return!j.x&&!j.y?this:(o.animate&&o.pan?this.panBy(j):(o.pan&&this._rawPanBy(j),this.fire("move"),o.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(u(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:l,newSize:f}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(o){if(o=this._locateOptions=s({timeout:1e4,watch:!1},o),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var l=u(this._handleGeolocationResponse,this),f=u(this._handleGeolocationError,this);return o.watch?this._locationWatchId=navigator.geolocation.watchPosition(l,f,o):navigator.geolocation.getCurrentPosition(l,f,o),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(o){if(this._container._leaflet_id){var l=o.code,f=o.message||(l===1?"permission denied":l===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:l,message:"Geolocation error: "+f+"."})}},_handleGeolocationResponse:function(o){if(this._container._leaflet_id){var l=o.coords.latitude,f=o.coords.longitude,g=new fe(l,f),x=g.toBounds(o.coords.accuracy*2),j=this._locateOptions;if(j.setView){var O=this.getBoundsZoom(x);this.setView(g,j.maxZoom?Math.min(O,j.maxZoom):O)}var B={latlng:g,bounds:x,timestamp:o.timestamp};for(var $ in o.coords)typeof o.coords[$]=="number"&&(B[$]=o.coords[$]);this.fire("locationfound",B)}},addHandler:function(o,l){if(!l)return this;var f=this[o]=new l(this);return this._handlers.push(f),this.options[o]&&f.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Le(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(H(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var o;for(o in this._layers)this._layers[o].remove();for(o in this._panes)Le(this._panes[o]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(o,l){var f="leaflet-pane"+(o?" leaflet-"+o.replace("Pane","")+"-pane":""),g=ye("div",f,l||this._mapPane);return o&&(this._panes[o]=g),g},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var o=this.getPixelBounds(),l=this.unproject(o.getBottomLeft()),f=this.unproject(o.getTopRight());return new he(l,f)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(o,l,f){o=ue(o),f=Z(f||[0,0]);var g=this.getZoom()||0,x=this.getMinZoom(),j=this.getMaxZoom(),O=o.getNorthWest(),B=o.getSouthEast(),$=this.getSize().subtract(f),q=re(this.project(B,g),this.project(O,g)).getSize(),ne=ae.any3d?this.options.zoomSnap:1,ce=$.x/q.x,me=$.y/q.y,st=l?Math.max(ce,me):Math.min(ce,me);return g=this.getScaleZoom(st,g),ne&&(g=Math.round(g/(ne/100))*(ne/100),g=l?Math.ceil(g/ne)*ne:Math.floor(g/ne)*ne),Math.max(x,Math.min(j,g))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new U(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(o,l){var f=this._getTopLeftPoint(o,l);return new J(f,f.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(o){return this.options.crs.getProjectedBounds(o===void 0?this.getZoom():o)},getPane:function(o){return typeof o=="string"?this._panes[o]:o},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(o,l){var f=this.options.crs;return l=l===void 0?this._zoom:l,f.scale(o)/f.scale(l)},getScaleZoom:function(o,l){var f=this.options.crs;l=l===void 0?this._zoom:l;var g=f.zoom(o*f.scale(l));return isNaN(g)?1/0:g},project:function(o,l){return l=l===void 0?this._zoom:l,this.options.crs.latLngToPoint(le(o),l)},unproject:function(o,l){return l=l===void 0?this._zoom:l,this.options.crs.pointToLatLng(Z(o),l)},layerPointToLatLng:function(o){var l=Z(o).add(this.getPixelOrigin());return this.unproject(l)},latLngToLayerPoint:function(o){var l=this.project(le(o))._round();return l._subtract(this.getPixelOrigin())},wrapLatLng:function(o){return this.options.crs.wrapLatLng(le(o))},wrapLatLngBounds:function(o){return this.options.crs.wrapLatLngBounds(ue(o))},distance:function(o,l){return this.options.crs.distance(le(o),le(l))},containerPointToLayerPoint:function(o){return Z(o).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(o){return Z(o).add(this._getMapPanePos())},containerPointToLatLng:function(o){var l=this.containerPointToLayerPoint(Z(o));return this.layerPointToLatLng(l)},latLngToContainerPoint:function(o){return this.layerPointToContainerPoint(this.latLngToLayerPoint(le(o)))},mouseEventToContainerPoint:function(o){return xd(o,this._container)},mouseEventToLayerPoint:function(o){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(o))},mouseEventToLatLng:function(o){return this.layerPointToLatLng(this.mouseEventToLayerPoint(o))},_initContainer:function(o){var l=this._container=gd(o);if(l){if(l._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");de(l,"scroll",this._onScroll,this),this._containerId=h(l)},_initLayout:function(){var o=this._container;this._fadeAnimated=this.options.fadeAnimation&&ae.any3d,pe(o,"leaflet-container"+(ae.touch?" leaflet-touch":"")+(ae.retina?" leaflet-retina":"")+(ae.ielt9?" leaflet-oldie":"")+(ae.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var l=Hi(o,"position");l!=="absolute"&&l!=="relative"&&l!=="fixed"&&l!=="sticky"&&(o.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var o=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Fe(this._mapPane,new U(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(pe(o.markerPane,"leaflet-zoom-hide"),pe(o.shadowPane,"leaflet-zoom-hide"))},_resetView:function(o,l,f){Fe(this._mapPane,new U(0,0));var g=!this._loaded;this._loaded=!0,l=this._limitZoom(l),this.fire("viewprereset");var x=this._zoom!==l;this._moveStart(x,f)._move(o,l)._moveEnd(x),this.fire("viewreset"),g&&this.fire("load")},_moveStart:function(o,l){return o&&this.fire("zoomstart"),l||this.fire("movestart"),this},_move:function(o,l,f,g){l===void 0&&(l=this._zoom);var x=this._zoom!==l;return this._zoom=l,this._lastCenter=o,this._pixelOrigin=this._getNewPixelOrigin(o),g?f&&f.pinch&&this.fire("zoom",f):((x||f&&f.pinch)&&this.fire("zoom",f),this.fire("move",f)),this},_moveEnd:function(o){return o&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return H(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(o){Fe(this._mapPane,this._getMapPanePos().subtract(o))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(o){this._targets={},this._targets[h(this._container)]=this;var l=o?ke:de;l(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&l(window,"resize",this._onResize,this),ae.any3d&&this.options.transform3DLimit&&(o?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){H(this._resizeRequest),this._resizeRequest=V(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var o=this._getMapPanePos();Math.max(Math.abs(o.x),Math.abs(o.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(o,l){for(var f=[],g,x=l==="mouseout"||l==="mouseover",j=o.target||o.srcElement,O=!1;j;){if(g=this._targets[h(j)],g&&(l==="click"||l==="preclick")&&this._draggableMoved(g)){O=!0;break}if(g&&g.listens(l,!0)&&(x&&!cu(j,o)||(f.push(g),x))||j===this._container)break;j=j.parentNode}return!f.length&&!O&&!x&&this.listens(l,!0)&&(f=[this]),f},_isClickDisabled:function(o){for(;o&&o!==this._container;){if(o._leaflet_disable_click)return!0;o=o.parentNode}},_handleDOMEvent:function(o){var l=o.target||o.srcElement;if(!(!this._loaded||l._leaflet_disable_events||o.type==="click"&&this._isClickDisabled(l))){var f=o.type;f==="mousedown"&&iu(l),this._fireDOMEvent(o,f)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(o,l,f){if(o.type==="click"){var g=s({},o);g.type="preclick",this._fireDOMEvent(g,g.type,f)}var x=this._findEventTargets(o,l);if(f){for(var j=[],O=0;O<f.length;O++)f[O].listens(l,!0)&&j.push(f[O]);x=j.concat(x)}if(x.length){l==="contextmenu"&&Ye(o);var B=x[0],$={originalEvent:o};if(o.type!=="keypress"&&o.type!=="keydown"&&o.type!=="keyup"){var q=B.getLatLng&&(!B._radius||B._radius<=10);$.containerPoint=q?this.latLngToContainerPoint(B.getLatLng()):this.mouseEventToContainerPoint(o),$.layerPoint=this.containerPointToLayerPoint($.containerPoint),$.latlng=q?B.getLatLng():this.layerPointToLatLng($.layerPoint)}for(O=0;O<x.length;O++)if(x[O].fire(l,$,!0),$.originalEvent._stopped||x[O].options.bubblingMouseEvents===!1&&C(this._mouseEvents,l)!==-1)return}},_draggableMoved:function(o){return o=o.dragging&&o.dragging.enabled()?o:this,o.dragging&&o.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var o=0,l=this._handlers.length;o<l;o++)this._handlers[o].disable()},whenReady:function(o,l){return this._loaded?o.call(l||this,{target:this}):this.on("load",o,l),this},_getMapPanePos:function(){return xr(this._mapPane)||new U(0,0)},_moved:function(){var o=this._getMapPanePos();return o&&!o.equals([0,0])},_getTopLeftPoint:function(o,l){var f=o&&l!==void 0?this._getNewPixelOrigin(o,l):this.getPixelOrigin();return f.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(o,l){var f=this.getSize()._divideBy(2);return this.project(o,l)._subtract(f)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(o,l,f){var g=this._getNewPixelOrigin(f,l);return this.project(o,l)._subtract(g)},_latLngBoundsToNewLayerBounds:function(o,l,f){var g=this._getNewPixelOrigin(f,l);return re([this.project(o.getSouthWest(),l)._subtract(g),this.project(o.getNorthWest(),l)._subtract(g),this.project(o.getSouthEast(),l)._subtract(g),this.project(o.getNorthEast(),l)._subtract(g)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(o){return this.latLngToLayerPoint(o).subtract(this._getCenterLayerPoint())},_limitCenter:function(o,l,f){if(!f)return o;var g=this.project(o,l),x=this.getSize().divideBy(2),j=new J(g.subtract(x),g.add(x)),O=this._getBoundsOffset(j,f,l);return Math.abs(O.x)<=1&&Math.abs(O.y)<=1?o:this.unproject(g.add(O),l)},_limitOffset:function(o,l){if(!l)return o;var f=this.getPixelBounds(),g=new J(f.min.add(o),f.max.add(o));return o.add(this._getBoundsOffset(g,l))},_getBoundsOffset:function(o,l,f){var g=re(this.project(l.getNorthEast(),f),this.project(l.getSouthWest(),f)),x=g.min.subtract(o.min),j=g.max.subtract(o.max),O=this._rebound(x.x,-j.x),B=this._rebound(x.y,-j.y);return new U(O,B)},_rebound:function(o,l){return o+l>0?Math.round(o-l)/2:Math.max(0,Math.ceil(o))-Math.max(0,Math.floor(l))},_limitZoom:function(o){var l=this.getMinZoom(),f=this.getMaxZoom(),g=ae.any3d?this.options.zoomSnap:1;return g&&(o=Math.round(o/g)*g),Math.max(l,Math.min(f,o))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Ie(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(o,l){var f=this._getCenterOffset(o)._trunc();return(l&&l.animate)!==!0&&!this.getSize().contains(f)?!1:(this.panBy(f,l),!0)},_createAnimProxy:function(){var o=this._proxy=ye("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(o),this.on("zoomanim",function(l){var f=Xl,g=this._proxy.style[f];yr(this._proxy,this.project(l.center,l.zoom),this.getZoomScale(l.zoom,1)),g===this._proxy.style[f]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Le(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var o=this.getCenter(),l=this.getZoom();yr(this._proxy,this.project(o,l),this.getZoomScale(l,1))},_catchTransitionEnd:function(o){this._animatingZoom&&o.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(o,l,f){if(this._animatingZoom)return!0;if(f=f||{},!this._zoomAnimated||f.animate===!1||this._nothingToAnimate()||Math.abs(l-this._zoom)>this.options.zoomAnimationThreshold)return!1;var g=this.getZoomScale(l),x=this._getCenterOffset(o)._divideBy(1-1/g);return f.animate!==!0&&!this.getSize().contains(x)?!1:(V(function(){this._moveStart(!0,f.noMoveStart||!1)._animateZoom(o,l,!0)},this),!0)},_animateZoom:function(o,l,f,g){this._mapPane&&(f&&(this._animatingZoom=!0,this._animateToCenter=o,this._animateToZoom=l,pe(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:o,zoom:l,noUpdate:g}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(u(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Ie(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function lx(o,l){return new ve(o,l)}var $t=R.extend({options:{position:"topright"},initialize:function(o){S(this,o)},getPosition:function(){return this.options.position},setPosition:function(o){var l=this._map;return l&&l.removeControl(this),this.options.position=o,l&&l.addControl(this),this},getContainer:function(){return this._container},addTo:function(o){this.remove(),this._map=o;var l=this._container=this.onAdd(o),f=this.getPosition(),g=o._controlCorners[f];return pe(l,"leaflet-control"),f.indexOf("bottom")!==-1?g.insertBefore(l,g.firstChild):g.appendChild(l),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Le(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(o){this._map&&o&&o.screenX>0&&o.screenY>0&&this._map.getContainer().focus()}}),Gi=function(o){return new $t(o)};ve.include({addControl:function(o){return o.addTo(this),this},removeControl:function(o){return o.remove(),this},_initControlPos:function(){var o=this._controlCorners={},l="leaflet-",f=this._controlContainer=ye("div",l+"control-container",this._container);function g(x,j){var O=l+x+" "+l+j;o[x+j]=ye("div",O,f)}g("top","left"),g("top","right"),g("bottom","left"),g("bottom","right")},_clearControlPos:function(){for(var o in this._controlCorners)Le(this._controlCorners[o]);Le(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var kd=$t.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(o,l,f,g){return f<g?-1:g<f?1:0}},initialize:function(o,l,f){S(this,f),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var g in o)this._addLayer(o[g],g);for(g in l)this._addLayer(l[g],g,!0)},onAdd:function(o){this._initLayout(),this._update(),this._map=o,o.on("zoomend",this._checkDisabledLayers,this);for(var l=0;l<this._layers.length;l++)this._layers[l].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(o){return $t.prototype.addTo.call(this,o),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var o=0;o<this._layers.length;o++)this._layers[o].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(o,l){return this._addLayer(o,l),this._map?this._update():this},addOverlay:function(o,l){return this._addLayer(o,l,!0),this._map?this._update():this},removeLayer:function(o){o.off("add remove",this._onLayerChange,this);var l=this._getLayer(h(o));return l&&this._layers.splice(this._layers.indexOf(l),1),this._map?this._update():this},expand:function(){pe(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var o=this._map.getSize().y-(this._container.offsetTop+50);return o<this._section.clientHeight?(pe(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=o+"px"):Ie(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Ie(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var o="leaflet-control-layers",l=this._container=ye("div",o),f=this.options.collapsed;l.setAttribute("aria-haspopup",!0),qi(l),uu(l);var g=this._section=ye("section",o+"-list");f&&(this._map.on("click",this.collapse,this),de(l,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var x=this._layersLink=ye("a",o+"-toggle",l);x.href="#",x.title="Layers",x.setAttribute("role","button"),de(x,{keydown:function(j){j.keyCode===13&&this._expandSafely()},click:function(j){Ye(j),this._expandSafely()}},this),f||this.expand(),this._baseLayersList=ye("div",o+"-base",g),this._separator=ye("div",o+"-separator",g),this._overlaysList=ye("div",o+"-overlays",g),l.appendChild(g)},_getLayer:function(o){for(var l=0;l<this._layers.length;l++)if(this._layers[l]&&h(this._layers[l].layer)===o)return this._layers[l]},_addLayer:function(o,l,f){this._map&&o.on("add remove",this._onLayerChange,this),this._layers.push({layer:o,name:l,overlay:f}),this.options.sortLayers&&this._layers.sort(u(function(g,x){return this.options.sortFunction(g.layer,x.layer,g.name,x.name)},this)),this.options.autoZIndex&&o.setZIndex&&(this._lastZIndex++,o.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;js(this._baseLayersList),js(this._overlaysList),this._layerControlInputs=[];var o,l,f,g,x=0;for(f=0;f<this._layers.length;f++)g=this._layers[f],this._addItem(g),l=l||g.overlay,o=o||!g.overlay,x+=g.overlay?0:1;return this.options.hideSingleBase&&(o=o&&x>1,this._baseLayersList.style.display=o?"":"none"),this._separator.style.display=l&&o?"":"none",this},_onLayerChange:function(o){this._handlingClick||this._update();var l=this._getLayer(h(o.target)),f=l.overlay?o.type==="add"?"overlayadd":"overlayremove":o.type==="add"?"baselayerchange":null;f&&this._map.fire(f,l)},_createRadioElement:function(o,l){var f='<input type="radio" class="leaflet-control-layers-selector" name="'+o+'"'+(l?' checked="checked"':"")+"/>",g=document.createElement("div");return g.innerHTML=f,g.firstChild},_addItem:function(o){var l=document.createElement("label"),f=this._map.hasLayer(o.layer),g;o.overlay?(g=document.createElement("input"),g.type="checkbox",g.className="leaflet-control-layers-selector",g.defaultChecked=f):g=this._createRadioElement("leaflet-base-layers_"+h(this),f),this._layerControlInputs.push(g),g.layerId=h(o.layer),de(g,"click",this._onInputClick,this);var x=document.createElement("span");x.innerHTML=" "+o.name;var j=document.createElement("span");l.appendChild(j),j.appendChild(g),j.appendChild(x);var O=o.overlay?this._overlaysList:this._baseLayersList;return O.appendChild(l),this._checkDisabledLayers(),l},_onInputClick:function(){if(!this._preventClick){var o=this._layerControlInputs,l,f,g=[],x=[];this._handlingClick=!0;for(var j=o.length-1;j>=0;j--)l=o[j],f=this._getLayer(l.layerId).layer,l.checked?g.push(f):l.checked||x.push(f);for(j=0;j<x.length;j++)this._map.hasLayer(x[j])&&this._map.removeLayer(x[j]);for(j=0;j<g.length;j++)this._map.hasLayer(g[j])||this._map.addLayer(g[j]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var o=this._layerControlInputs,l,f,g=this._map.getZoom(),x=o.length-1;x>=0;x--)l=o[x],f=this._getLayer(l.layerId).layer,l.disabled=f.options.minZoom!==void 0&&g<f.options.minZoom||f.options.maxZoom!==void 0&&g>f.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var o=this._section;this._preventClick=!0,de(o,"click",Ye),this.expand();var l=this;setTimeout(function(){ke(o,"click",Ye),l._preventClick=!1})}}),ux=function(o,l,f){return new kd(o,l,f)},fu=$t.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(o){var l="leaflet-control-zoom",f=ye("div",l+" leaflet-bar"),g=this.options;return this._zoomInButton=this._createButton(g.zoomInText,g.zoomInTitle,l+"-in",f,this._zoomIn),this._zoomOutButton=this._createButton(g.zoomOutText,g.zoomOutTitle,l+"-out",f,this._zoomOut),this._updateDisabled(),o.on("zoomend zoomlevelschange",this._updateDisabled,this),f},onRemove:function(o){o.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(o){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(o.shiftKey?3:1))},_zoomOut:function(o){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(o.shiftKey?3:1))},_createButton:function(o,l,f,g,x){var j=ye("a",f,g);return j.innerHTML=o,j.href="#",j.title=l,j.setAttribute("role","button"),j.setAttribute("aria-label",l),qi(j),de(j,"click",br),de(j,"click",x,this),de(j,"click",this._refocusOnMap,this),j},_updateDisabled:function(){var o=this._map,l="leaflet-disabled";Ie(this._zoomInButton,l),Ie(this._zoomOutButton,l),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||o._zoom===o.getMinZoom())&&(pe(this._zoomOutButton,l),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||o._zoom===o.getMaxZoom())&&(pe(this._zoomInButton,l),this._zoomInButton.setAttribute("aria-disabled","true"))}});ve.mergeOptions({zoomControl:!0}),ve.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new fu,this.addControl(this.zoomControl))});var cx=function(o){return new fu(o)},Nd=$t.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(o){var l="leaflet-control-scale",f=ye("div",l),g=this.options;return this._addScales(g,l+"-line",f),o.on(g.updateWhenIdle?"moveend":"move",this._update,this),o.whenReady(this._update,this),f},onRemove:function(o){o.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(o,l,f){o.metric&&(this._mScale=ye("div",l,f)),o.imperial&&(this._iScale=ye("div",l,f))},_update:function(){var o=this._map,l=o.getSize().y/2,f=o.distance(o.containerPointToLatLng([0,l]),o.containerPointToLatLng([this.options.maxWidth,l]));this._updateScales(f)},_updateScales:function(o){this.options.metric&&o&&this._updateMetric(o),this.options.imperial&&o&&this._updateImperial(o)},_updateMetric:function(o){var l=this._getRoundNum(o),f=l<1e3?l+" m":l/1e3+" km";this._updateScale(this._mScale,f,l/o)},_updateImperial:function(o){var l=o*3.2808399,f,g,x;l>5280?(f=l/5280,g=this._getRoundNum(f),this._updateScale(this._iScale,g+" mi",g/f)):(x=this._getRoundNum(l),this._updateScale(this._iScale,x+" ft",x/l))},_updateScale:function(o,l,f){o.style.width=Math.round(this.options.maxWidth*f)+"px",o.innerHTML=l},_getRoundNum:function(o){var l=Math.pow(10,(Math.floor(o)+"").length-1),f=o/l;return f=f>=10?10:f>=5?5:f>=3?3:f>=2?2:1,l*f}}),fx=function(o){return new Nd(o)},hx='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',hu=$t.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(ae.inlineSvg?hx+" ":"")+"Leaflet</a>"},initialize:function(o){S(this,o),this._attributions={}},onAdd:function(o){o.attributionControl=this,this._container=ye("div","leaflet-control-attribution"),qi(this._container);for(var l in o._layers)o._layers[l].getAttribution&&this.addAttribution(o._layers[l].getAttribution());return this._update(),o.on("layeradd",this._addAttribution,this),this._container},onRemove:function(o){o.off("layeradd",this._addAttribution,this)},_addAttribution:function(o){o.layer.getAttribution&&(this.addAttribution(o.layer.getAttribution()),o.layer.once("remove",function(){this.removeAttribution(o.layer.getAttribution())},this))},setPrefix:function(o){return this.options.prefix=o,this._update(),this},addAttribution:function(o){return o?(this._attributions[o]||(this._attributions[o]=0),this._attributions[o]++,this._update(),this):this},removeAttribution:function(o){return o?(this._attributions[o]&&(this._attributions[o]--,this._update()),this):this},_update:function(){if(this._map){var o=[];for(var l in this._attributions)this._attributions[l]&&o.push(l);var f=[];this.options.prefix&&f.push(this.options.prefix),o.length&&f.push(o.join(", ")),this._container.innerHTML=f.join(' <span aria-hidden="true">|</span> ')}}});ve.mergeOptions({attributionControl:!0}),ve.addInitHook(function(){this.options.attributionControl&&new hu().addTo(this)});var dx=function(o){return new hu(o)};$t.Layers=kd,$t.Zoom=fu,$t.Scale=Nd,$t.Attribution=hu,Gi.layers=ux,Gi.zoom=cx,Gi.scale=fx,Gi.attribution=dx;var rn=R.extend({initialize:function(o){this._map=o},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});rn.addTo=function(o,l){return o.addHandler(l,this),this};var px={Events:W},Sd=ae.touch?"touchstart mousedown":"mousedown",Hn=ee.extend({options:{clickTolerance:3},initialize:function(o,l,f,g){S(this,g),this._element=o,this._dragStartTarget=l||o,this._preventOutline=f},enable:function(){this._enabled||(de(this._dragStartTarget,Sd,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Hn._dragging===this&&this.finishDrag(!0),ke(this._dragStartTarget,Sd,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(o){if(this._enabled&&(this._moved=!1,!Ql(this._element,"leaflet-zoom-anim"))){if(o.touches&&o.touches.length!==1){Hn._dragging===this&&this.finishDrag();return}if(!(Hn._dragging||o.shiftKey||o.which!==1&&o.button!==1&&!o.touches)&&(Hn._dragging=this,this._preventOutline&&iu(this._element),tu(),Zi(),!this._moving)){this.fire("down");var l=o.touches?o.touches[0]:o,f=vd(this._element);this._startPoint=new U(l.clientX,l.clientY),this._startPos=xr(this._element),this._parentScale=ou(f);var g=o.type==="mousedown";de(document,g?"mousemove":"touchmove",this._onMove,this),de(document,g?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(o){if(this._enabled){if(o.touches&&o.touches.length>1){this._moved=!0;return}var l=o.touches&&o.touches.length===1?o.touches[0]:o,f=new U(l.clientX,l.clientY)._subtract(this._startPoint);!f.x&&!f.y||Math.abs(f.x)+Math.abs(f.y)<this.options.clickTolerance||(f.x/=this._parentScale.x,f.y/=this._parentScale.y,Ye(o),this._moved||(this.fire("dragstart"),this._moved=!0,pe(document.body,"leaflet-dragging"),this._lastTarget=o.target||o.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),pe(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(f),this._moving=!0,this._lastEvent=o,this._updatePosition())}},_updatePosition:function(){var o={originalEvent:this._lastEvent};this.fire("predrag",o),Fe(this._element,this._newPos),this.fire("drag",o)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(o){Ie(document.body,"leaflet-dragging"),this._lastTarget&&(Ie(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),ke(document,"mousemove touchmove",this._onMove,this),ke(document,"mouseup touchend touchcancel",this._onUp,this),nu(),Wi();var l=this._moved&&this._moving;this._moving=!1,Hn._dragging=!1,l&&this.fire("dragend",{noInertia:o,distance:this._newPos.distanceTo(this._startPos)})}});function jd(o,l,f){var g,x=[1,4,2,8],j,O,B,$,q,ne,ce,me;for(j=0,ne=o.length;j<ne;j++)o[j]._code=kr(o[j],l);for(B=0;B<4;B++){for(ce=x[B],g=[],j=0,ne=o.length,O=ne-1;j<ne;O=j++)$=o[j],q=o[O],$._code&ce?q._code&ce||(me=Ls(q,$,ce,l,f),me._code=kr(me,l),g.push(me)):(q._code&ce&&(me=Ls(q,$,ce,l,f),me._code=kr(me,l),g.push(me)),g.push($));o=g}return o}function Cd(o,l){var f,g,x,j,O,B,$,q,ne;if(!o||o.length===0)throw new Error("latlngs not passed");Tt(o)||(console.warn("latlngs are not flat! Only the first ring will be used"),o=o[0]);var ce=le([0,0]),me=ue(o),st=me.getNorthWest().distanceTo(me.getSouthWest())*me.getNorthEast().distanceTo(me.getNorthWest());st<1700&&(ce=du(o));var qe=o.length,Lt=[];for(f=0;f<qe;f++){var dt=le(o[f]);Lt.push(l.project(le([dt.lat-ce.lat,dt.lng-ce.lng])))}for(B=$=q=0,f=0,g=qe-1;f<qe;g=f++)x=Lt[f],j=Lt[g],O=x.y*j.x-j.y*x.x,$+=(x.x+j.x)*O,q+=(x.y+j.y)*O,B+=O*3;B===0?ne=Lt[0]:ne=[$/B,q/B];var ti=l.unproject(Z(ne));return le([ti.lat+ce.lat,ti.lng+ce.lng])}function du(o){for(var l=0,f=0,g=0,x=0;x<o.length;x++){var j=le(o[x]);l+=j.lat,f+=j.lng,g++}return le([l/g,f/g])}var mx={__proto__:null,clipPolygon:jd,polygonCenter:Cd,centroid:du};function Pd(o,l){if(!l||!o.length)return o.slice();var f=l*l;return o=_x(o,f),o=vx(o,f),o}function Ed(o,l,f){return Math.sqrt(Ki(o,l,f,!0))}function gx(o,l,f){return Ki(o,l,f)}function vx(o,l){var f=o.length,g=typeof Uint8Array<"u"?Uint8Array:Array,x=new g(f);x[0]=x[f-1]=1,pu(o,x,l,0,f-1);var j,O=[];for(j=0;j<f;j++)x[j]&&O.push(o[j]);return O}function pu(o,l,f,g,x){var j=0,O,B,$;for(B=g+1;B<=x-1;B++)$=Ki(o[B],o[g],o[x],!0),$>j&&(O=B,j=$);j>f&&(l[O]=1,pu(o,l,f,g,O),pu(o,l,f,O,x))}function _x(o,l){for(var f=[o[0]],g=1,x=0,j=o.length;g<j;g++)yx(o[g],o[x])>l&&(f.push(o[g]),x=g);return x<j-1&&f.push(o[j-1]),f}var Td;function Ld(o,l,f,g,x){var j=g?Td:kr(o,f),O=kr(l,f),B,$,q;for(Td=O;;){if(!(j|O))return[o,l];if(j&O)return!1;B=j||O,$=Ls(o,l,B,f,x),q=kr($,f),B===j?(o=$,j=q):(l=$,O=q)}}function Ls(o,l,f,g,x){var j=l.x-o.x,O=l.y-o.y,B=g.min,$=g.max,q,ne;return f&8?(q=o.x+j*($.y-o.y)/O,ne=$.y):f&4?(q=o.x+j*(B.y-o.y)/O,ne=B.y):f&2?(q=$.x,ne=o.y+O*($.x-o.x)/j):f&1&&(q=B.x,ne=o.y+O*(B.x-o.x)/j),new U(q,ne,x)}function kr(o,l){var f=0;return o.x<l.min.x?f|=1:o.x>l.max.x&&(f|=2),o.y<l.min.y?f|=4:o.y>l.max.y&&(f|=8),f}function yx(o,l){var f=l.x-o.x,g=l.y-o.y;return f*f+g*g}function Ki(o,l,f,g){var x=l.x,j=l.y,O=f.x-x,B=f.y-j,$=O*O+B*B,q;return $>0&&(q=((o.x-x)*O+(o.y-j)*B)/$,q>1?(x=f.x,j=f.y):q>0&&(x+=O*q,j+=B*q)),O=o.x-x,B=o.y-j,g?O*O+B*B:new U(x,j)}function Tt(o){return!N(o[0])||typeof o[0][0]!="object"&&typeof o[0][0]<"u"}function Md(o){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Tt(o)}function zd(o,l){var f,g,x,j,O,B,$,q;if(!o||o.length===0)throw new Error("latlngs not passed");Tt(o)||(console.warn("latlngs are not flat! Only the first ring will be used"),o=o[0]);var ne=le([0,0]),ce=ue(o),me=ce.getNorthWest().distanceTo(ce.getSouthWest())*ce.getNorthEast().distanceTo(ce.getNorthWest());me<1700&&(ne=du(o));var st=o.length,qe=[];for(f=0;f<st;f++){var Lt=le(o[f]);qe.push(l.project(le([Lt.lat-ne.lat,Lt.lng-ne.lng])))}for(f=0,g=0;f<st-1;f++)g+=qe[f].distanceTo(qe[f+1])/2;if(g===0)q=qe[0];else for(f=0,j=0;f<st-1;f++)if(O=qe[f],B=qe[f+1],x=O.distanceTo(B),j+=x,j>g){$=(j-g)/x,q=[B.x-$*(B.x-O.x),B.y-$*(B.y-O.y)];break}var dt=l.unproject(Z(q));return le([dt.lat+ne.lat,dt.lng+ne.lng])}var xx={__proto__:null,simplify:Pd,pointToSegmentDistance:Ed,closestPointOnSegment:gx,clipSegment:Ld,_getEdgeIntersection:Ls,_getBitCode:kr,_sqClosestPointOnSegment:Ki,isFlat:Tt,_flat:Md,polylineCenter:zd},mu={project:function(o){return new U(o.lng,o.lat)},unproject:function(o){return new fe(o.y,o.x)},bounds:new J([-180,-90],[180,90])},gu={R:6378137,R_MINOR:6356752314245179e-9,bounds:new J([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(o){var l=Math.PI/180,f=this.R,g=o.lat*l,x=this.R_MINOR/f,j=Math.sqrt(1-x*x),O=j*Math.sin(g),B=Math.tan(Math.PI/4-g/2)/Math.pow((1-O)/(1+O),j/2);return g=-f*Math.log(Math.max(B,1e-10)),new U(o.lng*l*f,g)},unproject:function(o){for(var l=180/Math.PI,f=this.R,g=this.R_MINOR/f,x=Math.sqrt(1-g*g),j=Math.exp(-o.y/f),O=Math.PI/2-2*Math.atan(j),B=0,$=.1,q;B<15&&Math.abs($)>1e-7;B++)q=x*Math.sin(O),q=Math.pow((1-q)/(1+q),x/2),$=Math.PI/2-2*Math.atan(j*q)-O,O+=$;return new fe(O*l,o.x*l/f)}},wx={__proto__:null,LonLat:mu,Mercator:gu,SphericalMercator:He},bx=s({},oe,{code:"EPSG:3395",projection:gu,transformation:function(){var o=.5/(Math.PI*gu.R);return Vr(o,.5,-o,.5)}()}),Od=s({},oe,{code:"EPSG:4326",projection:mu,transformation:Vr(1/180,1,-1/180,.5)}),kx=s({},te,{projection:mu,transformation:Vr(1,0,-1,0),scale:function(o){return Math.pow(2,o)},zoom:function(o){return Math.log(o)/Math.LN2},distance:function(o,l){var f=l.lng-o.lng,g=l.lat-o.lat;return Math.sqrt(f*f+g*g)},infinite:!0});te.Earth=oe,te.EPSG3395=bx,te.EPSG3857=$n,te.EPSG900913=Zl,te.EPSG4326=Od,te.Simple=kx;var Ht=ee.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(o){return o.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(o){return o&&o.removeLayer(this),this},getPane:function(o){return this._map.getPane(o?this.options[o]||o:this.options.pane)},addInteractiveTarget:function(o){return this._map._targets[h(o)]=this,this},removeInteractiveTarget:function(o){return delete this._map._targets[h(o)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(o){var l=o.target;if(l.hasLayer(this)){if(this._map=l,this._zoomAnimated=l._zoomAnimated,this.getEvents){var f=this.getEvents();l.on(f,this),this.once("remove",function(){l.off(f,this)},this)}this.onAdd(l),this.fire("add"),l.fire("layeradd",{layer:this})}}});ve.include({addLayer:function(o){if(!o._layerAdd)throw new Error("The provided object is not a Layer.");var l=h(o);return this._layers[l]?this:(this._layers[l]=o,o._mapToAdd=this,o.beforeAdd&&o.beforeAdd(this),this.whenReady(o._layerAdd,o),this)},removeLayer:function(o){var l=h(o);return this._layers[l]?(this._loaded&&o.onRemove(this),delete this._layers[l],this._loaded&&(this.fire("layerremove",{layer:o}),o.fire("remove")),o._map=o._mapToAdd=null,this):this},hasLayer:function(o){return h(o)in this._layers},eachLayer:function(o,l){for(var f in this._layers)o.call(l,this._layers[f]);return this},_addLayers:function(o){o=o?N(o)?o:[o]:[];for(var l=0,f=o.length;l<f;l++)this.addLayer(o[l])},_addZoomLimit:function(o){(!isNaN(o.options.maxZoom)||!isNaN(o.options.minZoom))&&(this._zoomBoundLayers[h(o)]=o,this._updateZoomLevels())},_removeZoomLimit:function(o){var l=h(o);this._zoomBoundLayers[l]&&(delete this._zoomBoundLayers[l],this._updateZoomLevels())},_updateZoomLevels:function(){var o=1/0,l=-1/0,f=this._getZoomSpan();for(var g in this._zoomBoundLayers){var x=this._zoomBoundLayers[g].options;o=x.minZoom===void 0?o:Math.min(o,x.minZoom),l=x.maxZoom===void 0?l:Math.max(l,x.maxZoom)}this._layersMaxZoom=l===-1/0?void 0:l,this._layersMinZoom=o===1/0?void 0:o,f!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Yr=Ht.extend({initialize:function(o,l){S(this,l),this._layers={};var f,g;if(o)for(f=0,g=o.length;f<g;f++)this.addLayer(o[f])},addLayer:function(o){var l=this.getLayerId(o);return this._layers[l]=o,this._map&&this._map.addLayer(o),this},removeLayer:function(o){var l=o in this._layers?o:this.getLayerId(o);return this._map&&this._layers[l]&&this._map.removeLayer(this._layers[l]),delete this._layers[l],this},hasLayer:function(o){var l=typeof o=="number"?o:this.getLayerId(o);return l in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(o){var l=Array.prototype.slice.call(arguments,1),f,g;for(f in this._layers)g=this._layers[f],g[o]&&g[o].apply(g,l);return this},onAdd:function(o){this.eachLayer(o.addLayer,o)},onRemove:function(o){this.eachLayer(o.removeLayer,o)},eachLayer:function(o,l){for(var f in this._layers)o.call(l,this._layers[f]);return this},getLayer:function(o){return this._layers[o]},getLayers:function(){var o=[];return this.eachLayer(o.push,o),o},setZIndex:function(o){return this.invoke("setZIndex",o)},getLayerId:function(o){return h(o)}}),Nx=function(o,l){return new Yr(o,l)},_n=Yr.extend({addLayer:function(o){return this.hasLayer(o)?this:(o.addEventParent(this),Yr.prototype.addLayer.call(this,o),this.fire("layeradd",{layer:o}))},removeLayer:function(o){return this.hasLayer(o)?(o in this._layers&&(o=this._layers[o]),o.removeEventParent(this),Yr.prototype.removeLayer.call(this,o),this.fire("layerremove",{layer:o})):this},setStyle:function(o){return this.invoke("setStyle",o)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var o=new he;for(var l in this._layers){var f=this._layers[l];o.extend(f.getBounds?f.getBounds():f.getLatLng())}return o}}),Sx=function(o,l){return new _n(o,l)},Xr=R.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(o){S(this,o)},createIcon:function(o){return this._createIcon("icon",o)},createShadow:function(o){return this._createIcon("shadow",o)},_createIcon:function(o,l){var f=this._getIconUrl(o);if(!f){if(o==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var g=this._createImg(f,l&&l.tagName==="IMG"?l:null);return this._setIconStyles(g,o),(this.options.crossOrigin||this.options.crossOrigin==="")&&(g.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),g},_setIconStyles:function(o,l){var f=this.options,g=f[l+"Size"];typeof g=="number"&&(g=[g,g]);var x=Z(g),j=Z(l==="shadow"&&f.shadowAnchor||f.iconAnchor||x&&x.divideBy(2,!0));o.className="leaflet-marker-"+l+" "+(f.className||""),j&&(o.style.marginLeft=-j.x+"px",o.style.marginTop=-j.y+"px"),x&&(o.style.width=x.x+"px",o.style.height=x.y+"px")},_createImg:function(o,l){return l=l||document.createElement("img"),l.src=o,l},_getIconUrl:function(o){return ae.retina&&this.options[o+"RetinaUrl"]||this.options[o+"Url"]}});function jx(o){return new Xr(o)}var Yi=Xr.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(o){return typeof Yi.imagePath!="string"&&(Yi.imagePath=this._detectIconPath()),(this.options.imagePath||Yi.imagePath)+Xr.prototype._getIconUrl.call(this,o)},_stripUrl:function(o){var l=function(f,g,x){var j=g.exec(f);return j&&j[x]};return o=l(o,/^url\((['"])?(.+)\1\)$/,2),o&&l(o,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var o=ye("div","leaflet-default-icon-path",document.body),l=Hi(o,"background-image")||Hi(o,"backgroundImage");if(document.body.removeChild(o),l=this._stripUrl(l),l)return l;var f=document.querySelector('link[href$="leaflet.css"]');return f?f.href.substring(0,f.href.length-11-1):""}}),Ad=rn.extend({initialize:function(o){this._marker=o},addHooks:function(){var o=this._marker._icon;this._draggable||(this._draggable=new Hn(o,o,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),pe(o,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Ie(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(o){var l=this._marker,f=l._map,g=this._marker.options.autoPanSpeed,x=this._marker.options.autoPanPadding,j=xr(l._icon),O=f.getPixelBounds(),B=f.getPixelOrigin(),$=re(O.min._subtract(B).add(x),O.max._subtract(B).subtract(x));if(!$.contains(j)){var q=Z((Math.max($.max.x,j.x)-$.max.x)/(O.max.x-$.max.x)-(Math.min($.min.x,j.x)-$.min.x)/(O.min.x-$.min.x),(Math.max($.max.y,j.y)-$.max.y)/(O.max.y-$.max.y)-(Math.min($.min.y,j.y)-$.min.y)/(O.min.y-$.min.y)).multiplyBy(g);f.panBy(q,{animate:!1}),this._draggable._newPos._add(q),this._draggable._startPos._add(q),Fe(l._icon,this._draggable._newPos),this._onDrag(o),this._panRequest=V(this._adjustPan.bind(this,o))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(o){this._marker.options.autoPan&&(H(this._panRequest),this._panRequest=V(this._adjustPan.bind(this,o)))},_onDrag:function(o){var l=this._marker,f=l._shadow,g=xr(l._icon),x=l._map.layerPointToLatLng(g);f&&Fe(f,g),l._latlng=x,o.latlng=x,o.oldLatLng=this._oldLatLng,l.fire("move",o).fire("drag",o)},_onDragEnd:function(o){H(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",o)}}),Ms=Ht.extend({options:{icon:new Yi,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(o,l){S(this,l),this._latlng=le(o)},onAdd:function(o){this._zoomAnimated=this._zoomAnimated&&o.options.markerZoomAnimation,this._zoomAnimated&&o.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(o){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&o.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(o){var l=this._latlng;return this._latlng=le(o),this.update(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},setZIndexOffset:function(o){return this.options.zIndexOffset=o,this.update()},getIcon:function(){return this.options.icon},setIcon:function(o){return this.options.icon=o,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var o=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(o)}return this},_initIcon:function(){var o=this.options,l="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),f=o.icon.createIcon(this._icon),g=!1;f!==this._icon&&(this._icon&&this._removeIcon(),g=!0,o.title&&(f.title=o.title),f.tagName==="IMG"&&(f.alt=o.alt||"")),pe(f,l),o.keyboard&&(f.tabIndex="0",f.setAttribute("role","button")),this._icon=f,o.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&de(f,"focus",this._panOnFocus,this);var x=o.icon.createShadow(this._shadow),j=!1;x!==this._shadow&&(this._removeShadow(),j=!0),x&&(pe(x,l),x.alt=""),this._shadow=x,o.opacity<1&&this._updateOpacity(),g&&this.getPane().appendChild(this._icon),this._initInteraction(),x&&j&&this.getPane(o.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&ke(this._icon,"focus",this._panOnFocus,this),Le(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Le(this._shadow),this._shadow=null},_setPos:function(o){this._icon&&Fe(this._icon,o),this._shadow&&Fe(this._shadow,o),this._zIndex=o.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(o){this._icon&&(this._icon.style.zIndex=this._zIndex+o)},_animateZoom:function(o){var l=this._map._latLngToNewLayerPoint(this._latlng,o.zoom,o.center).round();this._setPos(l)},_initInteraction:function(){if(this.options.interactive&&(pe(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Ad)){var o=this.options.draggable;this.dragging&&(o=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Ad(this),o&&this.dragging.enable()}},setOpacity:function(o){return this.options.opacity=o,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var o=this.options.opacity;this._icon&&Et(this._icon,o),this._shadow&&Et(this._shadow,o)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var o=this._map;if(o){var l=this.options.icon.options,f=l.iconSize?Z(l.iconSize):Z(0,0),g=l.iconAnchor?Z(l.iconAnchor):Z(0,0);o.panInside(this._latlng,{paddingTopLeft:g,paddingBottomRight:f.subtract(g)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Cx(o,l){return new Ms(o,l)}var Zn=Ht.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(o){this._renderer=o.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(o){return S(this,o),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&o&&Object.prototype.hasOwnProperty.call(o,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),zs=Zn.extend({options:{fill:!0,radius:10},initialize:function(o,l){S(this,l),this._latlng=le(o),this._radius=this.options.radius},setLatLng:function(o){var l=this._latlng;return this._latlng=le(o),this.redraw(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(o){return this.options.radius=this._radius=o,this.redraw()},getRadius:function(){return this._radius},setStyle:function(o){var l=o&&o.radius||this._radius;return Zn.prototype.setStyle.call(this,o),this.setRadius(l),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var o=this._radius,l=this._radiusY||o,f=this._clickTolerance(),g=[o+f,l+f];this._pxBounds=new J(this._point.subtract(g),this._point.add(g))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(o){return o.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function Px(o,l){return new zs(o,l)}var vu=zs.extend({initialize:function(o,l,f){if(typeof l=="number"&&(l=s({},f,{radius:l})),S(this,l),this._latlng=le(o),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(o){return this._mRadius=o,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var o=[this._radius,this._radiusY||this._radius];return new he(this._map.layerPointToLatLng(this._point.subtract(o)),this._map.layerPointToLatLng(this._point.add(o)))},setStyle:Zn.prototype.setStyle,_project:function(){var o=this._latlng.lng,l=this._latlng.lat,f=this._map,g=f.options.crs;if(g.distance===oe.distance){var x=Math.PI/180,j=this._mRadius/oe.R/x,O=f.project([l+j,o]),B=f.project([l-j,o]),$=O.add(B).divideBy(2),q=f.unproject($).lat,ne=Math.acos((Math.cos(j*x)-Math.sin(l*x)*Math.sin(q*x))/(Math.cos(l*x)*Math.cos(q*x)))/x;(isNaN(ne)||ne===0)&&(ne=j/Math.cos(Math.PI/180*l)),this._point=$.subtract(f.getPixelOrigin()),this._radius=isNaN(ne)?0:$.x-f.project([q,o-ne]).x,this._radiusY=$.y-O.y}else{var ce=g.unproject(g.project(this._latlng).subtract([this._mRadius,0]));this._point=f.latLngToLayerPoint(this._latlng),this._radius=this._point.x-f.latLngToLayerPoint(ce).x}this._updateBounds()}});function Ex(o,l,f){return new vu(o,l,f)}var yn=Zn.extend({options:{smoothFactor:1,noClip:!1},initialize:function(o,l){S(this,l),this._setLatLngs(o)},getLatLngs:function(){return this._latlngs},setLatLngs:function(o){return this._setLatLngs(o),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(o){for(var l=1/0,f=null,g=Ki,x,j,O=0,B=this._parts.length;O<B;O++)for(var $=this._parts[O],q=1,ne=$.length;q<ne;q++){x=$[q-1],j=$[q];var ce=g(o,x,j,!0);ce<l&&(l=ce,f=g(o,x,j))}return f&&(f.distance=Math.sqrt(l)),f},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return zd(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(o,l){return l=l||this._defaultShape(),o=le(o),l.push(o),this._bounds.extend(o),this.redraw()},_setLatLngs:function(o){this._bounds=new he,this._latlngs=this._convertLatLngs(o)},_defaultShape:function(){return Tt(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(o){for(var l=[],f=Tt(o),g=0,x=o.length;g<x;g++)f?(l[g]=le(o[g]),this._bounds.extend(l[g])):l[g]=this._convertLatLngs(o[g]);return l},_project:function(){var o=new J;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,o),this._bounds.isValid()&&o.isValid()&&(this._rawPxBounds=o,this._updateBounds())},_updateBounds:function(){var o=this._clickTolerance(),l=new U(o,o);this._rawPxBounds&&(this._pxBounds=new J([this._rawPxBounds.min.subtract(l),this._rawPxBounds.max.add(l)]))},_projectLatlngs:function(o,l,f){var g=o[0]instanceof fe,x=o.length,j,O;if(g){for(O=[],j=0;j<x;j++)O[j]=this._map.latLngToLayerPoint(o[j]),f.extend(O[j]);l.push(O)}else for(j=0;j<x;j++)this._projectLatlngs(o[j],l,f)},_clipPoints:function(){var o=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(o))){if(this.options.noClip){this._parts=this._rings;return}var l=this._parts,f,g,x,j,O,B,$;for(f=0,x=0,j=this._rings.length;f<j;f++)for($=this._rings[f],g=0,O=$.length;g<O-1;g++)B=Ld($[g],$[g+1],o,g,!0),B&&(l[x]=l[x]||[],l[x].push(B[0]),(B[1]!==$[g+1]||g===O-2)&&(l[x].push(B[1]),x++))}},_simplifyPoints:function(){for(var o=this._parts,l=this.options.smoothFactor,f=0,g=o.length;f<g;f++)o[f]=Pd(o[f],l)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(o,l){var f,g,x,j,O,B,$=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(o))return!1;for(f=0,j=this._parts.length;f<j;f++)for(B=this._parts[f],g=0,O=B.length,x=O-1;g<O;x=g++)if(!(!l&&g===0)&&Ed(o,B[x],B[g])<=$)return!0;return!1}});function Tx(o,l){return new yn(o,l)}yn._flat=Md;var Qr=yn.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Cd(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(o){var l=yn.prototype._convertLatLngs.call(this,o),f=l.length;return f>=2&&l[0]instanceof fe&&l[0].equals(l[f-1])&&l.pop(),l},_setLatLngs:function(o){yn.prototype._setLatLngs.call(this,o),Tt(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Tt(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var o=this._renderer._bounds,l=this.options.weight,f=new U(l,l);if(o=new J(o.min.subtract(f),o.max.add(f)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(o))){if(this.options.noClip){this._parts=this._rings;return}for(var g=0,x=this._rings.length,j;g<x;g++)j=jd(this._rings[g],o,!0),j.length&&this._parts.push(j)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(o){var l=!1,f,g,x,j,O,B,$,q;if(!this._pxBounds||!this._pxBounds.contains(o))return!1;for(j=0,$=this._parts.length;j<$;j++)for(f=this._parts[j],O=0,q=f.length,B=q-1;O<q;B=O++)g=f[O],x=f[B],g.y>o.y!=x.y>o.y&&o.x<(x.x-g.x)*(o.y-g.y)/(x.y-g.y)+g.x&&(l=!l);return l||yn.prototype._containsPoint.call(this,o,!0)}});function Lx(o,l){return new Qr(o,l)}var xn=_n.extend({initialize:function(o,l){S(this,l),this._layers={},o&&this.addData(o)},addData:function(o){var l=N(o)?o:o.features,f,g,x;if(l){for(f=0,g=l.length;f<g;f++)x=l[f],(x.geometries||x.geometry||x.features||x.coordinates)&&this.addData(x);return this}var j=this.options;if(j.filter&&!j.filter(o))return this;var O=Os(o,j);return O?(O.feature=Is(o),O.defaultOptions=O.options,this.resetStyle(O),j.onEachFeature&&j.onEachFeature(o,O),this.addLayer(O)):this},resetStyle:function(o){return o===void 0?this.eachLayer(this.resetStyle,this):(o.options=s({},o.defaultOptions),this._setLayerStyle(o,this.options.style),this)},setStyle:function(o){return this.eachLayer(function(l){this._setLayerStyle(l,o)},this)},_setLayerStyle:function(o,l){o.setStyle&&(typeof l=="function"&&(l=l(o.feature)),o.setStyle(l))}});function Os(o,l){var f=o.type==="Feature"?o.geometry:o,g=f?f.coordinates:null,x=[],j=l&&l.pointToLayer,O=l&&l.coordsToLatLng||_u,B,$,q,ne;if(!g&&!f)return null;switch(f.type){case"Point":return B=O(g),Rd(j,o,B,l);case"MultiPoint":for(q=0,ne=g.length;q<ne;q++)B=O(g[q]),x.push(Rd(j,o,B,l));return new _n(x);case"LineString":case"MultiLineString":return $=As(g,f.type==="LineString"?0:1,O),new yn($,l);case"Polygon":case"MultiPolygon":return $=As(g,f.type==="Polygon"?1:2,O),new Qr($,l);case"GeometryCollection":for(q=0,ne=f.geometries.length;q<ne;q++){var ce=Os({geometry:f.geometries[q],type:"Feature",properties:o.properties},l);ce&&x.push(ce)}return new _n(x);case"FeatureCollection":for(q=0,ne=f.features.length;q<ne;q++){var me=Os(f.features[q],l);me&&x.push(me)}return new _n(x);default:throw new Error("Invalid GeoJSON object.")}}function Rd(o,l,f,g){return o?o(l,f):new Ms(f,g&&g.markersInheritOptions&&g)}function _u(o){return new fe(o[1],o[0],o[2])}function As(o,l,f){for(var g=[],x=0,j=o.length,O;x<j;x++)O=l?As(o[x],l-1,f):(f||_u)(o[x]),g.push(O);return g}function yu(o,l){return o=le(o),o.alt!==void 0?[_(o.lng,l),_(o.lat,l),_(o.alt,l)]:[_(o.lng,l),_(o.lat,l)]}function Rs(o,l,f,g){for(var x=[],j=0,O=o.length;j<O;j++)x.push(l?Rs(o[j],Tt(o[j])?0:l-1,f,g):yu(o[j],g));return!l&&f&&x.length>0&&x.push(x[0].slice()),x}function Jr(o,l){return o.feature?s({},o.feature,{geometry:l}):Is(l)}function Is(o){return o.type==="Feature"||o.type==="FeatureCollection"?o:{type:"Feature",properties:{},geometry:o}}var xu={toGeoJSON:function(o){return Jr(this,{type:"Point",coordinates:yu(this.getLatLng(),o)})}};Ms.include(xu),vu.include(xu),zs.include(xu),yn.include({toGeoJSON:function(o){var l=!Tt(this._latlngs),f=Rs(this._latlngs,l?1:0,!1,o);return Jr(this,{type:(l?"Multi":"")+"LineString",coordinates:f})}}),Qr.include({toGeoJSON:function(o){var l=!Tt(this._latlngs),f=l&&!Tt(this._latlngs[0]),g=Rs(this._latlngs,f?2:l?1:0,!0,o);return l||(g=[g]),Jr(this,{type:(f?"Multi":"")+"Polygon",coordinates:g})}}),Yr.include({toMultiPoint:function(o){var l=[];return this.eachLayer(function(f){l.push(f.toGeoJSON(o).geometry.coordinates)}),Jr(this,{type:"MultiPoint",coordinates:l})},toGeoJSON:function(o){var l=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(l==="MultiPoint")return this.toMultiPoint(o);var f=l==="GeometryCollection",g=[];return this.eachLayer(function(x){if(x.toGeoJSON){var j=x.toGeoJSON(o);if(f)g.push(j.geometry);else{var O=Is(j);O.type==="FeatureCollection"?g.push.apply(g,O.features):g.push(O)}}}),f?Jr(this,{geometries:g,type:"GeometryCollection"}):{type:"FeatureCollection",features:g}}});function Id(o,l){return new xn(o,l)}var Mx=Id,Ds=Ht.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(o,l,f){this._url=o,this._bounds=ue(l),S(this,f)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(pe(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Le(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(o){return this.options.opacity=o,this._image&&this._updateOpacity(),this},setStyle:function(o){return o.opacity&&this.setOpacity(o.opacity),this},bringToFront:function(){return this._map&&Gr(this._image),this},bringToBack:function(){return this._map&&Kr(this._image),this},setUrl:function(o){return this._url=o,this._image&&(this._image.src=o),this},setBounds:function(o){return this._bounds=ue(o),this._map&&this._reset(),this},getEvents:function(){var o={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(o.zoomanim=this._animateZoom),o},setZIndex:function(o){return this.options.zIndex=o,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var o=this._url.tagName==="IMG",l=this._image=o?this._url:ye("img");if(pe(l,"leaflet-image-layer"),this._zoomAnimated&&pe(l,"leaflet-zoom-animated"),this.options.className&&pe(l,this.options.className),l.onselectstart=m,l.onmousemove=m,l.onload=u(this.fire,this,"load"),l.onerror=u(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(l.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),o){this._url=l.src;return}l.src=this._url,l.alt=this.options.alt},_animateZoom:function(o){var l=this._map.getZoomScale(o.zoom),f=this._map._latLngBoundsToNewLayerBounds(this._bounds,o.zoom,o.center).min;yr(this._image,f,l)},_reset:function(){var o=this._image,l=new J(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),f=l.getSize();Fe(o,l.min),o.style.width=f.x+"px",o.style.height=f.y+"px"},_updateOpacity:function(){Et(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var o=this.options.errorOverlayUrl;o&&this._url!==o&&(this._url=o,this._image.src=o)},getCenter:function(){return this._bounds.getCenter()}}),zx=function(o,l,f){return new Ds(o,l,f)},Dd=Ds.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var o=this._url.tagName==="VIDEO",l=this._image=o?this._url:ye("video");if(pe(l,"leaflet-image-layer"),this._zoomAnimated&&pe(l,"leaflet-zoom-animated"),this.options.className&&pe(l,this.options.className),l.onselectstart=m,l.onmousemove=m,l.onloadeddata=u(this.fire,this,"load"),o){for(var f=l.getElementsByTagName("source"),g=[],x=0;x<f.length;x++)g.push(f[x].src);this._url=f.length>0?g:[l.src];return}N(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(l.style,"objectFit")&&(l.style.objectFit="fill"),l.autoplay=!!this.options.autoplay,l.loop=!!this.options.loop,l.muted=!!this.options.muted,l.playsInline=!!this.options.playsInline;for(var j=0;j<this._url.length;j++){var O=ye("source");O.src=this._url[j],l.appendChild(O)}}});function Ox(o,l,f){return new Dd(o,l,f)}var Fd=Ds.extend({_initImage:function(){var o=this._image=this._url;pe(o,"leaflet-image-layer"),this._zoomAnimated&&pe(o,"leaflet-zoom-animated"),this.options.className&&pe(o,this.options.className),o.onselectstart=m,o.onmousemove=m}});function Ax(o,l,f){return new Fd(o,l,f)}var on=Ht.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(o,l){o&&(o instanceof fe||N(o))?(this._latlng=le(o),S(this,l)):(S(this,o),this._source=l),this.options.content&&(this._content=this.options.content)},openOn:function(o){return o=arguments.length?o:this._source._map,o.hasLayer(this)||o.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(o){return this._map?this.close():(arguments.length?this._source=o:o=this._source,this._prepareOpen(),this.openOn(o._map)),this},onAdd:function(o){this._zoomAnimated=o._zoomAnimated,this._container||this._initLayout(),o._fadeAnimated&&Et(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),o._fadeAnimated&&Et(this._container,1),this.bringToFront(),this.options.interactive&&(pe(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(o){o._fadeAnimated?(Et(this._container,0),this._removeTimeout=setTimeout(u(Le,void 0,this._container),200)):Le(this._container),this.options.interactive&&(Ie(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(o){return this._latlng=le(o),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(o){return this._content=o,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var o={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(o.zoomanim=this._animateZoom),o},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Gr(this._container),this},bringToBack:function(){return this._map&&Kr(this._container),this},_prepareOpen:function(o){var l=this._source;if(!l._map)return!1;if(l instanceof _n){l=null;var f=this._source._layers;for(var g in f)if(f[g]._map){l=f[g];break}if(!l)return!1;this._source=l}if(!o)if(l.getCenter)o=l.getCenter();else if(l.getLatLng)o=l.getLatLng();else if(l.getBounds)o=l.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(o),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var o=this._contentNode,l=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof l=="string")o.innerHTML=l;else{for(;o.hasChildNodes();)o.removeChild(o.firstChild);o.appendChild(l)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var o=this._map.latLngToLayerPoint(this._latlng),l=Z(this.options.offset),f=this._getAnchor();this._zoomAnimated?Fe(this._container,o.add(f)):l=l.add(o).add(f);var g=this._containerBottom=-l.y,x=this._containerLeft=-Math.round(this._containerWidth/2)+l.x;this._container.style.bottom=g+"px",this._container.style.left=x+"px"}},_getAnchor:function(){return[0,0]}});ve.include({_initOverlay:function(o,l,f,g){var x=l;return x instanceof o||(x=new o(g).setContent(l)),f&&x.setLatLng(f),x}}),Ht.include({_initOverlay:function(o,l,f,g){var x=f;return x instanceof o?(S(x,g),x._source=this):(x=l&&!g?l:new o(g,this),x.setContent(f)),x}});var Fs=on.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(o){return o=arguments.length?o:this._source._map,!o.hasLayer(this)&&o._popup&&o._popup.options.autoClose&&o.removeLayer(o._popup),o._popup=this,on.prototype.openOn.call(this,o)},onAdd:function(o){on.prototype.onAdd.call(this,o),o.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Zn||this._source.on("preclick",wr))},onRemove:function(o){on.prototype.onRemove.call(this,o),o.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Zn||this._source.off("preclick",wr))},getEvents:function(){var o=on.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(o.preclick=this.close),this.options.keepInView&&(o.moveend=this._adjustPan),o},_initLayout:function(){var o="leaflet-popup",l=this._container=ye("div",o+" "+(this.options.className||"")+" leaflet-zoom-animated"),f=this._wrapper=ye("div",o+"-content-wrapper",l);if(this._contentNode=ye("div",o+"-content",f),qi(l),uu(this._contentNode),de(l,"contextmenu",wr),this._tipContainer=ye("div",o+"-tip-container",l),this._tip=ye("div",o+"-tip",this._tipContainer),this.options.closeButton){var g=this._closeButton=ye("a",o+"-close-button",l);g.setAttribute("role","button"),g.setAttribute("aria-label","Close popup"),g.href="#close",g.innerHTML='<span aria-hidden="true">&#215;</span>',de(g,"click",function(x){Ye(x),this.close()},this)}},_updateLayout:function(){var o=this._contentNode,l=o.style;l.width="",l.whiteSpace="nowrap";var f=o.offsetWidth;f=Math.min(f,this.options.maxWidth),f=Math.max(f,this.options.minWidth),l.width=f+1+"px",l.whiteSpace="",l.height="";var g=o.offsetHeight,x=this.options.maxHeight,j="leaflet-popup-scrolled";x&&g>x?(l.height=x+"px",pe(o,j)):Ie(o,j),this._containerWidth=this._container.offsetWidth},_animateZoom:function(o){var l=this._map._latLngToNewLayerPoint(this._latlng,o.zoom,o.center),f=this._getAnchor();Fe(this._container,l.add(f))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var o=this._map,l=parseInt(Hi(this._container,"marginBottom"),10)||0,f=this._container.offsetHeight+l,g=this._containerWidth,x=new U(this._containerLeft,-f-this._containerBottom);x._add(xr(this._container));var j=o.layerPointToContainerPoint(x),O=Z(this.options.autoPanPadding),B=Z(this.options.autoPanPaddingTopLeft||O),$=Z(this.options.autoPanPaddingBottomRight||O),q=o.getSize(),ne=0,ce=0;j.x+g+$.x>q.x&&(ne=j.x+g-q.x+$.x),j.x-ne-B.x<0&&(ne=j.x-B.x),j.y+f+$.y>q.y&&(ce=j.y+f-q.y+$.y),j.y-ce-B.y<0&&(ce=j.y-B.y),(ne||ce)&&(this.options.keepInView&&(this._autopanning=!0),o.fire("autopanstart").panBy([ne,ce]))}},_getAnchor:function(){return Z(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Rx=function(o,l){return new Fs(o,l)};ve.mergeOptions({closePopupOnClick:!0}),ve.include({openPopup:function(o,l,f){return this._initOverlay(Fs,o,l,f).openOn(this),this},closePopup:function(o){return o=arguments.length?o:this._popup,o&&o.close(),this}}),Ht.include({bindPopup:function(o,l){return this._popup=this._initOverlay(Fs,this._popup,o,l),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(o){return this._popup&&(this instanceof _n||(this._popup._source=this),this._popup._prepareOpen(o||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(o){return this._popup&&this._popup.setContent(o),this},getPopup:function(){return this._popup},_openPopup:function(o){if(!(!this._popup||!this._map)){br(o);var l=o.layer||o.target;if(this._popup._source===l&&!(l instanceof Zn)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(o.latlng);return}this._popup._source=l,this.openPopup(o.latlng)}},_movePopup:function(o){this._popup.setLatLng(o.latlng)},_onKeyPress:function(o){o.originalEvent.keyCode===13&&this._openPopup(o)}});var Bs=on.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(o){on.prototype.onAdd.call(this,o),this.setOpacity(this.options.opacity),o.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(o){on.prototype.onRemove.call(this,o),o.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var o=on.prototype.getEvents.call(this);return this.options.permanent||(o.preclick=this.close),o},_initLayout:function(){var o="leaflet-tooltip",l=o+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=ye("div",l),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+h(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(o){var l,f,g=this._map,x=this._container,j=g.latLngToContainerPoint(g.getCenter()),O=g.layerPointToContainerPoint(o),B=this.options.direction,$=x.offsetWidth,q=x.offsetHeight,ne=Z(this.options.offset),ce=this._getAnchor();B==="top"?(l=$/2,f=q):B==="bottom"?(l=$/2,f=0):B==="center"?(l=$/2,f=q/2):B==="right"?(l=0,f=q/2):B==="left"?(l=$,f=q/2):O.x<j.x?(B="right",l=0,f=q/2):(B="left",l=$+(ne.x+ce.x)*2,f=q/2),o=o.subtract(Z(l,f,!0)).add(ne).add(ce),Ie(x,"leaflet-tooltip-right"),Ie(x,"leaflet-tooltip-left"),Ie(x,"leaflet-tooltip-top"),Ie(x,"leaflet-tooltip-bottom"),pe(x,"leaflet-tooltip-"+B),Fe(x,o)},_updatePosition:function(){var o=this._map.latLngToLayerPoint(this._latlng);this._setPosition(o)},setOpacity:function(o){this.options.opacity=o,this._container&&Et(this._container,o)},_animateZoom:function(o){var l=this._map._latLngToNewLayerPoint(this._latlng,o.zoom,o.center);this._setPosition(l)},_getAnchor:function(){return Z(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Ix=function(o,l){return new Bs(o,l)};ve.include({openTooltip:function(o,l,f){return this._initOverlay(Bs,o,l,f).openOn(this),this},closeTooltip:function(o){return o.close(),this}}),Ht.include({bindTooltip:function(o,l){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Bs,this._tooltip,o,l),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(o){if(!(!o&&this._tooltipHandlersAdded)){var l=o?"off":"on",f={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?f.add=this._openTooltip:(f.mouseover=this._openTooltip,f.mouseout=this.closeTooltip,f.click=this._openTooltip,this._map?this._addFocusListeners():f.add=this._addFocusListeners),this._tooltip.options.sticky&&(f.mousemove=this._moveTooltip),this[l](f),this._tooltipHandlersAdded=!o}},openTooltip:function(o){return this._tooltip&&(this instanceof _n||(this._tooltip._source=this),this._tooltip._prepareOpen(o)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(o){return this._tooltip&&this._tooltip.setContent(o),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(o){var l=typeof o.getElement=="function"&&o.getElement();l&&(de(l,"focus",function(){this._tooltip._source=o,this.openTooltip()},this),de(l,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(o){var l=typeof o.getElement=="function"&&o.getElement();l&&l.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(o){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var l=this;this._map.once("moveend",function(){l._openOnceFlag=!1,l._openTooltip(o)});return}this._tooltip._source=o.layer||o.target,this.openTooltip(this._tooltip.options.sticky?o.latlng:void 0)}},_moveTooltip:function(o){var l=o.latlng,f,g;this._tooltip.options.sticky&&o.originalEvent&&(f=this._map.mouseEventToContainerPoint(o.originalEvent),g=this._map.containerPointToLayerPoint(f),l=this._map.layerPointToLatLng(g)),this._tooltip.setLatLng(l)}});var Bd=Xr.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(o){var l=o&&o.tagName==="DIV"?o:document.createElement("div"),f=this.options;if(f.html instanceof Element?(js(l),l.appendChild(f.html)):l.innerHTML=f.html!==!1?f.html:"",f.bgPos){var g=Z(f.bgPos);l.style.backgroundPosition=-g.x+"px "+-g.y+"px"}return this._setIconStyles(l,"icon"),l},createShadow:function(){return null}});function Dx(o){return new Bd(o)}Xr.Default=Yi;var Xi=Ht.extend({options:{tileSize:256,opacity:1,updateWhenIdle:ae.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(o){S(this,o)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(o){o._addZoomLimit(this)},onRemove:function(o){this._removeAllTiles(),Le(this._container),o._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Gr(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Kr(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(o){return this.options.opacity=o,this._updateOpacity(),this},setZIndex:function(o){return this.options.zIndex=o,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var o=this._clampZoom(this._map.getZoom());o!==this._tileZoom&&(this._tileZoom=o,this._updateLevels()),this._update()}return this},getEvents:function(){var o={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=p(this._onMoveEnd,this.options.updateInterval,this)),o.move=this._onMove),this._zoomAnimated&&(o.zoomanim=this._animateZoom),o},createTile:function(){return document.createElement("div")},getTileSize:function(){var o=this.options.tileSize;return o instanceof U?o:new U(o,o)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(o){for(var l=this.getPane().children,f=-o(-1/0,1/0),g=0,x=l.length,j;g<x;g++)j=l[g].style.zIndex,l[g]!==this._container&&j&&(f=o(f,+j));isFinite(f)&&(this.options.zIndex=f+o(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!ae.ielt9){Et(this._container,this.options.opacity);var o=+new Date,l=!1,f=!1;for(var g in this._tiles){var x=this._tiles[g];if(!(!x.current||!x.loaded)){var j=Math.min(1,(o-x.loaded)/200);Et(x.el,j),j<1?l=!0:(x.active?f=!0:this._onOpaqueTile(x),x.active=!0)}}f&&!this._noPrune&&this._pruneTiles(),l&&(H(this._fadeFrame),this._fadeFrame=V(this._updateOpacity,this))}},_onOpaqueTile:m,_initContainer:function(){this._container||(this._container=ye("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var o=this._tileZoom,l=this.options.maxZoom;if(o!==void 0){for(var f in this._levels)f=Number(f),this._levels[f].el.children.length||f===o?(this._levels[f].el.style.zIndex=l-Math.abs(o-f),this._onUpdateLevel(f)):(Le(this._levels[f].el),this._removeTilesAtZoom(f),this._onRemoveLevel(f),delete this._levels[f]);var g=this._levels[o],x=this._map;return g||(g=this._levels[o]={},g.el=ye("div","leaflet-tile-container leaflet-zoom-animated",this._container),g.el.style.zIndex=l,g.origin=x.project(x.unproject(x.getPixelOrigin()),o).round(),g.zoom=o,this._setZoomTransform(g,x.getCenter(),x.getZoom()),m(g.el.offsetWidth),this._onCreateLevel(g)),this._level=g,g}},_onUpdateLevel:m,_onRemoveLevel:m,_onCreateLevel:m,_pruneTiles:function(){if(this._map){var o,l,f=this._map.getZoom();if(f>this.options.maxZoom||f<this.options.minZoom){this._removeAllTiles();return}for(o in this._tiles)l=this._tiles[o],l.retain=l.current;for(o in this._tiles)if(l=this._tiles[o],l.current&&!l.active){var g=l.coords;this._retainParent(g.x,g.y,g.z,g.z-5)||this._retainChildren(g.x,g.y,g.z,g.z+2)}for(o in this._tiles)this._tiles[o].retain||this._removeTile(o)}},_removeTilesAtZoom:function(o){for(var l in this._tiles)this._tiles[l].coords.z===o&&this._removeTile(l)},_removeAllTiles:function(){for(var o in this._tiles)this._removeTile(o)},_invalidateAll:function(){for(var o in this._levels)Le(this._levels[o].el),this._onRemoveLevel(Number(o)),delete this._levels[o];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(o,l,f,g){var x=Math.floor(o/2),j=Math.floor(l/2),O=f-1,B=new U(+x,+j);B.z=+O;var $=this._tileCoordsToKey(B),q=this._tiles[$];return q&&q.active?(q.retain=!0,!0):(q&&q.loaded&&(q.retain=!0),O>g?this._retainParent(x,j,O,g):!1)},_retainChildren:function(o,l,f,g){for(var x=2*o;x<2*o+2;x++)for(var j=2*l;j<2*l+2;j++){var O=new U(x,j);O.z=f+1;var B=this._tileCoordsToKey(O),$=this._tiles[B];if($&&$.active){$.retain=!0;continue}else $&&$.loaded&&($.retain=!0);f+1<g&&this._retainChildren(x,j,f+1,g)}},_resetView:function(o){var l=o&&(o.pinch||o.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),l,l)},_animateZoom:function(o){this._setView(o.center,o.zoom,!0,o.noUpdate)},_clampZoom:function(o){var l=this.options;return l.minNativeZoom!==void 0&&o<l.minNativeZoom?l.minNativeZoom:l.maxNativeZoom!==void 0&&l.maxNativeZoom<o?l.maxNativeZoom:o},_setView:function(o,l,f,g){var x=Math.round(l);this.options.maxZoom!==void 0&&x>this.options.maxZoom||this.options.minZoom!==void 0&&x<this.options.minZoom?x=void 0:x=this._clampZoom(x);var j=this.options.updateWhenZooming&&x!==this._tileZoom;(!g||j)&&(this._tileZoom=x,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),x!==void 0&&this._update(o),f||this._pruneTiles(),this._noPrune=!!f),this._setZoomTransforms(o,l)},_setZoomTransforms:function(o,l){for(var f in this._levels)this._setZoomTransform(this._levels[f],o,l)},_setZoomTransform:function(o,l,f){var g=this._map.getZoomScale(f,o.zoom),x=o.origin.multiplyBy(g).subtract(this._map._getNewPixelOrigin(l,f)).round();ae.any3d?yr(o.el,x,g):Fe(o.el,x)},_resetGrid:function(){var o=this._map,l=o.options.crs,f=this._tileSize=this.getTileSize(),g=this._tileZoom,x=this._map.getPixelWorldBounds(this._tileZoom);x&&(this._globalTileRange=this._pxBoundsToTileRange(x)),this._wrapX=l.wrapLng&&!this.options.noWrap&&[Math.floor(o.project([0,l.wrapLng[0]],g).x/f.x),Math.ceil(o.project([0,l.wrapLng[1]],g).x/f.y)],this._wrapY=l.wrapLat&&!this.options.noWrap&&[Math.floor(o.project([l.wrapLat[0],0],g).y/f.x),Math.ceil(o.project([l.wrapLat[1],0],g).y/f.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(o){var l=this._map,f=l._animatingZoom?Math.max(l._animateToZoom,l.getZoom()):l.getZoom(),g=l.getZoomScale(f,this._tileZoom),x=l.project(o,this._tileZoom).floor(),j=l.getSize().divideBy(g*2);return new J(x.subtract(j),x.add(j))},_update:function(o){var l=this._map;if(l){var f=this._clampZoom(l.getZoom());if(o===void 0&&(o=l.getCenter()),this._tileZoom!==void 0){var g=this._getTiledPixelBounds(o),x=this._pxBoundsToTileRange(g),j=x.getCenter(),O=[],B=this.options.keepBuffer,$=new J(x.getBottomLeft().subtract([B,-B]),x.getTopRight().add([B,-B]));if(!(isFinite(x.min.x)&&isFinite(x.min.y)&&isFinite(x.max.x)&&isFinite(x.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var q in this._tiles){var ne=this._tiles[q].coords;(ne.z!==this._tileZoom||!$.contains(new U(ne.x,ne.y)))&&(this._tiles[q].current=!1)}if(Math.abs(f-this._tileZoom)>1){this._setView(o,f);return}for(var ce=x.min.y;ce<=x.max.y;ce++)for(var me=x.min.x;me<=x.max.x;me++){var st=new U(me,ce);if(st.z=this._tileZoom,!!this._isValidTile(st)){var qe=this._tiles[this._tileCoordsToKey(st)];qe?qe.current=!0:O.push(st)}}if(O.sort(function(dt,ti){return dt.distanceTo(j)-ti.distanceTo(j)}),O.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Lt=document.createDocumentFragment();for(me=0;me<O.length;me++)this._addTile(O[me],Lt);this._level.el.appendChild(Lt)}}}},_isValidTile:function(o){var l=this._map.options.crs;if(!l.infinite){var f=this._globalTileRange;if(!l.wrapLng&&(o.x<f.min.x||o.x>f.max.x)||!l.wrapLat&&(o.y<f.min.y||o.y>f.max.y))return!1}if(!this.options.bounds)return!0;var g=this._tileCoordsToBounds(o);return ue(this.options.bounds).overlaps(g)},_keyToBounds:function(o){return this._tileCoordsToBounds(this._keyToTileCoords(o))},_tileCoordsToNwSe:function(o){var l=this._map,f=this.getTileSize(),g=o.scaleBy(f),x=g.add(f),j=l.unproject(g,o.z),O=l.unproject(x,o.z);return[j,O]},_tileCoordsToBounds:function(o){var l=this._tileCoordsToNwSe(o),f=new he(l[0],l[1]);return this.options.noWrap||(f=this._map.wrapLatLngBounds(f)),f},_tileCoordsToKey:function(o){return o.x+":"+o.y+":"+o.z},_keyToTileCoords:function(o){var l=o.split(":"),f=new U(+l[0],+l[1]);return f.z=+l[2],f},_removeTile:function(o){var l=this._tiles[o];l&&(Le(l.el),delete this._tiles[o],this.fire("tileunload",{tile:l.el,coords:this._keyToTileCoords(o)}))},_initTile:function(o){pe(o,"leaflet-tile");var l=this.getTileSize();o.style.width=l.x+"px",o.style.height=l.y+"px",o.onselectstart=m,o.onmousemove=m,ae.ielt9&&this.options.opacity<1&&Et(o,this.options.opacity)},_addTile:function(o,l){var f=this._getTilePos(o),g=this._tileCoordsToKey(o),x=this.createTile(this._wrapCoords(o),u(this._tileReady,this,o));this._initTile(x),this.createTile.length<2&&V(u(this._tileReady,this,o,null,x)),Fe(x,f),this._tiles[g]={el:x,coords:o,current:!0},l.appendChild(x),this.fire("tileloadstart",{tile:x,coords:o})},_tileReady:function(o,l,f){l&&this.fire("tileerror",{error:l,tile:f,coords:o});var g=this._tileCoordsToKey(o);f=this._tiles[g],f&&(f.loaded=+new Date,this._map._fadeAnimated?(Et(f.el,0),H(this._fadeFrame),this._fadeFrame=V(this._updateOpacity,this)):(f.active=!0,this._pruneTiles()),l||(pe(f.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:f.el,coords:o})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),ae.ielt9||!this._map._fadeAnimated?V(this._pruneTiles,this):setTimeout(u(this._pruneTiles,this),250)))},_getTilePos:function(o){return o.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(o){var l=new U(this._wrapX?v(o.x,this._wrapX):o.x,this._wrapY?v(o.y,this._wrapY):o.y);return l.z=o.z,l},_pxBoundsToTileRange:function(o){var l=this.getTileSize();return new J(o.min.unscaleBy(l).floor(),o.max.unscaleBy(l).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var o in this._tiles)if(!this._tiles[o].loaded)return!1;return!0}});function Fx(o){return new Xi(o)}var ei=Xi.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(o,l){this._url=o,l=S(this,l),l.detectRetina&&ae.retina&&l.maxZoom>0?(l.tileSize=Math.floor(l.tileSize/2),l.zoomReverse?(l.zoomOffset--,l.minZoom=Math.min(l.maxZoom,l.minZoom+1)):(l.zoomOffset++,l.maxZoom=Math.max(l.minZoom,l.maxZoom-1)),l.minZoom=Math.max(0,l.minZoom)):l.zoomReverse?l.minZoom=Math.min(l.maxZoom,l.minZoom):l.maxZoom=Math.max(l.minZoom,l.maxZoom),typeof l.subdomains=="string"&&(l.subdomains=l.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(o,l){return this._url===o&&l===void 0&&(l=!0),this._url=o,l||this.redraw(),this},createTile:function(o,l){var f=document.createElement("img");return de(f,"load",u(this._tileOnLoad,this,l,f)),de(f,"error",u(this._tileOnError,this,l,f)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(f.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(f.referrerPolicy=this.options.referrerPolicy),f.alt="",f.src=this.getTileUrl(o),f},getTileUrl:function(o){var l={r:ae.retina?"@2x":"",s:this._getSubdomain(o),x:o.x,y:o.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var f=this._globalTileRange.max.y-o.y;this.options.tms&&(l.y=f),l["-y"]=f}return b(this._url,s(l,this.options))},_tileOnLoad:function(o,l){ae.ielt9?setTimeout(u(o,this,null,l),0):o(null,l)},_tileOnError:function(o,l,f){var g=this.options.errorTileUrl;g&&l.getAttribute("src")!==g&&(l.src=g),o(f,l)},_onTileRemove:function(o){o.tile.onload=null},_getZoomForUrl:function(){var o=this._tileZoom,l=this.options.maxZoom,f=this.options.zoomReverse,g=this.options.zoomOffset;return f&&(o=l-o),o+g},_getSubdomain:function(o){var l=Math.abs(o.x+o.y)%this.options.subdomains.length;return this.options.subdomains[l]},_abortLoading:function(){var o,l;for(o in this._tiles)if(this._tiles[o].coords.z!==this._tileZoom&&(l=this._tiles[o].el,l.onload=m,l.onerror=m,!l.complete)){l.src=P;var f=this._tiles[o].coords;Le(l),delete this._tiles[o],this.fire("tileabort",{tile:l,coords:f})}},_removeTile:function(o){var l=this._tiles[o];if(l)return l.el.setAttribute("src",P),Xi.prototype._removeTile.call(this,o)},_tileReady:function(o,l,f){if(!(!this._map||f&&f.getAttribute("src")===P))return Xi.prototype._tileReady.call(this,o,l,f)}});function Ud(o,l){return new ei(o,l)}var $d=ei.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(o,l){this._url=o;var f=s({},this.defaultWmsParams);for(var g in l)g in this.options||(f[g]=l[g]);l=S(this,l);var x=l.detectRetina&&ae.retina?2:1,j=this.getTileSize();f.width=j.x*x,f.height=j.y*x,this.wmsParams=f},onAdd:function(o){this._crs=this.options.crs||o.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var l=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[l]=this._crs.code,ei.prototype.onAdd.call(this,o)},getTileUrl:function(o){var l=this._tileCoordsToNwSe(o),f=this._crs,g=re(f.project(l[0]),f.project(l[1])),x=g.min,j=g.max,O=(this._wmsVersion>=1.3&&this._crs===Od?[x.y,x.x,j.y,j.x]:[x.x,x.y,j.x,j.y]).join(","),B=ei.prototype.getTileUrl.call(this,o);return B+E(this.wmsParams,B,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+O},setParams:function(o,l){return s(this.wmsParams,o),l||this.redraw(),this}});function Bx(o,l){return new $d(o,l)}ei.WMS=$d,Ud.wms=Bx;var wn=Ht.extend({options:{padding:.1},initialize:function(o){S(this,o),h(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),pe(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var o={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(o.zoomanim=this._onAnimZoom),o},_onAnimZoom:function(o){this._updateTransform(o.center,o.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(o,l){var f=this._map.getZoomScale(l,this._zoom),g=this._map.getSize().multiplyBy(.5+this.options.padding),x=this._map.project(this._center,l),j=g.multiplyBy(-f).add(x).subtract(this._map._getNewPixelOrigin(o,l));ae.any3d?yr(this._container,j,f):Fe(this._container,j)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var o in this._layers)this._layers[o]._reset()},_onZoomEnd:function(){for(var o in this._layers)this._layers[o]._project()},_updatePaths:function(){for(var o in this._layers)this._layers[o]._update()},_update:function(){var o=this.options.padding,l=this._map.getSize(),f=this._map.containerPointToLayerPoint(l.multiplyBy(-o)).round();this._bounds=new J(f,f.add(l.multiplyBy(1+o*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Hd=wn.extend({options:{tolerance:0},getEvents:function(){var o=wn.prototype.getEvents.call(this);return o.viewprereset=this._onViewPreReset,o},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){wn.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var o=this._container=document.createElement("canvas");de(o,"mousemove",this._onMouseMove,this),de(o,"click dblclick mousedown mouseup contextmenu",this._onClick,this),de(o,"mouseout",this._handleMouseOut,this),o._leaflet_disable_events=!0,this._ctx=o.getContext("2d")},_destroyContainer:function(){H(this._redrawRequest),delete this._ctx,Le(this._container),ke(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var o;this._redrawBounds=null;for(var l in this._layers)o=this._layers[l],o._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){wn.prototype._update.call(this);var o=this._bounds,l=this._container,f=o.getSize(),g=ae.retina?2:1;Fe(l,o.min),l.width=g*f.x,l.height=g*f.y,l.style.width=f.x+"px",l.style.height=f.y+"px",ae.retina&&this._ctx.scale(2,2),this._ctx.translate(-o.min.x,-o.min.y),this.fire("update")}},_reset:function(){wn.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(o){this._updateDashArray(o),this._layers[h(o)]=o;var l=o._order={layer:o,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=l),this._drawLast=l,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(o){this._requestRedraw(o)},_removePath:function(o){var l=o._order,f=l.next,g=l.prev;f?f.prev=g:this._drawLast=g,g?g.next=f:this._drawFirst=f,delete o._order,delete this._layers[h(o)],this._requestRedraw(o)},_updatePath:function(o){this._extendRedrawBounds(o),o._project(),o._update(),this._requestRedraw(o)},_updateStyle:function(o){this._updateDashArray(o),this._requestRedraw(o)},_updateDashArray:function(o){if(typeof o.options.dashArray=="string"){var l=o.options.dashArray.split(/[, ]+/),f=[],g,x;for(x=0;x<l.length;x++){if(g=Number(l[x]),isNaN(g))return;f.push(g)}o.options._dashArray=f}else o.options._dashArray=o.options.dashArray},_requestRedraw:function(o){this._map&&(this._extendRedrawBounds(o),this._redrawRequest=this._redrawRequest||V(this._redraw,this))},_extendRedrawBounds:function(o){if(o._pxBounds){var l=(o.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new J,this._redrawBounds.extend(o._pxBounds.min.subtract([l,l])),this._redrawBounds.extend(o._pxBounds.max.add([l,l]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var o=this._redrawBounds;if(o){var l=o.getSize();this._ctx.clearRect(o.min.x,o.min.y,l.x,l.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var o,l=this._redrawBounds;if(this._ctx.save(),l){var f=l.getSize();this._ctx.beginPath(),this._ctx.rect(l.min.x,l.min.y,f.x,f.y),this._ctx.clip()}this._drawing=!0;for(var g=this._drawFirst;g;g=g.next)o=g.layer,(!l||o._pxBounds&&o._pxBounds.intersects(l))&&o._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(o,l){if(this._drawing){var f,g,x,j,O=o._parts,B=O.length,$=this._ctx;if(B){for($.beginPath(),f=0;f<B;f++){for(g=0,x=O[f].length;g<x;g++)j=O[f][g],$[g?"lineTo":"moveTo"](j.x,j.y);l&&$.closePath()}this._fillStroke($,o)}}},_updateCircle:function(o){if(!(!this._drawing||o._empty())){var l=o._point,f=this._ctx,g=Math.max(Math.round(o._radius),1),x=(Math.max(Math.round(o._radiusY),1)||g)/g;x!==1&&(f.save(),f.scale(1,x)),f.beginPath(),f.arc(l.x,l.y/x,g,0,Math.PI*2,!1),x!==1&&f.restore(),this._fillStroke(f,o)}},_fillStroke:function(o,l){var f=l.options;f.fill&&(o.globalAlpha=f.fillOpacity,o.fillStyle=f.fillColor||f.color,o.fill(f.fillRule||"evenodd")),f.stroke&&f.weight!==0&&(o.setLineDash&&o.setLineDash(l.options&&l.options._dashArray||[]),o.globalAlpha=f.opacity,o.lineWidth=f.weight,o.strokeStyle=f.color,o.lineCap=f.lineCap,o.lineJoin=f.lineJoin,o.stroke())},_onClick:function(o){for(var l=this._map.mouseEventToLayerPoint(o),f,g,x=this._drawFirst;x;x=x.next)f=x.layer,f.options.interactive&&f._containsPoint(l)&&(!(o.type==="click"||o.type==="preclick")||!this._map._draggableMoved(f))&&(g=f);this._fireEvent(g?[g]:!1,o)},_onMouseMove:function(o){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var l=this._map.mouseEventToLayerPoint(o);this._handleMouseHover(o,l)}},_handleMouseOut:function(o){var l=this._hoveredLayer;l&&(Ie(this._container,"leaflet-interactive"),this._fireEvent([l],o,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(o,l){if(!this._mouseHoverThrottled){for(var f,g,x=this._drawFirst;x;x=x.next)f=x.layer,f.options.interactive&&f._containsPoint(l)&&(g=f);g!==this._hoveredLayer&&(this._handleMouseOut(o),g&&(pe(this._container,"leaflet-interactive"),this._fireEvent([g],o,"mouseover"),this._hoveredLayer=g)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,o),this._mouseHoverThrottled=!0,setTimeout(u(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(o,l,f){this._map._fireDOMEvent(l,f||l.type,o)},_bringToFront:function(o){var l=o._order;if(l){var f=l.next,g=l.prev;if(f)f.prev=g;else return;g?g.next=f:f&&(this._drawFirst=f),l.prev=this._drawLast,this._drawLast.next=l,l.next=null,this._drawLast=l,this._requestRedraw(o)}},_bringToBack:function(o){var l=o._order;if(l){var f=l.next,g=l.prev;if(g)g.next=f;else return;f?f.prev=g:g&&(this._drawLast=g),l.prev=null,l.next=this._drawFirst,this._drawFirst.prev=l,this._drawFirst=l,this._requestRedraw(o)}}});function Zd(o){return ae.canvas?new Hd(o):null}var Qi=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(o){return document.createElement("<lvml:"+o+' class="lvml">')}}catch{}return function(o){return document.createElement("<"+o+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),Ux={_initContainer:function(){this._container=ye("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(wn.prototype._update.call(this),this.fire("update"))},_initPath:function(o){var l=o._container=Qi("shape");pe(l,"leaflet-vml-shape "+(this.options.className||"")),l.coordsize="1 1",o._path=Qi("path"),l.appendChild(o._path),this._updateStyle(o),this._layers[h(o)]=o},_addPath:function(o){var l=o._container;this._container.appendChild(l),o.options.interactive&&o.addInteractiveTarget(l)},_removePath:function(o){var l=o._container;Le(l),o.removeInteractiveTarget(l),delete this._layers[h(o)]},_updateStyle:function(o){var l=o._stroke,f=o._fill,g=o.options,x=o._container;x.stroked=!!g.stroke,x.filled=!!g.fill,g.stroke?(l||(l=o._stroke=Qi("stroke")),x.appendChild(l),l.weight=g.weight+"px",l.color=g.color,l.opacity=g.opacity,g.dashArray?l.dashStyle=N(g.dashArray)?g.dashArray.join(" "):g.dashArray.replace(/( *, *)/g," "):l.dashStyle="",l.endcap=g.lineCap.replace("butt","flat"),l.joinstyle=g.lineJoin):l&&(x.removeChild(l),o._stroke=null),g.fill?(f||(f=o._fill=Qi("fill")),x.appendChild(f),f.color=g.fillColor||g.color,f.opacity=g.fillOpacity):f&&(x.removeChild(f),o._fill=null)},_updateCircle:function(o){var l=o._point.round(),f=Math.round(o._radius),g=Math.round(o._radiusY||f);this._setPath(o,o._empty()?"M0 0":"AL "+l.x+","+l.y+" "+f+","+g+" 0,"+65535*360)},_setPath:function(o,l){o._path.v=l},_bringToFront:function(o){Gr(o._container)},_bringToBack:function(o){Kr(o._container)}},Us=ae.vml?Qi:ks,Ji=wn.extend({_initContainer:function(){this._container=Us("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Us("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Le(this._container),ke(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){wn.prototype._update.call(this);var o=this._bounds,l=o.getSize(),f=this._container;(!this._svgSize||!this._svgSize.equals(l))&&(this._svgSize=l,f.setAttribute("width",l.x),f.setAttribute("height",l.y)),Fe(f,o.min),f.setAttribute("viewBox",[o.min.x,o.min.y,l.x,l.y].join(" ")),this.fire("update")}},_initPath:function(o){var l=o._path=Us("path");o.options.className&&pe(l,o.options.className),o.options.interactive&&pe(l,"leaflet-interactive"),this._updateStyle(o),this._layers[h(o)]=o},_addPath:function(o){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(o._path),o.addInteractiveTarget(o._path)},_removePath:function(o){Le(o._path),o.removeInteractiveTarget(o._path),delete this._layers[h(o)]},_updatePath:function(o){o._project(),o._update()},_updateStyle:function(o){var l=o._path,f=o.options;l&&(f.stroke?(l.setAttribute("stroke",f.color),l.setAttribute("stroke-opacity",f.opacity),l.setAttribute("stroke-width",f.weight),l.setAttribute("stroke-linecap",f.lineCap),l.setAttribute("stroke-linejoin",f.lineJoin),f.dashArray?l.setAttribute("stroke-dasharray",f.dashArray):l.removeAttribute("stroke-dasharray"),f.dashOffset?l.setAttribute("stroke-dashoffset",f.dashOffset):l.removeAttribute("stroke-dashoffset")):l.setAttribute("stroke","none"),f.fill?(l.setAttribute("fill",f.fillColor||f.color),l.setAttribute("fill-opacity",f.fillOpacity),l.setAttribute("fill-rule",f.fillRule||"evenodd")):l.setAttribute("fill","none"))},_updatePoly:function(o,l){this._setPath(o,Kh(o._parts,l))},_updateCircle:function(o){var l=o._point,f=Math.max(Math.round(o._radius),1),g=Math.max(Math.round(o._radiusY),1)||f,x="a"+f+","+g+" 0 1,0 ",j=o._empty()?"M0 0":"M"+(l.x-f)+","+l.y+x+f*2+",0 "+x+-f*2+",0 ";this._setPath(o,j)},_setPath:function(o,l){o._path.setAttribute("d",l)},_bringToFront:function(o){Gr(o._path)},_bringToBack:function(o){Kr(o._path)}});ae.vml&&Ji.include(Ux);function Wd(o){return ae.svg||ae.vml?new Ji(o):null}ve.include({getRenderer:function(o){var l=o.options.renderer||this._getPaneRenderer(o.options.pane)||this.options.renderer||this._renderer;return l||(l=this._renderer=this._createRenderer()),this.hasLayer(l)||this.addLayer(l),l},_getPaneRenderer:function(o){if(o==="overlayPane"||o===void 0)return!1;var l=this._paneRenderers[o];return l===void 0&&(l=this._createRenderer({pane:o}),this._paneRenderers[o]=l),l},_createRenderer:function(o){return this.options.preferCanvas&&Zd(o)||Wd(o)}});var Vd=Qr.extend({initialize:function(o,l){Qr.prototype.initialize.call(this,this._boundsToLatLngs(o),l)},setBounds:function(o){return this.setLatLngs(this._boundsToLatLngs(o))},_boundsToLatLngs:function(o){return o=ue(o),[o.getSouthWest(),o.getNorthWest(),o.getNorthEast(),o.getSouthEast()]}});function $x(o,l){return new Vd(o,l)}Ji.create=Us,Ji.pointsToPath=Kh,xn.geometryToLayer=Os,xn.coordsToLatLng=_u,xn.coordsToLatLngs=As,xn.latLngToCoords=yu,xn.latLngsToCoords=Rs,xn.getFeature=Jr,xn.asFeature=Is,ve.mergeOptions({boxZoom:!0});var qd=rn.extend({initialize:function(o){this._map=o,this._container=o._container,this._pane=o._panes.overlayPane,this._resetStateTimeout=0,o.on("unload",this._destroy,this)},addHooks:function(){de(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){ke(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Le(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(o){if(!o.shiftKey||o.which!==1&&o.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Zi(),tu(),this._startPoint=this._map.mouseEventToContainerPoint(o),de(document,{contextmenu:br,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(o){this._moved||(this._moved=!0,this._box=ye("div","leaflet-zoom-box",this._container),pe(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(o);var l=new J(this._point,this._startPoint),f=l.getSize();Fe(this._box,l.min),this._box.style.width=f.x+"px",this._box.style.height=f.y+"px"},_finish:function(){this._moved&&(Le(this._box),Ie(this._container,"leaflet-crosshair")),Wi(),nu(),ke(document,{contextmenu:br,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(o){if(!(o.which!==1&&o.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(u(this._resetState,this),0);var l=new he(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(l).fire("boxzoomend",{boxZoomBounds:l})}},_onKeyDown:function(o){o.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});ve.addInitHook("addHandler","boxZoom",qd),ve.mergeOptions({doubleClickZoom:!0});var Gd=rn.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(o){var l=this._map,f=l.getZoom(),g=l.options.zoomDelta,x=o.originalEvent.shiftKey?f-g:f+g;l.options.doubleClickZoom==="center"?l.setZoom(x):l.setZoomAround(o.containerPoint,x)}});ve.addInitHook("addHandler","doubleClickZoom",Gd),ve.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Kd=rn.extend({addHooks:function(){if(!this._draggable){var o=this._map;this._draggable=new Hn(o._mapPane,o._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),o.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),o.on("zoomend",this._onZoomEnd,this),o.whenReady(this._onZoomEnd,this))}pe(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Ie(this._map._container,"leaflet-grab"),Ie(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var o=this._map;if(o._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var l=ue(this._map.options.maxBounds);this._offsetLimit=re(this._map.latLngToContainerPoint(l.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(l.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;o.fire("movestart").fire("dragstart"),o.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(o){if(this._map.options.inertia){var l=this._lastTime=+new Date,f=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(f),this._times.push(l),this._prunePositions(l)}this._map.fire("move",o).fire("drag",o)},_prunePositions:function(o){for(;this._positions.length>1&&o-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var o=this._map.getSize().divideBy(2),l=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=l.subtract(o).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(o,l){return o-(o-l)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var o=this._draggable._newPos.subtract(this._draggable._startPos),l=this._offsetLimit;o.x<l.min.x&&(o.x=this._viscousLimit(o.x,l.min.x)),o.y<l.min.y&&(o.y=this._viscousLimit(o.y,l.min.y)),o.x>l.max.x&&(o.x=this._viscousLimit(o.x,l.max.x)),o.y>l.max.y&&(o.y=this._viscousLimit(o.y,l.max.y)),this._draggable._newPos=this._draggable._startPos.add(o)}},_onPreDragWrap:function(){var o=this._worldWidth,l=Math.round(o/2),f=this._initialWorldOffset,g=this._draggable._newPos.x,x=(g-l+f)%o+l-f,j=(g+l+f)%o-l-f,O=Math.abs(x+f)<Math.abs(j+f)?x:j;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=O},_onDragEnd:function(o){var l=this._map,f=l.options,g=!f.inertia||o.noInertia||this._times.length<2;if(l.fire("dragend",o),g)l.fire("moveend");else{this._prunePositions(+new Date);var x=this._lastPos.subtract(this._positions[0]),j=(this._lastTime-this._times[0])/1e3,O=f.easeLinearity,B=x.multiplyBy(O/j),$=B.distanceTo([0,0]),q=Math.min(f.inertiaMaxSpeed,$),ne=B.multiplyBy(q/$),ce=q/(f.inertiaDeceleration*O),me=ne.multiplyBy(-ce/2).round();!me.x&&!me.y?l.fire("moveend"):(me=l._limitOffset(me,l.options.maxBounds),V(function(){l.panBy(me,{duration:ce,easeLinearity:O,noMoveStart:!0,animate:!0})}))}}});ve.addInitHook("addHandler","dragging",Kd),ve.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Yd=rn.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(o){this._map=o,this._setPanDelta(o.options.keyboardPanDelta),this._setZoomDelta(o.options.zoomDelta)},addHooks:function(){var o=this._map._container;o.tabIndex<=0&&(o.tabIndex="0"),de(o,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),ke(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var o=document.body,l=document.documentElement,f=o.scrollTop||l.scrollTop,g=o.scrollLeft||l.scrollLeft;this._map._container.focus(),window.scrollTo(g,f)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(o){var l=this._panKeys={},f=this.keyCodes,g,x;for(g=0,x=f.left.length;g<x;g++)l[f.left[g]]=[-1*o,0];for(g=0,x=f.right.length;g<x;g++)l[f.right[g]]=[o,0];for(g=0,x=f.down.length;g<x;g++)l[f.down[g]]=[0,o];for(g=0,x=f.up.length;g<x;g++)l[f.up[g]]=[0,-1*o]},_setZoomDelta:function(o){var l=this._zoomKeys={},f=this.keyCodes,g,x;for(g=0,x=f.zoomIn.length;g<x;g++)l[f.zoomIn[g]]=o;for(g=0,x=f.zoomOut.length;g<x;g++)l[f.zoomOut[g]]=-o},_addHooks:function(){de(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){ke(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(o){if(!(o.altKey||o.ctrlKey||o.metaKey)){var l=o.keyCode,f=this._map,g;if(l in this._panKeys){if(!f._panAnim||!f._panAnim._inProgress)if(g=this._panKeys[l],o.shiftKey&&(g=Z(g).multiplyBy(3)),f.options.maxBounds&&(g=f._limitOffset(Z(g),f.options.maxBounds)),f.options.worldCopyJump){var x=f.wrapLatLng(f.unproject(f.project(f.getCenter()).add(g)));f.panTo(x)}else f.panBy(g)}else if(l in this._zoomKeys)f.setZoom(f.getZoom()+(o.shiftKey?3:1)*this._zoomKeys[l]);else if(l===27&&f._popup&&f._popup.options.closeOnEscapeKey)f.closePopup();else return;br(o)}}});ve.addInitHook("addHandler","keyboard",Yd),ve.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Xd=rn.extend({addHooks:function(){de(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){ke(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(o){var l=wd(o),f=this._map.options.wheelDebounceTime;this._delta+=l,this._lastMousePos=this._map.mouseEventToContainerPoint(o),this._startTime||(this._startTime=+new Date);var g=Math.max(f-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(u(this._performZoom,this),g),br(o)},_performZoom:function(){var o=this._map,l=o.getZoom(),f=this._map.options.zoomSnap||0;o._stop();var g=this._delta/(this._map.options.wheelPxPerZoomLevel*4),x=4*Math.log(2/(1+Math.exp(-Math.abs(g))))/Math.LN2,j=f?Math.ceil(x/f)*f:x,O=o._limitZoom(l+(this._delta>0?j:-j))-l;this._delta=0,this._startTime=null,O&&(o.options.scrollWheelZoom==="center"?o.setZoom(l+O):o.setZoomAround(this._lastMousePos,l+O))}});ve.addInitHook("addHandler","scrollWheelZoom",Xd);var Hx=600;ve.mergeOptions({tapHold:ae.touchNative&&ae.safari&&ae.mobile,tapTolerance:15});var Qd=rn.extend({addHooks:function(){de(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){ke(this._map._container,"touchstart",this._onDown,this)},_onDown:function(o){if(clearTimeout(this._holdTimeout),o.touches.length===1){var l=o.touches[0];this._startPos=this._newPos=new U(l.clientX,l.clientY),this._holdTimeout=setTimeout(u(function(){this._cancel(),this._isTapValid()&&(de(document,"touchend",Ye),de(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",l))},this),Hx),de(document,"touchend touchcancel contextmenu",this._cancel,this),de(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function o(){ke(document,"touchend",Ye),ke(document,"touchend touchcancel",o)},_cancel:function(){clearTimeout(this._holdTimeout),ke(document,"touchend touchcancel contextmenu",this._cancel,this),ke(document,"touchmove",this._onMove,this)},_onMove:function(o){var l=o.touches[0];this._newPos=new U(l.clientX,l.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(o,l){var f=new MouseEvent(o,{bubbles:!0,cancelable:!0,view:window,screenX:l.screenX,screenY:l.screenY,clientX:l.clientX,clientY:l.clientY});f._simulated=!0,l.target.dispatchEvent(f)}});ve.addInitHook("addHandler","tapHold",Qd),ve.mergeOptions({touchZoom:ae.touch,bounceAtZoomLimits:!0});var Jd=rn.extend({addHooks:function(){pe(this._map._container,"leaflet-touch-zoom"),de(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Ie(this._map._container,"leaflet-touch-zoom"),ke(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(o){var l=this._map;if(!(!o.touches||o.touches.length!==2||l._animatingZoom||this._zooming)){var f=l.mouseEventToContainerPoint(o.touches[0]),g=l.mouseEventToContainerPoint(o.touches[1]);this._centerPoint=l.getSize()._divideBy(2),this._startLatLng=l.containerPointToLatLng(this._centerPoint),l.options.touchZoom!=="center"&&(this._pinchStartLatLng=l.containerPointToLatLng(f.add(g)._divideBy(2))),this._startDist=f.distanceTo(g),this._startZoom=l.getZoom(),this._moved=!1,this._zooming=!0,l._stop(),de(document,"touchmove",this._onTouchMove,this),de(document,"touchend touchcancel",this._onTouchEnd,this),Ye(o)}},_onTouchMove:function(o){if(!(!o.touches||o.touches.length!==2||!this._zooming)){var l=this._map,f=l.mouseEventToContainerPoint(o.touches[0]),g=l.mouseEventToContainerPoint(o.touches[1]),x=f.distanceTo(g)/this._startDist;if(this._zoom=l.getScaleZoom(x,this._startZoom),!l.options.bounceAtZoomLimits&&(this._zoom<l.getMinZoom()&&x<1||this._zoom>l.getMaxZoom()&&x>1)&&(this._zoom=l._limitZoom(this._zoom)),l.options.touchZoom==="center"){if(this._center=this._startLatLng,x===1)return}else{var j=f._add(g)._divideBy(2)._subtract(this._centerPoint);if(x===1&&j.x===0&&j.y===0)return;this._center=l.unproject(l.project(this._pinchStartLatLng,this._zoom).subtract(j),this._zoom)}this._moved||(l._moveStart(!0,!1),this._moved=!0),H(this._animRequest);var O=u(l._move,l,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=V(O,this,!0),Ye(o)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,H(this._animRequest),ke(document,"touchmove",this._onTouchMove,this),ke(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});ve.addInitHook("addHandler","touchZoom",Jd),ve.BoxZoom=qd,ve.DoubleClickZoom=Gd,ve.Drag=Kd,ve.Keyboard=Yd,ve.ScrollWheelZoom=Xd,ve.TapHold=Qd,ve.TouchZoom=Jd,r.Bounds=J,r.Browser=ae,r.CRS=te,r.Canvas=Hd,r.Circle=vu,r.CircleMarker=zs,r.Class=R,r.Control=$t,r.DivIcon=Bd,r.DivOverlay=on,r.DomEvent=ax,r.DomUtil=ox,r.Draggable=Hn,r.Evented=ee,r.FeatureGroup=_n,r.GeoJSON=xn,r.GridLayer=Xi,r.Handler=rn,r.Icon=Xr,r.ImageOverlay=Ds,r.LatLng=fe,r.LatLngBounds=he,r.Layer=Ht,r.LayerGroup=Yr,r.LineUtil=xx,r.Map=ve,r.Marker=Ms,r.Mixin=px,r.Path=Zn,r.Point=U,r.PolyUtil=mx,r.Polygon=Qr,r.Polyline=yn,r.Popup=Fs,r.PosAnimation=bd,r.Projection=wx,r.Rectangle=Vd,r.Renderer=wn,r.SVG=Ji,r.SVGOverlay=Fd,r.TileLayer=ei,r.Tooltip=Bs,r.Transformation=Un,r.Util=Q,r.VideoOverlay=Dd,r.bind=u,r.bounds=re,r.canvas=Zd,r.circle=Ex,r.circleMarker=Px,r.control=Gi,r.divIcon=Dx,r.extend=s,r.featureGroup=Sx,r.geoJSON=Id,r.geoJson=Mx,r.gridLayer=Fx,r.icon=jx,r.imageOverlay=zx,r.latLng=le,r.latLngBounds=ue,r.layerGroup=Nx,r.map=lx,r.marker=Cx,r.point=Z,r.polygon=Lx,r.polyline=Tx,r.popup=Rx,r.rectangle=$x,r.setOptions=S,r.stamp=h,r.svg=Wd,r.svgOverlay=Ax,r.tileLayer=Ud,r.tooltip=Ix,r.transformation=Vr,r.version=i,r.videoOverlay=Ox;var Zx=window.L;r.noConflict=function(){return window.L=Zx,this},window.L=r})})(Pf,Pf.exports);var Bi=Pf.exports;const Og=Tf(Bi);function $l(e,n,r){return Object.freeze({instance:e,context:n,container:r})}function Hl(e,n){return n==null?function(i,s){const a=A.useRef();return a.current||(a.current=e(i,s)),a}:function(i,s){const a=A.useRef();a.current||(a.current=e(i,s));const u=A.useRef(i),{instance:c}=a.current;return A.useEffect(function(){u.current!==i&&(n(c,i,u.current),u.current=i)},[c,i,s]),a}}function Py(e,n){A.useEffect(function(){return(n.layerContainer??n.map).addLayer(e.instance),function(){var a;(a=n.layerContainer)==null||a.removeLayer(e.instance),n.map.removeLayer(e.instance)}},[n,e])}function Ey(e){return function(r){const i=Bl(),s=e(Ul(r,i),i);return ky(i.map,r.attribution),Gh(s.current,r.eventHandlers),Py(s.current,i),s}}function iT(e,n){const r=A.useRef();A.useEffect(function(){if(n.pathOptions!==r.current){const s=n.pathOptions??{};e.instance.setStyle(s),r.current=s}},[e,n])}function oT(e){return function(r){const i=Bl(),s=e(Ul(r,i),i);return Gh(s.current,r.eventHandlers),Py(s.current,i),iT(s.current,r),s}}function sT(e,n){const r=Hl(e,n),i=Ey(r);return Cy(i)}function aT(e,n){const r=Hl(e),i=rT(r,n);return tT(i)}function lT(e,n){const r=Hl(e,n),i=oT(r);return Cy(i)}function uT(e,n){const r=Hl(e,n),i=Ey(r);return nT(i)}function cT(e,n,r){const{opacity:i,zIndex:s}=n;i!=null&&i!==r.opacity&&e.setOpacity(i),s!=null&&s!==r.zIndex&&e.setZIndex(s)}function fT(){return Bl().map}function Ef(){return Ef=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},Ef.apply(this,arguments)}function hT({bounds:e,boundsOptions:n,center:r,children:i,className:s,id:a,placeholder:u,style:c,whenReady:h,zoom:p,...v},m){const[_]=A.useState({className:s,id:a,style:c}),[y,k]=A.useState(null);A.useImperativeHandle(m,()=>(y==null?void 0:y.map)??null,[y]);const S=A.useCallback(w=>{if(w!==null&&y===null){const b=new Bi.Map(w,v);r!=null&&p!=null?b.setView(r,p):e!=null&&b.fitBounds(e,n),h!=null&&b.whenReady(h),k(eT(b))}},[]);A.useEffect(()=>()=>{y==null||y.map.remove()},[y]);const E=y?Rr.createElement(jy,{value:y},i):u??null;return Rr.createElement("div",Ef({},_,{ref:S}),E)}const dT=A.forwardRef(hT),pT=sT(function({position:n,...r},i){const s=new Bi.Marker(n,r);return $l(s,Ny(i,{overlayContainer:s}))},function(n,r,i){r.position!==i.position&&n.setLatLng(r.position),r.icon!=null&&r.icon!==i.icon&&n.setIcon(r.icon),r.zIndexOffset!=null&&r.zIndexOffset!==i.zIndexOffset&&n.setZIndexOffset(r.zIndexOffset),r.opacity!=null&&r.opacity!==i.opacity&&n.setOpacity(r.opacity),n.dragging!=null&&r.draggable!==i.draggable&&(r.draggable===!0?n.dragging.enable():n.dragging.disable())}),mT=lT(function({positions:n,...r},i){const s=new Bi.Polyline(n,r);return $l(s,Ny(i,{overlayContainer:s}))},function(n,r,i){r.positions!==i.positions&&n.setLatLngs(r.positions)}),gT=aT(function(n,r){const i=new Bi.Popup(n,r.overlayContainer);return $l(i,r)},function(n,r,{position:i},s){A.useEffect(function(){const{instance:u}=n;function c(p){p.popup===u&&(u.update(),s(!0))}function h(p){p.popup===u&&s(!1)}return r.map.on({popupopen:c,popupclose:h}),r.overlayContainer==null?(i!=null&&u.setLatLng(i),u.openOn(r.map)):r.overlayContainer.bindPopup(u),function(){var v;r.map.off({popupopen:c,popupclose:h}),(v=r.overlayContainer)==null||v.unbindPopup(),r.map.removeLayer(u)}},[n,r,s,i])}),vT=uT(function({url:n,...r},i){const s=new Bi.TileLayer(n,Ul(r,i));return $l(s,i)},function(n,r,i){cT(n,r,i);const{url:s}=r;s!=null&&s!==i.url&&n.setUrl(s)});function _T({locations:e}){const n=fT();return A.useEffect(()=>{if(e.length>0){const r=e.map(i=>[i.latitude,i.longitude]);n.fitBounds(r,{padding:[50,50]})}},[e,n]),null}const yT=()=>{const[e,n]=A.useState({locations:[],connections:[],total_locations:0,total_connections:0}),[r,i]=A.useState(!1),[s,a]=A.useState(null),u=gn();A.useEffect(()=>{i(!0),(async()=>{try{const y=await(await fetch("/api/map/locations?limit=100")).json();y.status==="success"&&(n(y),console.log(`MapPage: Loaded ${y.total_locations} locations and ${y.total_connections} connections`))}catch(_){console.error("Error fetching map data:",_)}finally{i(!1)}})()},[]);const c=new Map;e.locations.forEach(m=>c.set(m.id,m));const h=m=>m>=5?"#ef4444":m>=3?"#f59e0b":m>=2?"#eab308":"#3b82f6",p=m=>Math.min(8+m*3,25),v=A.useMemo(()=>{const m=new Map;return e.locations.forEach(_=>{const y=h(_.story_count),k=p(_.story_count)*2;_.thumbnail?m.set(_.id,Og.divIcon({className:"custom-location-marker",html:`
                        <div style="
                            width: ${k}px;
                            height: ${k}px;
                            border-radius: 50%;
                            border: 3px solid ${y};
                            overflow: hidden;
                            background: white;
                            box-shadow: 0 2px 8px rgba(0,0,0,0.3);
                        ">
                            <img
                                src="${_.thumbnail}"
                                style="
                                    width: 100%;
                                    height: 100%;
                                    object-fit: cover;
                                "
                                onerror="this.style.display='none'"
                            />
                        </div>
                    `,iconSize:[k,k],iconAnchor:[k/2,k/2]})):m.set(_.id,Og.divIcon({className:"custom-location-marker",html:`
                        <div style="
                            width: ${k}px;
                            height: ${k}px;
                            border-radius: 50%;
                            background: ${y};
                            border: 3px solid white;
                            box-shadow: 0 2px 8px rgba(0,0,0,0.3);
                        "></div>
                    `,iconSize:[k,k],iconAnchor:[k/2,k/2]}))}),m},[e.locations]);return d.jsxs("div",{className:"h-screen flex flex-col bg-gray-900 text-white",children:[d.jsxs("div",{className:"p-4 border-b border-gray-800 flex justify-between items-center z-10 bg-gray-900",children:[d.jsx("h1",{className:"text-xl font-bold",children:"News Map: Global Story Locations"}),d.jsxs("div",{className:"text-sm text-gray-400 flex items-center gap-4",children:[e.total_locations>0&&d.jsxs("span",{children:[e.total_locations," locations  ",e.total_connections," connections"]}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsxs("div",{className:"flex items-center gap-1",children:[d.jsx("div",{className:"w-3 h-3 rounded-full bg-blue-500"}),d.jsx("span",{className:"text-xs",children:"1-2 stories"})]}),d.jsxs("div",{className:"flex items-center gap-1",children:[d.jsx("div",{className:"w-3 h-3 rounded-full bg-yellow-500"}),d.jsx("span",{className:"text-xs",children:"3-4 stories"})]}),d.jsxs("div",{className:"flex items-center gap-1",children:[d.jsx("div",{className:"w-3 h-3 rounded-full bg-red-500"}),d.jsx("span",{className:"text-xs",children:"5+ stories"})]})]})]})]}),d.jsxs("div",{className:"flex-1 relative overflow-hidden",children:[r&&d.jsxs("div",{className:"absolute top-4 left-1/2 transform -translate-x-1/2 z-[1000] bg-gray-800 text-white px-4 py-2 rounded-lg shadow-lg flex items-center gap-2",children:[d.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),d.jsx("span",{className:"text-sm",children:"Loading locations..."})]}),d.jsxs(dT,{center:[20,0],zoom:2,className:"h-full w-full",style:{background:"#111827"},children:[d.jsx(vT,{url:"https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png",attribution:' <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors  <a href="https://carto.com/attributions">CARTO</a>'}),e.locations.length>0&&d.jsx(_T,{locations:e.locations}),e.locations.length>0&&e.connections.map((m,_)=>{const y=c.get(m.source),k=c.get(m.target);return!y||!k?null:d.jsx(mT,{positions:[[y.latitude,y.longitude],[k.latitude,k.longitude]],pathOptions:{color:"#a78bfa",weight:Math.min(m.shared_story_count,4),opacity:.3+m.shared_story_count*.1}},_)}),e.locations.length>0&&e.locations.map(m=>{const _=v.get(m.id);return _?d.jsx(pT,{position:[m.latitude,m.longitude],icon:_,eventHandlers:{mouseover:()=>a(m.id),mouseout:()=>a(null)},children:d.jsx(gT,{children:d.jsxs("div",{className:"text-gray-900 max-w-xs",children:[d.jsx("h3",{className:"font-bold text-lg mb-1",children:m.name}),m.description&&d.jsx("p",{className:"text-sm text-gray-600 mb-2",children:m.description}),d.jsxs("div",{className:"text-sm font-semibold mb-2",children:[m.story_count," ",m.story_count===1?"story":"stories"]}),d.jsx("div",{className:"space-y-1 max-h-48 overflow-y-auto",children:m.stories.map(y=>d.jsxs("div",{className:"p-2 bg-gray-100 rounded hover:bg-gray-200 cursor-pointer transition-colors",onClick:()=>u(`/story/${y.id}`),children:[d.jsx("div",{className:"text-sm font-medium line-clamp-2",children:y.title}),y.coherence!==void 0&&d.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Coherence: ",(y.coherence*100).toFixed(0),"%"]})]},y.id))})]})})},m.id):null})]})]})]})};function xT(){return d.jsx(jb,{basename:"/app",children:d.jsxs(_b,{children:[d.jsx(Gn,{path:"/",element:d.jsx(Ab,{})}),d.jsx(Gn,{path:"/archive",element:d.jsx(ok,{})}),d.jsx(Gn,{path:"/graph",element:d.jsx(QE,{})}),d.jsx(Gn,{path:"/map",element:d.jsx(yT,{})}),d.jsx(Gn,{path:"/story/:storyId",element:d.jsx(km,{})}),d.jsx(Gn,{path:"/story/:storyId/:slug",element:d.jsx(km,{})}),d.jsx(Gn,{path:"/event/:eventSlug",element:d.jsx(ik,{})})]})})}ac.createRoot(document.getElementById("root")).render(d.jsx(Rr.StrictMode,{children:d.jsx(xT,{})}));
