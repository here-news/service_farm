# 41 â€” Live Event Page: The Core Product

> The event page is not a display of information. It is the event organism's interface with the worldâ€”breathing, listening, responding, and growing through community collaboration.

Related:
- `docs/10.vision.md` (LiveWorld mental model)
- `docs/23.theory.event-protocol.md` (EVENT protocol)
- `docs/22.theory.metabolism.md` (metabolism mechanics)
- `docs/42.product.page.md` (page feature reference)
- GitHub: [Issue #13 - Community-Driven Ontology](https://github.com/here-news/service_farm/issues/13)
- GitHub: [Issue #16 - Event Chat](https://github.com/here-news/service_farm/issues/16)

---

## 1. The Core Insight

**Traditional news pages are corpses.** They display static content that decays. Comments are noise bolted on the sideâ€”ignored by the article, ignored by other readers.

**A Live Event page is an organism.** It:
- **Breathes**: updates in real-time as new sources arrive
- **Listens**: receives community input and evaluates it
- **Responds**: gives feedback on contributions (accepted, rejected, why)
- **Grows**: becomes more coherent through collaborative truth-finding
- **Thinks**: surfaces questions, anomalies, and contradictions

The community doesn't comment *on* the event. The community **feeds** the event, and the event **metabolizes** their contributions.

---

## 2. Product Vision

### 2.1 The Split-Pane Interface

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ðŸ”´ LIVE  Hong Kong High-Rise Fire                      âš™ï¸ Settings     â”‚
â”‚  47 sources Â· 156 claims Â· 0.82 coherence Â· Updated 2m ago              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                     â”‚                                    â”‚
â”‚  NARRATIVE PANE                     â”‚  COMMUNITY FEED                    â”‚
â”‚  (Event's current understanding)    â”‚  (Real-time contributions)         â”‚
â”‚                                     â”‚                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ðŸ’­ Event Thought            â”‚    â”‚  â”‚ @alice Â· 10c Â· 2m ago      â”‚   â”‚
â”‚  â”‚ "Death toll rose 5â†’17 in    â”‚    â”‚  â”‚ BBC: "17 confirmed dead"   â”‚   â”‚
â”‚  â”‚ 6hrs. Were early reports    â”‚    â”‚  â”‚ bbc.com/news/...           â”‚   â”‚
â”‚  â”‚ suppressed, or is this      â”‚    â”‚  â”‚                            â”‚   â”‚
â”‚  â”‚ normal for disaster         â”‚    â”‚  â”‚ ðŸ§  â†’ âœ… +3 claims          â”‚   â”‚
â”‚  â”‚ response?"                  â”‚    â”‚  â”‚      coherence +0.02       â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                     â”‚                                    â”‚
â”‚  ## What Happened                   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚                                     â”‚  â”‚ @bob Â· 1c Â· 5m ago         â”‚   â”‚
â”‚  A fire broke out in a high-rise    â”‚  â”‚ "This is government        â”‚   â”‚
â”‚  residential building in Tai Po,    â”‚  â”‚ coverup!!!"                â”‚   â”‚
â”‚  Hong Kong on November 15, 2025.    â”‚  â”‚                            â”‚   â”‚
â”‚  [cl_abc123] [cl_def456]            â”‚  â”‚ ðŸ§  â†’ ðŸ¤” No verifiable      â”‚   â”‚
â”‚                                     â”‚  â”‚      claim detected        â”‚   â”‚
â”‚  ### Death Toll                     â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  Current: **17 confirmed** (p=0.89) â”‚                                    â”‚
â”‚  â”œâ”€ Nov 15 06:00: 5 dead [cl_...]   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”œâ”€ Nov 15 12:00: 8 dead [cl_...]   â”‚  â”‚ @chen Â· 100c Â· 8m ago      â”‚   â”‚
â”‚  â””â”€ Nov 15 18:00: 17 dead [cl_...]  â”‚  â”‚ [PDF] Fire Dept Report     â”‚   â”‚
â”‚                                     â”‚  â”‚ ðŸ“Ž hkfd.gov.hk/report.pdf  â”‚   â”‚
â”‚  ### Contradictions                 â”‚  â”‚                            â”‚   â”‚
â”‚  âš ï¸ Fire origin disputed:          â”‚  â”‚ ðŸ§  â†’ ðŸ’Ž High-value!        â”‚   â”‚
â”‚  â€¢ "Electrical fault" (3 sources)   â”‚  â”‚      +12 claims            â”‚   â”‚
â”‚  â€¢ "Arson suspected" (1 source)     â”‚  â”‚      ðŸŽ Rewarding 50c      â”‚   â”‚
â”‚                                     â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  [View all claims] [View sources]   â”‚                                    â”‚
â”‚                                     â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                     â”‚  ðŸ’¬ Contribute (min 1c)           â”‚
â”‚                                     â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚                                     â”‚  â”‚ Paste URL or type claim... â”‚   â”‚
â”‚                                     â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                     â”‚  [1c] [10c] [100c]  [Submit]      â”‚
â”‚                                     â”‚                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 The Two Panes

**Left Pane: Narrative (Event's Voice)**
- The event's current best understanding
- Structured sections (What, When, Who, Contradictions)
- Claim citations with plausibility scores
- Update history (metric tracks)
- Event's "thought" (epistemic question/observation)
- Updates in real-time as metabolism runs

**Right Pane: Community Feed (Input/Response)**
- Real-time stream of contributions
- Each contribution shows: user, credit stake, content
- Event's response to each contribution (processing â†’ verdict)
- Input box at bottom (URL or text claim)
- Credit selector (1c/10c/100c minimum stake)

---

## 3. Contribution Mechanics

### 3.1 Credit as Anti-Entropy Tax

Every contribution costs credits. This is not a paywallâ€”it's a **quality filter**:

| Stake | Use Case | Rate Limit |
|-------|----------|------------|
| 1c | Casual contribution | 1 per 5 min |
| 10c | Confident contribution | 1 per 1 min |
| 100c | High-priority (breaking news, primary source) | No limit |

**Why this works:**
- Spam costs more than it's worth
- Quality contributors invest more, earn more back
- The event organism gets cleaner input signal
- No moderation neededâ€”economics does the filtering

### 3.2 Contribution Types

| Type | Input | Event Response |
|------|-------|----------------|
| **URL** | Paste link to article/doc | Fetch â†’ Extract claims â†’ Evaluate fit â†’ Accept/reject with reason |
| **Text Claim** | Type a factual statement | Parse â†’ Check verifiability â†’ Search for corroboration â†’ Accept as unverified or request source |
| **Evidence** | Upload PDF/image/doc | OCR/extract â†’ Evaluate authenticity â†’ High-value if verified |
| **Question** | "Is X true?" | Surface relevant claims â†’ May trigger deeper analysis |
| **Dispute** | Challenge existing claim | Flag for review â†’ May trigger re-topology |

### 3.3 Event Response States

The event responds to every contribution:

| State | Icon | Meaning |
|-------|------|---------|
| Processing | ðŸ§  | Event is analyzing |
| Accepted | âœ… | Claims extracted and integrated |
| High-value | ðŸ’Ž | Significant coherence boost, reward issued |
| Noted | ðŸ“ | Recorded but unverified (needs corroboration) |
| Duplicate | ðŸ”„ | Information already known |
| Rejected | âŒ | Couldn't extract claims or doesn't fit event |
| Skeptical | ðŸ¤” | Looks like opinion/spam, no verifiable content |
| Error | âš ï¸ | Technical issue (URL unreachable, etc.) |

### 3.4 Reward Mechanics

When a contribution meaningfully improves the event:

```python
def calculate_reward(contribution, before_state, after_state):
    coherence_delta = after_state.coherence - before_state.coherence
    claims_added = len(after_state.claims) - len(before_state.claims)

    if coherence_delta > 0.05 and claims_added >= 3:
        # High-value contribution
        reward = contribution.stake * 0.5  # Return half the stake as reward
        return reward
    elif coherence_delta > 0.02:
        # Moderate value
        reward = contribution.stake * 0.2
        return reward
    else:
        # Accepted but low impact
        return 0
```

**Key insight:** Rewards are tied to **coherence improvement**, not volume. Gaming by submitting many low-value sources doesn't pay.

---

## 4. Event Organism Behaviors

### 4.1 Listening Modes

The event adapts its responsiveness based on state:

| State | Metabolism Rate | Community Responsiveness |
|-------|-----------------|-------------------------|
| ðŸ”´ LIVE (active) | High (sub-minute) | Immediate processing |
| ðŸŸ¡ WARM (recent activity) | Medium (5-15 min) | Batched processing |
| ðŸŸ¢ STABLE (converged) | Low (hourly) | Queue for next cycle |
| âšª DORMANT (hibernating) | None | Wake on high-stake contribution |

### 4.2 Event Responses to Community

The event doesn't just accept/rejectâ€”it **communicates**:

**On URL submission:**
```
ðŸ§  "Analyzing bbc.com/news/..."
âœ… "Added 3 claims about death toll update. Coherence +0.02.
    This corroborates existing reports from Reuters and AP."
```

**On duplicate:**
```
ðŸ”„ "I already know this. CNN reported same figures 2 hours ago.
    Your source is now linked as additional corroboration."
```

**On contradiction:**
```
âš ï¸ "Interesting! This contradicts 3 other sources on fire origin.
    Adding to disputed claims. Coherence -0.01 (expected for contradiction).
    This may resolve with more evidence."
```

**On spam:**
```
ðŸ¤” "I couldn't find any verifiable claims here. This looks like
    commentary/opinion. Consider submitting a source link instead."
```

**On high-value:**
```
ðŸ’Ž "Excellent source! This official report added 12 new claims
    and resolved 2 contradictions. Coherence +0.08.
    Rewarding you 50c for this contribution."
```

### 4.3 Event Thoughts (Proactive Communication)

The event periodically emits "thoughts"â€”questions or observations:

```
ðŸ’­ "Death toll rose from 5 to 17 in 6 hours. Were early reports
    suppressed, or is this typical for disaster response timelines?"

ðŸ’­ "3 sources claim electrical fault, 1 claims arson. The arson
    source is a tabloid (lower prior). Seeking official investigation report."

ðŸ’­ "No updates in 12 hours. Story may be stabilizing. Current
    coherence: 0.85. Main uncertainty: cause of fire."
```

These thoughts:
- Surface epistemic state to readers
- Invite targeted contributions ("seeking official report")
- Show the event is "alive" and reasoning

---

## 5. Technical Architecture

### 5.1 Backend Components

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        API Gateway                               â”‚
â”‚   POST /api/event/{id}/contribute                               â”‚
â”‚   GET  /api/event/{id}/feed (WebSocket)                         â”‚
â”‚   GET  /api/event/{id}/state                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   CommunityInputProcessor                        â”‚
â”‚   - Validate contribution                                        â”‚
â”‚   - Deduct credits (with rate limiting)                         â”‚
â”‚   - Route to appropriate handler (URL/text/evidence/dispute)    â”‚
â”‚   - Track contribution for reward calculation                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      LiveEvent.on_contribution()                 â”‚
â”‚   - New trigger type alongside on_claims, on_time_tick          â”‚
â”‚   - Evaluates contribution against current state                â”‚
â”‚   - Runs mini-metabolism if accepted                            â”‚
â”‚   - Generates response for user                                 â”‚
â”‚   - Calculates and issues rewards                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      WebSocket Broadcast                         â”‚
â”‚   - Push contribution + response to all viewers                 â”‚
â”‚   - Push narrative updates when metabolism runs                 â”‚
â”‚   - Push event thoughts when generated                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.2 New LiveEvent Trigger

```python
# In LiveEvent class

async def on_contribution(self, contribution: CommunityContribution) -> ContributionResult:
    """
    Trigger: Community contribution received.

    This is the event's "listening" interface for human input.
    """
    logger.info(f"ðŸ‘‚ on_contribution: {self.event.canonical_name} "
                f"received {contribution.type} from {contribution.user_id}")

    # Capture state before processing
    old_coherence = self.event.coherence
    old_claims = len(self.claims)

    # Route by contribution type
    if contribution.type == 'url':
        result = await self._process_url_contribution(contribution)
    elif contribution.type == 'text_claim':
        result = await self._process_text_contribution(contribution)
    elif contribution.type == 'evidence':
        result = await self._process_evidence_contribution(contribution)
    elif contribution.type == 'dispute':
        result = await self._process_dispute_contribution(contribution)
    else:
        result = ContributionResult(status='rejected', reason='Unknown type')

    # Calculate reward if contribution was valuable
    if result.status == 'accepted':
        new_coherence = self.event.coherence
        coherence_delta = new_coherence - old_coherence
        claims_added = len(self.claims) - old_claims

        result.reward = self._calculate_reward(
            contribution.stake, coherence_delta, claims_added
        )

        if result.reward > 0:
            result.status = 'high_value'

    # Generate human-readable response
    result.response = self._generate_response(result, contribution)

    return result
```

### 5.3 Data Models

```python
@dataclass
class CommunityContribution:
    id: str                          # contrib_xxxxxxxx
    event_id: str
    user_id: str
    type: Literal['url', 'text_claim', 'evidence', 'dispute', 'question']
    content: str                     # URL, text, or file reference
    stake: int                       # Credits committed
    created_at: datetime

@dataclass
class ContributionResult:
    contribution_id: str
    status: Literal['processing', 'accepted', 'high_value', 'noted',
                    'duplicate', 'rejected', 'skeptical', 'error']
    reason: str                      # Why this verdict
    claims_added: List[str]          # Claim IDs if any
    coherence_delta: float           # Change in coherence
    reward: int                      # Credits returned (0 if none)
    response: str                    # Human-readable response text
    processed_at: datetime
```

### 5.4 WebSocket Protocol

```typescript
// Client â†’ Server
interface ContributeMessage {
  type: 'contribute';
  event_id: string;
  contribution_type: 'url' | 'text_claim' | 'evidence' | 'dispute';
  content: string;
  stake: number;
}

// Server â†’ Client
interface FeedUpdate {
  type: 'contribution' | 'response' | 'narrative_update' | 'thought';
  data: ContributionData | ResponseData | NarrativeData | ThoughtData;
  timestamp: string;
}

interface ContributionData {
  id: string;
  user: { id: string; display_name: string };
  contribution_type: string;
  content: string;
  stake: number;
}

interface ResponseData {
  contribution_id: string;
  status: string;
  response: string;  // Event's message to user
  reward?: number;
  claims_added?: number;
  coherence_delta?: number;
}

interface NarrativeData {
  sections: NarrativeSection[];
  coherence: number;
  claim_count: number;
  last_updated: string;
}

interface ThoughtData {
  id: string;
  content: string;
  type: 'question' | 'anomaly' | 'progress' | 'contradiction';
}
```

---

## 6. Frontend Design

### 6.1 Component Structure

```
EventLivePage/
â”œâ”€â”€ EventHeader/
â”‚   â”œâ”€â”€ LiveIndicator (ðŸ”´/ðŸŸ¡/ðŸŸ¢/âšª)
â”‚   â”œâ”€â”€ EventTitle
â”‚   â”œâ”€â”€ StatsBar (sources, claims, coherence)
â”‚   â””â”€â”€ LastUpdated
â”œâ”€â”€ SplitPane/
â”‚   â”œâ”€â”€ NarrativePane/
â”‚   â”‚   â”œâ”€â”€ EventThought
â”‚   â”‚   â”œâ”€â”€ StructuredNarrative
â”‚   â”‚   â”‚   â”œâ”€â”€ Section (collapsible)
â”‚   â”‚   â”‚   â”œâ”€â”€ ClaimCitation (hoverable)
â”‚   â”‚   â”‚   â””â”€â”€ MetricTrack (timeline viz)
â”‚   â”‚   â”œâ”€â”€ ContradictionsList
â”‚   â”‚   â””â”€â”€ SourcesList
â”‚   â””â”€â”€ CommunityPane/
â”‚       â”œâ”€â”€ FeedList/
â”‚       â”‚   â””â”€â”€ FeedItem (contribution + response)
â”‚       â”œâ”€â”€ ContributeBox/
â”‚       â”‚   â”œâ”€â”€ InputField
â”‚       â”‚   â”œâ”€â”€ StakeSelector (1c/10c/100c)
â”‚       â”‚   â””â”€â”€ SubmitButton
â”‚       â””â”€â”€ ConnectionStatus
â””â”€â”€ MobileDrawer (community pane as drawer on mobile)
```

### 6.2 Real-time Updates

```typescript
// useEventFeed hook
function useEventFeed(eventId: string) {
  const [feed, setFeed] = useState<FeedItem[]>([]);
  const [narrative, setNarrative] = useState<Narrative | null>(null);
  const [thought, setThought] = useState<Thought | null>(null);
  const [connected, setConnected] = useState(false);

  useEffect(() => {
    const ws = new WebSocket(`wss://api.here.news/event/${eventId}/feed`);

    ws.onmessage = (event) => {
      const update: FeedUpdate = JSON.parse(event.data);

      switch (update.type) {
        case 'contribution':
          setFeed(prev => [update.data, ...prev]);
          break;
        case 'response':
          setFeed(prev => prev.map(item =>
            item.id === update.data.contribution_id
              ? { ...item, response: update.data }
              : item
          ));
          break;
        case 'narrative_update':
          setNarrative(update.data);
          break;
        case 'thought':
          setThought(update.data);
          break;
      }
    };

    return () => ws.close();
  }, [eventId]);

  return { feed, narrative, thought, connected };
}
```

### 6.3 Contribution UX

```typescript
function ContributeBox({ eventId, userCredits }: Props) {
  const [content, setContent] = useState('');
  const [stake, setStake] = useState(1);
  const [submitting, setSubmitting] = useState(false);

  const detectType = (input: string): ContributionType => {
    if (input.match(/^https?:\/\//)) return 'url';
    if (input.match(/^\?/)) return 'question';
    return 'text_claim';
  };

  const submit = async () => {
    if (stake > userCredits) {
      toast.error('Insufficient credits');
      return;
    }

    setSubmitting(true);
    await api.contribute(eventId, {
      type: detectType(content),
      content,
      stake
    });
    setContent('');
    setSubmitting(false);
  };

  return (
    <div className="contribute-box">
      <textarea
        value={content}
        onChange={e => setContent(e.target.value)}
        placeholder="Paste URL or type a factual claim..."
      />
      <div className="stake-row">
        <StakeSelector value={stake} onChange={setStake} />
        <span className="balance">Balance: {userCredits}c</span>
        <Button onClick={submit} disabled={submitting || !content}>
          {submitting ? 'ðŸ§  Submitting...' : 'Submit'}
        </Button>
      </div>
    </div>
  );
}
```

---

## 7. Anti-Gaming Measures

### 7.1 Rate Limiting

| Stake Level | Rate Limit | Cooldown After Spam Detection |
|-------------|------------|-------------------------------|
| 1c | 1 per 5 min | 1 hour |
| 10c | 1 per 1 min | 30 min |
| 100c | No limit | 10 min |

Spam detection: 3+ rejected contributions in 10 minutes.

### 7.2 Source Independence

Same source family (e.g., multiple Fox affiliates) doesn't count as corroboration:
```python
def evaluate_corroboration(new_source, existing_sources):
    # SSP: Structural Similarity Penalty
    for existing in existing_sources:
        if same_publisher_family(new_source, existing):
            return 'duplicate_source'
        if similarity(new_source.content, existing.content) > 0.9:
            return 'near_duplicate'
    return 'independent'
```

### 7.3 Coherence Bomb Detection

Sudden influx of highly similar claims from "different" sources:
```python
def detect_coherence_bomb(contributions, window_minutes=10):
    recent = [c for c in contributions if c.age_minutes < window_minutes]

    # Check for suspicious patterns
    if len(recent) > 10:
        content_similarity = pairwise_similarity(recent)
        source_diversity = unique_domains(recent) / len(recent)

        if content_similarity > 0.8 and source_diversity < 0.3:
            return True  # Likely coordinated
    return False
```

---

## 8. Implementation Phases

### Phase 1: Core Loop (MVP)
- [ ] WebSocket infrastructure for event feed
- [ ] Basic contribution endpoint (URL only)
- [ ] LiveEvent.on_contribution() trigger
- [ ] Simple response generation
- [ ] Split-pane UI with static narrative + live feed

### Phase 2: Full Contribution Types
- [ ] Text claim processing
- [ ] Evidence upload (PDF, images)
- [ ] Dispute mechanism
- [ ] Question handling

### Phase 3: Economics
- [ ] Credit deduction on contribution
- [ ] Reward calculation based on coherence delta
- [ ] Rate limiting implementation
- [ ] Anti-gaming measures

### Phase 4: Polish
- [ ] Event thought generation improvements
- [ ] Rich response messages
- [ ] Mobile-optimized UI
- [ ] Notification system for high-value contributions

---

## 9. Success Metrics

| Metric | Target | Rationale |
|--------|--------|-----------|
| Contribution â†’ Claim conversion | >30% | Contributions should be meaningful |
| Coherence improvement per contribution | >0.01 avg | Community adds value |
| Reward rate | 10-20% of contributions | Not too easy, not too hard |
| Spam rate | <5% of contributions | Credit system works |
| Time to response | <10s for URLs | Event feels alive |
| User return rate | >40% weekly | Engagement is real |

---

## 10. The Philosophical Foundation

This design embodies a simple principle:

> **The event and the community have the same goal: coherence.**

Traditional platforms create adversarial dynamics:
- Platform wants engagement (conflict)
- Users want attention (hot takes)
- Truth is collateral damage

Our design creates aligned incentives:
- Event wants coherence (truth)
- Users want rewards (requires coherence contribution)
- Truth is the natural output

The credit system isn't a paywall. It's a **commitment mechanism** that filters for users who care about the outcome. The event organism isn't a display layer. It's a **collaborative partner** in truth-finding.

**Together, they reduce entropy. Together, they breathe.**

---

Prev: `docs/43.product.graph.md`
Next: Implementation begins
